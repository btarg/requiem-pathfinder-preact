(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))r(c);new MutationObserver(c=>{for(const o of c)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(c){const o={};return c.integrity&&(o.integrity=c.integrity),c.referrerPolicy&&(o.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?o.credentials="include":c.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(c){if(c.ep)return;c.ep=!0;const o=t(c);fetch(c.href,o)}})();var An,te,zi,Dt,zr,Gi,Qi,Xi,or,Qs,Xs,Ji,yn={},Zi=[],bo=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Tn=Array.isArray;function ct(n,e){for(var t in e)n[t]=e[t];return n}function lr(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function Lt(n,e,t){var r,c,o,i={};for(o in e)o=="key"?r=e[o]:o=="ref"?c=e[o]:i[o]=e[o];if(arguments.length>2&&(i.children=arguments.length>3?An.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(o in n.defaultProps)i[o]==null&&(i[o]=n.defaultProps[o]);return _n(n,i,r,c,null)}function _n(n,e,t,r,c){var o={type:n,props:e,key:t,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:c??++zi,__i:-1,__u:0};return c==null&&te.vnode!=null&&te.vnode(o),o}function Xt(n){return n.children}function Xn(n,e){this.props=n,this.context=e}function Jt(n,e){if(e==null)return n.__?Jt(n.__,n.__i+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?Jt(n):null}function ea(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return ea(n)}}function Js(n){(!n.__d&&(n.__d=!0)&&Dt.push(n)&&!rs.__r++||zr!=te.debounceRendering)&&((zr=te.debounceRendering)||Gi)(rs)}function rs(){for(var n,e,t,r,c,o,i,l=1;Dt.length;)Dt.length>l&&Dt.sort(Qi),n=Dt.shift(),l=Dt.length,n.__d&&(t=void 0,c=(r=(e=n).__v).__e,o=[],i=[],e.__P&&((t=ct({},r)).__v=r.__v+1,te.vnode&&te.vnode(t),cr(e.__P,t,r,e.__n,e.__P.namespaceURI,32&r.__u?[c]:null,o,c??Jt(r),!!(32&r.__u),i),t.__v=r.__v,t.__.__k[t.__i]=t,ra(o,t,i),t.__e!=c&&ea(t)));rs.__r=0}function ta(n,e,t,r,c,o,i,l,d,s,u){var p,m,_,E,A,C,$=r&&r.__k||Zi,M=e.length;for(d=yo(t,e,$,d,M),p=0;p<M;p++)(_=t.__k[p])!=null&&(m=_.__i==-1?yn:$[_.__i]||yn,_.__i=p,C=cr(n,_,m,c,o,i,l,d,s,u),E=_.__e,_.ref&&m.ref!=_.ref&&(m.ref&&dr(m.ref,null,_),u.push(_.ref,_.__c||E,_)),A==null&&E!=null&&(A=E),4&_.__u||m.__k===_.__k?d=na(_,d,n):typeof _.type=="function"&&C!==void 0?d=C:E&&(d=E.nextSibling),_.__u&=-7);return t.__e=A,d}function yo(n,e,t,r,c){var o,i,l,d,s,u=t.length,p=u,m=0;for(n.__k=new Array(c),o=0;o<c;o++)(i=e[o])!=null&&typeof i!="boolean"&&typeof i!="function"?(d=o+m,(i=n.__k[o]=typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?_n(null,i,null,null,null):Tn(i)?_n(Xt,{children:i},null,null,null):i.constructor==null&&i.__b>0?_n(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=n,i.__b=n.__b+1,l=null,(s=i.__i=Eo(i,t,d,p))!=-1&&(p--,(l=t[s])&&(l.__u|=2)),l==null||l.__v==null?(s==-1&&(c>u?m--:c<u&&m++),typeof i.type!="function"&&(i.__u|=4)):s!=d&&(s==d-1?m--:s==d+1?m++:(s>d?m--:m++,i.__u|=4))):n.__k[o]=null;if(p)for(o=0;o<u;o++)(l=t[o])!=null&&(2&l.__u)==0&&(l.__e==r&&(r=Jt(l)),aa(l,l));return r}function na(n,e,t){var r,c;if(typeof n.type=="function"){for(r=n.__k,c=0;r&&c<r.length;c++)r[c]&&(r[c].__=n,e=na(r[c],e,t));return e}n.__e!=e&&(e&&n.type&&!t.contains(e)&&(e=Jt(n)),t.insertBefore(n.__e,e||null),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function sa(n,e){return e=e||[],n==null||typeof n=="boolean"||(Tn(n)?n.some(function(t){sa(t,e)}):e.push(n)),e}function Eo(n,e,t,r){var c,o,i=n.key,l=n.type,d=e[t];if(d===null&&n.key==null||d&&i==d.key&&l==d.type&&(2&d.__u)==0)return t;if(r>(d!=null&&(2&d.__u)==0?1:0))for(c=t-1,o=t+1;c>=0||o<e.length;){if(c>=0){if((d=e[c])&&(2&d.__u)==0&&i==d.key&&l==d.type)return c;c--}if(o<e.length){if((d=e[o])&&(2&d.__u)==0&&i==d.key&&l==d.type)return o;o++}}return-1}function Gr(n,e,t){e[0]=="-"?n.setProperty(e,t??""):n[e]=t==null?"":typeof t!="number"||bo.test(e)?t:t+"px"}function Vn(n,e,t,r,c){var o;e:if(e=="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof r=="string"&&(n.style.cssText=r=""),r)for(e in r)t&&e in t||Gr(n.style,e,"");if(t)for(e in t)r&&t[e]==r[e]||Gr(n.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(Xi,"$1")),e=e.toLowerCase()in n||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),n.l||(n.l={}),n.l[e+o]=t,t?r?t.u=r.u:(t.u=or,n.addEventListener(e,o?Xs:Qs,o)):n.removeEventListener(e,o?Xs:Qs,o);else{if(c=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&t==1?"":t))}}function Qr(n){return function(e){if(this.l){var t=this.l[e.type+n];if(e.t==null)e.t=or++;else if(e.t<t.u)return;return t(te.event?te.event(e):e)}}}function cr(n,e,t,r,c,o,i,l,d,s){var u,p,m,_,E,A,C,$,M,j,L,W,U,Q,X,R,F,B=e.type;if(e.constructor!=null)return null;128&t.__u&&(d=!!(32&t.__u),o=[l=e.__e=t.__e]),(u=te.__b)&&u(e);e:if(typeof B=="function")try{if($=e.props,M="prototype"in B&&B.prototype.render,j=(u=B.contextType)&&r[u.__c],L=u?j?j.props.value:u.__:r,t.__c?C=(p=e.__c=t.__c).__=p.__E:(M?e.__c=p=new B($,L):(e.__c=p=new Xn($,L),p.constructor=B,p.render=Ao),j&&j.sub(p),p.props=$,p.state||(p.state={}),p.context=L,p.__n=r,m=p.__d=!0,p.__h=[],p._sb=[]),M&&p.__s==null&&(p.__s=p.state),M&&B.getDerivedStateFromProps!=null&&(p.__s==p.state&&(p.__s=ct({},p.__s)),ct(p.__s,B.getDerivedStateFromProps($,p.__s))),_=p.props,E=p.state,p.__v=e,m)M&&B.getDerivedStateFromProps==null&&p.componentWillMount!=null&&p.componentWillMount(),M&&p.componentDidMount!=null&&p.__h.push(p.componentDidMount);else{if(M&&B.getDerivedStateFromProps==null&&$!==_&&p.componentWillReceiveProps!=null&&p.componentWillReceiveProps($,L),!p.__e&&p.shouldComponentUpdate!=null&&p.shouldComponentUpdate($,p.__s,L)===!1||e.__v==t.__v){for(e.__v!=t.__v&&(p.props=$,p.state=p.__s,p.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(Z){Z&&(Z.__=e)}),W=0;W<p._sb.length;W++)p.__h.push(p._sb[W]);p._sb=[],p.__h.length&&i.push(p);break e}p.componentWillUpdate!=null&&p.componentWillUpdate($,p.__s,L),M&&p.componentDidUpdate!=null&&p.__h.push(function(){p.componentDidUpdate(_,E,A)})}if(p.context=L,p.props=$,p.__P=n,p.__e=!1,U=te.__r,Q=0,M){for(p.state=p.__s,p.__d=!1,U&&U(e),u=p.render(p.props,p.state,p.context),X=0;X<p._sb.length;X++)p.__h.push(p._sb[X]);p._sb=[]}else do p.__d=!1,U&&U(e),u=p.render(p.props,p.state,p.context),p.state=p.__s;while(p.__d&&++Q<25);p.state=p.__s,p.getChildContext!=null&&(r=ct(ct({},r),p.getChildContext())),M&&!m&&p.getSnapshotBeforeUpdate!=null&&(A=p.getSnapshotBeforeUpdate(_,E)),R=u,u!=null&&u.type===Xt&&u.key==null&&(R=ia(u.props.children)),l=ta(n,Tn(R)?R:[R],e,t,r,c,o,i,l,d,s),p.base=e.__e,e.__u&=-161,p.__h.length&&i.push(p),C&&(p.__E=p.__=null)}catch(Z){if(e.__v=null,d||o!=null)if(Z.then){for(e.__u|=d?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;o[o.indexOf(l)]=null,e.__e=l}else for(F=o.length;F--;)lr(o[F]);else e.__e=t.__e,e.__k=t.__k;te.__e(Z,e,t)}else o==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):l=e.__e=No(t.__e,e,t,r,c,o,i,d,s);return(u=te.diffed)&&u(e),128&e.__u?void 0:l}function ra(n,e,t){for(var r=0;r<t.length;r++)dr(t[r],t[++r],t[++r]);te.__c&&te.__c(e,n),n.some(function(c){try{n=c.__h,c.__h=[],n.some(function(o){o.call(c)})}catch(o){te.__e(o,c.__v)}})}function ia(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:Tn(n)?n.map(ia):ct({},n)}function No(n,e,t,r,c,o,i,l,d){var s,u,p,m,_,E,A,C=t.props,$=e.props,M=e.type;if(M=="svg"?c="http://www.w3.org/2000/svg":M=="math"?c="http://www.w3.org/1998/Math/MathML":c||(c="http://www.w3.org/1999/xhtml"),o!=null){for(s=0;s<o.length;s++)if((_=o[s])&&"setAttribute"in _==!!M&&(M?_.localName==M:_.nodeType==3)){n=_,o[s]=null;break}}if(n==null){if(M==null)return document.createTextNode($);n=document.createElementNS(c,M,$.is&&$),l&&(te.__m&&te.__m(e,o),l=!1),o=null}if(M==null)C===$||l&&n.data==$||(n.data=$);else{if(o=o&&An.call(n.childNodes),C=t.props||yn,!l&&o!=null)for(C={},s=0;s<n.attributes.length;s++)C[(_=n.attributes[s]).name]=_.value;for(s in C)if(_=C[s],s!="children"){if(s=="dangerouslySetInnerHTML")p=_;else if(!(s in $)){if(s=="value"&&"defaultValue"in $||s=="checked"&&"defaultChecked"in $)continue;Vn(n,s,null,_,c)}}for(s in $)_=$[s],s=="children"?m=_:s=="dangerouslySetInnerHTML"?u=_:s=="value"?E=_:s=="checked"?A=_:l&&typeof _!="function"||C[s]===_||Vn(n,s,_,C[s],c);if(u)l||p&&(u.__html==p.__html||u.__html==n.innerHTML)||(n.innerHTML=u.__html),e.__k=[];else if(p&&(n.innerHTML=""),ta(e.type=="template"?n.content:n,Tn(m)?m:[m],e,t,r,M=="foreignObject"?"http://www.w3.org/1999/xhtml":c,o,i,o?o[0]:t.__k&&Jt(t,0),l,d),o!=null)for(s=o.length;s--;)lr(o[s]);l||(s="value",M=="progress"&&E==null?n.removeAttribute("value"):E!=null&&(E!==n[s]||M=="progress"&&!E||M=="option"&&E!=C[s])&&Vn(n,s,E,C[s],c),s="checked",A!=null&&A!=n[s]&&Vn(n,s,A,C[s],c))}return n}function dr(n,e,t){try{if(typeof n=="function"){var r=typeof n.__u=="function";r&&n.__u(),r&&e==null||(n.__u=n(e))}else n.current=e}catch(c){te.__e(c,t)}}function aa(n,e,t){var r,c;if(te.unmount&&te.unmount(n),(r=n.ref)&&(r.current&&r.current!=n.__e||dr(r,null,e)),(r=n.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){te.__e(o,e)}r.base=r.__P=null}if(r=n.__k)for(c=0;c<r.length;c++)r[c]&&aa(r[c],e,t||typeof n.type!="function");t||lr(n.__e),n.__c=n.__=n.__e=void 0}function Ao(n,e,t){return this.constructor(n,t)}function To(n,e,t){var r,c,o,i;e==document&&(e=document.documentElement),te.__&&te.__(n,e),c=(r=!1)?null:e.__k,o=[],i=[],cr(e,n=e.__k=Lt(Xt,null,[n]),c||yn,yn,e.namespaceURI,c?null:e.firstChild?An.call(e.childNodes):null,o,c?c.__e:e.firstChild,r,i),ra(o,n,i)}function Xr(n,e,t){var r,c,o,i,l=ct({},n.props);for(o in n.type&&n.type.defaultProps&&(i=n.type.defaultProps),e)o=="key"?r=e[o]:o=="ref"?c=e[o]:l[o]=e[o]==null&&i!=null?i[o]:e[o];return arguments.length>2&&(l.children=arguments.length>3?An.call(arguments,2):t),_n(n.type,l,r||n.key,c||n.ref,null)}function Cn(n){function e(t){var r,c;return this.getChildContext||(r=new Set,(c={})[e.__c]=this,this.getChildContext=function(){return c},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(o){this.props.value!=o.value&&r.forEach(function(i){i.__e=!0,Js(i)})},this.sub=function(o){r.add(o);var i=o.componentWillUnmount;o.componentWillUnmount=function(){r&&r.delete(o),i&&i.call(o)}}),t.children}return e.__c="__cC"+Ji++,e.__=n,e.Provider=e.__l=(e.Consumer=function(t,r){return t.children(r)}).contextType=e,e}An=Zi.slice,te={__e:function(n,e,t,r){for(var c,o,i;e=e.__;)if((c=e.__c)&&!c.__)try{if((o=c.constructor)&&o.getDerivedStateFromError!=null&&(c.setState(o.getDerivedStateFromError(n)),i=c.__d),c.componentDidCatch!=null&&(c.componentDidCatch(n,r||{}),i=c.__d),i)return c.__E=c}catch(l){n=l}throw n}},zi=0,Xn.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=ct({},this.state),typeof n=="function"&&(n=n(ct({},t),this.props)),n&&ct(t,n),n!=null&&this.__v&&(e&&this._sb.push(e),Js(this))},Xn.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),Js(this))},Xn.prototype.render=Xt,Dt=[],Gi=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Qi=function(n,e){return n.__v.__b-e.__v.__b},rs.__r=0,Xi=/(PointerCapture)$|Capture$/i,or=0,Qs=Qr(!1),Xs=Qr(!0),Ji=0;var Co=0;function a(n,e,t,r,c,o){e||(e={});var i,l,d=e;if("ref"in d)for(l in d={},e)l=="ref"?i=e[l]:d[l]=e[l];var s={type:n,props:d,key:t,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Co,__i:-1,__u:0,__source:c,__self:o};if(typeof n=="function"&&(i=n.defaultProps))for(l in i)d[l]===void 0&&(d[l]=i[l]);return te.vnode&&te.vnode(s),s}function wo(){return a("section",{children:[a("h1",{children:"404: Not Found"}),a("p",{children:"It's gone :("})]})}var Ht,ue,Os,Jr,is=0,oa=[],_e=te,Zr=_e.__b,ei=_e.__r,ti=_e.diffed,ni=_e.__c,si=_e.unmount,ri=_e.__;function wn(n,e){_e.__h&&_e.__h(ue,n,is||e),is=0;var t=ue.__H||(ue.__H={__:[],__h:[]});return n>=t.__.length&&t.__.push({}),t.__[n]}function G(n){return is=1,ur(ca,n)}function ur(n,e,t){var r=wn(Ht++,2);if(r.t=n,!r.__c&&(r.__=[ca(void 0,e),function(l){var d=r.__N?r.__N[0]:r.__[0],s=r.t(d,l);d!==s&&(r.__N=[s,r.__[1]],r.__c.setState({}))}],r.__c=ue,!ue.__f)){var c=function(l,d,s){if(!r.__c.__H)return!0;var u=r.__c.__H.__.filter(function(m){return!!m.__c});if(u.every(function(m){return!m.__N}))return!o||o.call(this,l,d,s);var p=r.__c.props!==l;return u.forEach(function(m){if(m.__N){var _=m.__[0];m.__=m.__N,m.__N=void 0,_!==m.__[0]&&(p=!0)}}),o&&o.call(this,l,d,s)||p};ue.__f=!0;var o=ue.shouldComponentUpdate,i=ue.componentWillUpdate;ue.componentWillUpdate=function(l,d,s){if(this.__e){var u=o;o=void 0,c(l,d,s),o=u}i&&i.call(this,l,d,s)},ue.shouldComponentUpdate=c}return r.__N||r.__}function ge(n,e){var t=wn(Ht++,3);!_e.__s&&fr(t.__H,e)&&(t.__=n,t.u=e,ue.__H.__h.push(t))}function la(n,e){var t=wn(Ht++,4);!_e.__s&&fr(t.__H,e)&&(t.__=n,t.u=e,ue.__h.push(t))}function Ue(n){return is=5,hr(function(){return{current:n}},[])}function hr(n,e){var t=wn(Ht++,7);return fr(t.__H,e)&&(t.__=n(),t.__H=e,t.__h=n),t.__}function ze(n){var e=ue.context[n.__c],t=wn(Ht++,9);return t.c=n,e?(t.__==null&&(t.__=!0,e.sub(ue)),e.props.value):n.__}function So(){for(var n;n=oa.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(Jn),n.__H.__h.forEach(Zs),n.__H.__h=[]}catch(e){n.__H.__h=[],_e.__e(e,n.__v)}}_e.__b=function(n){ue=null,Zr&&Zr(n)},_e.__=function(n,e){n&&e.__k&&e.__k.__m&&(n.__m=e.__k.__m),ri&&ri(n,e)},_e.__r=function(n){ei&&ei(n),Ht=0;var e=(ue=n.__c).__H;e&&(Os===ue?(e.__h=[],ue.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(e.__h.forEach(Jn),e.__h.forEach(Zs),e.__h=[],Ht=0)),Os=ue},_e.diffed=function(n){ti&&ti(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(oa.push(e)!==1&&Jr===_e.requestAnimationFrame||((Jr=_e.requestAnimationFrame)||xo)(So)),e.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),Os=ue=null},_e.__c=function(n,e){e.some(function(t){try{t.__h.forEach(Jn),t.__h=t.__h.filter(function(r){return!r.__||Zs(r)})}catch(r){e.some(function(c){c.__h&&(c.__h=[])}),e=[],_e.__e(r,t.__v)}}),ni&&ni(n,e)},_e.unmount=function(n){si&&si(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(r){try{Jn(r)}catch(c){e=c}}),t.__H=void 0,e&&_e.__e(e,t.__v))};var ii=typeof requestAnimationFrame=="function";function xo(n){var e,t=function(){clearTimeout(r),ii&&cancelAnimationFrame(e),setTimeout(n)},r=setTimeout(t,100);ii&&(e=requestAnimationFrame(t))}function Jn(n){var e=ue,t=n.__c;typeof t=="function"&&(n.__c=void 0,t()),ue=e}function Zs(n){var e=ue;n.__c=n.__(),ue=e}function fr(n,e){return!n||n.length!==e.length||e.some(function(t,r){return t!==n[r]})}function ca(n,e){return typeof e=="function"?e(n):e}let Mt,mn;const ko=(n,e)=>{if(Mt=void 0,e&&e.type==="click"){if(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button!==0)return n;const t=e.target.closest("a[href]"),r=t&&t.getAttribute("href");if(!t||t.origin!=location.origin||/^#/.test(r)||!/^(_?self)?$/i.test(t.target)||mn&&(typeof mn=="string"?!r.startsWith(mn):!mn.test(r)))return n;Mt=!0,e.preventDefault(),e=t.href.replace(location.origin,"")}else typeof e=="string"?Mt=!0:e&&e.url?(Mt=!e.replace,e=e.url):e=location.pathname+location.search;return Mt===!0?history.pushState(null,"",e):Mt===!1&&history.replaceState(null,"",e),e},Oo=(n,e,t={})=>{n=n.split("/").filter(Boolean),e=(e||"").split("/").filter(Boolean),t.params||(t.params={});for(let r=0,c,o;r<Math.max(n.length,e.length);r++){let[,i,l,d]=(e[r]||"").match(/^(:?)(.*?)([+*?]?)$/);if(c=n[r],!(!i&&l==c)){if(!i&&c&&d=="*"){t.rest="/"+n.slice(r).map(decodeURIComponent).join("/");break}if(!i||!c&&d!="?"&&d!="*")return;if(o=d=="+"||d=="*",o?c=n.slice(r).map(decodeURIComponent).join("/")||void 0:c&&(c=decodeURIComponent(c)),t.params[l]=c,l in t||(t[l]=c),o)break}}return t};function Sn(n){const[e,t]=ur(ko,n.url||location.pathname+location.search);n.scope&&(mn=n.scope);const r=Mt===!0,c=hr(()=>{const o=new URL(e,location.origin),i=o.pathname.replace(/\/+$/g,"")||"/";return{url:e,path:i,query:Object.fromEntries(o.searchParams),route:(l,d)=>t({url:l,replace:d}),wasPush:r}},[e]);return la(()=>(addEventListener("click",t),addEventListener("popstate",t),()=>{removeEventListener("click",t),removeEventListener("popstate",t)}),[]),Lt(Sn.ctx.Provider,{value:c},n.children)}const $o=Promise.resolve();function da(n){const[e,t]=ur(R=>R+1,0),{url:r,query:c,wasPush:o,path:i}=pr(),{rest:l=i,params:d={}}=ze(ai),s=Ue(!1),u=Ue(i),p=Ue(0),m=Ue(),_=Ue(),E=Ue(),A=Ue(!1),C=Ue();C.current=!1;let $,M,j;sa(n.children).some(R=>{if(Oo(l,R.props.path,j={...R.props,path:l,query:c,params:d,rest:""}))return $=Xr(R,j);R.props.default&&(M=Xr(R,j))});let L=$||M;const W=m.current&&m.current.__u&Wn&&m.current.__u&jn,U=m.current&&m.current.__h,Q=hr(()=>{_.current=m.current,m.current=Lt(ai.Provider,{value:j},L);const R=_.current&&_.current.props.children;return!R||!L||L.type!==R.type||L.props.component!==R.props.component?(this.__v&&this.__v.__k&&this.__v.__k.reverse(),p.current++,!0):!1},[r,JSON.stringify(j)]);W?(m.current.__u|=Wn,m.current.__u|=jn):U&&(m.current.__h=!0);const X=_.current;return _.current=null,this.__c=(R,F)=>{C.current=!0,_.current=X,n.onLoadStart&&n.onLoadStart(r),s.current=!0;let B=p.current;R.then(()=>{B===p.current&&(_.current=null,m.current&&(F.__h&&(m.current.__h=F.__h),F.__u&jn&&(m.current.__u|=jn),F.__u&Wn&&(m.current.__u|=Wn)),$o.then(t))})},la(()=>{const R=this.__v&&this.__v.__e;if(C.current){!A.current&&!E.current&&(E.current=R);return}!A.current&&E.current&&(E.current!==R&&E.current.remove(),E.current=null),A.current=!0,u.current!==i&&(o&&scrollTo(0,0),n.onRouteChange&&n.onRouteChange(r),u.current=i),n.onLoadEnd&&s.current&&n.onLoadEnd(r),s.current=!1},[i,o,e]),Q?[Lt($s,{r:m}),Lt($s,{r:_})]:Lt($s,{r:m})}const Wn=32,jn=128,$s=({r:n})=>n.current;da.Provider=Sn;Sn.ctx=Cn({});const ai=Cn({}),Bn=n=>Lt(n.component,n),pr=()=>ze(Sn.ctx),oi=te.__b;te.__b=n=>{n.type&&n.type._forwarded&&n.ref&&(n.props.ref=n.ref,n.ref=null),oi&&oi(n)};const li=te.__e;te.__e=(n,e,t)=>{if(n&&n.then){let r=e;for(;r=r.__;)if(r.__c&&r.__c.__c)return e.__e==null&&(e.__c.__z=[t.__e],e.__e=t.__e,e.__k=t.__k),e.__k||(e.__k=[]),r.__c.__c(n,e)}li&&li(n,e,t)};const Be={PHYSICAL:"physical",MAGICAL:"magical",UTILITY:"utility"},Me={OFFENSIVE:"offensive",DEFENSIVE:"defensive",UTILITY:"utility",CORE:"core"},we={currentHealth:{defaultValue:10,label:"Current HP",type:Me.CORE},maxHealth:{defaultValue:10,label:"Max HP",type:Me.CORE},currentMp:{defaultValue:10,label:"Current MP",type:Me.CORE},maxMp:{defaultValue:10,label:"Max MP",type:Me.CORE},tempHealth:{defaultValue:0,label:"Temporary HP",type:Me.CORE},strength:{name:"Strength",shortName:"STR",icon:"fa-fist-raised",color:"danger",description:"Increases physical attack damage unless resisted/absorbed/immune. Applied as flat bonus to Physical damage rolls.",category:Be.PHYSICAL,type:Me.OFFENSIVE,defaultValue:0,displayModifier:!0,affectsRolls:!0,damageType:"physical"},vitality:{name:"Vitality",shortName:"VIT",icon:"fa-shield-alt",color:"primary-emphasis",description:"Reduces incoming Physical damage when attack is resisted. Does not affect neutral or absorbed damage.",category:Be.PHYSICAL,type:Me.DEFENSIVE,defaultValue:0,displayModifier:!0,damageReduction:!0,damageType:"physical"},magic:{name:"Magic",shortName:"MAG",icon:"fa-hand-sparkles",color:"success-emphasis",description:"Increases magical attack damage unless resisted/absorbed/immune. Applied as flat bonus.",category:Be.MAGICAL,type:Me.OFFENSIVE,defaultValue:0,displayModifier:!0,affectsRolls:!0,damageType:"magical"},spirit:{name:"Spirit",shortName:"SPR",icon:"fa-shield-heart",color:"info",description:"Reduces incoming magical damage when attack is resisted. Does not affect neutral or absorbed damage.",category:Be.MAGICAL,type:Me.DEFENSIVE,defaultValue:0,displayModifier:!0,damageReduction:!0,damageType:"magical"},speed:{name:"Speed",shortName:"SPD",icon:"fa-running",color:"secondary-emphasis",description:"Bonus to Initiative and movement distance per turn",category:Be.PHYSICAL,type:Me.UTILITY,defaultValue:0,displayModifier:!0,derived:{initiative:n=>n,movement:n=>n}},luck:{name:"Luck",shortName:"LCK",icon:"fa-clover",color:"success",description:"Affects spell draws and knockdown resistance",category:Be.MAGICAL,type:Me.UTILITY,defaultValue:0,displayModifier:!0,derived:{maxExtraDrawDice:n=>Math.min(Math.floor(n),4),knockdownBonus:n=>n}},perception:{name:"Perception",shortName:"PER",icon:"fa-eye",color:"danger-emphasis",description:"Used for Scanning for an enemy's Elemental Affinities, for noticing weak points, hidden treasure, hidden enemies etc.",category:Be.UTILITY,type:Me.UTILITY,defaultValue:0,displayModifier:!0},wisdom:{name:"Wisdom",shortName:"WIS",icon:"fa-book-open",color:"warning-emphasis",description:"Used for Recalling Knowledge of any kind: essentially every Pathfinder 2E lore skill rolled into one. Also useful in social situations.",category:Be.UTILITY,type:Me.UTILITY,defaultValue:0,displayModifier:!0},influence:{name:"Influence",shortName:"INF",icon:"fa-comments",color:"warning",description:"Used for social rolls, such as Deception, Intimidation, Performance, Diplomacy and Persuasion.",category:Be.UTILITY,type:Me.UTILITY,defaultValue:0,displayModifier:!0}},hn={CANTRIP_AND_FIRST:1,SECOND_AND_THIRD:2,FOURTH_AND_FIFTH:3,SIXTH_AND_SEVENTH:4,EIGHTH_TO_TENTH:5},Ms=n=>n<=1?hn.CANTRIP_AND_FIRST:n<=3?hn.SECOND_AND_THIRD:n<=5?hn.FOURTH_AND_FIFTH:n<=7?hn.SIXTH_AND_SEVENTH:hn.EIGHTH_TO_TENTH,ft=Cn({characterStats:{},setCharacterStats:n=>{}});function Mo({children:n}){const e=()=>{const o=localStorage.getItem("characterStats");if(o)return JSON.parse(o);{const i={speed:15,AC:10,maxHealth:35,maxMp:1,currentHealth:35,currentMp:1};for(const l in we)i[l]=we[l].defaultValue||0;return i}},[t,r]=G(e);ge(()=>{localStorage.setItem("characterStats",JSON.stringify(t))},[t]);const c={characterStats:t,setCharacterStats:r};return a(ft.Provider,{value:c,children:n})}const ua=Cn({spells:[],setSpells:n=>{},getLinkedStats:()=>[],subscribe:n=>{},unsubscribe:n=>{}}),Do=({children:n})=>{const[e,t]=G(()=>{const d=localStorage.getItem("spells");return d?JSON.parse(d):[]}),[r,c]=G([]);ge(()=>{localStorage.setItem("spells",JSON.stringify(e)),r.forEach(d=>d(e))},[e]);const o=()=>e.filter(d=>d.isLinked).map(d=>d.linkedStat),i=d=>{c(s=>[...s,d])},l=d=>{c(s=>s.filter(u=>u!==d))};return a(ua.Provider,{value:{spells:e,setSpells:t,getLinkedStats:o,subscribe:i,unsubscribe:l},children:n})},on=()=>ze(ua),Qe=Object.freeze({WEAPON:"Weapon",GENERIC:"Generic"}),re=Object.freeze({PHYS:"Physical",FIRE:"Fire",ICE:"Cold",ELEC:"Electricity",FORCE:"Force",PSY:"Psychic",CHEM:"Chemical",RAD:"Radiant",VOID:"Void",TRUE:"Almighty"}),me=Object.freeze({WEAK:"Weak",NEUTRAL:"Neutral",RESIST:"Resist",IMMUNE:"Immune",ABSORB:"Drain",REFLECT:"Reflect"}),Lo={[re.PHYS]:"⚔️",[re.CHEM]:"🧪",[re.ICE]:"❄️",[re.ELEC]:"⚡",[re.FIRE]:"🔥",[re.FORCE]:"💥",[re.RAD]:"✨",[re.VOID]:"🌌",[re.PSY]:"🌀"},rt=n=>Lo[n]||"☄️",Io=n=>({[re.PHYS]:"Phys",[re.CHEM]:"Chem",[re.ICE]:"Ice",[re.ELEC]:"Elec",[re.FIRE]:"Fire",[re.FORCE]:"Force",[re.RAD]:"Rad",[re.VOID]:"Void",[re.PSY]:"Psy",[re.TRUE]:"???"})[n]||"???",Ro=n=>({[me.WEAK]:"WK",[me.NEUTRAL]:"-",[me.RESIST]:"RES",[me.IMMUNE]:"NULL",[me.ABSORB]:"DR",[me.REFLECT]:"RFL"})[n]||"???",Wt=({title:n,titleClassName:e="grey-text",lineColor:t="#8888",lineThickness:r="1px",containerClassName:c="mb-3",lineMaxWidth:o="none"})=>{const i={height:r,maxWidth:o};return a("div",{className:c,children:a("div",{className:"d-flex align-items-center justify-content-center",children:[a("div",{className:"flex-grow-1",style:{...i,backgroundImage:`linear-gradient(to right, transparent, ${t})`}}),a("h5",{className:`${e} mx-3 my-0 arsenal`,children:n}),a("div",{className:"flex-grow-1",style:{...i,backgroundImage:`linear-gradient(to left, transparent, ${t})`}})]})})},Po="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%20style='height:%20512px;%20width:%20512px;'%3e%3cg%20class=''%20transform='translate(0,0)'%20style=''%3e%3cpath%20d='m19.36%2019.457-.38%2027.84%20267.127%20154.75-58.703%2019.916%2057.602%2019.36L142.12%20383.546l-19.214-19.213-51.47%20114.324%20123.125-43.482-17.492-18.95%20151.868-151.87%2012.433%2043.078%2022.976-68.5%2056.675-16.565-57.475-15.492-22.934-79.828-14.145%2048.266-268.65-155.41-38.454-.446zM370.614%2081.94c-4.53.02-9.035.12-13.51.302-3.275.134-6.528.32-9.76.547l31.25%20108.786%20104.05%2028.045c6.204-39.085%208.902-80.275%209.18-120.075C456.37%2088.82%20415.098%2082.257%20375.15%2081.95a403.83%20403.83%200%200%200-4.537-.01zm-36.87%202.1c-31.99%203.653-61.013%2012.153-83.014%2025.87l64.493%2037.31%2018.52-63.18zm148.18%20139.997L378.958%20254.13l-38.93%20116.054-20.268-70.225-39.07%2039.067c18.814%2035.364%2046.1%2062.287%2086.175%2077.604%2047.473-17.834%2078.566-62.795%2098.014-121.6%207.323-22.14%2012.905-46.11%2017.042-70.993z'%20fill='%23fff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",Ho="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%20style='height:%20512px;%20width:%20512px;'%3e%3cg%20class=''%20transform='translate(0,0)'%20style=''%3e%3cpath%20d='M362.188%2017.998c-12.9%2065.825-49.788%20140.505-98.616%20197.37L352%20224l-89.377%2019.414%2052.197%2075.27-71.111-56.364L224%20336l-8.576-73.182%202.812-2.779c-45.221%2040.71-35.888%2074.86.702%2096.49%206.775%204.005%2016.257%209.046%2027.38%208.7%2058.243-1.813%2093.255%2035.012%20126.575%2076.199%2018.234%2022.54%2048.35%2030.059%2073.529%2044.246%2052.44%2029.548%2067.894-32.667%2014.767-53.445l-70.677-111.036c-11.42-53.08%2052.186-171.824%20103.49-248.37V17.997zM92.454%2023.424v32.17l32.799%2032.79%208.043-24.126zM78.578%2067.352c-.233-.026-.57.037-1.224.199-1.31.323-3.41%201.482-5.075%203.146-1.664%201.664-2.823%203.763-3.146%205.073-.266%201.074-.207%201.3.012%201.61l120.228%20120.208%203.275-6.55%206.545-3.272L78.97%2067.563c-.123-.086-.24-.195-.39-.211zM21.162%2087.029%2062%20127.86l24.13-8.043-30.335-30.33-.397-.396-.343-.442a17.99%2017.99%200%200%201-1.112-1.619zm213.563%20103.098-28.663%2014.326-14.33%2028.654%2038.264%2015.303%2020.096-19.869z'%20fill='%23fff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",Fo="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%20style='height:%20512px;%20width:%20512px;'%3e%3cg%20class=''%20transform='translate(0,0)'%20style=''%3e%3cpath%20d='M372.48%2031.215c-77.65%200-116.48%2065.73-116.48%2065.73s-38.83-65.72-116.48-65.72c-37.14%200-107.77%2033.72-107.77%20125.13%200%20161.24%20224.25%20324.43%20224.25%20324.43s224.25-163.19%20224.25-324.43c0-91.42-70.63-125.13-107.77-125.14zm-145.492%20115.02h60.698v79.415h79.238v60.7h-79.238v79.884h-60.698V286.35h-80.064v-60.7h80.064z'%20fill='%23fff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e";function Vo(){const{characterStats:n,setCharacterStats:e}=ze(ft),[t,r]=G(null),[c,o]=G(typeof window<"u"?window.innerWidth:1024);ge(()=>{const m=()=>o(window.innerWidth);return window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]);let i=c<1080;ge(()=>{let m=!n.affinities;if(n.affinities){const _=Object.keys(re)[0];_&&n.affinities[re[_]]&&typeof n.affinities[re[_]]!="object"&&(m=!0)}if(m){const _={};Object.values(re).forEach(E=>{_[E]={type:me.NEUTRAL,mastered:!1}}),e(E=>({...E,affinities:_}))}},[n.affinities,e]);const l=m=>{r(_=>_===m?null:m)},d=(m,_)=>{e(E=>{var A;return{...E,affinities:{...E.affinities,[m]:{...((A=E.affinities)==null?void 0:A[m])||{type:me.NEUTRAL,mastered:!1},type:_}}}})},s=m=>{e(_=>{var E,A,C;return{..._,affinities:{..._.affinities,[m]:{...((E=_.affinities)==null?void 0:E[m])||{type:me.NEUTRAL,mastered:!1},mastered:!((C=(A=_.affinities)==null?void 0:A[m])!=null&&C.mastered)}}}})},u=m=>{switch(m){case me.WEAK:return"danger";case me.RESIST:return"info";case me.IMMUNE:return"warning";case me.ABSORB:return"success";case me.REFLECT:return"primary";default:return"secondary"}},p=m=>{const _={width:"1.25em",height:"1.25em",color:"white"};switch(m){case me.WEAK:return a("img",{src:Ho,alt:"Weak",style:_});case me.RESIST:return a("i",{className:"fas fa-shield-alt",style:_});case me.IMMUNE:return a("i",{className:"fas fa-ban",style:_});case me.ABSORB:return a("img",{src:Fo,alt:"Absorb",style:_});case me.REFLECT:return a("img",{src:Po,alt:"Reflect",style:_});default:return a("i",{className:"fas fa-minus",style:_})}};return!n.affinities||typeof n.affinities[Object.values(re)[0]]!="object"?a("div",{className:"p-3",children:"Loading affinities..."}):a("div",{className:"affinity-tracker p-3",children:[a(Wt,{title:"ELEMENTAL AFFINITIES"}),a("div",{className:"element-grid mt-4 gap-1",children:Object.values(re).filter(m=>m!=="Almighty").map(m=>{const _=n.affinities[m]||{type:me.NEUTRAL,mastered:!1};return a("div",{className:`element-item clickable-card mb-3 ${_.mastered?"gold-bg":""} ${t===m?"editing":""}`,onClick:()=>l(m),children:[_.mastered&&a("div",{className:"mastery-watermark",children:"MASTERY"}),a("div",{className:"element-header d-flex align-items-center justify-content-between mb-1",children:[a("div",{className:"d-flex align-items-center element-info",children:[a("span",{className:"element-icon",children:rt(m)}),a("span",{className:"arsenal element-name",children:[i?Io(m):m,":"]}),a("span",{className:`arsenal ms-1 affinity-name text-${u(_.type)}`,children:i?Ro(_.type):_.type})]}),a("button",{className:`mastery-toggle-button ${_.mastered?"mastered":""}`,onClick:E=>{E.stopPropagation(),s(m)},title:_.mastered?"Disable Mastery":"Enable Mastery",children:a("i",{className:`${_.mastered?"fas fa-star":"fa-regular fa-star"}`})})]}),t===m&&a("div",{className:"affinity-buttons btn-group d-flex mt-2",children:Object.values(me).map(E=>a("button",{className:`btn btn-${_.type===E?u(E):"dark inactive-btn"}`,onClick:A=>{A.stopPropagation(),d(m,E)},title:E,children:p(E)},E))})]},m)})})]})}const En={Blinded:{maxStack:1,effects:{ac:-2}},Broken:{maxStack:1},Clumsy:{maxStack:4,effects:{ac:-1,savingThrow:-1}},Concealed:{maxStack:1},Confused:{maxStack:1},Controlled:{maxStack:1},Dazzled:{maxStack:1},Deafened:{maxStack:1},Doomed:{maxStack:3,effects:{savingThrow:-1}},Drained:{maxStack:4,effects:{ac:-1,savingThrow:-1}},Dying:{maxStack:4},Encumbered:{maxStack:1,effects:{speed:-10,ac:-1,savingThrow:-1}},Enfeebled:{maxStack:4,effects:{savingThrow:-1}},Fascinated:{maxStack:1},Fatigued:{maxStack:1,effects:{ac:-1,savingThrow:-1}},"Flat-Footed":{maxStack:1,effects:{ac:-2}},Fleeing:{maxStack:1},Frightened:{maxStack:4,effects:{ac:-1,savingThrow:-1}},Grabbed:{maxStack:1,effects:{ac:-2}},Hidden:{maxStack:1},Immobilized:{maxStack:1,effects:{speed:0}},Invisible:{maxStack:1},Observed:{maxStack:1},"Off-Guard":{maxStack:1,effects:{ac:-2}},Paralyzed:{maxStack:1,effects:{ac:-2,speed:0,savingThrow:-2}},"Persistent Damage":{maxStack:1},Petrified:{maxStack:1,effects:{ac:0,speed:0}},Prone:{maxStack:1,effects:{ac:-2}},Quickened:{maxStack:1},Restrained:{maxStack:1,effects:{ac:-2,speed:0,savingThrow:-2}},Sickened:{maxStack:4,effects:{ac:-1,savingThrow:-1}},Slowed:{maxStack:3},Stunned:{maxStack:4,effects:{}},Stupefied:{maxStack:4,effects:{savingThrow:-1}},Unconscious:{maxStack:1,effects:{ac:-4,speed:0,savingThrow:-4}},Undetected:{maxStack:1},Unnoticed:{maxStack:1},Wounded:{maxStack:3}},De=n=>{if(!n)return{acModifier:0,speedModifier:0,speedOverride:null,savingThrowModifier:0};let e=0,t=0,r=null,c=0;return Object.entries(n).forEach(([o,i])=>{var l;if(i>0&&((l=En[o])!=null&&l.effects)){const d=En[o].effects,s=i||1;d.ac!==void 0&&(e+=d.ac*s),d.speed!==void 0&&(d.speed===0?r=0:t+=d.speed*s),d.savingThrow!==void 0&&(c+=d.savingThrow*s)}}),{acModifier:e,speedModifier:t,speedOverride:r,savingThrowModifier:c}},Wo=Object.keys(En),jo=()=>{const{characterStats:n,setCharacterStats:e}=ze(ft),t=n.conditions||{},r=l=>{const s=(t[l]||0)>0?0:1;e(u=>({...u,conditions:{...u.conditions,[l]:s===0?void 0:s}}))},c=(l,d)=>{const s=En[l].maxStack,u=t[l]||0,p=Math.max(0,Math.min(s,u+d));e(m=>({...m,conditions:{...m.conditions,[l]:p===0?void 0:p}}))},o=()=>{e(l=>({...l,conditions:{}}))},i=Object.values(t).filter(l=>l>0).length;return a("div",{className:"conditions-tracker",children:[a("div",{className:"d-flex justify-content-between align-items-center mb-3",children:a(Wt,{title:"CONDITIONS",containerClassName:"mb-0 flex-grow-1",lineMaxWidth:"30px"})}),"            ",a("div",{className:"conditions-grid",children:Wo.map(l=>{const d=En[l].maxStack,s=t[l]||0,u=s>0,p=d>1;return a("div",{className:`condition-item ${u?"active":""} ${p?"stackable":""}`,children:[a("div",{className:"condition-main",onClick:()=>r(l),children:[a("div",{className:"condition-checkbox",children:u&&a("i",{className:"fas fa-check"})}),a("span",{className:"condition-label",children:l})]}),u&&p&&a("div",{className:"condition-controls",children:[a("button",{className:"btn btn-sm condition-btn decrease",onClick:m=>{m.stopPropagation(),c(l,-1)},title:"Decrease value",children:a("i",{className:"fas fa-minus"})}),a("span",{className:"condition-value",children:[s,"/",d]}),a("button",{className:"btn btn-sm condition-btn increase",onClick:m=>{m.stopPropagation(),c(l,1)},disabled:s>=d,title:"Increase value",children:a("i",{className:"fas fa-plus"})})]})]},l)})}),i>0&&a("div",{className:"active-conditions-summary mt-2",children:[a("small",{className:"text-info",children:[a("i",{className:"fas fa-exclamation-triangle me-1"}),i," active condition",i!==1?"s":""]}),a("button",{className:"btn btn-sm btn-outline-secondary ms-2",onClick:o,"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Clear all conditions",children:a("i",{className:"fas fa-broom"})})]})]})};var Zn={exports:{}},Bo=Zn.exports,ci;function Uo(){return ci||(ci=1,function(n,e){(function(t,r){n.exports=r()})(Bo,function(){return function(t){var r={};function c(o){if(r[o])return r[o].exports;var i=r[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,c),i.l=!0,i.exports}return c.m=t,c.c=r,c.d=function(o,i,l){c.o(o,i)||Object.defineProperty(o,i,{enumerable:!0,get:l})},c.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},c.t=function(o,i){if(1&i&&(o=c(o)),8&i||4&i&&typeof o=="object"&&o&&o.__esModule)return o;var l=Object.create(null);if(c.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:o}),2&i&&typeof o!="string")for(var d in o)c.d(l,d,(function(s){return o[s]}).bind(null,d));return l},c.n=function(o){var i=o&&o.__esModule?function(){return o.default}:function(){return o};return c.d(i,"a",i),i},c.o=function(o,i){return Object.prototype.hasOwnProperty.call(o,i)},c.p="",c(c.s=0)}([function(t,r,c){function o(i){for(var l in i)r.hasOwnProperty(l)||(r[l]=i[l])}Object.defineProperty(r,"__esModule",{value:!0}),o(c(1)),o(c(3))},function(t,r,c){Object.defineProperty(r,"__esModule",{value:!0});const o=c(2);r.DiceRoller=class{constructor(i,l=1e3){this.randFunction=Math.random,this.maxRollCount=1e3,i&&(this.randFunction=i),this.maxRollCount=l}parse(i){return o.parse(i)}roll(i){const l=o.parse(i);return this.rollType(l)}rollValue(i){return this.roll(i).value}rollParsed(i){return this.rollType(i)}rollType(i){let l;switch(i.type){case"diceExpression":l=this.rollDiceExpr(i);break;case"group":l=this.rollGroup(i);break;case"die":l=this.rollDie(i);break;case"expression":l=this.rollExpression(i);break;case"mathfunction":l=this.rollFunction(i);break;case"inline":l=this.rollType(i.expr);break;case"number":l=Object.assign(Object.assign({},i),{success:!1,valid:!0,order:0});break;default:throw new Error(`Unable to render ${i.type}`)}return i.label&&(l.label=i.label),l}rollDiceExpr(i){const l=this.rollType(i.head),d=[l],s=[],u=i.ops.reduce((p,m,_)=>{const E=this.rollType(m.tail);switch(E.order=_,d.push(E),s.push(m.op),m.op){case"+":return p+E.value;case"-":return p-E.value;default:return p}},l.value);return{dice:d,ops:s,success:!1,type:"diceexpressionroll",valid:!0,value:u,order:0}}rollGroup(i){let l=i.rolls.map((d,s)=>Object.assign(Object.assign({},this.rollType(d)),{order:s}));if(i.mods){const d=i.mods,s=u=>{const p=d.some(m=>["failure","success"].includes(m.type));return u=d.reduce((m,_)=>this.applyGroupMod(m,_),u),p&&(u=u.map(m=>(m.success||(m.value=0,m.success=!0),m))),u};if(l.length===1&&["die","diceexpressionroll"].includes(l[0].type)){const u=l[0];let p=u.type==="die"?u.rolls:u.dice.filter(m=>m.type!=="number").reduce((m,_)=>[...m,..._.type==="die"?_.rolls:_.dice],[]);p=s(p),u.value=p.reduce((m,_)=>_.valid?m+_.value:m,0)}else l=s(l)}return{dice:l,success:!1,type:"grouproll",valid:!0,value:l.reduce((d,s)=>s.valid?d+s.value:d,0),order:0}}rollDie(i){const l=this.rollType(i.count);if(l.value>this.maxRollCount)throw new Error("Entered number of dice too large.");let d,s;i.die.type==="fate"?(s={type:"fate",success:!1,valid:!1,value:0,order:0},d=Array.from({length:l.value},(m,_)=>this.generateFateRoll(_))):(s=this.rollType(i.die),d=Array.from({length:l.value},(m,_)=>this.generateDiceRoll(s.value,_))),i.mods&&(d=i.mods.reduce((m,_)=>this.applyMod(m,_),d)),i.targets&&(d=i.targets.reduce((m,_)=>this.applyMod(m,_),d).map(m=>(m.success||(m.value=0,m.success=!0),m)));let u=!1,p=0;if(i.match){const m=i.match,_=d.reduce((A,C)=>A.set(C.roll,(A.get(C.roll)||0)+1),new Map),E=new Set(Array.from(_.entries()).filter(([A,C])=>C>=m.min.value).filter(([A])=>!(m.mod&&m.expr)||this.successTest(m.mod,this.rollType(m.expr).value,A)).map(([A])=>A));d.filter(A=>E.has(A.roll)).forEach(A=>A.matched=!0),m.count&&(u=!0,p=E.size)}return i.sort&&(d=this.applySort(d,i.sort)),{count:l,die:s,rolls:d,success:!1,type:"die",valid:!0,value:u?p:d.reduce((m,_)=>_.valid?m+_.value:m,0),order:0,matched:u}}rollExpression(i){const l=this.rollType(i.head),d=[l],s=[],u=i.ops.reduce((p,m)=>{const _=this.rollType(m.tail);switch(d.push(_),s.push(m.op),m.op){case"+":return p+_.value;case"-":return p-_.value;case"*":return p*_.value;case"/":return p/_.value;case"%":return p%_.value;case"**":return p**_.value;default:return p}},l.value);return{dice:d,ops:s,success:!1,type:"expressionroll",valid:!0,value:u,order:0}}rollFunction(i){const l=this.rollType(i.expr);let d;switch(i.op){case"floor":d=Math.floor(l.value);break;case"ceil":d=Math.ceil(l.value);break;case"round":d=Math.round(l.value);break;case"abs":d=Math.abs(l.value);break;default:d=l.value}return{expr:l,op:i.op,success:!1,type:"mathfunction",valid:!0,value:d,order:0}}applyGroupMod(i,l){return this.getGroupModMethod(l)(i)}getGroupModMethod(i){const l=d=>d.value;switch(i.type){case"success":return this.getSuccessMethod(i,l);case"failure":return this.getFailureMethod(i,l);case"keep":return this.getKeepMethod(i,l);case"drop":return this.getDropMethod(i,l);default:throw new Error(`Mod ${i.type} is not recognised`)}}applyMod(i,l){return this.getModMethod(l)(i)}getModMethod(i){const l=d=>d.roll;switch(i.type){case"success":return this.getSuccessMethod(i,l);case"failure":return this.getFailureMethod(i,l);case"crit":return this.getCritSuccessMethod(i,l);case"critfail":return this.getCritFailureMethod(i,l);case"keep":return d=>this.getKeepMethod(i,l)(d).sort((s,u)=>s.order-u.order);case"drop":return d=>this.getDropMethod(i,l)(d).sort((s,u)=>s.order-u.order);case"explode":return this.getExplodeMethod(i);case"compound":return this.getCompoundMethod(i);case"penetrate":return this.getPenetrateMethod(i);case"reroll":return this.getReRollMethod(i);case"rerollOnce":return this.getReRollOnceMethod(i);default:throw new Error(`Mod ${i.type} is not recognised`)}}applySort(i,l){return i.sort((d,s)=>l.asc?d.roll-s.roll:s.roll-d.roll),i.forEach((d,s)=>d.order=s),i}getCritSuccessMethod(i,l){const d=this.rollType(i.expr);return s=>s.map(u=>{if(!u.valid||u.type!=="roll"||u.success)return u;const p=u;return this.successTest(i.mod,d.value,l(u))?p.critical="success":p.critical==="success"&&(p.critical=null),u})}getCritFailureMethod(i,l){const d=this.rollType(i.expr);return s=>s.map(u=>{if(!u.valid||u.type!=="roll"||u.success)return u;const p=u;return this.successTest(i.mod,d.value,l(u))?p.critical="failure":p.critical==="failure"&&(p.critical=null),u})}getSuccessMethod(i,l){const d=this.rollType(i.expr);return s=>s.map(u=>(u.valid&&this.successTest(i.mod,d.value,l(u))&&(u.success?u.value+=1:(u.value=1,u.success=!0)),u))}getFailureMethod(i,l){const d=this.rollType(i.expr);return s=>s.map(u=>(u.valid&&this.successTest(i.mod,d.value,l(u))&&(u.success?u.value-=1:(u.value=-1,u.success=!0)),u))}getKeepMethod(i,l){const d=this.rollType(i.expr);return s=>{if(s.length===0)return s;s=s.sort((E,A)=>i.highlow==="l"?l(A)-l(E):l(E)-l(A)).sort((E,A)=>(E.valid?1:0)-(A.valid?1:0));const u=Math.max(Math.min(d.value,s.length),0);let p=0,m=0;const _=s.reduce((E,A)=>(A.valid?1:0)+E,0)-u;for(;m<s.length&&p<_;)s[m].valid&&(s[m].valid=!1,p++),m++;return s}}getDropMethod(i,l){const d=this.rollType(i.expr);return s=>{s=s.sort((_,E)=>i.highlow==="h"?l(E)-l(_):l(_)-l(E));const u=Math.max(Math.min(d.value,s.length),0);let p=0,m=0;for(;m<s.length&&p<u;)s[m].valid&&(s[m].valid=!1,p++),m++;return s}}getExplodeMethod(i){const l=i.target?this.rollType(i.target.value):null;return d=>{const s=l?u=>this.successTest(i.target.mod,l.value,u.roll):u=>this.successTest("=",u.type==="fateroll"?1:u.die,u.roll);if(d[0].type==="roll"&&s({roll:1})&&s({roll:d[0].die}))throw new Error("Invalid reroll target");for(let u=0;u<d.length;u++){let p=d[u];p.order=u;let m=0;for(;s(p)&&m++<1e3;){const _=this.reRoll(p,++u);d.splice(u,0,_),p=_}}return d}}getCompoundMethod(i){const l=i.target?this.rollType(i.target.value):null;return d=>{const s=l?u=>this.successTest(i.target.mod,l.value,u.roll):u=>this.successTest("=",u.type==="fateroll"?1:u.die,u.roll);if(d[0].type==="roll"&&s({roll:1})&&s({roll:d[0].die}))throw new Error("Invalid reroll target");for(let u=0;u<d.length;u++){let p=d[u],m=p.roll,_=0;for(;s(p)&&_++<1e3;){const E=this.reRoll(d[u],++u);m+=E.roll,p=E}p.value=m,p.roll=m}return d}}getPenetrateMethod(i){const l=i.target?this.rollType(i.target.value):null;return d=>{const s=l?u=>this.successTest(i.target.mod,l.value,u.roll):u=>this.successTest("=",u.type==="fateroll"?1:u.die,u.roll);if(l&&d[0].type==="roll"&&s(d[0])&&this.successTest(i.target.mod,l.value,1))throw new Error("Invalid reroll target");for(let u=0;u<d.length;u++){let p=d[u];p.order=u;let m=0;for(;s(p)&&m++<1e3;){const _=this.reRoll(p,++u);_.value-=1,_.roll-=1,d.splice(u,0,_),p=_}}return d}}getReRollMethod(i){const l=i.target?this.successTest.bind(null,i.target.mod,this.rollType(i.target.value).value):this.successTest.bind(null,"=",1);return d=>{if(d[0].type==="roll"&&l(1)&&l(d[0].die))throw new Error("Invalid reroll target");for(let s=0;s<d.length;s++)for(;l(d[s].roll);){d[s].valid=!1;const u=this.reRoll(d[s],s+1);d.splice(++s,0,u)}return d}}getReRollOnceMethod(i){const l=i.target?this.successTest.bind(null,i.target.mod,this.rollType(i.target.value).value):this.successTest.bind(null,"=",1);return d=>{if(d[0].type==="roll"&&l(1)&&l(d[0].die))throw new Error("Invalid reroll target");for(let s=0;s<d.length;s++)if(l(d[s].roll)){d[s].valid=!1;const u=this.reRoll(d[s],s+1);d.splice(++s,0,u)}return d}}successTest(i,l,d){switch(i){case">":return d>=l;case"<":return d<=l;case"=":default:return d==l}}reRoll(i,l){switch(i.type){case"roll":return this.generateDiceRoll(i.die,l);case"fateroll":return this.generateFateRoll(l);default:throw new Error(`Cannot do a reroll of a ${i.type}.`)}}generateDiceRoll(i,l){const d=Math.floor(this.randFunction()*i)+1;return{critical:d===i?"success":d===1?"failure":null,die:i,matched:!1,order:l,roll:d,success:!1,type:"roll",valid:!0,value:d}}generateFateRoll(i){const l=Math.floor(3*this.randFunction())-1;return{matched:!1,order:i,roll:l,success:!1,type:"fateroll",valid:!0,value:l}}}},function(t,r,c){function o(i,l,d,s){this.message=i,this.expected=l,this.found=d,this.location=s,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,o)}(function(i,l){function d(){this.constructor=i}d.prototype=l.prototype,i.prototype=new d})(o,Error),o.buildMessage=function(i,l){var d={literal:function(m){return'"'+u(m.text)+'"'},class:function(m){var _,E="";for(_=0;_<m.parts.length;_++)E+=m.parts[_]instanceof Array?p(m.parts[_][0])+"-"+p(m.parts[_][1]):p(m.parts[_]);return"["+(m.inverted?"^":"")+E+"]"},any:function(m){return"any character"},end:function(m){return"end of input"},other:function(m){return m.description}};function s(m){return m.charCodeAt(0).toString(16).toUpperCase()}function u(m){return m.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(_){return"\\x0"+s(_)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(_){return"\\x"+s(_)})}function p(m){return m.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(_){return"\\x0"+s(_)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(_){return"\\x"+s(_)})}return"Expected "+function(m){var _,E,A,C=new Array(m.length);for(_=0;_<m.length;_++)C[_]=(A=m[_],d[A.type](A));if(C.sort(),C.length>0){for(_=1,E=1;_<C.length;_++)C[_-1]!==C[_]&&(C[E]=C[_],E++);C.length=E}switch(C.length){case 1:return C[0];case 2:return C[0]+" or "+C[1];default:return C.slice(0,-1).join(", ")+", or "+C[C.length-1]}}(i)+" but "+function(m){return m?'"'+u(m)+'"':"end of input"}(l)+" found."},t.exports={SyntaxError:o,parse:function(i,l){l=l!==void 0?l:{};var d,s={},u={start:Pr},p=Pr,m={type:"any"},_=q("[[",!1),E=q("]]",!1),A=function(f,v){return v&&(f.label=v),f},C=q(">",!1),$=q("<",!1),M=q("=",!1),j=q("f",!1),L=q("cs",!1),W=q("cf",!1),U=q("m",!1),Q=q("t",!1),X=q("k",!1),R=q("l",!1),F=q("h",!1),B=q("d",!1),Z=q("{",!1),le=q(",",!1),Ne=q("}",!1),he=q("+",!1),ie=q("sa",!1),ae=q("sd",!1),N=q("!",!1),k=q("!!",!1),Y=q("!p",!1),Ce=q("r",!1),Se=q("ro",!1),Re=q("F",!1),Ae=q("%",!1),ve=q("(",!1),xe=q(")",!1),Te=q("-",!1),be=function(f,v){return v.length==0?f:{head:f,type:"expression",ops:v.map(g=>({type:"math",op:g[1],tail:g[3]}))}},pe=q("*",!1),tt=q("/",!1),ke=q("**",!1),nt=q("floor",!1),at=q("ceil",!1),y=q("round",!1),V=q("abs",!1),O=Lr("integer"),ee=/^[0-9]/,ye=ys([["0","9"]],!1,!1),P=function(){return{type:"number",value:parseInt(i.substring(K,h),10)}},ce=q("[",!1),de=/^[^\]]/,Pe=ys(["]"],!0,!1),pt=q("]",!1),Nt=Lr("whitespace"),At=/^[ \t\n\r]/,Oe=ys([" ","	",`
`,"\r"],!1,!1),h=0,K=0,Ln=[{line:1,column:1}],ot=0,bs=[],S=0;if("startRule"in l){if(!(l.startRule in u))throw new Error(`Can't start parsing from rule "`+l.startRule+'".');p=u[l.startRule]}function q(f,v){return{type:"literal",text:f,ignoreCase:v}}function ys(f,v,g){return{type:"class",parts:f,inverted:v,ignoreCase:g}}function Lr(f){return{type:"other",description:f}}function Ir(f){var v,g=Ln[f];if(g)return g;for(v=f-1;!Ln[v];)v--;for(g={line:(g=Ln[v]).line,column:g.column};v<f;)i.charCodeAt(v)===10?(g.line++,g.column=1):g.column++,v++;return Ln[f]=g,g}function Rr(f,v){var g=Ir(f),b=Ir(v);return{start:{offset:f,line:g.line,column:g.column},end:{offset:v,line:b.line,column:b.column}}}function x(f){h<ot||(h>ot&&(ot=h,bs=[]),bs.push(f))}function po(f,v,g){return new o(o.buildMessage(f,v),f,v,g)}function Pr(){var f,v,g,b,I,w;if(f=h,(v=As())!==s){for(g=[],i.length>h?(b=i.charAt(h),h++):(b=s,S===0&&x(m));b!==s;)g.push(b),i.length>h?(b=i.charAt(h),h++):(b=s,S===0&&x(m));g!==s?(K=f,w=g,(I=v).root=!0,w&&(I.label=w.join("")),f=v=I):(h=f,f=s)}else h=f,f=s;return f}function mo(){var f,v,g;return f=h,(v=function(){var b,I,w,D,z;if(b=h,(I=function(){var ne,We,mt,$e,fe,je,Fe,Ge,Ee;if(ne=h,i.charCodeAt(h)===123?(We="{",h++):(We=s,S===0&&x(Z)),We!==s)if(se()!==s)if((mt=Es())!==s){for($e=[],fe=h,(je=se())!==s?(i.charCodeAt(h)===44?(Fe=",",h++):(Fe=s,S===0&&x(le)),Fe!==s&&(Ge=se())!==s&&(Ee=Es())!==s?fe=je=[je,Fe,Ge,Ee]:(h=fe,fe=s)):(h=fe,fe=s);fe!==s;)$e.push(fe),fe=h,(je=se())!==s?(i.charCodeAt(h)===44?(Fe=",",h++):(Fe=s,S===0&&x(le)),Fe!==s&&(Ge=se())!==s&&(Ee=Es())!==s?fe=je=[je,Fe,Ge,Ee]:(h=fe,fe=s)):(h=fe,fe=s);$e!==s&&(fe=se())!==s?(i.charCodeAt(h)===125?(je="}",h++):(je=s,S===0&&x(Ne)),je!==s?(K=ne,We={rolls:[mt,...$e.map(vo=>vo[3])],type:"group"},ne=We):(h=ne,ne=s)):(h=ne,ne=s)}else h=ne,ne=s;else h=ne,ne=s;else h=ne,ne=s;return ne}())!==s){for(w=[],(D=Pn())===s&&(D=Hn())===s&&(D=In())===s&&(D=Rn());D!==s;)w.push(D),(D=Pn())===s&&(D=Hn())===s&&(D=In())===s&&(D=Rn());w!==s&&(D=se())!==s?((z=Fn())===s&&(z=null),z!==s?(K=b,J=I,He=z,(oe=w).length>0&&(J.mods=(J.mods||[]).concat(oe)),He&&(J.label=He),b=I=J):(h=b,b=s)):(h=b,b=s)}else h=b,b=s;var J,oe,He;return b}())===s&&(v=Vr())===s&&(v=ks()),v!==s&&se()!==s?((g=Fn())===s&&(g=null),g!==s?(K=f,f=v=A(v,g)):(h=f,f=s)):(h=f,f=s),f}function In(){var f,v,g;return f=h,i.charCodeAt(h)===62?(v=">",h++):(v=s,S===0&&x(C)),v===s&&(i.charCodeAt(h)===60?(v="<",h++):(v=s,S===0&&x($)),v===s&&(i.charCodeAt(h)===61?(v="=",h++):(v=s,S===0&&x(M)))),v!==s&&(g=lt())!==s?(K=f,f=v={type:"success",mod:v,expr:g}):(h=f,f=s),f}function Rn(){var f,v,g,b;return f=h,i.charCodeAt(h)===102?(v="f",h++):(v=s,S===0&&x(j)),v!==s?(i.charCodeAt(h)===62?(g=">",h++):(g=s,S===0&&x(C)),g===s&&(i.charCodeAt(h)===60?(g="<",h++):(g=s,S===0&&x($)),g===s&&(i.charCodeAt(h)===61?(g="=",h++):(g=s,S===0&&x(M)))),g===s&&(g=null),g!==s&&(b=lt())!==s?(K=f,f=v={type:"failure",mod:g,expr:b}):(h=f,f=s)):(h=f,f=s),f}function Hr(){var f,v,g,b;return f=h,i.substr(h,2)==="cs"?(v="cs",h+=2):(v=s,S===0&&x(L)),v!==s?(i.charCodeAt(h)===62?(g=">",h++):(g=s,S===0&&x(C)),g===s&&(i.charCodeAt(h)===60?(g="<",h++):(g=s,S===0&&x($)),g===s&&(i.charCodeAt(h)===61?(g="=",h++):(g=s,S===0&&x(M)))),g===s&&(g=null),g!==s&&(b=lt())!==s?(K=f,f=v={type:"crit",mod:g,expr:b}):(h=f,f=s)):(h=f,f=s),f}function Fr(){var f,v,g,b;return f=h,i.substr(h,2)==="cf"?(v="cf",h+=2):(v=s,S===0&&x(W)),v!==s?(i.charCodeAt(h)===62?(g=">",h++):(g=s,S===0&&x(C)),g===s&&(i.charCodeAt(h)===60?(g="<",h++):(g=s,S===0&&x($)),g===s&&(i.charCodeAt(h)===61?(g="=",h++):(g=s,S===0&&x(M)))),g===s&&(g=null),g!==s&&(b=lt())!==s?(K=f,f=v={type:"critfail",mod:g,expr:b}):(h=f,f=s)):(h=f,f=s),f}function _o(){var f,v,g,b,I;return f=h,i.charCodeAt(h)===109?(v="m",h++):(v=s,S===0&&x(U)),v!==s?(i.charCodeAt(h)===116?(g="t",h++):(g=s,S===0&&x(Q)),g===s&&(g=null),g!==s?((b=ks())===s&&(b=null),b!==s?((I=function(){var w,D,z;return w=h,i.charCodeAt(h)===62?(D=">",h++):(D=s,S===0&&x(C)),D===s&&(i.charCodeAt(h)===60?(D="<",h++):(D=s,S===0&&x($)),D===s&&(i.charCodeAt(h)===61?(D="=",h++):(D=s,S===0&&x(M)))),D!==s&&(z=lt())!==s?(K=w,w=D={mod:D,expr:z}):(h=w,w=s),w}())===s&&(I=null),I!==s?(K=f,f=v=function(w,D,z){const J={type:"match",min:D||{type:"number",value:2},count:!!w};return z&&(J.mod=z.mod,J.expr=z.expr),J}(g,b,I)):(h=f,f=s)):(h=f,f=s)):(h=f,f=s)):(h=f,f=s),f}function Pn(){var f,v,g,b;return f=h,i.charCodeAt(h)===107?(v="k",h++):(v=s,S===0&&x(X)),v!==s?(i.charCodeAt(h)===108?(g="l",h++):(g=s,S===0&&x(R)),g===s&&(i.charCodeAt(h)===104?(g="h",h++):(g=s,S===0&&x(F))),g===s&&(g=null),g!==s?((b=lt())===s&&(b=null),b!==s?(K=f,f=v={type:"keep",highlow:g,expr:b||qr}):(h=f,f=s)):(h=f,f=s)):(h=f,f=s),f}function Hn(){var f,v,g,b;return f=h,i.charCodeAt(h)===100?(v="d",h++):(v=s,S===0&&x(B)),v!==s?(i.charCodeAt(h)===108?(g="l",h++):(g=s,S===0&&x(R)),g===s&&(i.charCodeAt(h)===104?(g="h",h++):(g=s,S===0&&x(F))),g===s&&(g=null),g!==s?((b=lt())===s&&(b=null),b!==s?(K=f,f=v={type:"drop",highlow:g,expr:b||qr}):(h=f,f=s)):(h=f,f=s)):(h=f,f=s),f}function Es(){var f,v,g,b,I,w,D,z;if(f=h,(v=Ns())!==s){for(g=[],b=h,(I=se())!==s?(i.charCodeAt(h)===43?(w="+",h++):(w=s,S===0&&x(he)),w!==s&&(D=se())!==s&&(z=Ns())!==s?b=I=[I,w,D,z]:(h=b,b=s)):(h=b,b=s);b!==s;)g.push(b),b=h,(I=se())!==s?(i.charCodeAt(h)===43?(w="+",h++):(w=s,S===0&&x(he)),w!==s&&(D=se())!==s&&(z=Ns())!==s?b=I=[I,w,D,z]:(h=b,b=s)):(h=b,b=s);g!==s?(K=f,f=v=function(J,oe){return oe.length==0?J:{head:J,type:"diceExpression",ops:oe.map(He=>({type:"math",op:He[1],tail:He[3]}))}}(v,g)):(h=f,f=s)}else h=f,f=s;return f}function Ns(){var f;return(f=Vr())===s&&(f=As()),f}function Vr(){var f,v,g;return f=h,(v=function(){var b,I,w,D,z;if(b=h,(I=function(){var J,oe,He,ne;if(J=h,(oe=function(){var $e,fe,je,Fe;return $e=h,(fe=lt())===s&&(fe=null),fe!==s?(i.charCodeAt(h)===100?(je="d",h++):(je=s,S===0&&x(B)),je!==s?((Fe=function(){var Ge,Ee;return Ge=h,i.charCodeAt(h)===70?(Ee="F",h++):(Ee=s,S===0&&x(Re)),Ee===s&&(i.charCodeAt(h)===102?(Ee="f",h++):(Ee=s,S===0&&x(j))),Ee!==s&&(K=Ge,Ee={type:"fate"}),Ge=Ee}())===s&&(Fe=function(){var Ge,Ee;return Ge=h,i.charCodeAt(h)===37?(Ee="%",h++):(Ee=s,S===0&&x(Ae)),Ee!==s&&(K=Ge,Ee={type:"number",value:"100"}),Ge=Ee}())===s&&(Fe=lt()),Fe!==s?(K=$e,fe={die:Fe,count:fe||{type:"number",value:1},type:"die"},$e=fe):(h=$e,$e=s)):(h=$e,$e=s)):(h=$e,$e=s),$e}())!==s){for(He=[],(ne=jr())===s&&(ne=Br())===s&&(ne=Wr())===s&&(ne=Yr())===s&&(ne=Ur());ne!==s;)He.push(ne),(ne=jr())===s&&(ne=Br())===s&&(ne=Wr())===s&&(ne=Yr())===s&&(ne=Ur());He!==s?(K=J,mt=He,(We=oe).mods=(We.mods||[]).concat(mt),J=oe=We):(h=J,J=s)}else h=J,J=s;var We,mt;return J}())!==s){for(w=[],(D=Hn())===s&&(D=Pn())===s&&(D=In())===s&&(D=Rn())===s&&(D=Fr())===s&&(D=Hr());D!==s;)w.push(D),(D=Hn())===s&&(D=Pn())===s&&(D=In())===s&&(D=Rn())===s&&(D=Fr())===s&&(D=Hr());w!==s?((D=_o())===s&&(D=null),D!==s?((z=function(){var J,oe;return J=h,i.substr(h,2)==="sa"?(oe="sa",h+=2):(oe=s,S===0&&x(ie)),oe!==s&&(K=J,oe={type:"sort",asc:!0}),J=oe}())===s&&(z=function(){var J,oe;return J=h,i.substr(h,2)==="sd"?(oe="sd",h+=2):(oe=s,S===0&&x(ae)),oe!==s&&(K=J,oe={type:"sort",asc:!1}),J=oe}()),z===s&&(z=null),z!==s?(K=b,I=function(J,oe,He,ne){const We=oe.filter(mt=>["success","failure"].includes(mt.type));return oe=oe.filter(mt=>!We.includes(mt)),J.mods=(J.mods||[]).concat(oe),We.length>0&&(J.targets=We),He&&(J.match=He),ne&&(J.sort=ne),J}(I,w,D,z),b=I):(h=b,b=s)):(h=b,b=s)):(h=b,b=s)}else h=b,b=s;return b}())!==s&&se()!==s?((g=Fn())===s&&(g=null),g!==s?(K=f,f=v=A(v,g)):(h=f,f=s)):(h=f,f=s),f}function Wr(){var f,v,g;return f=h,i.charCodeAt(h)===33?(v="!",h++):(v=s,S===0&&x(N)),v!==s?((g=un())===s&&(g=null),g!==s?(K=f,f=v={type:"explode",target:g}):(h=f,f=s)):(h=f,f=s),f}function jr(){var f,v,g;return f=h,i.substr(h,2)==="!!"?(v="!!",h+=2):(v=s,S===0&&x(k)),v!==s?((g=un())===s&&(g=null),g!==s?(K=f,f=v={type:"compound",target:g}):(h=f,f=s)):(h=f,f=s),f}function Br(){var f,v,g;return f=h,i.substr(h,2)==="!p"?(v="!p",h+=2):(v=s,S===0&&x(Y)),v!==s?((g=un())===s&&(g=null),g!==s?(K=f,f=v={type:"penetrate",target:g}):(h=f,f=s)):(h=f,f=s),f}function Ur(){var f,v,g;return f=h,i.charCodeAt(h)===114?(v="r",h++):(v=s,S===0&&x(Ce)),v!==s?((g=un())===s&&(g=null),g!==s?(K=f,f=v={type:"reroll",target:g||Kr}):(h=f,f=s)):(h=f,f=s),f}function Yr(){var f,v,g;return f=h,i.substr(h,2)==="ro"?(v="ro",h+=2):(v=s,S===0&&x(Se)),v!==s?((g=un())===s&&(g=null),g!==s?(K=f,f=v={type:"rerollOnce",target:g||Kr}):(h=f,f=s)):(h=f,f=s),f}function un(){var f,v,g;return f=h,i.charCodeAt(h)===62?(v=">",h++):(v=s,S===0&&x(C)),v===s&&(i.charCodeAt(h)===60?(v="<",h++):(v=s,S===0&&x($)),v===s&&(i.charCodeAt(h)===61?(v="=",h++):(v=s,S===0&&x(M)))),v===s&&(v=null),v!==s&&(g=lt())!==s?(K=f,f=v={type:"target",mod:v,value:g}):(h=f,f=s),f}function lt(){var f;return(f=Ts())===s&&(f=ks()),f}function As(){var f;return(f=function(){var v,g,b,I;return v=h,i.substr(h,2)==="[["?(g="[[",h+=2):(g=s,S===0&&x(_)),g!==s&&(b=As())!==s?(i.substr(h,2)==="]]"?(I="]]",h+=2):(I=s,S===0&&x(E)),I!==s?(K=v,v=g={type:"inline",expr:b}):(h=v,v=s)):(h=v,v=s),v}())===s&&(f=Cs())===s&&(f=Ts()),f}function Ts(){var f,v,g,b,I,w,D;return f=h,i.charCodeAt(h)===40?(v="(",h++):(v=s,S===0&&x(ve)),v!==s&&(g=Cs())!==s?(i.charCodeAt(h)===41?(b=")",h++):(b=s,S===0&&x(xe)),b!==s&&se()!==s?((I=Fn())===s&&(I=null),I!==s?(K=f,w=g,(D=I)&&(w.label=D),f=v=w):(h=f,f=s)):(h=f,f=s)):(h=f,f=s),f}function Cs(){var f,v,g,b,I,w,D,z;if(f=h,(v=ws())!==s){for(g=[],b=h,(I=se())!==s?(i.charCodeAt(h)===43?(w="+",h++):(w=s,S===0&&x(he)),w===s&&(i.charCodeAt(h)===45?(w="-",h++):(w=s,S===0&&x(Te))),w!==s&&(D=se())!==s&&(z=ws())!==s?b=I=[I,w,D,z]:(h=b,b=s)):(h=b,b=s);b!==s;)g.push(b),b=h,(I=se())!==s?(i.charCodeAt(h)===43?(w="+",h++):(w=s,S===0&&x(he)),w===s&&(i.charCodeAt(h)===45?(w="-",h++):(w=s,S===0&&x(Te))),w!==s&&(D=se())!==s&&(z=ws())!==s?b=I=[I,w,D,z]:(h=b,b=s)):(h=b,b=s);g!==s?(K=f,f=v=be(v,g)):(h=f,f=s)}else h=f,f=s;return f}function ws(){var f,v,g,b,I,w,D,z;if(f=h,(v=Ss())!==s){for(g=[],b=h,(I=se())!==s?(i.charCodeAt(h)===42?(w="*",h++):(w=s,S===0&&x(pe)),w===s&&(i.charCodeAt(h)===47?(w="/",h++):(w=s,S===0&&x(tt))),w!==s&&(D=se())!==s&&(z=Ss())!==s?b=I=[I,w,D,z]:(h=b,b=s)):(h=b,b=s);b!==s;)g.push(b),b=h,(I=se())!==s?(i.charCodeAt(h)===42?(w="*",h++):(w=s,S===0&&x(pe)),w===s&&(i.charCodeAt(h)===47?(w="/",h++):(w=s,S===0&&x(tt))),w!==s&&(D=se())!==s&&(z=Ss())!==s?b=I=[I,w,D,z]:(h=b,b=s)):(h=b,b=s);g!==s?(K=f,f=v=be(v,g)):(h=f,f=s)}else h=f,f=s;return f}function Ss(){var f,v,g,b,I,w,D,z;if(f=h,(v=xs())!==s){for(g=[],b=h,(I=se())!==s?(i.substr(h,2)==="**"?(w="**",h+=2):(w=s,S===0&&x(ke)),w===s&&(i.charCodeAt(h)===37?(w="%",h++):(w=s,S===0&&x(Ae))),w!==s&&(D=se())!==s&&(z=xs())!==s?b=I=[I,w,D,z]:(h=b,b=s)):(h=b,b=s);b!==s;)g.push(b),b=h,(I=se())!==s?(i.substr(h,2)==="**"?(w="**",h+=2):(w=s,S===0&&x(ke)),w===s&&(i.charCodeAt(h)===37?(w="%",h++):(w=s,S===0&&x(Ae))),w!==s&&(D=se())!==s&&(z=xs())!==s?b=I=[I,w,D,z]:(h=b,b=s)):(h=b,b=s);g!==s?(K=f,f=v=be(v,g)):(h=f,f=s)}else h=f,f=s;return f}function go(){var f,v,g,b,I;return f=h,(v=function(){var w;return i.substr(h,5)==="floor"?(w="floor",h+=5):(w=s,S===0&&x(nt)),w===s&&(i.substr(h,4)==="ceil"?(w="ceil",h+=4):(w=s,S===0&&x(at)),w===s&&(i.substr(h,5)==="round"?(w="round",h+=5):(w=s,S===0&&x(y)),w===s&&(i.substr(h,3)==="abs"?(w="abs",h+=3):(w=s,S===0&&x(V))))),w}())!==s&&se()!==s?(i.charCodeAt(h)===40?(g="(",h++):(g=s,S===0&&x(ve)),g!==s&&se()!==s&&(b=Cs())!==s&&se()!==s?(i.charCodeAt(h)===41?(I=")",h++):(I=s,S===0&&x(xe)),I!==s?(K=f,f=v={type:"mathfunction",op:v,expr:b}):(h=f,f=s)):(h=f,f=s)):(h=f,f=s),f}function xs(){var f;return(f=go())===s&&(f=mo())===s&&(f=Ts()),f}function ks(){var f,v,g,b;if(S++,f=h,i.charCodeAt(h)===45?(v="-",h++):(v=s,S===0&&x(Te)),v===s&&(v=null),v!==s){if(g=[],ee.test(i.charAt(h))?(b=i.charAt(h),h++):(b=s,S===0&&x(ye)),b!==s)for(;b!==s;)g.push(b),ee.test(i.charAt(h))?(b=i.charAt(h),h++):(b=s,S===0&&x(ye));else g=s;g!==s?(K=f,f=v=P()):(h=f,f=s)}else h=f,f=s;return S--,f===s&&(v=s,S===0&&x(O)),f}function Fn(){var f,v,g,b;if(f=h,i.charCodeAt(h)===91?(v="[",h++):(v=s,S===0&&x(ce)),v!==s){if(g=[],de.test(i.charAt(h))?(b=i.charAt(h),h++):(b=s,S===0&&x(Pe)),b!==s)for(;b!==s;)g.push(b),de.test(i.charAt(h))?(b=i.charAt(h),h++):(b=s,S===0&&x(Pe));else g=s;g!==s?(i.charCodeAt(h)===93?(b="]",h++):(b=s,S===0&&x(pt)),b!==s?(K=f,f=v=g.join("")):(h=f,f=s)):(h=f,f=s)}else h=f,f=s;return f}function se(){var f,v;for(S++,f=[],At.test(i.charAt(h))?(v=i.charAt(h),h++):(v=s,S===0&&x(Oe));v!==s;)f.push(v),At.test(i.charAt(h))?(v=i.charAt(h),h++):(v=s,S===0&&x(Oe));return S--,f===s&&(v=s,S===0&&x(Nt)),f}const Kr={type:"target",mod:"=",value:{type:"number",value:1}},qr={type:"number",value:1};if((d=p())!==s&&h===i.length)return d;throw d!==s&&h<i.length&&x({type:"end"}),po(bs,ot<i.length?i.charAt(ot):null,ot<i.length?Rr(ot,ot+1):Rr(ot,ot))}}},function(t,r,c){Object.defineProperty(r,"__esModule",{value:!0}),r.DiscordRollRenderer=class{render(o){return this.doRender(o,!0)}doRender(o,i=!1){let l="";switch(o.type){case"diceexpressionroll":l=this.renderGroupExpr(o);break;case"grouproll":l=this.renderGroup(o);break;case"die":l=this.renderDie(o);break;case"expressionroll":l=this.renderExpression(o);break;case"mathfunction":l=this.renderFunction(o);break;case"roll":return this.renderRoll(o);case"fateroll":return this.renderFateRoll(o);case"number":const d=o.label?` (${o.label})`:"";return`${o.value}${d}`;case"fate":return"F";default:throw new Error("Unable to render")}return o.valid||(l="~~"+l.replace(/~~/g,"")+"~~"),i?this.stripBrackets(l):o.label?`(${o.label}: ${l})`:l}renderGroup(o){const i=[];for(const l of o.dice)i.push(this.doRender(l));return i.length>1?`{ ${i.join(" + ")} } = ${o.value}`:`{ ${this.stripBrackets(i[0])} } = ${o.value}`}renderGroupExpr(o){const i=[];for(const l of o.dice)i.push(this.doRender(l));return i.length>1?`(${i.join(" + ")} = ${o.value})`:i[0]}renderDie(o){const i=[];for(const s of o.rolls)i.push(this.doRender(s));let l=`${i.join(", ")}`;["number","fate"].includes(o.die.type)&&o.count.type==="number"||(l+=`[*Rolling: ${this.doRender(o.count)}d${this.doRender(o.die)}*]`);const d=o.matched?` Match${o.value===1?"":"es"}`:"";return l+=` = ${o.value}${d}`,`(${l})`}renderExpression(o){if(o.dice.length>1){const i=[];for(let l=0;l<o.dice.length-1;l++)i.push(this.doRender(o.dice[l])),i.push(o.ops[l]);return i.push(this.doRender(o.dice.slice(-1)[0])),i.push("="),i.push(o.value+""),`(${i.join(" ")})`}return o.dice[0].type==="number"?o.value+"":this.doRender(o.dice[0])}renderFunction(o){const i=this.doRender(o.expr);return`(${o.op}${this.addBrackets(i)} = ${o.value})`}addBrackets(o){return o.startsWith("(")||(o=`(${o}`),o.endsWith(")")||(o=`${o})`),o}stripBrackets(o){return o.startsWith("(")&&(o=o.substring(1)),o.endsWith(")")&&(o=o.substring(0,o.length-1)),o}renderRoll(o){let i=`${o.roll}`;return o.valid?o.success&&o.value===1?i=`**${o.roll}**`:o.success&&o.value===-1?i=`*${o.roll}*`:o.success||o.critical!=="success"?o.success||o.critical!=="failure"||(i=`*${o.roll}*`):i=`**${o.roll}**`:i=`~~${o.roll}~~`,o.matched&&(i=`__${i}__`),i}renderFateRoll(o){const i=o.roll===0?"0":o.roll>0?"+":"-";let l=`${o.roll}`;return o.valid?o.success&&o.value===1?l=`**${i}**`:o.success&&o.value===-1&&(l=`*${i}*`):l=`~~${i}~~`,o.matched&&(l=`__${l}__`),l}}}])})}(Zn)),Zn.exports}var Yo=Uo();function mr(n){return String(n).charAt(0).toUpperCase()+String(n).slice(1)}const gn="/requiem-pathfinder-preact/",Ct=16,Ds=4,Ko=35,di=10,ui=15,as=(n,e)=>Math.floor(Math.floor(n*e)/5),_t=(n,e)=>{const t=n.find(r=>r.isLinked&&r.linkedStat===e);return t?as(t.quantity,t.rank):0},Qt=(n,e,t,r=!1)=>e.replace(/\[(\w+)\]/g,(c,o)=>{const i=t[o]||0,l=_t(n,o),d=i+l;return r?mr(d.toString()):`${d}[${o}]`}),qo=n=>{const e=[];return n.name||e.push("Spell name is required"),n.quantity<0&&e.push("Quantity must be 0 or higher"),n.quantity>Ct&&e.push("Quantity over maximum stack limit"),n.power<=0&&e.push("Spell level must be greater than 0"),n.dice||e.push("Damage roll is required"),e},es=(n,e)=>{if(!n)return{isValid:!1,error:"A valid dice roll is required."};try{const t=n.replace(/\[\w+\]/g,"0");new Yo.DiceRoller().roll(t);const c=(n.match(/\[(\w+)\]/g)||[]).map(o=>o.slice(1,-1)).filter(o=>e[o]===void 0);return c.length>0?{isValid:!1,error:`Unknown stats: ${c.join(", ")}`}:{isValid:!0,error:null}}catch{return{isValid:!1,error:"Invalid dice format. Use format like '1d6+[spellAttackModifier]' or '2d8+3'"}}};var Le="top",Ye="bottom",Ke="right",Ie="left",us="auto",ln=[Le,Ye,Ke,Ie],Ft="start",Zt="end",ha="clippingParents",_r="viewport",Kt="popper",fa="reference",er=ln.reduce(function(n,e){return n.concat([e+"-"+Ft,e+"-"+Zt])},[]),gr=[].concat(ln,[us]).reduce(function(n,e){return n.concat([e,e+"-"+Ft,e+"-"+Zt])},[]),pa="beforeRead",ma="read",_a="afterRead",ga="beforeMain",va="main",ba="afterMain",ya="beforeWrite",Ea="write",Na="afterWrite",Aa=[pa,ma,_a,ga,va,ba,ya,Ea,Na];function ht(n){return n?(n.nodeName||"").toLowerCase():null}function qe(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function Vt(n){var e=qe(n).Element;return n instanceof e||n instanceof Element}function Xe(n){var e=qe(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function vr(n){if(typeof ShadowRoot>"u")return!1;var e=qe(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function zo(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},c=e.attributes[t]||{},o=e.elements[t];!Xe(o)||!ht(o)||(Object.assign(o.style,r),Object.keys(c).forEach(function(i){var l=c[i];l===!1?o.removeAttribute(i):o.setAttribute(i,l===!0?"":l)}))})}function Go(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var c=e.elements[r],o=e.attributes[r]||{},i=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]),l=i.reduce(function(d,s){return d[s]="",d},{});!Xe(c)||!ht(c)||(Object.assign(c.style,l),Object.keys(o).forEach(function(d){c.removeAttribute(d)}))})}}const br={name:"applyStyles",enabled:!0,phase:"write",fn:zo,effect:Go,requires:["computeStyles"]};function dt(n){return n.split("-")[0]}var Pt=Math.max,os=Math.min,en=Math.round;function tr(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Ta(){return!/^((?!chrome|android).)*safari/i.test(tr())}function tn(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var r=n.getBoundingClientRect(),c=1,o=1;e&&Xe(n)&&(c=n.offsetWidth>0&&en(r.width)/n.offsetWidth||1,o=n.offsetHeight>0&&en(r.height)/n.offsetHeight||1);var i=Vt(n)?qe(n):window,l=i.visualViewport,d=!Ta()&&t,s=(r.left+(d&&l?l.offsetLeft:0))/c,u=(r.top+(d&&l?l.offsetTop:0))/o,p=r.width/c,m=r.height/o;return{width:p,height:m,top:u,right:s+p,bottom:u+m,left:s,x:s,y:u}}function yr(n){var e=tn(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}function Ca(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&vr(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function bt(n){return qe(n).getComputedStyle(n)}function Qo(n){return["table","td","th"].indexOf(ht(n))>=0}function kt(n){return((Vt(n)?n.ownerDocument:n.document)||window.document).documentElement}function hs(n){return ht(n)==="html"?n:n.assignedSlot||n.parentNode||(vr(n)?n.host:null)||kt(n)}function hi(n){return!Xe(n)||bt(n).position==="fixed"?null:n.offsetParent}function Xo(n){var e=/firefox/i.test(tr()),t=/Trident/i.test(tr());if(t&&Xe(n)){var r=bt(n);if(r.position==="fixed")return null}var c=hs(n);for(vr(c)&&(c=c.host);Xe(c)&&["html","body"].indexOf(ht(c))<0;){var o=bt(c);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return c;c=c.parentNode}return null}function xn(n){for(var e=qe(n),t=hi(n);t&&Qo(t)&&bt(t).position==="static";)t=hi(t);return t&&(ht(t)==="html"||ht(t)==="body"&&bt(t).position==="static")?e:t||Xo(n)||e}function Er(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function vn(n,e,t){return Pt(n,os(e,t))}function Jo(n,e,t){var r=vn(n,e,t);return r>t?t:r}function wa(){return{top:0,right:0,bottom:0,left:0}}function Sa(n){return Object.assign({},wa(),n)}function xa(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}var Zo=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,Sa(typeof e!="number"?e:xa(e,ln))};function el(n){var e,t=n.state,r=n.name,c=n.options,o=t.elements.arrow,i=t.modifiersData.popperOffsets,l=dt(t.placement),d=Er(l),s=[Ie,Ke].indexOf(l)>=0,u=s?"height":"width";if(!(!o||!i)){var p=Zo(c.padding,t),m=yr(o),_=d==="y"?Le:Ie,E=d==="y"?Ye:Ke,A=t.rects.reference[u]+t.rects.reference[d]-i[d]-t.rects.popper[u],C=i[d]-t.rects.reference[d],$=xn(o),M=$?d==="y"?$.clientHeight||0:$.clientWidth||0:0,j=A/2-C/2,L=p[_],W=M-m[u]-p[E],U=M/2-m[u]/2+j,Q=vn(L,U,W),X=d;t.modifiersData[r]=(e={},e[X]=Q,e.centerOffset=Q-U,e)}}function tl(n){var e=n.state,t=n.options,r=t.element,c=r===void 0?"[data-popper-arrow]":r;c!=null&&(typeof c=="string"&&(c=e.elements.popper.querySelector(c),!c)||Ca(e.elements.popper,c)&&(e.elements.arrow=c))}const ka={name:"arrow",enabled:!0,phase:"main",fn:el,effect:tl,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function nn(n){return n.split("-")[1]}var nl={top:"auto",right:"auto",bottom:"auto",left:"auto"};function sl(n,e){var t=n.x,r=n.y,c=e.devicePixelRatio||1;return{x:en(t*c)/c||0,y:en(r*c)/c||0}}function fi(n){var e,t=n.popper,r=n.popperRect,c=n.placement,o=n.variation,i=n.offsets,l=n.position,d=n.gpuAcceleration,s=n.adaptive,u=n.roundOffsets,p=n.isFixed,m=i.x,_=m===void 0?0:m,E=i.y,A=E===void 0?0:E,C=typeof u=="function"?u({x:_,y:A}):{x:_,y:A};_=C.x,A=C.y;var $=i.hasOwnProperty("x"),M=i.hasOwnProperty("y"),j=Ie,L=Le,W=window;if(s){var U=xn(t),Q="clientHeight",X="clientWidth";if(U===qe(t)&&(U=kt(t),bt(U).position!=="static"&&l==="absolute"&&(Q="scrollHeight",X="scrollWidth")),U=U,c===Le||(c===Ie||c===Ke)&&o===Zt){L=Ye;var R=p&&U===W&&W.visualViewport?W.visualViewport.height:U[Q];A-=R-r.height,A*=d?1:-1}if(c===Ie||(c===Le||c===Ye)&&o===Zt){j=Ke;var F=p&&U===W&&W.visualViewport?W.visualViewport.width:U[X];_-=F-r.width,_*=d?1:-1}}var B=Object.assign({position:l},s&&nl),Z=u===!0?sl({x:_,y:A},qe(t)):{x:_,y:A};if(_=Z.x,A=Z.y,d){var le;return Object.assign({},B,(le={},le[L]=M?"0":"",le[j]=$?"0":"",le.transform=(W.devicePixelRatio||1)<=1?"translate("+_+"px, "+A+"px)":"translate3d("+_+"px, "+A+"px, 0)",le))}return Object.assign({},B,(e={},e[L]=M?A+"px":"",e[j]=$?_+"px":"",e.transform="",e))}function rl(n){var e=n.state,t=n.options,r=t.gpuAcceleration,c=r===void 0?!0:r,o=t.adaptive,i=o===void 0?!0:o,l=t.roundOffsets,d=l===void 0?!0:l,s={placement:dt(e.placement),variation:nn(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:c,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,fi(Object.assign({},s,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:i,roundOffsets:d})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,fi(Object.assign({},s,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Nr={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:rl,data:{}};var Un={passive:!0};function il(n){var e=n.state,t=n.instance,r=n.options,c=r.scroll,o=c===void 0?!0:c,i=r.resize,l=i===void 0?!0:i,d=qe(e.elements.popper),s=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&s.forEach(function(u){u.addEventListener("scroll",t.update,Un)}),l&&d.addEventListener("resize",t.update,Un),function(){o&&s.forEach(function(u){u.removeEventListener("scroll",t.update,Un)}),l&&d.removeEventListener("resize",t.update,Un)}}const Ar={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:il,data:{}};var al={left:"right",right:"left",bottom:"top",top:"bottom"};function ts(n){return n.replace(/left|right|bottom|top/g,function(e){return al[e]})}var ol={start:"end",end:"start"};function pi(n){return n.replace(/start|end/g,function(e){return ol[e]})}function Tr(n){var e=qe(n),t=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:t,scrollTop:r}}function Cr(n){return tn(kt(n)).left+Tr(n).scrollLeft}function ll(n,e){var t=qe(n),r=kt(n),c=t.visualViewport,o=r.clientWidth,i=r.clientHeight,l=0,d=0;if(c){o=c.width,i=c.height;var s=Ta();(s||!s&&e==="fixed")&&(l=c.offsetLeft,d=c.offsetTop)}return{width:o,height:i,x:l+Cr(n),y:d}}function cl(n){var e,t=kt(n),r=Tr(n),c=(e=n.ownerDocument)==null?void 0:e.body,o=Pt(t.scrollWidth,t.clientWidth,c?c.scrollWidth:0,c?c.clientWidth:0),i=Pt(t.scrollHeight,t.clientHeight,c?c.scrollHeight:0,c?c.clientHeight:0),l=-r.scrollLeft+Cr(n),d=-r.scrollTop;return bt(c||t).direction==="rtl"&&(l+=Pt(t.clientWidth,c?c.clientWidth:0)-o),{width:o,height:i,x:l,y:d}}function wr(n){var e=bt(n),t=e.overflow,r=e.overflowX,c=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+c+r)}function Oa(n){return["html","body","#document"].indexOf(ht(n))>=0?n.ownerDocument.body:Xe(n)&&wr(n)?n:Oa(hs(n))}function bn(n,e){var t;e===void 0&&(e=[]);var r=Oa(n),c=r===((t=n.ownerDocument)==null?void 0:t.body),o=qe(r),i=c?[o].concat(o.visualViewport||[],wr(r)?r:[]):r,l=e.concat(i);return c?l:l.concat(bn(hs(i)))}function nr(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function dl(n,e){var t=tn(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function mi(n,e,t){return e===_r?nr(ll(n,t)):Vt(e)?dl(e,t):nr(cl(kt(n)))}function ul(n){var e=bn(hs(n)),t=["absolute","fixed"].indexOf(bt(n).position)>=0,r=t&&Xe(n)?xn(n):n;return Vt(r)?e.filter(function(c){return Vt(c)&&Ca(c,r)&&ht(c)!=="body"}):[]}function hl(n,e,t,r){var c=e==="clippingParents"?ul(n):[].concat(e),o=[].concat(c,[t]),i=o[0],l=o.reduce(function(d,s){var u=mi(n,s,r);return d.top=Pt(u.top,d.top),d.right=os(u.right,d.right),d.bottom=os(u.bottom,d.bottom),d.left=Pt(u.left,d.left),d},mi(n,i,r));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function $a(n){var e=n.reference,t=n.element,r=n.placement,c=r?dt(r):null,o=r?nn(r):null,i=e.x+e.width/2-t.width/2,l=e.y+e.height/2-t.height/2,d;switch(c){case Le:d={x:i,y:e.y-t.height};break;case Ye:d={x:i,y:e.y+e.height};break;case Ke:d={x:e.x+e.width,y:l};break;case Ie:d={x:e.x-t.width,y:l};break;default:d={x:e.x,y:e.y}}var s=c?Er(c):null;if(s!=null){var u=s==="y"?"height":"width";switch(o){case Ft:d[s]=d[s]-(e[u]/2-t[u]/2);break;case Zt:d[s]=d[s]+(e[u]/2-t[u]/2);break}}return d}function sn(n,e){e===void 0&&(e={});var t=e,r=t.placement,c=r===void 0?n.placement:r,o=t.strategy,i=o===void 0?n.strategy:o,l=t.boundary,d=l===void 0?ha:l,s=t.rootBoundary,u=s===void 0?_r:s,p=t.elementContext,m=p===void 0?Kt:p,_=t.altBoundary,E=_===void 0?!1:_,A=t.padding,C=A===void 0?0:A,$=Sa(typeof C!="number"?C:xa(C,ln)),M=m===Kt?fa:Kt,j=n.rects.popper,L=n.elements[E?M:m],W=hl(Vt(L)?L:L.contextElement||kt(n.elements.popper),d,u,i),U=tn(n.elements.reference),Q=$a({reference:U,element:j,placement:c}),X=nr(Object.assign({},j,Q)),R=m===Kt?X:U,F={top:W.top-R.top+$.top,bottom:R.bottom-W.bottom+$.bottom,left:W.left-R.left+$.left,right:R.right-W.right+$.right},B=n.modifiersData.offset;if(m===Kt&&B){var Z=B[c];Object.keys(F).forEach(function(le){var Ne=[Ke,Ye].indexOf(le)>=0?1:-1,he=[Le,Ye].indexOf(le)>=0?"y":"x";F[le]+=Z[he]*Ne})}return F}function fl(n,e){e===void 0&&(e={});var t=e,r=t.placement,c=t.boundary,o=t.rootBoundary,i=t.padding,l=t.flipVariations,d=t.allowedAutoPlacements,s=d===void 0?gr:d,u=nn(r),p=u?l?er:er.filter(function(E){return nn(E)===u}):ln,m=p.filter(function(E){return s.indexOf(E)>=0});m.length===0&&(m=p);var _=m.reduce(function(E,A){return E[A]=sn(n,{placement:A,boundary:c,rootBoundary:o,padding:i})[dt(A)],E},{});return Object.keys(_).sort(function(E,A){return _[E]-_[A]})}function pl(n){if(dt(n)===us)return[];var e=ts(n);return[pi(n),e,pi(e)]}function ml(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var c=t.mainAxis,o=c===void 0?!0:c,i=t.altAxis,l=i===void 0?!0:i,d=t.fallbackPlacements,s=t.padding,u=t.boundary,p=t.rootBoundary,m=t.altBoundary,_=t.flipVariations,E=_===void 0?!0:_,A=t.allowedAutoPlacements,C=e.options.placement,$=dt(C),M=$===C,j=d||(M||!E?[ts(C)]:pl(C)),L=[C].concat(j).reduce(function(Ae,ve){return Ae.concat(dt(ve)===us?fl(e,{placement:ve,boundary:u,rootBoundary:p,padding:s,flipVariations:E,allowedAutoPlacements:A}):ve)},[]),W=e.rects.reference,U=e.rects.popper,Q=new Map,X=!0,R=L[0],F=0;F<L.length;F++){var B=L[F],Z=dt(B),le=nn(B)===Ft,Ne=[Le,Ye].indexOf(Z)>=0,he=Ne?"width":"height",ie=sn(e,{placement:B,boundary:u,rootBoundary:p,altBoundary:m,padding:s}),ae=Ne?le?Ke:Ie:le?Ye:Le;W[he]>U[he]&&(ae=ts(ae));var N=ts(ae),k=[];if(o&&k.push(ie[Z]<=0),l&&k.push(ie[ae]<=0,ie[N]<=0),k.every(function(Ae){return Ae})){R=B,X=!1;break}Q.set(B,k)}if(X)for(var Y=E?3:1,Ce=function(ve){var xe=L.find(function(Te){var be=Q.get(Te);if(be)return be.slice(0,ve).every(function(pe){return pe})});if(xe)return R=xe,"break"},Se=Y;Se>0;Se--){var Re=Ce(Se);if(Re==="break")break}e.placement!==R&&(e.modifiersData[r]._skip=!0,e.placement=R,e.reset=!0)}}const Ma={name:"flip",enabled:!0,phase:"main",fn:ml,requiresIfExists:["offset"],data:{_skip:!1}};function _i(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function gi(n){return[Le,Ke,Ye,Ie].some(function(e){return n[e]>=0})}function _l(n){var e=n.state,t=n.name,r=e.rects.reference,c=e.rects.popper,o=e.modifiersData.preventOverflow,i=sn(e,{elementContext:"reference"}),l=sn(e,{altBoundary:!0}),d=_i(i,r),s=_i(l,c,o),u=gi(d),p=gi(s);e.modifiersData[t]={referenceClippingOffsets:d,popperEscapeOffsets:s,isReferenceHidden:u,hasPopperEscaped:p},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":p})}const Da={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:_l};function gl(n,e,t){var r=dt(n),c=[Ie,Le].indexOf(r)>=0?-1:1,o=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,i=o[0],l=o[1];return i=i||0,l=(l||0)*c,[Ie,Ke].indexOf(r)>=0?{x:l,y:i}:{x:i,y:l}}function vl(n){var e=n.state,t=n.options,r=n.name,c=t.offset,o=c===void 0?[0,0]:c,i=gr.reduce(function(u,p){return u[p]=gl(p,e.rects,o),u},{}),l=i[e.placement],d=l.x,s=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=d,e.modifiersData.popperOffsets.y+=s),e.modifiersData[r]=i}const La={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:vl};function bl(n){var e=n.state,t=n.name;e.modifiersData[t]=$a({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const Sr={name:"popperOffsets",enabled:!0,phase:"read",fn:bl,data:{}};function yl(n){return n==="x"?"y":"x"}function El(n){var e=n.state,t=n.options,r=n.name,c=t.mainAxis,o=c===void 0?!0:c,i=t.altAxis,l=i===void 0?!1:i,d=t.boundary,s=t.rootBoundary,u=t.altBoundary,p=t.padding,m=t.tether,_=m===void 0?!0:m,E=t.tetherOffset,A=E===void 0?0:E,C=sn(e,{boundary:d,rootBoundary:s,padding:p,altBoundary:u}),$=dt(e.placement),M=nn(e.placement),j=!M,L=Er($),W=yl(L),U=e.modifiersData.popperOffsets,Q=e.rects.reference,X=e.rects.popper,R=typeof A=="function"?A(Object.assign({},e.rects,{placement:e.placement})):A,F=typeof R=="number"?{mainAxis:R,altAxis:R}:Object.assign({mainAxis:0,altAxis:0},R),B=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,Z={x:0,y:0};if(U){if(o){var le,Ne=L==="y"?Le:Ie,he=L==="y"?Ye:Ke,ie=L==="y"?"height":"width",ae=U[L],N=ae+C[Ne],k=ae-C[he],Y=_?-X[ie]/2:0,Ce=M===Ft?Q[ie]:X[ie],Se=M===Ft?-X[ie]:-Q[ie],Re=e.elements.arrow,Ae=_&&Re?yr(Re):{width:0,height:0},ve=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:wa(),xe=ve[Ne],Te=ve[he],be=vn(0,Q[ie],Ae[ie]),pe=j?Q[ie]/2-Y-be-xe-F.mainAxis:Ce-be-xe-F.mainAxis,tt=j?-Q[ie]/2+Y+be+Te+F.mainAxis:Se+be+Te+F.mainAxis,ke=e.elements.arrow&&xn(e.elements.arrow),nt=ke?L==="y"?ke.clientTop||0:ke.clientLeft||0:0,at=(le=B==null?void 0:B[L])!=null?le:0,y=ae+pe-at-nt,V=ae+tt-at,O=vn(_?os(N,y):N,ae,_?Pt(k,V):k);U[L]=O,Z[L]=O-ae}if(l){var ee,ye=L==="x"?Le:Ie,P=L==="x"?Ye:Ke,ce=U[W],de=W==="y"?"height":"width",Pe=ce+C[ye],pt=ce-C[P],Nt=[Le,Ie].indexOf($)!==-1,At=(ee=B==null?void 0:B[W])!=null?ee:0,Oe=Nt?Pe:ce-Q[de]-X[de]-At+F.altAxis,h=Nt?ce+Q[de]+X[de]-At-F.altAxis:pt,K=_&&Nt?Jo(Oe,ce,h):vn(_?Oe:Pe,ce,_?h:pt);U[W]=K,Z[W]=K-ce}e.modifiersData[r]=Z}}const Ia={name:"preventOverflow",enabled:!0,phase:"main",fn:El,requiresIfExists:["offset"]};function Nl(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function Al(n){return n===qe(n)||!Xe(n)?Tr(n):Nl(n)}function Tl(n){var e=n.getBoundingClientRect(),t=en(e.width)/n.offsetWidth||1,r=en(e.height)/n.offsetHeight||1;return t!==1||r!==1}function Cl(n,e,t){t===void 0&&(t=!1);var r=Xe(e),c=Xe(e)&&Tl(e),o=kt(e),i=tn(n,c,t),l={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(r||!r&&!t)&&((ht(e)!=="body"||wr(o))&&(l=Al(e)),Xe(e)?(d=tn(e,!0),d.x+=e.clientLeft,d.y+=e.clientTop):o&&(d.x=Cr(o))),{x:i.left+l.scrollLeft-d.x,y:i.top+l.scrollTop-d.y,width:i.width,height:i.height}}function wl(n){var e=new Map,t=new Set,r=[];n.forEach(function(o){e.set(o.name,o)});function c(o){t.add(o.name);var i=[].concat(o.requires||[],o.requiresIfExists||[]);i.forEach(function(l){if(!t.has(l)){var d=e.get(l);d&&c(d)}}),r.push(o)}return n.forEach(function(o){t.has(o.name)||c(o)}),r}function Sl(n){var e=wl(n);return Aa.reduce(function(t,r){return t.concat(e.filter(function(c){return c.phase===r}))},[])}function xl(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function kl(n){var e=n.reduce(function(t,r){var c=t[r.name];return t[r.name]=c?Object.assign({},c,r,{options:Object.assign({},c.options,r.options),data:Object.assign({},c.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}var vi={placement:"bottom",modifiers:[],strategy:"absolute"};function bi(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function fs(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,r=t===void 0?[]:t,c=e.defaultOptions,o=c===void 0?vi:c;return function(l,d,s){s===void 0&&(s=o);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},vi,o),modifiersData:{},elements:{reference:l,popper:d},attributes:{},styles:{}},p=[],m=!1,_={state:u,setOptions:function($){var M=typeof $=="function"?$(u.options):$;A(),u.options=Object.assign({},o,u.options,M),u.scrollParents={reference:Vt(l)?bn(l):l.contextElement?bn(l.contextElement):[],popper:bn(d)};var j=Sl(kl([].concat(r,u.options.modifiers)));return u.orderedModifiers=j.filter(function(L){return L.enabled}),E(),_.update()},forceUpdate:function(){if(!m){var $=u.elements,M=$.reference,j=$.popper;if(bi(M,j)){u.rects={reference:Cl(M,xn(j),u.options.strategy==="fixed"),popper:yr(j)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(F){return u.modifiersData[F.name]=Object.assign({},F.data)});for(var L=0;L<u.orderedModifiers.length;L++){if(u.reset===!0){u.reset=!1,L=-1;continue}var W=u.orderedModifiers[L],U=W.fn,Q=W.options,X=Q===void 0?{}:Q,R=W.name;typeof U=="function"&&(u=U({state:u,options:X,name:R,instance:_})||u)}}}},update:xl(function(){return new Promise(function(C){_.forceUpdate(),C(u)})}),destroy:function(){A(),m=!0}};if(!bi(l,d))return _;_.setOptions(s).then(function(C){!m&&s.onFirstUpdate&&s.onFirstUpdate(C)});function E(){u.orderedModifiers.forEach(function(C){var $=C.name,M=C.options,j=M===void 0?{}:M,L=C.effect;if(typeof L=="function"){var W=L({state:u,name:$,instance:_,options:j}),U=function(){};p.push(W||U)}})}function A(){p.forEach(function(C){return C()}),p=[]}return _}}var Ol=fs(),$l=[Ar,Sr,Nr,br],Ml=fs({defaultModifiers:$l}),Dl=[Ar,Sr,Nr,br,La,Ma,Ia,ka,Da],xr=fs({defaultModifiers:Dl});const Ra=Object.freeze(Object.defineProperty({__proto__:null,afterMain:ba,afterRead:_a,afterWrite:Na,applyStyles:br,arrow:ka,auto:us,basePlacements:ln,beforeMain:ga,beforeRead:pa,beforeWrite:ya,bottom:Ye,clippingParents:ha,computeStyles:Nr,createPopper:xr,createPopperBase:Ol,createPopperLite:Ml,detectOverflow:sn,end:Zt,eventListeners:Ar,flip:Ma,hide:Da,left:Ie,main:va,modifierPhases:Aa,offset:La,placements:gr,popper:Kt,popperGenerator:fs,popperOffsets:Sr,preventOverflow:Ia,read:ma,reference:fa,right:Ke,start:Ft,top:Le,variationPlacements:er,viewport:_r,write:Ea},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.6 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Tt=new Map,Ls={set(n,e,t){Tt.has(n)||Tt.set(n,new Map);const r=Tt.get(n);if(!r.has(e)&&r.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`);return}r.set(e,t)},get(n,e){return Tt.has(n)&&Tt.get(n).get(e)||null},remove(n,e){if(!Tt.has(n))return;const t=Tt.get(n);t.delete(e),t.size===0&&Tt.delete(n)}},Ll=1e6,Il=1e3,sr="transitionend",Pa=n=>(n&&window.CSS&&window.CSS.escape&&(n=n.replace(/#([^\s"#']+)/g,(e,t)=>`#${CSS.escape(t)}`)),n),Rl=n=>n==null?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase(),Pl=n=>{do n+=Math.floor(Math.random()*Ll);while(document.getElementById(n));return n},Hl=n=>{if(!n)return 0;let{transitionDuration:e,transitionDelay:t}=window.getComputedStyle(n);const r=Number.parseFloat(e),c=Number.parseFloat(t);return!r&&!c?0:(e=e.split(",")[0],t=t.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(t))*Il)},Ha=n=>{n.dispatchEvent(new Event(sr))},gt=n=>!n||typeof n!="object"?!1:(typeof n.jquery<"u"&&(n=n[0]),typeof n.nodeType<"u"),wt=n=>gt(n)?n.jquery?n[0]:n:typeof n=="string"&&n.length>0?document.querySelector(Pa(n)):null,cn=n=>{if(!gt(n)||n.getClientRects().length===0)return!1;const e=getComputedStyle(n).getPropertyValue("visibility")==="visible",t=n.closest("details:not([open])");if(!t)return e;if(t!==n){const r=n.closest("summary");if(r&&r.parentNode!==t||r===null)return!1}return e},St=n=>!n||n.nodeType!==Node.ELEMENT_NODE||n.classList.contains("disabled")?!0:typeof n.disabled<"u"?n.disabled:n.hasAttribute("disabled")&&n.getAttribute("disabled")!=="false",Fa=n=>{if(!document.documentElement.attachShadow)return null;if(typeof n.getRootNode=="function"){const e=n.getRootNode();return e instanceof ShadowRoot?e:null}return n instanceof ShadowRoot?n:n.parentNode?Fa(n.parentNode):null},ls=()=>{},kn=n=>{n.offsetHeight},Va=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Is=[],Fl=n=>{document.readyState==="loading"?(Is.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of Is)e()}),Is.push(n)):n()},Je=()=>document.documentElement.dir==="rtl",et=n=>{Fl(()=>{const e=Va();if(e){const t=n.NAME,r=e.fn[t];e.fn[t]=n.jQueryInterface,e.fn[t].Constructor=n,e.fn[t].noConflict=()=>(e.fn[t]=r,n.jQueryInterface)}})},Ve=(n,e=[],t=n)=>typeof n=="function"?n.call(...e):t,Wa=(n,e,t=!0)=>{if(!t){Ve(n);return}const c=Hl(e)+5;let o=!1;const i=({target:l})=>{l===e&&(o=!0,e.removeEventListener(sr,i),Ve(n))};e.addEventListener(sr,i),setTimeout(()=>{o||Ha(e)},c)},kr=(n,e,t,r)=>{const c=n.length;let o=n.indexOf(e);return o===-1?!t&&r?n[c-1]:n[0]:(o+=t?1:-1,r&&(o=(o+c)%c),n[Math.max(0,Math.min(o,c-1))])},Vl=/[^.]*(?=\..*)\.|.*/,Wl=/\..*/,jl=/::\d+$/,Rs={};let yi=1;const ja={mouseenter:"mouseover",mouseleave:"mouseout"},Bl=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Ba(n,e){return e&&`${e}::${yi++}`||n.uidEvent||yi++}function Ua(n){const e=Ba(n);return n.uidEvent=e,Rs[e]=Rs[e]||{},Rs[e]}function Ul(n,e){return function t(r){return Or(r,{delegateTarget:n}),t.oneOff&&T.off(n,r.type,e),e.apply(n,[r])}}function Yl(n,e,t){return function r(c){const o=n.querySelectorAll(e);for(let{target:i}=c;i&&i!==this;i=i.parentNode)for(const l of o)if(l===i)return Or(c,{delegateTarget:i}),r.oneOff&&T.off(n,c.type,e,t),t.apply(i,[c])}}function Ya(n,e,t=null){return Object.values(n).find(r=>r.callable===e&&r.delegationSelector===t)}function Ka(n,e,t){const r=typeof e=="string",c=r?t:e||t;let o=qa(n);return Bl.has(o)||(o=n),[r,c,o]}function Ei(n,e,t,r,c){if(typeof e!="string"||!n)return;let[o,i,l]=Ka(e,t,r);e in ja&&(i=(E=>function(A){if(!A.relatedTarget||A.relatedTarget!==A.delegateTarget&&!A.delegateTarget.contains(A.relatedTarget))return E.call(this,A)})(i));const d=Ua(n),s=d[l]||(d[l]={}),u=Ya(s,i,o?t:null);if(u){u.oneOff=u.oneOff&&c;return}const p=Ba(i,e.replace(Vl,"")),m=o?Yl(n,t,i):Ul(n,i);m.delegationSelector=o?t:null,m.callable=i,m.oneOff=c,m.uidEvent=p,s[p]=m,n.addEventListener(l,m,o)}function rr(n,e,t,r,c){const o=Ya(e[t],r,c);o&&(n.removeEventListener(t,o,!!c),delete e[t][o.uidEvent])}function Kl(n,e,t,r){const c=e[t]||{};for(const[o,i]of Object.entries(c))o.includes(r)&&rr(n,e,t,i.callable,i.delegationSelector)}function qa(n){return n=n.replace(Wl,""),ja[n]||n}const T={on(n,e,t,r){Ei(n,e,t,r,!1)},one(n,e,t,r){Ei(n,e,t,r,!0)},off(n,e,t,r){if(typeof e!="string"||!n)return;const[c,o,i]=Ka(e,t,r),l=i!==e,d=Ua(n),s=d[i]||{},u=e.startsWith(".");if(typeof o<"u"){if(!Object.keys(s).length)return;rr(n,d,i,o,c?t:null);return}if(u)for(const p of Object.keys(d))Kl(n,d,p,e.slice(1));for(const[p,m]of Object.entries(s)){const _=p.replace(jl,"");(!l||e.includes(_))&&rr(n,d,i,m.callable,m.delegationSelector)}},trigger(n,e,t){if(typeof e!="string"||!n)return null;const r=Va(),c=qa(e),o=e!==c;let i=null,l=!0,d=!0,s=!1;o&&r&&(i=r.Event(e,t),r(n).trigger(i),l=!i.isPropagationStopped(),d=!i.isImmediatePropagationStopped(),s=i.isDefaultPrevented());const u=Or(new Event(e,{bubbles:l,cancelable:!0}),t);return s&&u.preventDefault(),d&&n.dispatchEvent(u),u.defaultPrevented&&i&&i.preventDefault(),u}};function Or(n,e={}){for(const[t,r]of Object.entries(e))try{n[t]=r}catch{Object.defineProperty(n,t,{configurable:!0,get(){return r}})}return n}function Ni(n){if(n==="true")return!0;if(n==="false")return!1;if(n===Number(n).toString())return Number(n);if(n===""||n==="null")return null;if(typeof n!="string")return n;try{return JSON.parse(decodeURIComponent(n))}catch{return n}}function Ps(n){return n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const vt={setDataAttribute(n,e,t){n.setAttribute(`data-bs-${Ps(e)}`,t)},removeDataAttribute(n,e){n.removeAttribute(`data-bs-${Ps(e)}`)},getDataAttributes(n){if(!n)return{};const e={},t=Object.keys(n.dataset).filter(r=>r.startsWith("bs")&&!r.startsWith("bsConfig"));for(const r of t){let c=r.replace(/^bs/,"");c=c.charAt(0).toLowerCase()+c.slice(1),e[c]=Ni(n.dataset[r])}return e},getDataAttribute(n,e){return Ni(n.getAttribute(`data-bs-${Ps(e)}`))}};class On{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const r=gt(t)?vt.getDataAttribute(t,"config"):{};return{...this.constructor.Default,...typeof r=="object"?r:{},...gt(t)?vt.getDataAttributes(t):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,t=this.constructor.DefaultType){for(const[r,c]of Object.entries(t)){const o=e[r],i=gt(o)?"element":Rl(o);if(!new RegExp(c).test(i))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${r}" provided type "${i}" but expected type "${c}".`)}}}const ql="5.3.6";class it extends On{constructor(e,t){super(),e=wt(e),e&&(this._element=e,this._config=this._getConfig(t),Ls.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Ls.remove(this._element,this.constructor.DATA_KEY),T.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t,r=!0){Wa(e,t,r)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return Ls.get(wt(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,typeof t=="object"?t:null)}static get VERSION(){return ql}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const Hs=n=>{let e=n.getAttribute("data-bs-target");if(!e||e==="#"){let t=n.getAttribute("href");if(!t||!t.includes("#")&&!t.startsWith("."))return null;t.includes("#")&&!t.startsWith("#")&&(t=`#${t.split("#")[1]}`),e=t&&t!=="#"?t.trim():null}return e?e.split(",").map(t=>Pa(t)).join(","):null},H={find(n,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,n))},findOne(n,e=document.documentElement){return Element.prototype.querySelector.call(e,n)},children(n,e){return[].concat(...n.children).filter(t=>t.matches(e))},parents(n,e){const t=[];let r=n.parentNode.closest(e);for(;r;)t.push(r),r=r.parentNode.closest(e);return t},prev(n,e){let t=n.previousElementSibling;for(;t;){if(t.matches(e))return[t];t=t.previousElementSibling}return[]},next(n,e){let t=n.nextElementSibling;for(;t;){if(t.matches(e))return[t];t=t.nextElementSibling}return[]},focusableChildren(n){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(t=>`${t}:not([tabindex^="-"])`).join(",");return this.find(e,n).filter(t=>!St(t)&&cn(t))},getSelectorFromElement(n){const e=Hs(n);return e&&H.findOne(e)?e:null},getElementFromSelector(n){const e=Hs(n);return e?H.findOne(e):null},getMultipleElementsFromSelector(n){const e=Hs(n);return e?H.find(e):[]}},ps=(n,e="hide")=>{const t=`click.dismiss${n.EVENT_KEY}`,r=n.NAME;T.on(document,t,`[data-bs-dismiss="${r}"]`,function(c){if(["A","AREA"].includes(this.tagName)&&c.preventDefault(),St(this))return;const o=H.getElementFromSelector(this)||this.closest(`.${r}`);n.getOrCreateInstance(o)[e]()})},zl="alert",Gl="bs.alert",za=`.${Gl}`,Ql=`close${za}`,Xl=`closed${za}`,Jl="fade",Zl="show";class ms extends it{static get NAME(){return zl}close(){if(T.trigger(this._element,Ql).defaultPrevented)return;this._element.classList.remove(Zl);const t=this._element.classList.contains(Jl);this._queueCallback(()=>this._destroyElement(),this._element,t)}_destroyElement(){this._element.remove(),T.trigger(this._element,Xl),this.dispose()}static jQueryInterface(e){return this.each(function(){const t=ms.getOrCreateInstance(this);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}ps(ms,"close");et(ms);const ec="button",tc="bs.button",nc=`.${tc}`,sc=".data-api",rc="active",Ai='[data-bs-toggle="button"]',ic=`click${nc}${sc}`;class _s extends it{static get NAME(){return ec}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(rc))}static jQueryInterface(e){return this.each(function(){const t=_s.getOrCreateInstance(this);e==="toggle"&&t[e]()})}}T.on(document,ic,Ai,n=>{n.preventDefault();const e=n.target.closest(Ai);_s.getOrCreateInstance(e).toggle()});et(_s);const ac="swipe",dn=".bs.swipe",oc=`touchstart${dn}`,lc=`touchmove${dn}`,cc=`touchend${dn}`,dc=`pointerdown${dn}`,uc=`pointerup${dn}`,hc="touch",fc="pen",pc="pointer-event",mc=40,_c={endCallback:null,leftCallback:null,rightCallback:null},gc={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class cs extends On{constructor(e,t){super(),this._element=e,!(!e||!cs.isSupported())&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return _c}static get DefaultType(){return gc}static get NAME(){return ac}dispose(){T.off(this._element,dn)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),Ve(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=mc)return;const t=e/this._deltaX;this._deltaX=0,t&&Ve(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(T.on(this._element,dc,e=>this._start(e)),T.on(this._element,uc,e=>this._end(e)),this._element.classList.add(pc)):(T.on(this._element,oc,e=>this._start(e)),T.on(this._element,lc,e=>this._move(e)),T.on(this._element,cc,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===fc||e.pointerType===hc)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const vc="carousel",bc="bs.carousel",Ot=`.${bc}`,Ga=".data-api",yc="ArrowLeft",Ec="ArrowRight",Nc=500,fn="next",Ut="prev",qt="left",ns="right",Ac=`slide${Ot}`,Fs=`slid${Ot}`,Tc=`keydown${Ot}`,Cc=`mouseenter${Ot}`,wc=`mouseleave${Ot}`,Sc=`dragstart${Ot}`,xc=`load${Ot}${Ga}`,kc=`click${Ot}${Ga}`,Qa="carousel",Yn="active",Oc="slide",$c="carousel-item-end",Mc="carousel-item-start",Dc="carousel-item-next",Lc="carousel-item-prev",Xa=".active",Ja=".carousel-item",Ic=Xa+Ja,Rc=".carousel-item img",Pc=".carousel-indicators",Hc="[data-bs-slide], [data-bs-slide-to]",Fc='[data-bs-ride="carousel"]',Vc={[yc]:ns,[Ec]:qt},Wc={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},jc={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class $n extends it{constructor(e,t){super(e,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=H.findOne(Pc,this._element),this._addEventListeners(),this._config.ride===Qa&&this.cycle()}static get Default(){return Wc}static get DefaultType(){return jc}static get NAME(){return vc}next(){this._slide(fn)}nextWhenVisible(){!document.hidden&&cn(this._element)&&this.next()}prev(){this._slide(Ut)}pause(){this._isSliding&&Ha(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){T.one(this._element,Fs,()=>this.cycle());return}this.cycle()}}to(e){const t=this._getItems();if(e>t.length-1||e<0)return;if(this._isSliding){T.one(this._element,Fs,()=>this.to(e));return}const r=this._getItemIndex(this._getActive());if(r===e)return;const c=e>r?fn:Ut;this._slide(c,t[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&T.on(this._element,Tc,e=>this._keydown(e)),this._config.pause==="hover"&&(T.on(this._element,Cc,()=>this.pause()),T.on(this._element,wc,()=>this._maybeEnableCycle())),this._config.touch&&cs.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const r of H.find(Rc,this._element))T.on(r,Sc,c=>c.preventDefault());const t={leftCallback:()=>this._slide(this._directionToOrder(qt)),rightCallback:()=>this._slide(this._directionToOrder(ns)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),Nc+this._config.interval))}};this._swipeHelper=new cs(this._element,t)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=Vc[e.key];t&&(e.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const t=H.findOne(Xa,this._indicatorsElement);t.classList.remove(Yn),t.removeAttribute("aria-current");const r=H.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);r&&(r.classList.add(Yn),r.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(e,t=null){if(this._isSliding)return;const r=this._getActive(),c=e===fn,o=t||kr(this._getItems(),r,c,this._config.wrap);if(o===r)return;const i=this._getItemIndex(o),l=_=>T.trigger(this._element,_,{relatedTarget:o,direction:this._orderToDirection(e),from:this._getItemIndex(r),to:i});if(l(Ac).defaultPrevented||!r||!o)return;const s=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(i),this._activeElement=o;const u=c?Mc:$c,p=c?Dc:Lc;o.classList.add(p),kn(o),r.classList.add(u),o.classList.add(u);const m=()=>{o.classList.remove(u,p),o.classList.add(Yn),r.classList.remove(Yn,p,u),this._isSliding=!1,l(Fs)};this._queueCallback(m,r,this._isAnimated()),s&&this.cycle()}_isAnimated(){return this._element.classList.contains(Oc)}_getActive(){return H.findOne(Ic,this._element)}_getItems(){return H.find(Ja,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return Je()?e===qt?Ut:fn:e===qt?fn:Ut}_orderToDirection(e){return Je()?e===Ut?qt:ns:e===Ut?ns:qt}static jQueryInterface(e){return this.each(function(){const t=$n.getOrCreateInstance(this,e);if(typeof e=="number"){t.to(e);return}if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}T.on(document,kc,Hc,function(n){const e=H.getElementFromSelector(this);if(!e||!e.classList.contains(Qa))return;n.preventDefault();const t=$n.getOrCreateInstance(e),r=this.getAttribute("data-bs-slide-to");if(r){t.to(r),t._maybeEnableCycle();return}if(vt.getDataAttribute(this,"slide")==="next"){t.next(),t._maybeEnableCycle();return}t.prev(),t._maybeEnableCycle()});T.on(window,xc,()=>{const n=H.find(Fc);for(const e of n)$n.getOrCreateInstance(e)});et($n);const Bc="collapse",Uc="bs.collapse",Mn=`.${Uc}`,Yc=".data-api",Kc=`show${Mn}`,qc=`shown${Mn}`,zc=`hide${Mn}`,Gc=`hidden${Mn}`,Qc=`click${Mn}${Yc}`,Vs="show",Gt="collapse",Kn="collapsing",Xc="collapsed",Jc=`:scope .${Gt} .${Gt}`,Zc="collapse-horizontal",ed="width",td="height",nd=".collapse.show, .collapse.collapsing",ir='[data-bs-toggle="collapse"]',sd={parent:null,toggle:!0},rd={parent:"(null|element)",toggle:"boolean"};class Nn extends it{constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const r=H.find(ir);for(const c of r){const o=H.getSelectorFromElement(c),i=H.find(o).filter(l=>l===this._element);o!==null&&i.length&&this._triggerArray.push(c)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return sd}static get DefaultType(){return rd}static get NAME(){return Bc}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(nd).filter(l=>l!==this._element).map(l=>Nn.getOrCreateInstance(l,{toggle:!1}))),e.length&&e[0]._isTransitioning||T.trigger(this._element,Kc).defaultPrevented)return;for(const l of e)l.hide();const r=this._getDimension();this._element.classList.remove(Gt),this._element.classList.add(Kn),this._element.style[r]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const c=()=>{this._isTransitioning=!1,this._element.classList.remove(Kn),this._element.classList.add(Gt,Vs),this._element.style[r]="",T.trigger(this._element,qc)},i=`scroll${r[0].toUpperCase()+r.slice(1)}`;this._queueCallback(c,this._element,!0),this._element.style[r]=`${this._element[i]}px`}hide(){if(this._isTransitioning||!this._isShown()||T.trigger(this._element,zc).defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,kn(this._element),this._element.classList.add(Kn),this._element.classList.remove(Gt,Vs);for(const c of this._triggerArray){const o=H.getElementFromSelector(c);o&&!this._isShown(o)&&this._addAriaAndCollapsedClass([c],!1)}this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(Kn),this._element.classList.add(Gt),T.trigger(this._element,Gc)};this._element.style[t]="",this._queueCallback(r,this._element,!0)}_isShown(e=this._element){return e.classList.contains(Vs)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=wt(e.parent),e}_getDimension(){return this._element.classList.contains(Zc)?ed:td}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(ir);for(const t of e){const r=H.getElementFromSelector(t);r&&this._addAriaAndCollapsedClass([t],this._isShown(r))}}_getFirstLevelChildren(e){const t=H.find(Jc,this._config.parent);return H.find(e,this._config.parent).filter(r=>!t.includes(r))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const r of e)r.classList.toggle(Xc,!t),r.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return typeof e=="string"&&/show|hide/.test(e)&&(t.toggle=!1),this.each(function(){const r=Nn.getOrCreateInstance(this,t);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e]()}})}}T.on(document,Qc,ir,function(n){(n.target.tagName==="A"||n.delegateTarget&&n.delegateTarget.tagName==="A")&&n.preventDefault();for(const e of H.getMultipleElementsFromSelector(this))Nn.getOrCreateInstance(e,{toggle:!1}).toggle()});et(Nn);const Ti="dropdown",id="bs.dropdown",jt=`.${id}`,$r=".data-api",ad="Escape",Ci="Tab",od="ArrowUp",wi="ArrowDown",ld=2,cd=`hide${jt}`,dd=`hidden${jt}`,ud=`show${jt}`,hd=`shown${jt}`,Za=`click${jt}${$r}`,eo=`keydown${jt}${$r}`,fd=`keyup${jt}${$r}`,zt="show",pd="dropup",md="dropend",_d="dropstart",gd="dropup-center",vd="dropdown-center",It='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',bd=`${It}.${zt}`,ss=".dropdown-menu",yd=".navbar",Ed=".navbar-nav",Nd=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Ad=Je()?"top-end":"top-start",Td=Je()?"top-start":"top-end",Cd=Je()?"bottom-end":"bottom-start",wd=Je()?"bottom-start":"bottom-end",Sd=Je()?"left-start":"right-start",xd=Je()?"right-start":"left-start",kd="top",Od="bottom",$d={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Md={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class ut extends it{constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=H.next(this._element,ss)[0]||H.prev(this._element,ss)[0]||H.findOne(ss,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return $d}static get DefaultType(){return Md}static get NAME(){return Ti}toggle(){return this._isShown()?this.hide():this.show()}show(){if(St(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!T.trigger(this._element,ud,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(Ed))for(const r of[].concat(...document.body.children))T.on(r,"mouseover",ls);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(zt),this._element.classList.add(zt),T.trigger(this._element,hd,e)}}hide(){if(St(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!T.trigger(this._element,cd,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))T.off(r,"mouseover",ls);this._popper&&this._popper.destroy(),this._menu.classList.remove(zt),this._element.classList.remove(zt),this._element.setAttribute("aria-expanded","false"),vt.removeDataAttribute(this._menu,"popper"),T.trigger(this._element,dd,e),this._element.focus()}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!gt(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${Ti.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof Ra>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let e=this._element;this._config.reference==="parent"?e=this._parent:gt(this._config.reference)?e=wt(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const t=this._getPopperConfig();this._popper=xr(e,this._menu,t)}_isShown(){return this._menu.classList.contains(zt)}_getPlacement(){const e=this._parent;if(e.classList.contains(md))return Sd;if(e.classList.contains(_d))return xd;if(e.classList.contains(gd))return kd;if(e.classList.contains(vd))return Od;const t=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(pd)?t?Td:Ad:t?wd:Cd}_detectNavbar(){return this._element.closest(yd)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(t=>Number.parseInt(t,10)):typeof e=="function"?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(vt.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...Ve(this._config.popperConfig,[void 0,e])}}_selectMenuItem({key:e,target:t}){const r=H.find(Nd,this._menu).filter(c=>cn(c));r.length&&kr(r,t,e===wi,!r.includes(t)).focus()}static jQueryInterface(e){return this.each(function(){const t=ut.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}static clearMenus(e){if(e.button===ld||e.type==="keyup"&&e.key!==Ci)return;const t=H.find(bd);for(const r of t){const c=ut.getInstance(r);if(!c||c._config.autoClose===!1)continue;const o=e.composedPath(),i=o.includes(c._menu);if(o.includes(c._element)||c._config.autoClose==="inside"&&!i||c._config.autoClose==="outside"&&i||c._menu.contains(e.target)&&(e.type==="keyup"&&e.key===Ci||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const l={relatedTarget:c._element};e.type==="click"&&(l.clickEvent=e),c._completeHide(l)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName),r=e.key===ad,c=[od,wi].includes(e.key);if(!c&&!r||t&&!r)return;e.preventDefault();const o=this.matches(It)?this:H.prev(this,It)[0]||H.next(this,It)[0]||H.findOne(It,e.delegateTarget.parentNode),i=ut.getOrCreateInstance(o);if(c){e.stopPropagation(),i.show(),i._selectMenuItem(e);return}i._isShown()&&(e.stopPropagation(),i.hide(),o.focus())}}T.on(document,eo,It,ut.dataApiKeydownHandler);T.on(document,eo,ss,ut.dataApiKeydownHandler);T.on(document,Za,ut.clearMenus);T.on(document,fd,ut.clearMenus);T.on(document,Za,It,function(n){n.preventDefault(),ut.getOrCreateInstance(this).toggle()});et(ut);const to="backdrop",Dd="fade",Si="show",xi=`mousedown.bs.${to}`,Ld={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Id={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class no extends On{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Ld}static get DefaultType(){return Id}static get NAME(){return to}show(e){if(!this._config.isVisible){Ve(e);return}this._append();const t=this._getElement();this._config.isAnimated&&kn(t),t.classList.add(Si),this._emulateAnimation(()=>{Ve(e)})}hide(e){if(!this._config.isVisible){Ve(e);return}this._getElement().classList.remove(Si),this._emulateAnimation(()=>{this.dispose(),Ve(e)})}dispose(){this._isAppended&&(T.off(this._element,xi),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(Dd),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=wt(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),T.on(e,xi,()=>{Ve(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){Wa(e,this._getElement(),this._config.isAnimated)}}const Rd="focustrap",Pd="bs.focustrap",ds=`.${Pd}`,Hd=`focusin${ds}`,Fd=`keydown.tab${ds}`,Vd="Tab",Wd="forward",ki="backward",jd={autofocus:!0,trapElement:null},Bd={autofocus:"boolean",trapElement:"element"};class so extends On{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return jd}static get DefaultType(){return Bd}static get NAME(){return Rd}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),T.off(document,ds),T.on(document,Hd,e=>this._handleFocusin(e)),T.on(document,Fd,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,T.off(document,ds))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const r=H.focusableChildren(t);r.length===0?t.focus():this._lastTabNavDirection===ki?r[r.length-1].focus():r[0].focus()}_handleKeydown(e){e.key===Vd&&(this._lastTabNavDirection=e.shiftKey?ki:Wd)}}const Oi=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",$i=".sticky-top",qn="padding-right",Mi="margin-right";class ar{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,qn,t=>t+e),this._setElementAttributes(Oi,qn,t=>t+e),this._setElementAttributes($i,Mi,t=>t-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,qn),this._resetElementAttributes(Oi,qn),this._resetElementAttributes($i,Mi)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,r){const c=this.getWidth(),o=i=>{if(i!==this._element&&window.innerWidth>i.clientWidth+c)return;this._saveInitialAttribute(i,t);const l=window.getComputedStyle(i).getPropertyValue(t);i.style.setProperty(t,`${r(Number.parseFloat(l))}px`)};this._applyManipulationCallback(e,o)}_saveInitialAttribute(e,t){const r=e.style.getPropertyValue(t);r&&vt.setDataAttribute(e,t,r)}_resetElementAttributes(e,t){const r=c=>{const o=vt.getDataAttribute(c,t);if(o===null){c.style.removeProperty(t);return}vt.removeDataAttribute(c,t),c.style.setProperty(t,o)};this._applyManipulationCallback(e,r)}_applyManipulationCallback(e,t){if(gt(e)){t(e);return}for(const r of H.find(e,this._element))t(r)}}const Ud="modal",Yd="bs.modal",Ze=`.${Yd}`,Kd=".data-api",qd="Escape",zd=`hide${Ze}`,Gd=`hidePrevented${Ze}`,ro=`hidden${Ze}`,io=`show${Ze}`,Qd=`shown${Ze}`,Xd=`resize${Ze}`,Jd=`click.dismiss${Ze}`,Zd=`mousedown.dismiss${Ze}`,eu=`keydown.dismiss${Ze}`,tu=`click${Ze}${Kd}`,Di="modal-open",nu="fade",Li="show",Ws="modal-static",su=".modal.show",ru=".modal-dialog",iu=".modal-body",au='[data-bs-toggle="modal"]',ou={backdrop:!0,focus:!0,keyboard:!0},lu={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class rn extends it{constructor(e,t){super(e,t),this._dialog=H.findOne(ru,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ar,this._addEventListeners()}static get Default(){return ou}static get DefaultType(){return lu}static get NAME(){return Ud}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||T.trigger(this._element,io,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Di),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||T.trigger(this._element,zd).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Li),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){T.off(window,Ze),T.off(this._dialog,Ze),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new no({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new so({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=H.findOne(iu,this._dialog);t&&(t.scrollTop=0),kn(this._element),this._element.classList.add(Li);const r=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,T.trigger(this._element,Qd,{relatedTarget:e})};this._queueCallback(r,this._dialog,this._isAnimated())}_addEventListeners(){T.on(this._element,eu,e=>{if(e.key===qd){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),T.on(window,Xd,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),T.on(this._element,Zd,e=>{T.one(this._element,Jd,t=>{if(!(this._element!==e.target||this._element!==t.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Di),this._resetAdjustments(),this._scrollBar.reset(),T.trigger(this._element,ro)})}_isAnimated(){return this._element.classList.contains(nu)}_triggerBackdropTransition(){if(T.trigger(this._element,Gd).defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,r=this._element.style.overflowY;r==="hidden"||this._element.classList.contains(Ws)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(Ws),this._queueCallback(()=>{this._element.classList.remove(Ws),this._queueCallback(()=>{this._element.style.overflowY=r},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),r=t>0;if(r&&!e){const c=Je()?"paddingLeft":"paddingRight";this._element.style[c]=`${t}px`}if(!r&&e){const c=Je()?"paddingRight":"paddingLeft";this._element.style[c]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each(function(){const r=rn.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e](t)}})}}T.on(document,tu,au,function(n){const e=H.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&n.preventDefault(),T.one(e,io,c=>{c.defaultPrevented||T.one(e,ro,()=>{cn(this)&&this.focus()})});const t=H.findOne(su);t&&rn.getInstance(t).hide(),rn.getOrCreateInstance(e).toggle(this)});ps(rn);et(rn);const cu="offcanvas",du="bs.offcanvas",yt=`.${du}`,ao=".data-api",uu=`load${yt}${ao}`,hu="Escape",Ii="show",Ri="showing",Pi="hiding",fu="offcanvas-backdrop",oo=".offcanvas.show",pu=`show${yt}`,mu=`shown${yt}`,_u=`hide${yt}`,Hi=`hidePrevented${yt}`,lo=`hidden${yt}`,gu=`resize${yt}`,vu=`click${yt}${ao}`,bu=`keydown.dismiss${yt}`,yu='[data-bs-toggle="offcanvas"]',Eu={backdrop:!0,keyboard:!0,scroll:!1},Nu={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class xt extends it{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Eu}static get DefaultType(){return Nu}static get NAME(){return cu}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||T.trigger(this._element,pu,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new ar().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Ri);const r=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Ii),this._element.classList.remove(Ri),T.trigger(this._element,mu,{relatedTarget:e})};this._queueCallback(r,this._element,!0)}hide(){if(!this._isShown||T.trigger(this._element,_u).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Pi),this._backdrop.hide();const t=()=>{this._element.classList.remove(Ii,Pi),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new ar().reset(),T.trigger(this._element,lo)};this._queueCallback(t,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){T.trigger(this._element,Hi);return}this.hide()},t=!!this._config.backdrop;return new no({className:fu,isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?e:null})}_initializeFocusTrap(){return new so({trapElement:this._element})}_addEventListeners(){T.on(this._element,bu,e=>{if(e.key===hu){if(this._config.keyboard){this.hide();return}T.trigger(this._element,Hi)}})}static jQueryInterface(e){return this.each(function(){const t=xt.getOrCreateInstance(this,e);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}T.on(document,vu,yu,function(n){const e=H.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),St(this))return;T.one(e,lo,()=>{cn(this)&&this.focus()});const t=H.findOne(oo);t&&t!==e&&xt.getInstance(t).hide(),xt.getOrCreateInstance(e).toggle(this)});T.on(window,uu,()=>{for(const n of H.find(oo))xt.getOrCreateInstance(n).show()});T.on(window,gu,()=>{for(const n of H.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(n).position!=="fixed"&&xt.getOrCreateInstance(n).hide()});ps(xt);et(xt);const Au=/^aria-[\w-]*$/i,co={"*":["class","dir","id","lang","role",Au],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Tu=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Cu=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,wu=(n,e)=>{const t=n.nodeName.toLowerCase();return e.includes(t)?Tu.has(t)?!!Cu.test(n.nodeValue):!0:e.filter(r=>r instanceof RegExp).some(r=>r.test(t))};function Su(n,e,t){if(!n.length)return n;if(t&&typeof t=="function")return t(n);const c=new window.DOMParser().parseFromString(n,"text/html"),o=[].concat(...c.body.querySelectorAll("*"));for(const i of o){const l=i.nodeName.toLowerCase();if(!Object.keys(e).includes(l)){i.remove();continue}const d=[].concat(...i.attributes),s=[].concat(e["*"]||[],e[l]||[]);for(const u of d)wu(u,s)||i.removeAttribute(u.nodeName)}return c.body.innerHTML}const xu="TemplateFactory",ku={allowList:co,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Ou={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},$u={entry:"(string|element|function|null)",selector:"(string|element)"};class Mu extends On{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return ku}static get DefaultType(){return Ou}static get NAME(){return xu}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[c,o]of Object.entries(this._config.content))this._setContent(e,o,c);const t=e.children[0],r=this._resolvePossibleFunction(this._config.extraClass);return r&&t.classList.add(...r.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,r]of Object.entries(e))super._typeCheckConfig({selector:t,entry:r},$u)}_setContent(e,t,r){const c=H.findOne(r,e);if(c){if(t=this._resolvePossibleFunction(t),!t){c.remove();return}if(gt(t)){this._putElementInTemplate(wt(t),c);return}if(this._config.html){c.innerHTML=this._maybeSanitize(t);return}c.textContent=t}}_maybeSanitize(e){return this._config.sanitize?Su(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return Ve(e,[void 0,this])}_putElementInTemplate(e,t){if(this._config.html){t.innerHTML="",t.append(e);return}t.textContent=e.textContent}}const Du="tooltip",Lu=new Set(["sanitize","allowList","sanitizeFn"]),js="fade",Iu="modal",zn="show",Ru=".tooltip-inner",Fi=`.${Iu}`,Vi="hide.bs.modal",pn="hover",Bs="focus",Pu="click",Hu="manual",Fu="hide",Vu="hidden",Wu="show",ju="shown",Bu="inserted",Uu="click",Yu="focusin",Ku="focusout",qu="mouseenter",zu="mouseleave",Gu={AUTO:"auto",TOP:"top",RIGHT:Je()?"left":"right",BOTTOM:"bottom",LEFT:Je()?"right":"left"},Qu={allowList:co,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Xu={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Et extends it{constructor(e,t){if(typeof Ra>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(e,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Qu}static get DefaultType(){return Xu}static get NAME(){return Du}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),T.off(this._element.closest(Fi),Vi,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=T.trigger(this._element,this.constructor.eventName(Wu)),r=(Fa(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!r)return;this._disposePopper();const c=this._getTipElement();this._element.setAttribute("aria-describedby",c.getAttribute("id"));const{container:o}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(o.append(c),T.trigger(this._element,this.constructor.eventName(Bu))),this._popper=this._createPopper(c),c.classList.add(zn),"ontouchstart"in document.documentElement)for(const l of[].concat(...document.body.children))T.on(l,"mouseover",ls);const i=()=>{T.trigger(this._element,this.constructor.eventName(ju)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(i,this.tip,this._isAnimated())}hide(){if(!this._isShown()||T.trigger(this._element,this.constructor.eventName(Fu)).defaultPrevented)return;if(this._getTipElement().classList.remove(zn),"ontouchstart"in document.documentElement)for(const c of[].concat(...document.body.children))T.off(c,"mouseover",ls);this._activeTrigger[Pu]=!1,this._activeTrigger[Bs]=!1,this._activeTrigger[pn]=!1,this._isHovered=null;const r=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),T.trigger(this._element,this.constructor.eventName(Vu)))};this._queueCallback(r,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(js,zn),t.classList.add(`bs-${this.constructor.NAME}-auto`);const r=Pl(this.constructor.NAME).toString();return t.setAttribute("id",r),this._isAnimated()&&t.classList.add(js),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new Mu({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Ru]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(js)}_isShown(){return this.tip&&this.tip.classList.contains(zn)}_createPopper(e){const t=Ve(this._config.placement,[this,e,this._element]),r=Gu[t.toUpperCase()];return xr(this._element,e,this._getPopperConfig(r))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(t=>Number.parseInt(t,10)):typeof e=="function"?t=>e(t,this._element):e}_resolvePossibleFunction(e){return Ve(e,[this._element,this._element])}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:r=>{this._getTipElement().setAttribute("data-popper-placement",r.state.placement)}}]};return{...t,...Ve(this._config.popperConfig,[void 0,t])}}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e)if(t==="click")T.on(this._element,this.constructor.eventName(Uu),this._config.selector,r=>{this._initializeOnDelegatedTarget(r).toggle()});else if(t!==Hu){const r=t===pn?this.constructor.eventName(qu):this.constructor.eventName(Yu),c=t===pn?this.constructor.eventName(zu):this.constructor.eventName(Ku);T.on(this._element,r,this._config.selector,o=>{const i=this._initializeOnDelegatedTarget(o);i._activeTrigger[o.type==="focusin"?Bs:pn]=!0,i._enter()}),T.on(this._element,c,this._config.selector,o=>{const i=this._initializeOnDelegatedTarget(o);i._activeTrigger[o.type==="focusout"?Bs:pn]=i._element.contains(o.relatedTarget),i._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},T.on(this._element.closest(Fi),Vi,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=vt.getDataAttributes(this._element);for(const r of Object.keys(t))Lu.has(r)&&delete t[r];return e={...t,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:wt(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[t,r]of Object.entries(this._config))this.constructor.Default[t]!==r&&(e[t]=r);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const t=Et.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}}et(Et);const Ju="popover",Zu=".popover-header",eh=".popover-body",th={...Et.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},nh={...Et.DefaultType,content:"(null|string|element|function)"};class Mr extends Et{static get Default(){return th}static get DefaultType(){return nh}static get NAME(){return Ju}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Zu]:this._getTitle(),[eh]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const t=Mr.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}}et(Mr);const sh="scrollspy",rh="bs.scrollspy",Dr=`.${rh}`,ih=".data-api",ah=`activate${Dr}`,Wi=`click${Dr}`,oh=`load${Dr}${ih}`,lh="dropdown-item",Yt="active",ch='[data-bs-spy="scroll"]',Us="[href]",dh=".nav, .list-group",ji=".nav-link",uh=".nav-item",hh=".list-group-item",fh=`${ji}, ${uh} > ${ji}, ${hh}`,ph=".dropdown",mh=".dropdown-toggle",_h={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},gh={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class gs extends it{constructor(e,t){super(e,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return _h}static get DefaultType(){return gh}static get NAME(){return sh}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=wt(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(t=>Number.parseFloat(t))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(T.off(this._config.target,Wi),T.on(this._config.target,Wi,Us,e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const r=this._rootElement||window,c=t.offsetTop-this._element.offsetTop;if(r.scrollTo){r.scrollTo({top:c,behavior:"smooth"});return}r.scrollTop=c}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(t=>this._observerCallback(t),e)}_observerCallback(e){const t=i=>this._targetLinks.get(`#${i.target.id}`),r=i=>{this._previousScrollData.visibleEntryTop=i.target.offsetTop,this._process(t(i))},c=(this._rootElement||document.documentElement).scrollTop,o=c>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=c;for(const i of e){if(!i.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(i));continue}const l=i.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(o&&l){if(r(i),!c)return;continue}!o&&!l&&r(i)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=H.find(Us,this._config.target);for(const t of e){if(!t.hash||St(t))continue;const r=H.findOne(decodeURI(t.hash),this._element);cn(r)&&(this._targetLinks.set(decodeURI(t.hash),t),this._observableSections.set(t.hash,r))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(Yt),this._activateParents(e),T.trigger(this._element,ah,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(lh)){H.findOne(mh,e.closest(ph)).classList.add(Yt);return}for(const t of H.parents(e,dh))for(const r of H.prev(t,fh))r.classList.add(Yt)}_clearActiveClass(e){e.classList.remove(Yt);const t=H.find(`${Us}.${Yt}`,e);for(const r of t)r.classList.remove(Yt)}static jQueryInterface(e){return this.each(function(){const t=gs.getOrCreateInstance(this,e);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}T.on(window,oh,()=>{for(const n of H.find(ch))gs.getOrCreateInstance(n)});et(gs);const vh="tab",bh="bs.tab",Bt=`.${bh}`,yh=`hide${Bt}`,Eh=`hidden${Bt}`,Nh=`show${Bt}`,Ah=`shown${Bt}`,Th=`click${Bt}`,Ch=`keydown${Bt}`,wh=`load${Bt}`,Sh="ArrowLeft",Bi="ArrowRight",xh="ArrowUp",Ui="ArrowDown",Ys="Home",Yi="End",Rt="active",Ki="fade",Ks="show",kh="dropdown",uo=".dropdown-toggle",Oh=".dropdown-menu",qs=`:not(${uo})`,$h='.list-group, .nav, [role="tablist"]',Mh=".nav-item, .list-group-item",Dh=`.nav-link${qs}, .list-group-item${qs}, [role="tab"]${qs}`,ho='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',zs=`${Dh}, ${ho}`,Lh=`.${Rt}[data-bs-toggle="tab"], .${Rt}[data-bs-toggle="pill"], .${Rt}[data-bs-toggle="list"]`;class an extends it{constructor(e){super(e),this._parent=this._element.closest($h),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),T.on(this._element,Ch,t=>this._keydown(t)))}static get NAME(){return vh}show(){const e=this._element;if(this._elemIsActive(e))return;const t=this._getActiveElem(),r=t?T.trigger(t,yh,{relatedTarget:e}):null;T.trigger(e,Nh,{relatedTarget:t}).defaultPrevented||r&&r.defaultPrevented||(this._deactivate(t,e),this._activate(e,t))}_activate(e,t){if(!e)return;e.classList.add(Rt),this._activate(H.getElementFromSelector(e));const r=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(Ks);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),T.trigger(e,Ah,{relatedTarget:t})};this._queueCallback(r,e,e.classList.contains(Ki))}_deactivate(e,t){if(!e)return;e.classList.remove(Rt),e.blur(),this._deactivate(H.getElementFromSelector(e));const r=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(Ks);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),T.trigger(e,Eh,{relatedTarget:t})};this._queueCallback(r,e,e.classList.contains(Ki))}_keydown(e){if(![Sh,Bi,xh,Ui,Ys,Yi].includes(e.key))return;e.stopPropagation(),e.preventDefault();const t=this._getChildren().filter(c=>!St(c));let r;if([Ys,Yi].includes(e.key))r=t[e.key===Ys?0:t.length-1];else{const c=[Bi,Ui].includes(e.key);r=kr(t,e.target,c,!0)}r&&(r.focus({preventScroll:!0}),an.getOrCreateInstance(r).show())}_getChildren(){return H.find(zs,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const r of t)this._setInitialAttributesOnChild(r)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e),r=this._getOuterElement(e);e.setAttribute("aria-selected",t),r!==e&&this._setAttributeIfNotExists(r,"role","presentation"),t||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const t=H.getElementFromSelector(e);t&&(this._setAttributeIfNotExists(t,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(t,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,t){const r=this._getOuterElement(e);if(!r.classList.contains(kh))return;const c=(o,i)=>{const l=H.findOne(o,r);l&&l.classList.toggle(i,t)};c(uo,Rt),c(Oh,Ks),r.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(e,t,r){e.hasAttribute(t)||e.setAttribute(t,r)}_elemIsActive(e){return e.classList.contains(Rt)}_getInnerElement(e){return e.matches(zs)?e:H.findOne(zs,e)}_getOuterElement(e){return e.closest(Mh)||e}static jQueryInterface(e){return this.each(function(){const t=an.getOrCreateInstance(this);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}T.on(document,Th,ho,function(n){["A","AREA"].includes(this.tagName)&&n.preventDefault(),!St(this)&&an.getOrCreateInstance(this).show()});T.on(window,wh,()=>{for(const n of H.find(Lh))an.getOrCreateInstance(n)});et(an);const Ih="toast",Rh="bs.toast",$t=`.${Rh}`,Ph=`mouseover${$t}`,Hh=`mouseout${$t}`,Fh=`focusin${$t}`,Vh=`focusout${$t}`,Wh=`hide${$t}`,jh=`hidden${$t}`,Bh=`show${$t}`,Uh=`shown${$t}`,Yh="fade",qi="hide",Gn="show",Qn="showing",Kh={animation:"boolean",autohide:"boolean",delay:"number"},qh={animation:!0,autohide:!0,delay:5e3};class Dn extends it{constructor(e,t){super(e,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return qh}static get DefaultType(){return Kh}static get NAME(){return Ih}show(){if(T.trigger(this._element,Bh).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Yh);const t=()=>{this._element.classList.remove(Qn),T.trigger(this._element,Uh),this._maybeScheduleHide()};this._element.classList.remove(qi),kn(this._element),this._element.classList.add(Gn,Qn),this._queueCallback(t,this._element,this._config.animation)}hide(){if(!this.isShown()||T.trigger(this._element,Wh).defaultPrevented)return;const t=()=>{this._element.classList.add(qi),this._element.classList.remove(Qn,Gn),T.trigger(this._element,jh)};this._element.classList.add(Qn),this._queueCallback(t,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Gn),super.dispose()}isShown(){return this._element.classList.contains(Gn)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=t;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=t;break}}if(t){this._clearTimeout();return}const r=e.relatedTarget;this._element===r||this._element.contains(r)||this._maybeScheduleHide()}_setListeners(){T.on(this._element,Ph,e=>this._onInteraction(e,!0)),T.on(this._element,Hh,e=>this._onInteraction(e,!1)),T.on(this._element,Fh,e=>this._onInteraction(e,!0)),T.on(this._element,Vh,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const t=Dn.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}ps(Dn);et(Dn);const Gs=({value:n,maxValue:e,color:t,labelLeft:r=null,labelCenter:c=null,labelRight:o=null,className:i="",isOverlay:l=!1,trailingStartValue:d=null,trailColor:s="rgba(128, 128, 128, 0.5)"})=>{const u=Math.min(Math.max(n/e*100,0),100);let p=0;d!==null&&(p=Math.min(Math.max(d/e*100,0),100));let m={};return typeof t=="object"&&t.from&&t.to?m.backgroundImage=`linear-gradient(to right, ${t.from}, ${t.to} 100%)`:m.backgroundColor=t,a("div",{class:`progress-bar-pointed-container ${i} ${l?"progress-bar-pointed-container--overlay":""}`,children:[r&&a("span",{class:"progress-bar-pointed__label progress-bar-pointed__label--left",children:r}),d!==null&&a("div",{class:"progress-bar-pointed__trail",style:{width:`${p}%`,backgroundColor:s,"--progress-trail-color":s}}),a("div",{class:"progress-bar-pointed__fill",style:{width:`${u}%`,...m},children:c&&a("span",{class:"progress-bar-pointed__label progress-bar-pointed__label--center",children:c})}),o&&a("span",{class:"progress-bar-pointed__label progress-bar-pointed__label--right",children:o})]})};function zh(){const{characterStats:n,setCharacterStats:e}=ze(ft),[t,r]=G(1),[c,o]=G(!1),[i,l]=G(!1),[d,s]=G(!1),[u,p]=G(!1),[m,_]=G(!1),[E,A]=G(null),[C,$]=G(null),[M,j]=G(!1),[L,W]=G(!1),[U,Q]=G(!1),X=Ue(null),R=Ue(null),F=Ue(null),B=Ue(null),Z=Ue(null),le=300,Ne=600,[he,ie]=G(!1);ge(()=>{const ce=[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map(de=>new Et(de));return()=>{ce.forEach(de=>{de&&typeof de.dispose=="function"&&de.dispose()})}},[U]),ge(()=>{if(c){const P=setTimeout(()=>o(!1),300);return()=>clearTimeout(P)}},[c]),ge(()=>{if(d){const P=setTimeout(()=>s(!1),300);return()=>clearTimeout(P)}},[d]),ge(()=>{if(i){const P=setTimeout(()=>l(!1),300);return()=>clearTimeout(P)}},[i]),ge(()=>{if(u){const P=setTimeout(()=>p(!1),300);return()=>clearTimeout(P)}},[u]),ge(()=>{if(m){const P=setTimeout(()=>_(!1),300);return()=>clearTimeout(P)}},[m]),ge(()=>{const P=de=>{de.key==="Control"&&Q(!0)},ce=de=>{de.key==="Control"&&Q(!1)};return window.addEventListener("keydown",P),window.addEventListener("keyup",ce),()=>{window.removeEventListener("keydown",P),window.removeEventListener("keyup",ce)}},[]);const ae=P=>{e(ce=>({...ce,...P}))};ge(()=>{(n.currentMp===void 0||n.maxMp===void 0)&&e(P=>({...P,currentMp:P.currentMp||0,maxMp:P.maxMp||10}))},[]);const N=()=>{X.current&&(clearTimeout(X.current),X.current=null),R.current&&(clearTimeout(R.current),R.current=null);const P=n.tempHealth||0;let ce=!1;A(n.currentHealth),P>0?($(P),ce=!0):$(null);let de=P,Pe=n.currentHealth,pt=t,Nt=!1,At=!1;if(de>0){const Oe=Math.min(pt,de);Oe>0&&(de-=Oe,pt-=Oe,s(!0),W(!0),Nt=!0)}if(pt>0&&Pe>0){const Oe=Math.min(pt,Pe);Oe>0&&(Pe=Math.max(0,Pe-Oe),o(!0),j(!0),At=!0)}At&&setTimeout(()=>j(!1),200),Nt&&setTimeout(()=>W(!1),200),setTimeout(()=>{e(h=>({...h,currentHealth:Pe,tempHealth:de}));const Oe=1e3;X.current=setTimeout(()=>{A(Pe)},Oe),ce&&(R.current=setTimeout(()=>{$(de)},Oe))},50),r(1)},k=()=>{l(!0),ae({currentHealth:Math.min(n.maxHealth,n.currentHealth+t)}),r(1)},Y=()=>{_(!0),ae({tempHealth:(n.tempHealth||0)+t}),r(1)},Ce=()=>{p(!0),ae({currentMp:Math.max(0,n.currentMp-t)}),r(1)},Se=()=>{p(!0),ae({currentMp:Math.min(n.maxMp,n.currentMp+t)})},Re=()=>{const P=Math.max(0,Math.min(n.maxHealth,t));ae({currentHealth:P}),l(!0),r(1)},Ae=()=>{const P=Math.max(0,Math.min(n.maxMp,t));ae({currentMp:P}),p(!0),r(1)},ve=()=>{ae({tempHealth:0}),s(!0)},xe=()=>{n.maxHealth!==void 0&&(ae({currentHealth:n.maxHealth}),l(!0))},Te=()=>{n.maxMp!==void 0&&(ae({currentMp:n.maxMp}),p(!0))},be=P=>{P.type==="touchstart"&&P.preventDefault(),ie(!0),Z.current=setTimeout(()=>{xe(),ve(),A(n.maxHealth||V),$(0),ie(!1),F.current&&(clearTimeout(F.current),F.current=null)},Ne)},pe=P=>{P.type==="touchstart"&&P.preventDefault(),ie(!0),Z.current=setTimeout(()=>{Te(),ie(!1),B.current&&(clearTimeout(B.current),B.current=null)},Ne)},tt=P=>{if(Z.current&&(clearTimeout(Z.current),Z.current=null,he&&P.type==="touchend")){const ce=P.currentTarget.getAttribute("data-bar-type");ce==="hp"?nt():ce==="mp"&&at()}ie(!1)},ke=()=>{Z.current&&(clearTimeout(Z.current),Z.current=null),ie(!1)},nt=()=>{he||(F.current?(clearTimeout(F.current),F.current=null,xe(),ve(),A(n.maxHealth||V),$(0)):(Re(),F.current=setTimeout(()=>{F.current=null},le)))},at=()=>{he||(B.current?(clearTimeout(B.current),B.current=null,Te()):(Ae(),B.current=setTimeout(()=>{B.current=null},le)))},y=n.currentHealth||0,V=Math.max(1,n.maxHealth||0),O=n.tempHealth||0,ee=n.currentMp||0,ye=Math.max(1,n.maxMp||0);return a("div",{className:"hit-points-component-container container-fluid mb-4",children:[a("div",{className:"row align-items-center mb-3",children:[a(Wt,{title:"VITALS",containerClassName:"mb-3"}),a("div",{className:"d-flex flex-column flex-sm-row justify-content-between align-items-center gap-3",children:[a("div",{className:"input-group amount-input-container d-flex",style:{width:"auto",alignItems:"center",flexWrap:"nowrap"},children:[a("button",{onClick:Ce,className:"btn btn-outline-primary btn-icon-square d-flex flex-column align-items-center justify-content-center","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Use MP",style:{width:"50px",height:"50px"},children:[a("i",{className:"fas fa-bolt-lightning"}),a("span",{style:{fontSize:"0.5em"},children:"MP"})]}),a("button",{onClick:N,className:"btn btn-icon-square btn-outline-danger","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Damage HP","data-bs-original-title":"Damage HP",style:{width:"50px",height:"50px"},children:a("i",{className:"fas fa-heart-circle-minus"})}),a("input",{type:"number",value:t,onChange:P=>r(Math.max(0,parseInt(P.currentTarget.value)||0)),className:"form-control text-center bg-dark text-light",min:"0",style:{width:"75px",height:"50px"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Enter amount to heal or damage","aria-label":"Amount for HP/MP changes"}),a("button",{onClick:k,className:"btn btn-icon-square btn-outline-success","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Heal HP","data-bs-original-title":"Heal HP",style:{width:"50px",height:"50px"},children:a("i",{className:"fas fa-heart-circle-plus"})}),a("button",{onClick:Se,className:"btn btn-outline-info btn-icon-square d-flex flex-column align-items-center justify-content-center","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Restore MP","data-bs-original-title":"Restore MP",style:{width:"50px",height:"50px"},children:[a("i",{className:"fas fa-droplet"}),a("span",{style:{fontSize:"0.5em"},children:"MP"})]})]}),a("div",{className:"d-flex gap-2 align-items-center",children:[a("button",{onClick:ve,className:"dark-btn dark-btn-secondary d-flex align-items-center gap-2","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Clear Temporary HP","data-bs-original-title":"Clear Temporary HP",children:[a("span",{children:"Clear Temp"}),a("i",{className:"fas fa-times-circle"})]}),a("button",{onClick:Y,className:"dark-btn dark-btn-primary d-flex align-items-center gap-2","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Heal Temporary HP","data-bs-original-title":"Heal Temporary HP",children:[a("span",{children:"Heal Temp"}),a("i",{className:"fas fa-heart-pulse"})]})]})]})]}),a("div",{className:"mb-3",children:[a("div",{style:{position:"relative",cursor:"pointer"},className:"mb-2",onClick:P=>{P.type!=="touchend"&&nt()},onMouseDown:be,onMouseUp:tt,onMouseLeave:ke,onTouchStart:be,onTouchEnd:tt,onTouchCancel:ke,onContextMenu:P=>P.preventDefault(),"data-bar-type":"hp","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Click to Set HP to ${t}, Long press/double click to reset HP & Temp HP`,"data-bs-original-title":`Click to Set HP to ${t}, Long press/double click to reset HP & Temp HP`,children:[a(Gs,{value:y,maxValue:V,color:{from:"#ef4444",to:"#e11d48"},labelRight:`${y} / ${V}`,trailingStartValue:E,trailColor:"rgba(200, 0, 0, 0.7)",className:M?"progress-bar-damage-flash":""}),(O>0||C!==null)&&a(Gs,{value:O,maxValue:V,color:{from:"#21d2ec",to:"#14b8a7"},labelCenter:O>0?`${O} Temp`:"",isOverlay:!0,className:`health-overlay-bar ${L?"progress-bar-damage-flash":""}`,trailingStartValue:C,trailColor:"rgba(0, 50, 200, 0.7)"})]}),"                ",a("div",{style:{cursor:"pointer"},onClick:P=>{P.type!=="touchend"&&at()},onMouseDown:pe,onMouseUp:tt,onMouseLeave:ke,onTouchStart:pe,onTouchEnd:tt,onTouchCancel:ke,onContextMenu:P=>P.preventDefault(),"data-bar-type":"mp","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Click to Set MP to ${t}, Long press/double click to Full Restore MP`,"data-bs-original-title":`Click to Set MP to ${t}, Long press/double click to Full Restore MP`,children:a(Gs,{value:ee,maxValue:ye,color:{from:"#3c82f6",to:"#6366f1"},labelRight:`${ee} / ${ye}`,className:u?"progress-bar-damage-flash":"",trailingStartValue:ee,trailColor:"rgba(0, 50, 200, 0.7)"})})]})]})}function Gh(){const{spells:n}=on(),{characterStats:e,setCharacterStats:t}=ze(ft),r=()=>{const u=(e.speed||ui)+_t(n,"speed"),p=De(e.conditions);return p.speedOverride===0?0:Math.max(0,u+p.speedModifier)},c=()=>{const u=e.AC||di,p=De(e.conditions);return u+p.acModifier},o=u=>{t(p=>({...p,...u}))},i=u=>{const p=u.currentTarget,m=Math.max(1,parseInt(p.value)||Ko);o({maxHealth:m}),e.currentHealth>m&&o({currentHealth:m})},l=u=>{const p=u.currentTarget,m=Math.max(1,parseInt(p.value)||1);o({maxMp:m}),e.currentMp>m&&o({currentMp:m})},d=u=>{const p=u.currentTarget,m=Math.max(0,parseInt(p.value)||di);t(_=>({..._,AC:m}))},s=u=>{const p=u.currentTarget,m=Math.max(0,parseInt(p.value)||ui);t(_=>({..._,speed:m}))};return a("div",{className:"character-overview-component container-fluid mb-4",children:[a("div",{className:"row align-items-center mb-3 d-none d-md-flex",children:[a("div",{className:"col-auto",children:a("div",{className:"d-flex gap-2",children:[a("div",{className:"text-center",children:[a("small",{className:"d-block mb-1 text-secondary",children:"Speed"}),a("input",{type:"number",className:`form-control form-control box-no-input text-center bg-dark ${De(e.conditions).speedModifier!==0||De(e.conditions).speedOverride===0?"text-warning":"text-light"}`,id:"speedInput",value:r(),readOnly:!0,"aria-label":"Speed",title:De(e.conditions).speedModifier!==0||De(e.conditions).speedOverride===0?"Speed modified by conditions":"Speed"})]}),a("div",{className:"text-center",children:[a("small",{className:"d-block mb-1 text-secondary",children:"AC"}),a("input",{type:"number",className:`form-control box-no-input text-center bg-dark ${De(e.conditions).acModifier!==0?"text-warning":"text-light"}`,id:"acInput",value:c(),readOnly:!0,"aria-label":"Armor Class",title:De(e.conditions).acModifier!==0?"AC modified by conditions":"Armor Class"})]})]})}),a("div",{className:"col-auto ms-auto",children:a("div",{className:"d-flex gap-2",children:[a("div",{className:"text-center",children:[a("small",{className:"d-block mb-1 text-secondary",children:"Base AC"}),a("input",{type:"number",className:"form-control form-control hp-input text-center bg-dark text-light",id:"baseACInput",value:e.AC||10,onChange:d,min:"0","aria-label":"Base Armor Class"})]}),a("div",{className:"text-center",children:[a("small",{className:"d-block mb-1 text-secondary",children:"Base Speed"}),a("input",{type:"number",className:"form-control form-control hp-input text-center bg-dark text-light",id:"baseSpeedInput",value:e.speed||15,onChange:s,min:"0","aria-label":"Base Speed"})]}),a("div",{className:"text-center",children:[a("small",{className:"d-block mb-1 text-secondary",children:"Max HP"}),a("input",{type:"number",className:"form-control form-control hp-input text-center bg-dark text-light",id:"maxHealthInput",value:e.maxHealth||35,onChange:i,min:"1","aria-label":"Maximum Hit Points"})]}),a("div",{className:"text-center",children:[a("small",{className:"d-block mb-1 text-secondary",children:"Max MP"}),a("input",{type:"number",className:"form-control form-control hp-input text-center bg-dark text-light",id:"maxMpInput",value:e.maxMp||1,onChange:l,min:"1","aria-label":"Maximum Mana Points"})]})]})})]}),a("div",{className:"d-md-none",children:[a("div",{className:"row mb-3",children:[a("div",{className:"col-6",children:a("div",{className:"text-center p-2 border rounded bg-dark",children:[a("small",{className:"d-block mb-2 text-secondary fw-bold",children:"SPEED"}),a("div",{className:`fs-4 fw-bold ${De(e.conditions).speedModifier!==0||De(e.conditions).speedOverride===0?"text-warning":"text-light"}`,title:De(e.conditions).speedModifier!==0||De(e.conditions).speedOverride===0?"Speed modified by conditions":"Speed",children:r()})]})}),a("div",{className:"col-6",children:a("div",{className:"text-center p-2 border rounded bg-dark",children:[a("small",{className:"d-block mb-2 text-secondary fw-bold",children:"AC"}),a("div",{className:`fs-4 fw-bold ${De(e.conditions).acModifier!==0?"text-warning":"text-light"}`,title:De(e.conditions).acModifier!==0?"AC modified by conditions":"Armor Class",children:c()})]})})]}),a("div",{className:"row mb-2",children:[a("div",{className:"col-6",children:a("div",{className:"text-center",children:[a("small",{className:"d-block mb-1 text-secondary",children:"Base Speed"}),a("input",{type:"number",className:"form-control text-center bg-dark text-light",value:e.speed||15,onChange:s,min:"0","aria-label":"Base Speed",style:{fontSize:"1.1rem",padding:"0.75rem"}})]})}),a("div",{className:"col-6",children:a("div",{className:"text-center",children:[a("small",{className:"d-block mb-1 text-secondary",children:"Base AC"}),a("input",{type:"number",className:"form-control text-center bg-dark text-light",value:e.AC||10,onChange:d,min:"0","aria-label":"Base Armor Class",style:{fontSize:"1.1rem",padding:"0.75rem"}})]})})]}),a("div",{className:"row",children:[a("div",{className:"col-6",children:a("div",{className:"text-center",children:[a("small",{className:"d-block mb-1 text-secondary",children:"Max HP"}),a("input",{type:"number",className:"form-control text-center bg-dark text-light",value:e.maxHealth||35,onChange:i,min:"1","aria-label":"Maximum Hit Points",style:{fontSize:"1.1rem",padding:"0.75rem"}})]})}),a("div",{className:"col-6",children:a("div",{className:"text-center",children:[a("small",{className:"d-block mb-1 text-secondary",children:"Max MP"}),a("input",{type:"number",className:"form-control text-center bg-dark text-light",value:e.maxMp||1,onChange:l,min:"1","aria-label":"Maximum Mana Points",style:{fontSize:"1.1rem",padding:"0.75rem"}})]})})]})]})]})}function Qh(){const{spells:n}=on(),{characterStats:e,setCharacterStats:t}=ze(ft);return a("div",{className:"character-sheet container-fluid",children:a("div",{className:"column",children:[a(Gh,{}),a("div",{className:"row justify-content-between mb-4",children:[a("div",{className:"col-md-6",children:a(zh,{})}),a("div",{className:"col-md-6",children:a(jo,{})})]}),a("div",{className:"row justify-content-center mt-4",children:a("div",{className:"col-12",children:a(Vo,{})})})]})})}const vs=()=>{const[n,e]=G(null);return ge(()=>{e(document.createElement("div"))},[]),ge(()=>{if(n)return n.className="toast-container position-fixed bottom-0 end-0 p-3",document.body.appendChild(n),()=>{document.body.removeChild(n)}},[n]),{showToast:(r,c="info-circle",o="primary",i="Notification")=>{if(!n)return;const l=document.createElement("div");l.className="toast",l.setAttribute("role","alert"),l.setAttribute("aria-live","assertive"),l.setAttribute("aria-atomic","true"),l.innerHTML=`
            <div class="toast-header">
                <i class="fas fa-${c} me-2 text-${o}"></i>
                <strong class="me-auto">${i}</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body">
                ${r}
            </div>
        `,n.appendChild(l),new Dn(l,{autohide:!0,delay:3e3}).show(),l.addEventListener("hidden.bs.toast",()=>{n.removeChild(l)})}}},Xh=()=>{const{characterStats:n,setCharacterStats:e}=ze(ft),{spells:t}=on(),{showToast:r}=vs(),c=(d,s)=>{e(u=>({...u,[d]:parseInt(s,10)||0}))},o=Object.entries(n).filter(([d])=>{var s;return((s=we[d])==null?void 0:s.category)!==Be.CORE}).reduce((d,[s,u])=>d+(parseInt(u,10)||0),0),i=d=>{const s=prompt("Enter a DC for the roll (leave blank for normal roll):");if(s===null)return;const u=Math.max(0,parseInt(s,10)),p=(n[d]||0)+_t(t,d),m=we[d];let _=`1d20+${p}`;u>1&&(_=`${_}cs>=${u}cf<${u}`);const E=u?`check vs DC ${u}`:"check",A=`&{template:default} {{name=${mr(d)} ${E}}}{{Roll=[[${_}]]}}{{Stat Bonus=[[${p}]] from ${m.shortName}}}`;navigator.clipboard.writeText(A);const C=u?`${m.name} roll vs DC ${u} copied! Paste it into Roll20.`:`${m.name} roll command copied! Paste it into Roll20.`;r(C,"clipboard","success","Copied to clipboard")},l=d=>{const s=Object.entries(we).filter(([u,p])=>p.category===d);return s.length>0&&a("div",{className:"stat-category",children:[a("h6",{className:"stat-category-title text-secondary mb-2",children:d.toUpperCase()}),a("div",{className:"stat-grid",children:s.map(([u,p])=>a("div",{className:"stat-group mb-2",title:`${p.name} ${p.description}`,"data-bs-toggle":"tooltip","data-bs-placement":"top",children:a("div",{className:"input-group",children:[a("span",{className:`input-group-text gap-1 text-${p.color}`,onClick:()=>i(u),style:{cursor:"pointer"},children:[a("i",{className:`fas ${p.icon}`})," ",a("span",{className:"stat-text",children:p.shortName})]}),a("input",{type:"number",className:"form-control",value:n[u]||0,onChange:m=>c(u,m.currentTarget.value)}),a("span",{className:"input-group-text",children:[a("i",{className:`fas ${_t(t,u)?"":"fa-link-slash"} text-muted`}),_t(t,u)>0&&a("div",{children:[a("span",{className:"text-secondary ms-1",children:["+",_t(t,u)," ="]}),a("span",{className:"text-muted ms-1",children:n[u]+_t(t,u)})]})]})]})},u))})]})};return a("div",{className:"character-stats",children:[a(Wt,{title:"STATS",lineMaxWidth:"50px",containerClassName:"mb-1"}),a("h6",{className:"stat-category-title text-danger mb-4",children:["BASE ALLOCATED POINTS: ",o]}),l(Be.PHYSICAL),l(Be.MAGICAL),l(Be.UTILITY)]})},Jh=({spellToDelete:n,confirmDelete:e,setSpellToDelete:t})=>a("div",{className:`modal fade ${n?"show":""}`,style:{display:n?"block":"none"},tabIndex:-1,children:a("div",{className:"modal-dialog",children:a("div",{className:"modal-content",children:[a("div",{className:"modal-header",children:[a("h5",{className:"modal-title",children:"Confirm Deletion"}),a("button",{type:"button",className:"btn-close",onClick:()=>t(null),"aria-label":"Close"})]}),a("div",{className:"modal-body",children:"Are you sure you want to delete this spell?"}),a("div",{className:"modal-footer",children:[a("button",{type:"button",className:"btn btn-secondary",onClick:()=>t(null),children:"No, Keep It"}),a("button",{type:"button",className:"btn btn-danger",onClick:e,children:"Yes, Delete It"})]})]})})}),Zh=({isModalOpen:n,closeModal:e,spellBeingEdited:t,currentSpell:r,setCurrentSpell:c,incrementPower:o,decrementPower:i,getSpellRank:l,getActionLabel:d,validateDiceRoll:s,diceError:u,saveSpell:p,removeSpell:m})=>a("div",{className:`modal ${n?"show":""}`,style:{display:n?"block":"none"},tabIndex:-1,children:a("div",{className:"modal-dialog",children:a("div",{className:"modal-content",children:[a("div",{className:"modal-header",children:[a("h5",{className:"modal-title",children:t?"Edit Spell Entry":"Add Spell"}),a("button",{type:"button",className:"btn-close",onClick:e})]}),a("div",{className:"modal-body",children:[a("div",{className:"mb-2",children:[a("label",{className:"form-label",children:"Spell Name"}),a("input",{type:"text",className:"form-control",placeholder:"Spell Name",value:r.name,onInput:_=>c({...r,name:_.currentTarget.value})})]}),a("div",{className:"mb-2",children:[a("label",{className:"form-label",children:"Spell Level"}),a("div",{className:"input-group",children:[a("button",{className:"btn btn-outline-secondary",type:"button",onClick:i,disabled:r.power<=1,children:a("i",{className:"fas fa-minus"})}),a("input",{type:"number",className:`form-control ${r.power<=0?"is-invalid":""}`,placeholder:"Spell Level",min:"1",value:r.power,onInput:_=>{const E=Math.max(1,parseInt(_.currentTarget.value,10)||1);c({...r,power:E,rank:l(E)})}}),a("button",{className:"btn btn-outline-secondary",type:"button",onClick:o,children:a("i",{className:"fas fa-plus"})}),r.power<=0&&a("div",{className:"invalid-feedback",children:"Spell level must be at least 1"})]})]}),a("div",{className:"alert alert-info py-1 mb-2",children:[a("i",{className:"fas fa-link me-2"}),a("small",{className:"text-muted d-block mt-1",children:["This spell's ",a("a",{href:"https://docs.google.com/document/d/1ZTxCemR8j6GhIMqhvmBd7kOo8wNsOisO_vOutlQBYv0/edit?tab=t.0",target:"_blank",children:"Soul Link Rank"})," will be ",a("b",{children:[l(r.power),"."]})]})]}),a("label",{className:"form-label",children:"Actions to Cast"}),a("div",{className:"input-group mb-2",children:[a("span",{className:"input-group-text",children:d(r.actions)}),a("select",{className:"form-select",value:r.actions,onChange:_=>c({...r,actions:parseInt(_.currentTarget.value)}),children:[a("option",{value:"1",children:"1 Action"}),a("option",{value:"2",children:"2 Actions"}),a("option",{value:"3",children:"3 Actions"}),a("option",{value:"0",children:"Free Action"})]})]}),a("label",{className:"form-label",children:"Element"}),a("div",{className:"input-group mb-2",children:[a("span",{className:"input-group-text",children:rt(r.element)}),a("select",{className:"form-select",value:r.element,onChange:_=>c({...r,element:_.currentTarget.value}),children:Object.entries(re).map(([_,E])=>a("option",{value:E,children:E},_))})]}),a("label",{className:"form-label",children:"Damage Roll(s)"}),a("div",{className:"input-group mb-2",children:[a("span",{className:"input-group-text",children:a("i",{className:"fas fa-dice-d20"})}),a("input",{type:"text",className:`form-control ${u?"is-invalid":""}`,placeholder:"Dice Roll (e.g. 1d4)",value:r.dice,onInput:_=>{const E=_.currentTarget.value;c({...r,dice:E}),s(E)}}),u&&a("div",{className:"invalid-feedback",children:u})]}),a("div",{className:"alert alert-info py-1 mb-2",children:[a("i",{className:"fas fa-info-circle me-2"}),a("small",{children:"Use [stat] to include a stat's value (e.g., [strength] + 1d6)"})]}),a("div",{className:"mb-2",children:[a("label",{className:"form-label",children:"Spell Description"}),a("textarea",{className:"form-control",placeholder:"Spell Description",value:r.description,onInput:_=>c({...r,description:_.currentTarget.value})})]}),a("div",{className:"mb-2",children:[a("label",{className:"form-label",children:["Amount currently stocked ",a("i",{children:'("Spell Charges")'})]}),a("div",{className:"input-group",children:a("input",{type:"number",className:`form-control ${r.quantity<0||r.quantity>Ct?"is-invalid":""}`,placeholder:"Quantity",min:"0",max:Ct.toString(),value:r.quantity,onInput:_=>{const E=parseInt(_.currentTarget.value,10)||0;E>Ct?c({...r,quantity:Ct}):c({...r,quantity:Math.max(0,E)})}})})]})]}),a("div",{className:"modal-footer",children:[a("button",{type:"button",className:"btn btn-secondary",onClick:e,children:[a("i",{className:"fas fa-times me-1"}),"Close"]}),t&&a("button",{type:"button",className:"btn btn-danger",onClick:()=>m(t.id),children:[a("i",{className:"fas fa-trash-alt me-1"}),"Delete"]}),a("button",{type:"button",className:"btn btn-success",onClick:p,children:[a("i",{className:`fas ${t?"fa-save":"fa-plus"} me-1`}),t?"Save Changes":"Add Spell"]})]})]})})}),ef=({isLinkModalOpen:n,closeLinkModal:e,currentSpell:t,setCurrentSpell:r,saveSpell:c,getLinkedStats:o})=>{var l;if(!t)return null;const{spells:i}=on();return a("div",{className:`modal fade ${n?"show":""}`,style:{display:n?"block":"none"},tabIndex:-1,children:a("div",{className:"modal-dialog",children:a("div",{className:"modal-content",children:[a("div",{className:"modal-header",children:[a("h5",{className:"modal-title",children:`Link ${t.name} to stat`}),a("button",{type:"button",className:"btn-close",onClick:e,"aria-label":"Close"})]}),a("div",{className:"modal-body",children:a("div",{className:"input-group mb-2",children:[a("span",{className:"input-group-text gap-1",children:a("i",{className:`fas ${t.linkedStat&&t.linkedStat!=="None"&&((l=we[t.linkedStat])==null?void 0:l.icon)||"fa-link-slash"}`})}),a("select",{className:"form-select",value:t.linkedStat||"None",onChange:d=>r({...t,linkedStat:d.currentTarget.value==="None"?null:d.currentTarget.value,isLinked:d.currentTarget.value!=="None"}),children:[a("option",{value:"None",children:"None"}),Object.entries(we).map(([d,s])=>(!o().includes(d)||d===t.linkedStat)&&s.type!==Me.CORE?a("option",{value:d,children:s.name},d):null)]}),a("span",{className:"input-group-text",children:["+",as(t.quantity,t.rank)]})]})}),a("div",{className:"modal-footer",children:[a("button",{type:"button",className:"btn btn-secondary",onClick:e,children:[a("i",{className:"fas fa-times me-1"}),"Close"]}),a("button",{type:"button",className:"btn btn-success",onClick:c,children:[a("i",{className:`fas ${t.id?"fa-save":"fa-plus"} me-1`})," ",t.id?"Save Changes":"Add Spell"]})]})]})})})},tf=()=>{const{characterStats:n,setCharacterStats:e}=ze(ft),{spells:t,setSpells:r,getLinkedStats:c}=on(),{showToast:o}=vs(),i={name:"",quantity:1,power:1,dice:"",description:"",actions:1,rank:1,isLinked:!1,linkedStat:"None",element:re.PHYS},[l,d]=G(i),[s,u]=G(null),[p,m]=G(!1),[_,E]=G(!1),[A,C]=G(null),[$,M]=G(!1);ge(()=>{const y=O=>{O.key==="Control"&&M(!0)},V=O=>{O.key==="Control"&&M(!1)};return window.addEventListener("keydown",y),window.addEventListener("keyup",V),()=>{window.removeEventListener("keydown",y),window.removeEventListener("keyup",V)}},[]);const j=y=>{var V,O;return y&&((O=(V=n.affinities)==null?void 0:V[y.element])==null?void 0:O.mastered)||!1},L=y=>{y&&W(j(y))},W=y=>{const V=n.luck+_t(t,"luck")||0,O=Math.min(V,Ds);var ee=`🍀 Luck=[[${V}`;V>Ds?ee+=`]] (+${Ds} max bonus)`:ee+="]]";const P=`${y?2:1}d6cf1 + ${O}[Luck Bonus]`,ce=y?"Draw Spell (Mastery)":"Draw Spell",de=`&{template:default} {{name=${ce}}} {{Charges Gained=[[${P}]]}} {{${ee}}} {{Note=If the number is highlighted red, the true amount of Charges Gained is that total MINUS the Luck Bonus.}}`;navigator.clipboard.writeText(de).then(()=>{o(`${ce} command copied! Paste it into Roll20.`,"clipboard","success","Copied to clipboard")}).catch(Pe=>{console.error("Failed to copy command: ",Pe),o("Failed to copy command.","exclamation-triangle","danger","Copy Error")})},U=y=>{if(y.quantity>0&&y.dice)try{const V=Qt(t,y.dice,n),O=rt(y.element),ee=Qt(t,"1d20+[strength]",n);let ye;y.actions===0?ye="Free Action":ye=y.actions===1?"Action":"Actions";const P=`&{template:default} {{name=${y.name}}}                                 {{Actions=${y.actions} ${ye}}}                                 {{Level=**Spell ${y.power}** (S.Link Rank ${y.rank})}}                                 {{Attack=[[${ee}]]}}                                 {{Damage=[[${V}]] ${O} ${y.element}}}                                 ${y.description?`{{Description=${y.description}}}
                                `:""}`;navigator.clipboard.writeText(P),o("Spell roll command copied! Paste it into the text chat on Roll20.","clipboard","success","Copied to clipboard"),k(y.id,"quantity",y.quantity-1)}catch(V){alert(V.message||"Invalid dice format!")}else o("No more charges of this spell remaining!","exclamation-triangle","warning","Cannot cast spell")},Q=(y,V,O)=>{const ee=V-O,ye=`${y.name}: ${O} → ${V} (${ee>=0?"+":""}${ee})`;console.log(ye)},X=y=>{C(A===y?null:y)};ge(()=>{localStorage.setItem("spells",JSON.stringify(t))},[t]),ge(()=>{const V=[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map(O=>new Et(O));return()=>{V.forEach(O=>O.dispose())}},[]);const R=(y=null)=>{u(y),d(y||i),m(!0)},F=()=>{u(null),m(!1)},B=(y=null)=>{u(y),d(y||i),E(!0)},Z=()=>{u(null),E(!1)},[le,Ne]=G(""),he=y=>{const V=es(y,n);return Ne(V.error||""),V.isValid},ie=()=>{const y=qo(l);if(y.length>0){alert(`Please fix the following:
${y.join(`
`)}`);return}he(l.dice)&&(r(s?t.map(V=>V.id===s.id?{...l,id:s.id}:V):[...t,{...l,id:Date.now()}]),p&&F(),_&&Z(),console.log("Spell saved:",l))},[ae,N]=G(null),k=(y,V,O)=>{const ee=t.find(ye=>ye.id===y);ee&&(ee.quantity!==O&&(N(y),setTimeout(()=>N(null),300),Q(ee,O,ee.quantity)),r(t.map(ye=>ye.id===y?{...ye,[V]:O}:ye)))},[Y,Ce]=G(null),Se=y=>{Ce(y)},Re=()=>{Y&&(t.find(y=>y.id===Y),r(t.filter(y=>y.id!==Y)),Ce(null),F())},Ae=(y,V)=>{const O=[...t],ee=y+V;ee>=0&&ee<t.length&&([O[y],O[ee]]=[O[ee],O[y]],r(O))},ve=()=>{const y=l.power+1;d({...l,power:y,rank:Ms(y)})},xe=()=>{if(l.power>1){const y=l.power-1;d({...l,power:y,rank:Ms(y)})}},[Te,be]=G(1),pe=y=>{const V=t.find(ee=>ee.id===y),O=Math.min(Ct,V.quantity+Te);k(y,"quantity",O),be(1)},tt=y=>{const V=t.find(ee=>ee.id===y),O=Math.max(0,V.quantity-Te);k(y,"quantity",O),be(1)},ke=y=>{let V="",O="";switch(y){case 0:V="[free-action]",O="Free Action";break;case 1:V="[one-action]",O="One Action";break;case 2:V="[two-actions]",O="Two Actions";break;case 3:V="[three-actions]",O="Three Actions";break;default:return""}return a("span",{className:"action","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-original-title":O,title:O,role:"img","aria-label":O,children:V})},nt=y=>y.isLinked?"Linked to "+we[y.linkedStat].name:"No linked stat",at=y=>{y.isLinked?console.log(`Linked stat: ${y.linkedStat}`):console.log("No linked stat"),B(y)};return a("div",{className:"spell-inventory","data-bs-theme":"dark",children:a("div",{className:"container",children:[a(Wt,{title:"SPELL INVENTORY",lineMaxWidth:"50px"}),a("div",{className:"d-flex align-items-center justify-content-center mb-4",children:[a("button",{className:`dark-btn me-2 ${$?"gold-button":"dark-btn-secondary"}`,onClick:y=>W(y.ctrlKey),style:{width:"160px",height:"60px"},children:a("div",{className:"d-flex flex-column align-items-center",children:[a("div",{children:[a("i",{className:"fas fa-dice me-2"})," ",a("span",{children:"Stock Roll"})]}),a("span",{style:{fontSize:"0.7em"},children:"hold Ctrl for mastery"})]})}),a("button",{className:"dark-btn dark-btn-primary",onClick:()=>R(),style:{width:"160px",height:"60px"},children:[a("i",{className:"fas fa-plus me-2"})," ",a("span",{children:"Add Spell"})]})]}),t.length===0&&a("span",{className:"text-muted text-center d-flex flex-column align-items-center justify-content-center"+(window.innerWidth<=750?" mt-4":""),children:"[ Inventory Empty ]"}),a("ul",{className:"list-group",children:t.map((y,V)=>a("li",{className:`list-group-item spell-item ${ae===y.id?"quantity-flash":""}`,children:[a("div",{class:"d-flex justify-content-left",children:[a("div",{className:"d-flex align-items-center overflow-hidden",style:{flex:"1 1 0"},onClick:()=>X(y.id),children:[a("span",{id:`quantity-badge-${y.id}`,className:"text-black badge quantity-badge me-2",style:{width:"2.5rem",flexShrink:0},children:a("small",{children:y.quantity})}),a("div",{class:"text-truncate",children:[rt(y.element)," ",a("span",{className:"arsenal me-2",children:y.name}),a("span",{className:"action-label hide-on-small me-2",style:{width:window.innerWidth<=750?"0px":"50px"},children:ke(y.actions)})]})]}),a("div",{className:"d-flex align-items-center justify-content-right",style:{gap:"0.5rem"},children:[a("i",{className:"fas fa-edit text-primary",onClick:O=>{O.stopPropagation(),R(y)},style:{cursor:"pointer",transition:"opacity 0.3s",opacity:.6,flexShrink:0},onMouseOver:O=>{O.stopPropagation(),O.currentTarget.style.opacity="1"},onMouseOut:O=>{O.stopPropagation(),O.currentTarget.style.opacity="0.6"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Edit Spell"}),a("span",{className:`badge bg-dark border text-${y.isLinked?we[y.linkedStat].color:"secondary"} ms-2 d-flex justify-content-between align-items-center link-badge-normal`,"data-bs-toggle":"tooltip","data-bs-original-title":nt(y),title:nt(y),onClick:O=>{O.stopPropagation(),at(y)},style:{cursor:"pointer",width:"4rem"},children:[a("i",{className:`fas ${y.isLinked?we[y.linkedStat].icon:"fa-link-slash"}`}),a("span",{children:y.isLinked?`+${as(y.quantity,y.rank)}`:""})]}),a("button",{className:"btn btn-outline-danger btn-sm roll-button",style:{width:"120px",whiteSpace:"nowrap",overflow:"hidden"},onClick:O=>{O.stopPropagation(),U(y)},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Click to copy roll command",children:[a("i",{className:"fas fa-dice-d20"}),a("span",{className:"ms-1 text-truncate",children:Qt(t,y.dice,n,!0)})]}),a("button",{className:"btn btn-outline-info btn-sm",onClick:O=>{O.stopPropagation(),L(y)},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Click to copy the Stock roll command for ${y.name} (${y.element} - ${j(y)?"mastery":"normal"})`,style:{flexShrink:0},children:a("i",{className:"fas fa-hand-sparkles"})}),a("div",{className:"input-group input-group-sm",children:[a("button",{className:"btn btn-outline-danger btn-sm",onClick:O=>{O.stopPropagation(),tt(y.id)},children:a("i",{className:"fas fa-minus"})}),a("input",{type:"number",className:"form-control form-control-sm text-center",style:{width:"60px"},value:Te,min:"1",max:Ct,onChange:O=>be(Math.max(1,Math.min(Ct,parseInt(O.currentTarget.value)||1))),onClick:O=>O.stopPropagation()}),a("button",{className:"btn btn-outline-success btn-sm",onClick:O=>{O.stopPropagation(),pe(y.id)},children:a("i",{className:"fas fa-plus"})})]}),a("div",{className:"btn-group hide-on-small",style:{flexShrink:0},children:[a("button",{className:"btn btn-outline-secondary btn-sm",onClick:O=>{O.stopPropagation(),Ae(V,1)},children:a("i",{className:"fas fa-chevron-down"})}),a("button",{className:"btn btn-outline-secondary btn-sm",onClick:O=>{O.stopPropagation(),Ae(V,-1)},children:a("i",{className:"fas fa-chevron-up"})})]})]}),a("br",{})]}),A===y.id&&a("div",{className:"mt-3",children:[a("div",{className:"d-flex flex-wrap justify-content-center mb-2",style:{gap:"0.5rem"},children:[a("span",{className:`badge bg-dark border text-${y.isLinked?we[y.linkedStat].color:"secondary"}
                                                link-badge-responsive`,"data-bs-toggle":"tooltip","data-bs-original-title":nt(y),title:nt(y),onClick:O=>{O.stopPropagation(),at(y)},style:{cursor:"pointer"},children:[a("i",{className:`fas ${y.isLinked?we[y.linkedStat].icon:"fa-link-slash"}`}),a("span",{children:y.isLinked?a(Xt,{children:[`${we[y.linkedStat].name}`,a("span",{className:"ms-2",children:`+${as(y.quantity,y.rank)}`})]}):""})]}),a("span",{className:"badge bg-dark border",children:[ke(y.actions)," ",y.actions," Actions"]}),a("span",{className:"badge bg-dark border",children:[rt(y.element)," ",y.element]}),a("span",{className:"badge bg-dark border",children:["Spell ",y.power," ",a("i",{children:["(SL. Rank: ",y.rank,")"]})]})]}),y.description&&a(Xt,{children:[a("p",{className:"py-1 border-bottom h5 arsenal",children:"Description"}),a("div",{className:"mb-0 spell-description arsenal",style:{display:"-webkit-box",WebkitLineClamp:"5",WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},dangerouslySetInnerHTML:{__html:y.description}})]})]})]},y.id))}),a(Zh,{isModalOpen:p,closeModal:F,spellBeingEdited:s,currentSpell:l,setCurrentSpell:d,incrementPower:ve,decrementPower:xe,getSpellRank:Ms,getActionLabel:ke,validateDiceRoll:he,diceError:le,saveSpell:ie,removeSpell:Se}),a(ef,{isLinkModalOpen:_,closeLinkModal:Z,currentSpell:l,setCurrentSpell:d,saveSpell:ie,getLinkedStats:c}),a(Jh,{spellToDelete:Y,confirmDelete:Re,setSpellToDelete:Ce})]})})};function nf(){return a("div",{className:"spell-inventory container-fluid",children:a("div",{className:"row",children:[a("div",{className:"col-12 col-md-4 order-2 order-md-1",style:{minHeight:"50vh",overflowY:"auto"},children:a(Xh,{})}),a("div",{className:"col-12 col-md-8 order-1 order-md-2",style:{minHeight:"50vh",overflowY:"auto"},children:a(tf,{})})]})})}const sf="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs/%3e%3cg%3e%3cpath%20stroke='none'%20fill='%23FFFFFF'%20d='M16%208%20L48%208%20Q56%208%2056%2016%20L56%2048%20Q56%2056%2048%2056%20L16%2056%20Q8%2056%208%2048%20L8%2016%20Q8%208%2016%208%20M11%2016%20L11%2048%20Q11%2053%2016%2053%20L48%2053%20Q53%2053%2053%2048%20L53%2016%20Q53%2011%2048%2011%20L16%2011%20Q11%2011%2011%2016%20M22%2032%20L30%2024%2032%2024%2032%2028%2042%2028%2042%2036%2032%2036%2032%2040%2030%2040%2022%2032'/%3e%3c/g%3e%3c/svg%3e",rf="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs/%3e%3cg%3e%3cpath%20stroke='none'%20fill='%23FFFFFF'%20d='M42%2032%20L34%2040%2032%2040%2032%2036%2022%2036%2022%2028%2032%2028%2032%2024%2034%2024%2042%2032%20M53%2048%20L53%2016%20Q53%2011%2048%2011%20L16%2011%20Q11%2011%2011%2016%20L11%2048%20Q11%2053%2016%2053%20L48%2053%20Q53%2053%2053%2048%20M48%2056%20L16%2056%20Q8%2056%208%2048%20L8%2016%20Q8%208%2016%208%20L48%208%20Q56%208%2056%2016%20L56%2048%20Q56%2056%2048%2056'/%3e%3c/g%3e%3c/svg%3e",af=[{id:"character",title:"Health"},{id:"spells",title:"Spells and Stats"},{id:"abilities",title:"Abilities"}],st=af.map(n=>({title:n.title,path:n.id==="character"?gn:`${gn.replace(/\/$/,"")}/${n.id}`}));function of(){const{url:n,route:e}=pr(),t=st.findIndex(o=>o.path===n);ge(()=>{const o=i=>{const l=i.target.tagName.toLowerCase(),d=i.target.isContentEditable;l==="input"||l==="textarea"||d||(i.key==="ArrowLeft"?t>0&&e(st[t-1].path):i.key==="ArrowRight"&&t<st.length-1&&e(st[t+1].path))};return window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)}},[n,t]);const r={height:"48px",verticalAlign:"middle",cursor:"pointer"},c=o=>{e(o)};return a("header",{className:"header mb-4",children:a("div",{className:"d-flex justify-content-center align-items-center p-3 border-bottom",children:a("div",{className:"col-md-8 col-lg-6 text-center",children:a("nav",{className:"btn-group gap-2",role:"group","aria-label":"Main navigation",children:[a("img",{src:sf,alt:"Navigate left",onClick:()=>t>0&&c(st[t-1].path),style:{...r,marginRight:"8px",filter:t>0?"opacity(0.75)":"opacity(0.3)",cursor:t>0?"pointer":""},"aria-disabled":t<=0}),"                        ",st.map((o,i)=>{let l="dark-btn dark-btn-secondary";return n===o.path&&(l+=" dark-btn--active"),a("button",{className:l,onClick:()=>c(o.path),children:a("span",{children:o.title})},o.path)}),a("img",{src:rf,alt:"Navigate right",onClick:()=>t<st.length-1&&c(st[t+1].path),style:{...r,marginLeft:"8px",filter:t<st.length-1?"opacity(0.75)":"opacity(0.3)",cursor:t<st.length-1?"pointer":""},"aria-disabled":t>=st.length-1})]})})})})}const lf=()=>{const{showToast:n}=vs(),{spells:e}=on(),{characterStats:t}=ze(ft),r=l=>De(t.conditions).saveModifier||0,c=(l,d)=>{const s=_t(e,d),u=r();let m="[[1d20+"+(s+u);l==="Initiative"&&(m+="&{tracker}"),m+="]]",m=m.replace("+-","-");const _=`&{template:default} {{name=${l}}}{{Roll=${m}}}{{Stat Bonus=[[${s}]] from ${mr(d)}}}{{Condition Modifier=[[${u}]]}}`;navigator.clipboard.writeText(_),n(l+" roll command copied! Paste it into the text chat on Roll20.","clipboard","success","Copied to clipboard")},o=[{name:"Fortitude Save",stat:"vitality"},{name:"Will Save",stat:"spirit"},{name:"Reflex Save",stat:"speed"}],i={name:"Initiative",stat:"speed",icon:"fa-bolt"};return a("div",{className:"save-rolls",children:a("div",{className:"d-flex flex-wrap gap-2 align-items-center justify-content-center",children:[o.map(l=>a("button",{onClick:()=>c(l.name,l.stat),className:"dark-btn dark-btn-secondary d-flex align-items-center justify-content-center flex-grow-1 position-relative",style:{minWidth:"140px",maxWidth:"170px",height:"48px"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Roll ${l.name} (${we[l.stat].shortName})`,children:[a("i",{className:`fas ${we[l.stat].icon} me-2`,style:{width:"20px"}}),a("span",{children:l.name})]},l.name)),a("button",{onClick:()=>c(i.name,i.stat),className:"dark-btn dark-btn-primary d-flex align-items-center justify-content-center flex-grow-1 position-relative",style:{minWidth:"140px",maxWidth:"170px",height:"48px"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Roll ${i.name} (${we[i.stat].shortName})`,children:[a("i",{className:`fas ${i.icon} text-${i.color} me-2`,style:{width:"20px"}}),a("span",{children:i.name})]},i.name)]})})},cf=({buildDate:n})=>{const{url:e}=pr();return a("footer",{className:"footer mt-auto py-3 text-light border-top",children:a("div",{className:"container-fluid",children:a("div",{className:"row",children:[a("div",{className:"col-4 text-start text-truncate d-flex align-items-center",children:[a("span",{className:"me-2",children:["Build Date: ",n]}),a("a",{href:"https://github.com/btarg/requiem-pathfinder-preact",target:"_blank",rel:"noopener noreferrer",className:"text-light",title:"GitHub Repository",children:a("i",{className:"fab fa-github"})})]}),a("div",{className:"col-4 text-center",children:[a(Wt,{title:"QUICK ROLLS",containerClassName:"mb-3"}),a(lf,{})]}),a("div",{className:"col-4 d-flex align-items-center justify-content-end",children:a("a",{href:"https://btarg.github.io/requiem-vault/",target:"_blank",rel:"noopener noreferrer",className:"dark-btn dark-btn-secondary",children:[a("i",{className:"fas fa-book me-2"}),a("span",{className:"me-2",children:"Open Wiki"}),a("i",{className:"fa-solid fa-arrow-up-right-from-square",style:{fontSize:"0.75rem"}})]})})]})})})},fo=Cn({abilities:[],setAbilities:n=>{},subscribe:n=>{},unsubscribe:n=>{}}),df=({children:n})=>{const[e,t]=G(()=>{try{const l=localStorage.getItem("abilities");return l?JSON.parse(l):[]}catch(l){return console.error("Error loading abilities from localStorage:",l),[]}}),[r,c]=G([]);ge(()=>{console.log("Saving abilities to localStorage:",e),localStorage.setItem("abilities",JSON.stringify(e)),r.forEach(l=>l(e))},[e,r]);const o=l=>{c(d=>[...d,l])},i=l=>{c(d=>d.filter(s=>s!==l))};return a(fo.Provider,{value:{abilities:e,setAbilities:t,subscribe:o,unsubscribe:i},children:n})},uf=()=>ze(fo),hf=({isModalOpen:n,closeModal:e,abilityBeingEdited:t,currentAbility:r,setCurrentAbility:c,getActionLabel:o,validateDiceRoll:i,diceError:l,saveAbility:d,removeAbility:s})=>a("div",{className:`modal ${n?"show":""}`,style:{display:n?"block":"none"},tabIndex:-1,children:a("div",{className:"modal-dialog",children:a("div",{className:"modal-content",children:[a("div",{className:"modal-header",children:[a("h5",{className:"modal-title",children:t?"Edit Ability":"Add Ability"}),a("button",{type:"button",className:"btn-close",onClick:e})]}),a("div",{className:"modal-body",children:[a("div",{className:"mb-2",children:[a("label",{className:"form-label",children:"Ability Type"}),a("div",{className:"btn-group w-100",children:[a("button",{type:"button",className:`btn ${r.type===Qe.GENERIC?"btn-danger":"btn-outline-danger"}`,onClick:()=>c({...r,type:Qe.GENERIC}),children:"Generic Ability"}),a("button",{type:"button",className:`btn ${r.type===Qe.WEAPON?"btn-danger":"btn-outline-danger"}`,onClick:()=>c({...r,type:Qe.WEAPON}),children:"Attack"})]})]}),a("div",{className:"mb-2",children:[a("label",{className:"form-label",children:"Name"}),a("input",{type:"text",className:"form-control",placeholder:r.type===Qe.WEAPON?"Attack Name":"Ability Name",value:r.name,onInput:u=>c({...r,name:u.currentTarget.value})})]}),a("label",{className:"form-label",children:"Actions to Use"}),a("div",{className:"input-group mb-2",children:[a("span",{className:"input-group-text",children:o(r.actions)}),a("select",{className:"form-select",value:r.actions,onChange:u=>c({...r,actions:parseInt(u.currentTarget.value)}),children:[a("option",{value:"1",children:"1 Action"}),a("option",{value:"2",children:"2 Actions"}),a("option",{value:"3",children:"3 Actions"}),a("option",{value:"4",children:"Reaction"}),a("option",{value:"0",children:"Free Action"})]})]}),"                        ",a("label",{className:"form-label",children:"Element"}),a("div",{className:"input-group mb-2",children:[a("span",{className:"input-group-text",children:rt(r.element)}),a("select",{className:"form-select",value:r.element,onChange:u=>c({...r,element:u.currentTarget.value}),children:Object.values(re).map(u=>a("option",{value:u,children:u},u))})]}),a("label",{className:"form-label",children:"Range"}),a("div",{className:"input-group mb-2",children:[a("span",{className:"input-group-text",children:a("i",{className:"fas fa-crosshairs"})}),a("input",{type:"number",className:"form-control",placeholder:"Range in metres (0 = infinite)",value:r.range||0,min:"0",onInput:u=>c({...r,range:parseInt(u.currentTarget.value)||0})}),a("span",{className:"input-group-text",children:(r.range||0)===0?"Infinite":"m"})]}),a("label",{className:"form-label",children:r.type===Qe.WEAPON?"Attack Roll":"Dice Roll"}),a("div",{className:"input-group mb-2",children:[a("span",{className:"input-group-text",children:a("i",{className:"fas fa-dice-d20"})}),a("input",{type:"text",className:`form-control ${l?"is-invalid":""}`,placeholder:"Dice Roll (e.g. 1d4)",value:r.dice,onInput:u=>{const p=u.currentTarget.value;c({...r,dice:p}),i(p)}}),l&&a("div",{className:"invalid-feedback",children:l})]}),a("div",{className:"alert alert-info py-1 mb-2",children:[a("i",{className:"fas fa-info-circle me-2"}),a("small",{children:"Use [stat] to include a stat's value (e.g., [strength] + 1d6)"})]}),r.type===Qe.WEAPON&&a("div",{className:"mb-3",children:[a("label",{className:"form-label",children:"Additional Attacks"}),a("br",{}),r.additionalAttacks&&r.additionalAttacks.map((u,p)=>a("div",{className:"input-group mb-2",children:[a("span",{className:"input-group-text",children:["Attack ",p+2," Modifier"]}),a("input",{type:"number",className:"form-control",value:u.penalty,onChange:m=>{const _=parseInt(m.currentTarget.value)||0,E=[...r.additionalAttacks];E[p]={...u,penalty:_},c({...r,additionalAttacks:E})}}),a("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>{const m=[...r.additionalAttacks];m.splice(p,1),c({...r,additionalAttacks:m})},children:a("i",{className:"fas fa-times"})})]},p)),a("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>{const u=[...r.additionalAttacks||[]];u.push({penalty:-5}),c({...r,additionalAttacks:u})},children:[a("i",{className:"fas fa-plus me-1"})," Add Attack"]})]}),a("div",{className:"mb-2",children:[a("label",{className:"form-label",children:"Description"}),a("textarea",{className:"form-control",placeholder:"Ability Description",value:r.description,onInput:u=>c({...r,description:u.currentTarget.value})})]})]}),a("div",{className:"modal-footer",children:[a("button",{type:"button",className:"btn btn-secondary",onClick:e,children:[a("i",{className:"fas fa-times me-1"}),"Close"]}),t&&a("button",{type:"button",className:"btn btn-danger",onClick:()=>s(t.id),children:[a("i",{className:"fas fa-trash-alt me-1"}),"Delete"]}),a("button",{type:"button",className:"btn btn-success",onClick:d,children:[a("i",{className:`fas ${t?"fa-save":"fa-plus"} me-1`}),t?"Save Changes":"Add Ability"]})]})]})})}),ff=({abilityToDelete:n,confirmDelete:e,setAbilityToDelete:t})=>a("div",{className:`modal fade ${n?"show":""}`,style:{display:n?"block":"none"},tabIndex:-1,children:a("div",{className:"modal-dialog",children:a("div",{className:"modal-content",children:[a("div",{className:"modal-header",children:[a("h5",{className:"modal-title",children:"Confirm Deletion"}),a("button",{type:"button",className:"btn-close",onClick:()=>t(null),"aria-label":"Close"})]}),a("div",{className:"modal-body",children:"Are you sure you want to delete this ability?"}),a("div",{className:"modal-footer",children:[a("button",{type:"button",className:"btn btn-secondary",onClick:()=>t(null),children:"No, Keep It"}),a("button",{type:"button",className:"btn btn-danger",onClick:e,children:"Yes, Delete It"})]})]})})}),pf=()=>{const{abilities:n,setAbilities:e}=uf(),{characterStats:t}=ze(ft),{showToast:r}=vs(),c={id:null,name:"",type:Qe.GENERIC,description:"",dice:"",actions:1,element:"Physical",additionalAttacks:[],range:0},[o,i]=G(null),[l,d]=G(c),[s,u]=G(null),[p,m]=G(!1),[_,E]=G(null),[A,C]=G(""),[$,M]=G(null);ge(()=>{console.log("Saving abilities to localStorage:",n),localStorage.setItem("abilities",JSON.stringify(n))},[n]),ge(()=>{const k=[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map(Y=>new Et(Y));return()=>{k.forEach(Y=>{Y&&typeof Y.dispose=="function"&&Y.dispose()})}},[]);const j=N=>{i(o===N?null:N)},L=(N=null)=>{u(N),d(N||c),m(!0)},W=()=>{u(null),m(!1),C("")},U=N=>{E(N)},Q=()=>{if(_){const N=n.find(k=>k.id===_);e(n.filter(k=>k.id!==_)),E(null),W(),r(`${N.name} deleted successfully`,"trash","danger","Deleted")}},X=N=>{if(!N)return!0;const k=es(N,t);return C(k.error||""),k.isValid},R=()=>{var N;if(!l.name.trim()){C("Name is required");return}if(((N=l.type)==null?void 0:N.toString())===Qe.WEAPON.toString()&&!l.dice.trim()){C("Attack roll is required for weapons");return}if(!(l.dice&&!X(l.dice))){if(s)e(n.map(k=>k.id===s.id?{...l,id:s.id}:k)),r(`${l.name} updated successfully`,"check","success","Updated"),M(s.id);else{const k={...l,id:Date.now()};e(Y=>[...Y,k]),r(`${l.name} added successfully`,"plus","success","Added"),M(k.id)}setTimeout(()=>M(null),1e3),console.log("Ability saved:",l),W()}},F=N=>{let k="",Y="";switch(N){case 0:k="[free-action]",Y="Free Action";break;case 1:k="[one-action]",Y="One Action";break;case 2:k="[two-actions]",Y="Two Actions";break;case 3:k="[three-actions]",Y="Three Actions";break;case 4:k="[reaction]",Y="Reaction";break;default:return""}return a("span",{className:"action","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-original-title":Y,title:Y,role:"img","aria-label":Y,children:k})},B=N=>{N.type===Qe.WEAPON?Z(N):le(N)},Z=(N,k=0)=>{const Y=N.dice,{isValid:Ce,error:Se}=es(Y,t);if(!Ce){r(Se,"exclamation-triangle","danger","Invalid Dice");return}const Re=Qt([],Y,t),Ae=N.name;let ve=Re;if(k>0&&N.additionalAttacks&&N.additionalAttacks[k-1]){const pe=N.additionalAttacks[k-1].penalty||0;pe!==0&&(ve=`${Re}${pe<0?pe:`+${pe}`}`)}const xe=`{{Attack ${k>0?k+1:""}=[[${ve}]]}}`;let Te="";N.element&&(Te=`{{Element=${rt(N.element)} ${N.element}}}`);const be=`&{template:default} {{name=${Ae}}} ${xe} ${Te} {{Description=${N.description||""}}}`;navigator.clipboard.writeText(be).then(()=>{const pe=k>0?` (Attack #${k+1})`:"";r(`${Ae}${pe} command copied! Paste it into Roll20.`,"clipboard","success","Copied to clipboard")}).catch(pe=>{console.error("Failed to copy command: ",pe),r("Failed to copy command.","exclamation-triangle","danger","Copy Error")})},le=N=>{let k="";if(N.dice){const{isValid:Ce,error:Se}=es(N.dice,t);if(!Ce){r(Se,"exclamation-triangle","danger","Invalid Dice");return}k=`{{Roll=[[${Qt([],N.dice,t)}]]}}`}const Y=`&{template:default} {{name=${N.name}}} ${k} {{Description=${N.description||""}}}`;navigator.clipboard.writeText(Y).then(()=>{r(`${N.name} command copied! Paste it into Roll20.`,"clipboard","success","Copied to clipboard")}).catch(Ce=>{console.error("Failed to copy command: ",Ce),r("Failed to copy command.","exclamation-triangle","danger","Copy Error")})},Ne=n.filter(N=>{var k;return((k=N.type)==null?void 0:k.toString())===Qe.WEAPON.toString()}),he=n.filter(N=>{var k;return((k=N.type)==null?void 0:k.toString())===Qe.GENERIC.toString()}),ie=N=>a("li",{className:`list-group-item ${$===N.id?"quantity-flash":""}`,children:[a("div",{className:"d-flex justify-content-between align-items-center",children:[a("div",{className:"d-flex align-items-center overflow-hidden",style:{flex:"1 1 0"},onClick:()=>j(N.id),children:[a("span",{className:"me-2",children:rt(N.element)}),a("div",{className:"text-truncate",children:[a("span",{className:"arsenal me-2",children:N.name}),a("span",{className:"action-label hide-on-small me-2",children:F(N.actions)})]})]}),a("div",{className:"d-flex align-items-center justify-content-center",style:{gap:"0.5rem"},children:["                    ",a("i",{className:"fas fa-edit text-primary",onClick:k=>{k.stopPropagation(),L(N)},style:{cursor:"pointer",transition:"opacity 0.3s",opacity:.6,flexShrink:0},onMouseOver:k=>{k.stopPropagation(),k.currentTarget.style.opacity="1"},onMouseOut:k=>{k.stopPropagation(),k.currentTarget.style.opacity="0.6"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Edit Weapon"}),a("div",{className:"btn-group d-flex justify-content-center",children:[a("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>Z(N,0),"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Roll base attack",children:[a("i",{className:"fas fa-dice-d20 me-1"}),a("span",{className:"ms-1 text-truncate",children:Qt(Ne,N.dice,t,!0)})]}),"                        ",N.additionalAttacks.map((k,Y)=>a("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>Z(N,Y+1),"data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Roll attack #${Y+2} (${k.penalty<0?k.penalty:`+${k.penalty}`})`,children:["#",Y+2," (",k.penalty<0?k.penalty:`+${k.penalty}`,")"]},Y))]})]})]}),o===N.id&&a("div",{className:"ability-details mt-2",children:["                    ",a("div",{className:"d-flex flex-wrap mb-2 justify-content-center gap-1",children:[N.element&&a("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`${N.element} damage type`,children:[rt(N.element)," ",N.element]}),a("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Takes ${N.actions} action${N.actions!==1?"s":""} to use`,children:[F(N.actions)," ",N.actions===4?"Reaction":`${N.actions} Action${N.actions!==1?"s":""}`]}),N.additionalAttacks&&N.additionalAttacks.length>0&&a("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Can make ${N.additionalAttacks.length+1} attacks in total`,children:[a("i",{className:"fas fa-hand-fist"})," ",N.additionalAttacks.length+1," Attacks"]}),"                        ",N.range>0&&a("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Can be used up to ${N.range||0} metres away`,children:[a("i",{className:"fas fa-crosshairs"})," ",N.range||0," m"]})]}),N.description&&a("div",{children:[a("p",{className:"py-1 border-bottom h6 arsenal text-center",children:"Description"}),a("p",{className:"mb-2",children:N.description})]})]})]},N.id),ae=N=>a("li",{className:`list-group-item ${$===N.id?"quantity-flash":""}`,children:[a("div",{className:"d-flex justify-content-between align-items-center",children:[a("div",{className:"d-flex align-items-center overflow-hidden",style:{flex:"1 1 0"},onClick:()=>j(N.id),children:[a("span",{className:"me-2",children:rt(N.element)}),a("div",{className:"text-truncate",children:[a("span",{className:"arsenal me-2",children:N.name}),a("span",{className:"action-label hide-on-small me-2",children:F(N.actions)})]})]}),a("div",{className:"d-flex align-items-center",style:{gap:"0.5rem"},children:[a("i",{className:"fas fa-edit text-primary",onClick:k=>{k.stopPropagation(),L(N)},style:{cursor:"pointer",transition:"opacity 0.3s",opacity:.6,flexShrink:0},onMouseOver:k=>{k.stopPropagation(),k.currentTarget.style.opacity="1"},onMouseOut:k=>{k.stopPropagation(),k.currentTarget.style.opacity="0.6"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Edit Ability"}),N.dice&&a("button",{className:"btn btn-sm btn-outline-danger",onClick:k=>{k.stopPropagation(),B(N)},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Roll this ability",children:[a("i",{className:"fas fa-dice-d20 me-1"}),a("span",{className:"text-truncate",children:N.dice})]})]})]}),o===N.id&&a("div",{className:"ability-details mt-2",children:["                    ",a("div",{className:"d-flex flex-wrap mb-2 justify-content-center gap-1",children:[a("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Takes ${N.actions} action${N.actions!==1?"s":""} to use`,children:[F(N.actions)," ",N.actions===4?"Reaction":`${N.actions} Action${N.actions!==1?"s":""}`]}),N.element&&a("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`${N.element} element type`,children:[rt(N.element)," ",N.element]}),N.dice&&a("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Dice formula for this ability",children:[a("i",{className:"fas fa-dice-d20"})," ",N.dice]}),N.range>0&&a("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Can be cast up to ${N.range||0} metres away`,children:[a("i",{className:"fas fa-crosshairs"})," ",N.range||0," m"]})]}),N.description&&a("div",{children:[a("p",{className:"py-1 border-bottom h6 arsenal",children:"Description"}),a("p",{className:"mb-0",children:N.description})]})]})]},N.id);return a("div",{className:"abilities-list-container",children:[a(Wt,{title:"ABILITIES & ATTACKS"}),a("div",{className:"d-flex flex-column justify-content-between align-items-center mb-4",children:a("button",{className:"dark-btn dark-btn-primary mt-2 mt-md-0",onClick:()=>L(),style:{width:"160px",height:"60px"},"data-bs-toggle":"tooltip","data-bs-placement":"bottom",title:"Create a new ability or weapon",children:[a("i",{className:"fas fa-plus me-2"})," ",a("span",{children:"Add Ability"})]})}),a("div",{className:"row",children:[a("div",{className:"col-12 col-md-6 mb-3",children:a("div",{className:"card",children:[a("div",{className:"card-header",children:a("h5",{className:"arsenal m-0",children:"Attacks"})}),a("div",{className:"card-body p-0",children:Ne.length>0?a("ul",{className:"list-group list-group-flush",children:Ne.map(N=>ie(N))}):a("div",{className:"text-center p-4",children:a("p",{className:"arsenal mb-0",children:'No weapons found. Click "Add Ability" to create one.'})})})]})}),a("div",{className:"col-12 col-md-6 mb-3",children:a("div",{className:"card",children:[a("div",{className:"card-header",children:a("h5",{className:"arsenal m-0",children:"Generic Abilities"})}),a("div",{className:"card-body p-0",children:he.length>0?a("ul",{className:"list-group list-group-flush",children:he.map(N=>ae(N))}):a("div",{className:"text-center p-4",children:a("p",{className:"arsenal mb-0",children:'No abilities found. Click "Add Ability" to create one.'})})})]})})]}),a(hf,{isModalOpen:p,closeModal:W,abilityBeingEdited:s,currentAbility:l,setCurrentAbility:d,getActionLabel:F,validateDiceRoll:X,diceError:A,saveAbility:R,removeAbility:U}),a(ff,{abilityToDelete:_,confirmDelete:Q,setAbilityToDelete:E})]})};function mf(){return a("div",{className:"abilities-page container-fluid",children:a(pf,{})})}function _f(){return a(Mo,{children:a(Do,{children:a(df,{children:a(Sn,{children:a("div",{className:"d-flex flex-column min-vh-100",children:[a(of,{}),a("main",{className:"flex-grow-1",children:a(da,{children:[a(Bn,{path:gn,component:Qh}),a(Bn,{path:`${gn}spells`,component:nf}),a(Bn,{path:`${gn}abilities`,component:mf}),a(Bn,{default:!0,component:wo})]})}),a(cf,{buildDate:"2025-07-19T13:43:59.627Z"})]})})})})})}To(a(_f,{}),document.getElementById("app"));
