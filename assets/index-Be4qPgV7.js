(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))r(c);new MutationObserver(c=>{for(const a of c)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(c){const a={};return c.integrity&&(a.integrity=c.integrity),c.referrerPolicy&&(a.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?a.credentials="include":c.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(c){if(c.ep)return;c.ep=!0;const a=t(c);fetch(c.href,a)}})();var En,te,Yi,Dt,qr,Ki,qi,Gi,ar,Gs,zs,zi,bn={},Qi=[],_o=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Nn=Array.isArray;function ut(n,e){for(var t in e)n[t]=e[t];return n}function or(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function Lt(n,e,t){var r,c,a,i={};for(a in e)a=="key"?r=e[a]:a=="ref"?c=e[a]:i[a]=e[a];if(arguments.length>2&&(i.children=arguments.length>3?En.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(a in n.defaultProps)i[a]==null&&(i[a]=n.defaultProps[a]);return mn(n,i,r,c,null)}function mn(n,e,t,r,c){var a={type:n,props:e,key:t,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:c??++Yi,__i:-1,__u:0};return c==null&&te.vnode!=null&&te.vnode(a),a}function Xt(n){return n.children}function zn(n,e){this.props=n,this.context=e}function Jt(n,e){if(e==null)return n.__?Jt(n.__,n.__i+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?Jt(n):null}function Xi(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return Xi(n)}}function Qs(n){(!n.__d&&(n.__d=!0)&&Dt.push(n)&&!ns.__r++||qr!=te.debounceRendering)&&((qr=te.debounceRendering)||Ki)(ns)}function ns(){for(var n,e,t,r,c,a,i,l=1;Dt.length;)Dt.length>l&&Dt.sort(qi),n=Dt.shift(),l=Dt.length,n.__d&&(t=void 0,c=(r=(e=n).__v).__e,a=[],i=[],e.__P&&((t=ut({},r)).__v=r.__v+1,te.vnode&&te.vnode(t),lr(e.__P,t,r,e.__n,e.__P.namespaceURI,32&r.__u?[c]:null,a,c??Jt(r),!!(32&r.__u),i),t.__v=r.__v,t.__.__k[t.__i]=t,ta(a,t,i),t.__e!=c&&Xi(t)));ns.__r=0}function Ji(n,e,t,r,c,a,i,l,u,s,d){var p,m,_,E,A,C,O=r&&r.__k||Qi,D=e.length;for(u=go(t,e,O,u,D),p=0;p<D;p++)(_=t.__k[p])!=null&&(m=_.__i==-1?bn:O[_.__i]||bn,_.__i=p,C=lr(n,_,m,c,a,i,l,u,s,d),E=_.__e,_.ref&&m.ref!=_.ref&&(m.ref&&cr(m.ref,null,_),d.push(_.ref,_.__c||E,_)),A==null&&E!=null&&(A=E),4&_.__u||m.__k===_.__k?u=Zi(_,u,n):typeof _.type=="function"&&C!==void 0?u=C:E&&(u=E.nextSibling),_.__u&=-7);return t.__e=A,u}function go(n,e,t,r,c){var a,i,l,u,s,d=t.length,p=d,m=0;for(n.__k=new Array(c),a=0;a<c;a++)(i=e[a])!=null&&typeof i!="boolean"&&typeof i!="function"?(u=a+m,(i=n.__k[a]=typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?mn(null,i,null,null,null):Nn(i)?mn(Xt,{children:i},null,null,null):i.constructor==null&&i.__b>0?mn(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=n,i.__b=n.__b+1,l=null,(s=i.__i=vo(i,t,u,p))!=-1&&(p--,(l=t[s])&&(l.__u|=2)),l==null||l.__v==null?(s==-1&&(c>d?m--:c<d&&m++),typeof i.type!="function"&&(i.__u|=4)):s!=u&&(s==u-1?m--:s==u+1?m++:(s>u?m--:m++,i.__u|=4))):n.__k[a]=null;if(p)for(a=0;a<d;a++)(l=t[a])!=null&&(2&l.__u)==0&&(l.__e==r&&(r=Jt(l)),sa(l,l));return r}function Zi(n,e,t){var r,c;if(typeof n.type=="function"){for(r=n.__k,c=0;r&&c<r.length;c++)r[c]&&(r[c].__=n,e=Zi(r[c],e,t));return e}n.__e!=e&&(e&&n.type&&!t.contains(e)&&(e=Jt(n)),t.insertBefore(n.__e,e||null),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function ea(n,e){return e=e||[],n==null||typeof n=="boolean"||(Nn(n)?n.some(function(t){ea(t,e)}):e.push(n)),e}function vo(n,e,t,r){var c,a,i=n.key,l=n.type,u=e[t];if(u===null&&n.key==null||u&&i==u.key&&l==u.type&&(2&u.__u)==0)return t;if(r>(u!=null&&(2&u.__u)==0?1:0))for(c=t-1,a=t+1;c>=0||a<e.length;){if(c>=0){if((u=e[c])&&(2&u.__u)==0&&i==u.key&&l==u.type)return c;c--}if(a<e.length){if((u=e[a])&&(2&u.__u)==0&&i==u.key&&l==u.type)return a;a++}}return-1}function Gr(n,e,t){e[0]=="-"?n.setProperty(e,t??""):n[e]=t==null?"":typeof t!="number"||_o.test(e)?t:t+"px"}function Hn(n,e,t,r,c){var a;e:if(e=="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof r=="string"&&(n.style.cssText=r=""),r)for(e in r)t&&e in t||Gr(n.style,e,"");if(t)for(e in t)r&&t[e]==r[e]||Gr(n.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")a=e!=(e=e.replace(Gi,"$1")),e=e.toLowerCase()in n||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),n.l||(n.l={}),n.l[e+a]=t,t?r?t.u=r.u:(t.u=ar,n.addEventListener(e,a?zs:Gs,a)):n.removeEventListener(e,a?zs:Gs,a);else{if(c=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&t==1?"":t))}}function zr(n){return function(e){if(this.l){var t=this.l[e.type+n];if(e.t==null)e.t=ar++;else if(e.t<t.u)return;return t(te.event?te.event(e):e)}}}function lr(n,e,t,r,c,a,i,l,u,s){var d,p,m,_,E,A,C,O,D,B,I,U,V,Q,X,P,F,Y=e.type;if(e.constructor!=null)return null;128&t.__u&&(u=!!(32&t.__u),a=[l=e.__e=t.__e]),(d=te.__b)&&d(e);e:if(typeof Y=="function")try{if(O=e.props,D="prototype"in Y&&Y.prototype.render,B=(d=Y.contextType)&&r[d.__c],I=d?B?B.props.value:d.__:r,t.__c?C=(p=e.__c=t.__c).__=p.__E:(D?e.__c=p=new Y(O,I):(e.__c=p=new zn(O,I),p.constructor=Y,p.render=yo),B&&B.sub(p),p.props=O,p.state||(p.state={}),p.context=I,p.__n=r,m=p.__d=!0,p.__h=[],p._sb=[]),D&&p.__s==null&&(p.__s=p.state),D&&Y.getDerivedStateFromProps!=null&&(p.__s==p.state&&(p.__s=ut({},p.__s)),ut(p.__s,Y.getDerivedStateFromProps(O,p.__s))),_=p.props,E=p.state,p.__v=e,m)D&&Y.getDerivedStateFromProps==null&&p.componentWillMount!=null&&p.componentWillMount(),D&&p.componentDidMount!=null&&p.__h.push(p.componentDidMount);else{if(D&&Y.getDerivedStateFromProps==null&&O!==_&&p.componentWillReceiveProps!=null&&p.componentWillReceiveProps(O,I),!p.__e&&p.shouldComponentUpdate!=null&&p.shouldComponentUpdate(O,p.__s,I)===!1||e.__v==t.__v){for(e.__v!=t.__v&&(p.props=O,p.state=p.__s,p.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(Z){Z&&(Z.__=e)}),U=0;U<p._sb.length;U++)p.__h.push(p._sb[U]);p._sb=[],p.__h.length&&i.push(p);break e}p.componentWillUpdate!=null&&p.componentWillUpdate(O,p.__s,I),D&&p.componentDidUpdate!=null&&p.__h.push(function(){p.componentDidUpdate(_,E,A)})}if(p.context=I,p.props=O,p.__P=n,p.__e=!1,V=te.__r,Q=0,D){for(p.state=p.__s,p.__d=!1,V&&V(e),d=p.render(p.props,p.state,p.context),X=0;X<p._sb.length;X++)p.__h.push(p._sb[X]);p._sb=[]}else do p.__d=!1,V&&V(e),d=p.render(p.props,p.state,p.context),p.state=p.__s;while(p.__d&&++Q<25);p.state=p.__s,p.getChildContext!=null&&(r=ut(ut({},r),p.getChildContext())),D&&!m&&p.getSnapshotBeforeUpdate!=null&&(A=p.getSnapshotBeforeUpdate(_,E)),P=d,d!=null&&d.type===Xt&&d.key==null&&(P=na(d.props.children)),l=Ji(n,Nn(P)?P:[P],e,t,r,c,a,i,l,u,s),p.base=e.__e,e.__u&=-161,p.__h.length&&i.push(p),C&&(p.__E=p.__=null)}catch(Z){if(e.__v=null,u||a!=null)if(Z.then){for(e.__u|=u?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;a[a.indexOf(l)]=null,e.__e=l}else for(F=a.length;F--;)or(a[F]);else e.__e=t.__e,e.__k=t.__k;te.__e(Z,e,t)}else a==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):l=e.__e=bo(t.__e,e,t,r,c,a,i,u,s);return(d=te.diffed)&&d(e),128&e.__u?void 0:l}function ta(n,e,t){for(var r=0;r<t.length;r++)cr(t[r],t[++r],t[++r]);te.__c&&te.__c(e,n),n.some(function(c){try{n=c.__h,c.__h=[],n.some(function(a){a.call(c)})}catch(a){te.__e(a,c.__v)}})}function na(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:Nn(n)?n.map(na):ut({},n)}function bo(n,e,t,r,c,a,i,l,u){var s,d,p,m,_,E,A,C=t.props,O=e.props,D=e.type;if(D=="svg"?c="http://www.w3.org/2000/svg":D=="math"?c="http://www.w3.org/1998/Math/MathML":c||(c="http://www.w3.org/1999/xhtml"),a!=null){for(s=0;s<a.length;s++)if((_=a[s])&&"setAttribute"in _==!!D&&(D?_.localName==D:_.nodeType==3)){n=_,a[s]=null;break}}if(n==null){if(D==null)return document.createTextNode(O);n=document.createElementNS(c,D,O.is&&O),l&&(te.__m&&te.__m(e,a),l=!1),a=null}if(D==null)C===O||l&&n.data==O||(n.data=O);else{if(a=a&&En.call(n.childNodes),C=t.props||bn,!l&&a!=null)for(C={},s=0;s<n.attributes.length;s++)C[(_=n.attributes[s]).name]=_.value;for(s in C)if(_=C[s],s!="children"){if(s=="dangerouslySetInnerHTML")p=_;else if(!(s in O)){if(s=="value"&&"defaultValue"in O||s=="checked"&&"defaultChecked"in O)continue;Hn(n,s,null,_,c)}}for(s in O)_=O[s],s=="children"?m=_:s=="dangerouslySetInnerHTML"?d=_:s=="value"?E=_:s=="checked"?A=_:l&&typeof _!="function"||C[s]===_||Hn(n,s,_,C[s],c);if(d)l||p&&(d.__html==p.__html||d.__html==n.innerHTML)||(n.innerHTML=d.__html),e.__k=[];else if(p&&(n.innerHTML=""),Ji(e.type=="template"?n.content:n,Nn(m)?m:[m],e,t,r,D=="foreignObject"?"http://www.w3.org/1999/xhtml":c,a,i,a?a[0]:t.__k&&Jt(t,0),l,u),a!=null)for(s=a.length;s--;)or(a[s]);l||(s="value",D=="progress"&&E==null?n.removeAttribute("value"):E!=null&&(E!==n[s]||D=="progress"&&!E||D=="option"&&E!=C[s])&&Hn(n,s,E,C[s],c),s="checked",A!=null&&A!=n[s]&&Hn(n,s,A,C[s],c))}return n}function cr(n,e,t){try{if(typeof n=="function"){var r=typeof n.__u=="function";r&&n.__u(),r&&e==null||(n.__u=n(e))}else n.current=e}catch(c){te.__e(c,t)}}function sa(n,e,t){var r,c;if(te.unmount&&te.unmount(n),(r=n.ref)&&(r.current&&r.current!=n.__e||cr(r,null,e)),(r=n.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(a){te.__e(a,e)}r.base=r.__P=null}if(r=n.__k)for(c=0;c<r.length;c++)r[c]&&sa(r[c],e,t||typeof n.type!="function");t||or(n.__e),n.__c=n.__=n.__e=void 0}function yo(n,e,t){return this.constructor(n,t)}function Eo(n,e,t){var r,c,a,i;e==document&&(e=document.documentElement),te.__&&te.__(n,e),c=(r=!1)?null:e.__k,a=[],i=[],lr(e,n=e.__k=Lt(Xt,null,[n]),c||bn,bn,e.namespaceURI,c?null:e.firstChild?En.call(e.childNodes):null,a,c?c.__e:e.firstChild,r,i),ta(a,n,i)}function Qr(n,e,t){var r,c,a,i,l=ut({},n.props);for(a in n.type&&n.type.defaultProps&&(i=n.type.defaultProps),e)a=="key"?r=e[a]:a=="ref"?c=e[a]:l[a]=e[a]==null&&i!=null?i[a]:e[a];return arguments.length>2&&(l.children=arguments.length>3?En.call(arguments,2):t),mn(n.type,l,r||n.key,c||n.ref,null)}function An(n){function e(t){var r,c;return this.getChildContext||(r=new Set,(c={})[e.__c]=this,this.getChildContext=function(){return c},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(a){this.props.value!=a.value&&r.forEach(function(i){i.__e=!0,Qs(i)})},this.sub=function(a){r.add(a);var i=a.componentWillUnmount;a.componentWillUnmount=function(){r&&r.delete(a),i&&i.call(a)}}),t.children}return e.__c="__cC"+zi++,e.__=n,e.Provider=e.__l=(e.Consumer=function(t,r){return t.children(r)}).contextType=e,e}En=Qi.slice,te={__e:function(n,e,t,r){for(var c,a,i;e=e.__;)if((c=e.__c)&&!c.__)try{if((a=c.constructor)&&a.getDerivedStateFromError!=null&&(c.setState(a.getDerivedStateFromError(n)),i=c.__d),c.componentDidCatch!=null&&(c.componentDidCatch(n,r||{}),i=c.__d),i)return c.__E=c}catch(l){n=l}throw n}},Yi=0,zn.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=ut({},this.state),typeof n=="function"&&(n=n(ut({},t),this.props)),n&&ut(t,n),n!=null&&this.__v&&(e&&this._sb.push(e),Qs(this))},zn.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),Qs(this))},zn.prototype.render=Xt,Dt=[],Ki=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,qi=function(n,e){return n.__v.__b-e.__v.__b},ns.__r=0,Gi=/(PointerCapture)$|Capture$/i,ar=0,Gs=zr(!1),zs=zr(!0),zi=0;var No=0;function o(n,e,t,r,c,a){e||(e={});var i,l,u=e;if("ref"in u)for(l in u={},e)l=="ref"?i=e[l]:u[l]=e[l];var s={type:n,props:u,key:t,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--No,__i:-1,__u:0,__source:c,__self:a};if(typeof n=="function"&&(i=n.defaultProps))for(l in i)u[l]===void 0&&(u[l]=i[l]);return te.vnode&&te.vnode(s),s}function Ao(){return o("section",{children:[o("h1",{children:"404: Not Found"}),o("p",{children:"It's gone :("})]})}var Pt,ce,ks,Xr,ss=0,ra=[],me=te,Jr=me.__b,Zr=me.__r,ei=me.diffed,ti=me.__c,ni=me.unmount,si=me.__;function Tn(n,e){me.__h&&me.__h(ce,n,ss||e),ss=0;var t=ce.__H||(ce.__H={__:[],__h:[]});return n>=t.__.length&&t.__.push({}),t.__[n]}function z(n){return ss=1,ur(aa,n)}function ur(n,e,t){var r=Tn(Pt++,2);if(r.t=n,!r.__c&&(r.__=[aa(void 0,e),function(l){var u=r.__N?r.__N[0]:r.__[0],s=r.t(u,l);u!==s&&(r.__N=[s,r.__[1]],r.__c.setState({}))}],r.__c=ce,!ce.__f)){var c=function(l,u,s){if(!r.__c.__H)return!0;var d=r.__c.__H.__.filter(function(m){return!!m.__c});if(d.every(function(m){return!m.__N}))return!a||a.call(this,l,u,s);var p=r.__c.props!==l;return d.forEach(function(m){if(m.__N){var _=m.__[0];m.__=m.__N,m.__N=void 0,_!==m.__[0]&&(p=!0)}}),a&&a.call(this,l,u,s)||p};ce.__f=!0;var a=ce.shouldComponentUpdate,i=ce.componentWillUpdate;ce.componentWillUpdate=function(l,u,s){if(this.__e){var d=a;a=void 0,c(l,u,s),a=d}i&&i.call(this,l,u,s)},ce.shouldComponentUpdate=c}return r.__N||r.__}function _e(n,e){var t=Tn(Pt++,3);!me.__s&&hr(t.__H,e)&&(t.__=n,t.u=e,ce.__H.__h.push(t))}function ia(n,e){var t=Tn(Pt++,4);!me.__s&&hr(t.__H,e)&&(t.__=n,t.u=e,ce.__h.push(t))}function Ue(n){return ss=5,dr(function(){return{current:n}},[])}function dr(n,e){var t=Tn(Pt++,7);return hr(t.__H,e)&&(t.__=n(),t.__H=e,t.__h=n),t.__}function rt(n){var e=ce.context[n.__c],t=Tn(Pt++,9);return t.c=n,e?(t.__==null&&(t.__=!0,e.sub(ce)),e.props.value):n.__}function To(){for(var n;n=ra.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(Qn),n.__H.__h.forEach(Xs),n.__H.__h=[]}catch(e){n.__H.__h=[],me.__e(e,n.__v)}}me.__b=function(n){ce=null,Jr&&Jr(n)},me.__=function(n,e){n&&e.__k&&e.__k.__m&&(n.__m=e.__k.__m),si&&si(n,e)},me.__r=function(n){Zr&&Zr(n),Pt=0;var e=(ce=n.__c).__H;e&&(ks===ce?(e.__h=[],ce.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(e.__h.forEach(Qn),e.__h.forEach(Xs),e.__h=[],Pt=0)),ks=ce},me.diffed=function(n){ei&&ei(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(ra.push(e)!==1&&Xr===me.requestAnimationFrame||((Xr=me.requestAnimationFrame)||Co)(To)),e.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),ks=ce=null},me.__c=function(n,e){e.some(function(t){try{t.__h.forEach(Qn),t.__h=t.__h.filter(function(r){return!r.__||Xs(r)})}catch(r){e.some(function(c){c.__h&&(c.__h=[])}),e=[],me.__e(r,t.__v)}}),ti&&ti(n,e)},me.unmount=function(n){ni&&ni(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(r){try{Qn(r)}catch(c){e=c}}),t.__H=void 0,e&&me.__e(e,t.__v))};var ri=typeof requestAnimationFrame=="function";function Co(n){var e,t=function(){clearTimeout(r),ri&&cancelAnimationFrame(e),setTimeout(n)},r=setTimeout(t,100);ri&&(e=requestAnimationFrame(t))}function Qn(n){var e=ce,t=n.__c;typeof t=="function"&&(n.__c=void 0,t()),ce=e}function Xs(n){var e=ce;n.__c=n.__(),ce=e}function hr(n,e){return!n||n.length!==e.length||e.some(function(t,r){return t!==n[r]})}function aa(n,e){return typeof e=="function"?e(n):e}let Ot,pn;const wo=(n,e)=>{if(Ot=void 0,e&&e.type==="click"){if(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button!==0)return n;const t=e.target.closest("a[href]"),r=t&&t.getAttribute("href");if(!t||t.origin!=location.origin||/^#/.test(r)||!/^(_?self)?$/i.test(t.target)||pn&&(typeof pn=="string"?!r.startsWith(pn):!pn.test(r)))return n;Ot=!0,e.preventDefault(),e=t.href.replace(location.origin,"")}else typeof e=="string"?Ot=!0:e&&e.url?(Ot=!e.replace,e=e.url):e=location.pathname+location.search;return Ot===!0?history.pushState(null,"",e):Ot===!1&&history.replaceState(null,"",e),e},So=(n,e,t={})=>{n=n.split("/").filter(Boolean),e=(e||"").split("/").filter(Boolean),t.params||(t.params={});for(let r=0,c,a;r<Math.max(n.length,e.length);r++){let[,i,l,u]=(e[r]||"").match(/^(:?)(.*?)([+*?]?)$/);if(c=n[r],!(!i&&l==c)){if(!i&&c&&u=="*"){t.rest="/"+n.slice(r).map(decodeURIComponent).join("/");break}if(!i||!c&&u!="?"&&u!="*")return;if(a=u=="+"||u=="*",a?c=n.slice(r).map(decodeURIComponent).join("/")||void 0:c&&(c=decodeURIComponent(c)),t.params[l]=c,l in t||(t[l]=c),a)break}}return t};function Cn(n){const[e,t]=ur(wo,n.url||location.pathname+location.search);n.scope&&(pn=n.scope);const r=Ot===!0,c=dr(()=>{const a=new URL(e,location.origin),i=a.pathname.replace(/\/+$/g,"")||"/";return{url:e,path:i,query:Object.fromEntries(a.searchParams),route:(l,u)=>t({url:l,replace:u}),wasPush:r}},[e]);return ia(()=>(addEventListener("click",t),addEventListener("popstate",t),()=>{removeEventListener("click",t),removeEventListener("popstate",t)}),[]),Lt(Cn.ctx.Provider,{value:c},n.children)}const ko=Promise.resolve();function oa(n){const[e,t]=ur(P=>P+1,0),{url:r,query:c,wasPush:a,path:i}=fr(),{rest:l=i,params:u={}}=rt(ii),s=Ue(!1),d=Ue(i),p=Ue(0),m=Ue(),_=Ue(),E=Ue(),A=Ue(!1),C=Ue();C.current=!1;let O,D,B;ea(n.children).some(P=>{if(So(l,P.props.path,B={...P.props,path:l,query:c,params:u,rest:""}))return O=Qr(P,B);P.props.default&&(D=Qr(P,B))});let I=O||D;const U=m.current&&m.current.__u&Fn&&m.current.__u&Vn,V=m.current&&m.current.__h,Q=dr(()=>{_.current=m.current,m.current=Lt(ii.Provider,{value:B},I);const P=_.current&&_.current.props.children;return!P||!I||I.type!==P.type||I.props.component!==P.props.component?(this.__v&&this.__v.__k&&this.__v.__k.reverse(),p.current++,!0):!1},[r,JSON.stringify(B)]);U?(m.current.__u|=Fn,m.current.__u|=Vn):V&&(m.current.__h=!0);const X=_.current;return _.current=null,this.__c=(P,F)=>{C.current=!0,_.current=X,n.onLoadStart&&n.onLoadStart(r),s.current=!0;let Y=p.current;P.then(()=>{Y===p.current&&(_.current=null,m.current&&(F.__h&&(m.current.__h=F.__h),F.__u&Vn&&(m.current.__u|=Vn),F.__u&Fn&&(m.current.__u|=Fn)),ko.then(t))})},ia(()=>{const P=this.__v&&this.__v.__e;if(C.current){!A.current&&!E.current&&(E.current=P);return}!A.current&&E.current&&(E.current!==P&&E.current.remove(),E.current=null),A.current=!0,d.current!==i&&(a&&scrollTo(0,0),n.onRouteChange&&n.onRouteChange(r),d.current=i),n.onLoadEnd&&s.current&&n.onLoadEnd(r),s.current=!1},[i,a,e]),Q?[Lt(xs,{r:m}),Lt(xs,{r:_})]:Lt(xs,{r:m})}const Fn=32,Vn=128,xs=({r:n})=>n.current;oa.Provider=Cn;Cn.ctx=An({});const ii=An({}),Wn=n=>Lt(n.component,n),fr=()=>rt(Cn.ctx),ai=te.__b;te.__b=n=>{n.type&&n.type._forwarded&&n.ref&&(n.props.ref=n.ref,n.ref=null),ai&&ai(n)};const oi=te.__e;te.__e=(n,e,t)=>{if(n&&n.then){let r=e;for(;r=r.__;)if(r.__c&&r.__c.__c)return e.__e==null&&(e.__c.__z=[t.__e],e.__e=t.__e,e.__k=t.__k),e.__k||(e.__k=[]),r.__c.__c(n,e)}oi&&oi(n,e,t)};const je={PHYSICAL:"physical",MAGICAL:"magical",UTILITY:"utility"},$e={OFFENSIVE:"offensive",DEFENSIVE:"defensive",UTILITY:"utility",CORE:"core"},we={currentHealth:{defaultValue:10,label:"Current HP",type:$e.CORE},maxHealth:{defaultValue:10,label:"Max HP",type:$e.CORE},currentMp:{defaultValue:10,label:"Current MP",type:$e.CORE},maxMp:{defaultValue:10,label:"Max MP",type:$e.CORE},tempHealth:{defaultValue:0,label:"Temporary HP",type:$e.CORE},strength:{name:"Strength",shortName:"STR",icon:"fa-fist-raised",color:"danger",description:"Increases physical attack damage unless resisted/absorbed/immune. Applied as flat bonus to Physical damage rolls.",category:je.PHYSICAL,type:$e.OFFENSIVE,defaultValue:0,displayModifier:!0,affectsRolls:!0,damageType:"physical"},vitality:{name:"Vitality",shortName:"VIT",icon:"fa-shield-alt",color:"primary-emphasis",description:"Reduces incoming Physical damage when attack is resisted. Does not affect neutral or absorbed damage.",category:je.PHYSICAL,type:$e.DEFENSIVE,defaultValue:0,displayModifier:!0,damageReduction:!0,damageType:"physical"},magic:{name:"Magic",shortName:"MAG",icon:"fa-hand-sparkles",color:"success-emphasis",description:"Increases magical attack damage unless resisted/absorbed/immune. Applied as flat bonus.",category:je.MAGICAL,type:$e.OFFENSIVE,defaultValue:0,displayModifier:!0,affectsRolls:!0,damageType:"magical"},spirit:{name:"Spirit",shortName:"SPR",icon:"fa-shield-heart",color:"info",description:"Reduces incoming magical damage when attack is resisted. Does not affect neutral or absorbed damage.",category:je.MAGICAL,type:$e.DEFENSIVE,defaultValue:0,displayModifier:!0,damageReduction:!0,damageType:"magical"},speed:{name:"Speed",shortName:"SPD",icon:"fa-running",color:"secondary-emphasis",description:"Bonus to Initiative and movement distance per turn",category:je.PHYSICAL,type:$e.UTILITY,defaultValue:0,displayModifier:!0,derived:{initiative:n=>n,movement:n=>n}},luck:{name:"Luck",shortName:"LCK",icon:"fa-clover",color:"success",description:"Affects spell draws and knockdown resistance",category:je.MAGICAL,type:$e.UTILITY,defaultValue:0,displayModifier:!0,derived:{maxExtraDrawDice:n=>Math.min(Math.floor(n),4),knockdownBonus:n=>n}},perception:{name:"Perception",shortName:"PER",icon:"fa-eye",color:"danger-emphasis",description:"Used for Scanning for an enemy's Elemental Affinities, for noticing weak points, hidden treasure, hidden enemies etc.",category:je.UTILITY,type:$e.UTILITY,defaultValue:0,displayModifier:!0},wisdom:{name:"Wisdom",shortName:"WIS",icon:"fa-book-open",color:"warning-emphasis",description:"Used for Recalling Knowledge of any kind: essentially every Pathfinder 2E lore skill rolled into one. Also useful in social situations.",category:je.UTILITY,type:$e.UTILITY,defaultValue:0,displayModifier:!0},influence:{name:"Influence",shortName:"INF",icon:"fa-comments",color:"warning",description:"Used for social rolls, such as Deception, Intimidation, Performance, Diplomacy and Persuasion.",category:je.UTILITY,type:$e.UTILITY,defaultValue:0,displayModifier:!0}},dn={CANTRIP_AND_FIRST:1,SECOND_AND_THIRD:2,FOURTH_AND_FIFTH:3,SIXTH_AND_SEVENTH:4,EIGHTH_TO_TENTH:5},$s=n=>n<=1?dn.CANTRIP_AND_FIRST:n<=3?dn.SECOND_AND_THIRD:n<=5?dn.FOURTH_AND_FIFTH:n<=7?dn.SIXTH_AND_SEVENTH:dn.EIGHTH_TO_TENTH,St=An({characterStats:{},setCharacterStats:n=>{}});function xo({children:n}){const e=()=>{const a=localStorage.getItem("characterStats");if(a)return JSON.parse(a);{const i={};for(const l in we)i[l]=we[l].defaultValue||0;return i}},[t,r]=z(e);_e(()=>{localStorage.setItem("characterStats",JSON.stringify(t))},[t]);const c={characterStats:t,setCharacterStats:r};return o(St.Provider,{value:c,children:n})}const la=An({spells:[],setSpells:n=>{},getLinkedStats:()=>[],subscribe:n=>{},unsubscribe:n=>{}}),$o=({children:n})=>{const[e,t]=z(()=>{const u=localStorage.getItem("spells");return u?JSON.parse(u):[]}),[r,c]=z([]);_e(()=>{localStorage.setItem("spells",JSON.stringify(e)),r.forEach(u=>u(e))},[e]);const a=()=>e.filter(u=>u.isLinked).map(u=>u.linkedStat),i=u=>{c(s=>[...s,u])},l=u=>{c(s=>s.filter(d=>d!==u))};return o(la.Provider,{value:{spells:e,setSpells:t,getLinkedStats:a,subscribe:i,unsubscribe:l},children:n})},wn=()=>rt(la),Qe=Object.freeze({WEAPON:"Weapon",GENERIC:"Generic"}),re=Object.freeze({PHYS:"Physical",FIRE:"Fire",ICE:"Cold",ELEC:"Electricity",FORCE:"Force",PSY:"Psychic",CHEM:"Chemical",RAD:"Radiant",VOID:"Void",TRUE:"Almighty"}),pe=Object.freeze({WEAK:"Weak",NEUTRAL:"Neutral",RESIST:"Resist",IMMUNE:"Immune",ABSORB:"Drain",REFLECT:"Reflect"}),Oo={[re.PHYS]:"⚔️",[re.CHEM]:"🧪",[re.ICE]:"❄️",[re.ELEC]:"⚡",[re.FIRE]:"🔥",[re.FORCE]:"💥",[re.RAD]:"✨",[re.VOID]:"🌌",[re.PSY]:"🌀"},st=n=>Oo[n]||"☄️",Do=n=>({[re.PHYS]:"Phys",[re.CHEM]:"Chem",[re.ICE]:"Ice",[re.ELEC]:"Elec",[re.FIRE]:"Fire",[re.FORCE]:"Force",[re.RAD]:"Rad",[re.VOID]:"Void",[re.PSY]:"Psy",[re.TRUE]:"???"})[n]||"???",Lo=n=>({[pe.WEAK]:"WK",[pe.NEUTRAL]:"-",[pe.RESIST]:"RES",[pe.IMMUNE]:"NULL",[pe.ABSORB]:"DR",[pe.REFLECT]:"RFL"})[n]||"???",Vt=({title:n,titleClassName:e="grey-text",lineColor:t="#8888",lineThickness:r="1px",containerClassName:c="mb-3",lineMaxWidth:a="none"})=>{const i={height:r,maxWidth:a};return o("div",{className:c,children:o("div",{className:"d-flex align-items-center justify-content-center",children:[o("div",{className:"flex-grow-1",style:{...i,backgroundImage:`linear-gradient(to right, transparent, ${t})`}}),o("h5",{className:`${e} mx-3 my-0 arsenal`,children:n}),o("div",{className:"flex-grow-1",style:{...i,backgroundImage:`linear-gradient(to left, transparent, ${t})`}})]})})},Io="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%20style='height:%20512px;%20width:%20512px;'%3e%3cg%20class=''%20transform='translate(0,0)'%20style=''%3e%3cpath%20d='m19.36%2019.457-.38%2027.84%20267.127%20154.75-58.703%2019.916%2057.602%2019.36L142.12%20383.546l-19.214-19.213-51.47%20114.324%20123.125-43.482-17.492-18.95%20151.868-151.87%2012.433%2043.078%2022.976-68.5%2056.675-16.565-57.475-15.492-22.934-79.828-14.145%2048.266-268.65-155.41-38.454-.446zM370.614%2081.94c-4.53.02-9.035.12-13.51.302-3.275.134-6.528.32-9.76.547l31.25%20108.786%20104.05%2028.045c6.204-39.085%208.902-80.275%209.18-120.075C456.37%2088.82%20415.098%2082.257%20375.15%2081.95a403.83%20403.83%200%200%200-4.537-.01zm-36.87%202.1c-31.99%203.653-61.013%2012.153-83.014%2025.87l64.493%2037.31%2018.52-63.18zm148.18%20139.997L378.958%20254.13l-38.93%20116.054-20.268-70.225-39.07%2039.067c18.814%2035.364%2046.1%2062.287%2086.175%2077.604%2047.473-17.834%2078.566-62.795%2098.014-121.6%207.323-22.14%2012.905-46.11%2017.042-70.993z'%20fill='%23fff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",Mo="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%20style='height:%20512px;%20width:%20512px;'%3e%3cg%20class=''%20transform='translate(0,0)'%20style=''%3e%3cpath%20d='M362.188%2017.998c-12.9%2065.825-49.788%20140.505-98.616%20197.37L352%20224l-89.377%2019.414%2052.197%2075.27-71.111-56.364L224%20336l-8.576-73.182%202.812-2.779c-45.221%2040.71-35.888%2074.86.702%2096.49%206.775%204.005%2016.257%209.046%2027.38%208.7%2058.243-1.813%2093.255%2035.012%20126.575%2076.199%2018.234%2022.54%2048.35%2030.059%2073.529%2044.246%2052.44%2029.548%2067.894-32.667%2014.767-53.445l-70.677-111.036c-11.42-53.08%2052.186-171.824%20103.49-248.37V17.997zM92.454%2023.424v32.17l32.799%2032.79%208.043-24.126zM78.578%2067.352c-.233-.026-.57.037-1.224.199-1.31.323-3.41%201.482-5.075%203.146-1.664%201.664-2.823%203.763-3.146%205.073-.266%201.074-.207%201.3.012%201.61l120.228%20120.208%203.275-6.55%206.545-3.272L78.97%2067.563c-.123-.086-.24-.195-.39-.211zM21.162%2087.029%2062%20127.86l24.13-8.043-30.335-30.33-.397-.396-.343-.442a17.99%2017.99%200%200%201-1.112-1.619zm213.563%20103.098-28.663%2014.326-14.33%2028.654%2038.264%2015.303%2020.096-19.869z'%20fill='%23fff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",Ro="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%20style='height:%20512px;%20width:%20512px;'%3e%3cg%20class=''%20transform='translate(0,0)'%20style=''%3e%3cpath%20d='M372.48%2031.215c-77.65%200-116.48%2065.73-116.48%2065.73s-38.83-65.72-116.48-65.72c-37.14%200-107.77%2033.72-107.77%20125.13%200%20161.24%20224.25%20324.43%20224.25%20324.43s224.25-163.19%20224.25-324.43c0-91.42-70.63-125.13-107.77-125.14zm-145.492%20115.02h60.698v79.415h79.238v60.7h-79.238v79.884h-60.698V286.35h-80.064v-60.7h80.064z'%20fill='%23fff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e";function Po(){const{characterStats:n,setCharacterStats:e}=rt(St),[t,r]=z(null),[c,a]=z(typeof window<"u"?window.innerWidth:1024);_e(()=>{const m=()=>a(window.innerWidth);return window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]);let i=c<1080;_e(()=>{let m=!n.affinities;if(n.affinities){const _=Object.keys(re)[0];_&&n.affinities[re[_]]&&typeof n.affinities[re[_]]!="object"&&(m=!0)}if(m){const _={};Object.values(re).forEach(E=>{_[E]={type:pe.NEUTRAL,mastered:!1}}),e(E=>({...E,affinities:_}))}},[n.affinities,e]);const l=m=>{r(_=>_===m?null:m)},u=(m,_)=>{e(E=>{var A;return{...E,affinities:{...E.affinities,[m]:{...((A=E.affinities)==null?void 0:A[m])||{type:pe.NEUTRAL,mastered:!1},type:_}}}})},s=m=>{e(_=>{var E,A,C;return{..._,affinities:{..._.affinities,[m]:{...((E=_.affinities)==null?void 0:E[m])||{type:pe.NEUTRAL,mastered:!1},mastered:!((C=(A=_.affinities)==null?void 0:A[m])!=null&&C.mastered)}}}})},d=m=>{switch(m){case pe.WEAK:return"danger";case pe.RESIST:return"info";case pe.IMMUNE:return"warning";case pe.ABSORB:return"success";case pe.REFLECT:return"primary";default:return"secondary"}},p=m=>{const _={width:"1.25em",height:"1.25em",color:"white"};switch(m){case pe.WEAK:return o("img",{src:Mo,alt:"Weak",style:_});case pe.RESIST:return o("i",{className:"fas fa-shield-alt",style:_});case pe.IMMUNE:return o("i",{className:"fas fa-ban",style:_});case pe.ABSORB:return o("img",{src:Ro,alt:"Absorb",style:_});case pe.REFLECT:return o("img",{src:Io,alt:"Reflect",style:_});default:return o("i",{className:"fas fa-minus",style:_})}};return!n.affinities||typeof n.affinities[Object.values(re)[0]]!="object"?o("div",{className:"p-3",children:"Loading affinities..."}):o("div",{className:"affinity-tracker p-3",children:[o(Vt,{title:"ELEMENTAL AFFINITIES"}),o("div",{className:"element-grid mt-4 gap-1",children:Object.values(re).filter(m=>m!=="Almighty").map(m=>{const _=n.affinities[m]||{type:pe.NEUTRAL,mastered:!1};return o("div",{className:`element-item clickable-card mb-3 ${_.mastered?"gold-bg":""} ${t===m?"editing":""}`,onClick:()=>l(m),children:[_.mastered&&o("div",{className:"mastery-watermark",children:"MASTERY"}),o("div",{className:"element-header d-flex align-items-center justify-content-between mb-1",children:[o("div",{className:"d-flex align-items-center element-info",children:[o("span",{className:"element-icon",children:st(m)}),o("span",{className:"arsenal element-name",children:[i?Do(m):m,":"]}),o("span",{className:`arsenal ms-1 affinity-name text-${d(_.type)}`,children:i?Lo(_.type):_.type})]}),o("button",{className:`mastery-toggle-button ${_.mastered?"mastered":""}`,onClick:E=>{E.stopPropagation(),s(m)},title:_.mastered?"Disable Mastery":"Enable Mastery",children:o("i",{className:`${_.mastered?"fas fa-star":"fa-regular fa-star"}`})})]}),t===m&&o("div",{className:"affinity-buttons btn-group d-flex mt-2",children:Object.values(pe).map(E=>o("button",{className:`btn btn-${_.type===E?d(E):"dark inactive-btn"}`,onClick:A=>{A.stopPropagation(),u(m,E)},title:E,children:p(E)},E))})]},m)})})]})}const Js={Blinded:{maxStack:1},Broken:{maxStack:1},Clumsy:{maxStack:4},Concealed:{maxStack:1},Confused:{maxStack:1},Controlled:{maxStack:1},Dazzled:{maxStack:1},Deafened:{maxStack:1},Doomed:{maxStack:3},Drained:{maxStack:4},Dying:{maxStack:4},Encumbered:{maxStack:1},Enfeebled:{maxStack:4},Fascinated:{maxStack:1},Fatigued:{maxStack:1},"Flat-Footed":{maxStack:1},Fleeing:{maxStack:1},Frightened:{maxStack:4},Grabbed:{maxStack:1},Hidden:{maxStack:1},Immobilized:{maxStack:1},Invisible:{maxStack:1},Observed:{maxStack:1},"Off-Guard":{maxStack:1},Paralyzed:{maxStack:1},"Persistent Damage":{maxStack:1},Petrified:{maxStack:1},Prone:{maxStack:1},Quickened:{maxStack:1},Restrained:{maxStack:1},Sickened:{maxStack:4},Slowed:{maxStack:3},Stunned:{maxStack:3},Stupefied:{maxStack:4},Unconscious:{maxStack:1},Undetected:{maxStack:1},Unnoticed:{maxStack:1},Wounded:{maxStack:3}},Ho=Object.keys(Js),Fo=()=>{const{characterStats:n,setCharacterStats:e}=rt(St),t=n.conditions||{},r=l=>{const s=(t[l]||0)>0?0:1;e(d=>({...d,conditions:{...d.conditions,[l]:s===0?void 0:s}}))},c=(l,u)=>{const s=Js[l].maxStack,d=t[l]||0,p=Math.max(0,Math.min(s,d+u));e(m=>({...m,conditions:{...m.conditions,[l]:p===0?void 0:p}}))},a=()=>{e(l=>({...l,conditions:{}}))},i=Object.values(t).filter(l=>l>0).length;return o("div",{className:"conditions-tracker",children:[o("div",{className:"d-flex justify-content-between align-items-center mb-3",children:o(Vt,{title:"PLAYER CONDITION",containerClassName:"mb-0 flex-grow-1",lineMaxWidth:"30px"})}),"            ",o("div",{className:"conditions-grid",children:Ho.map(l=>{const u=Js[l].maxStack,s=t[l]||0,d=s>0,p=u>1;return o("div",{className:`condition-item ${d?"active":""} ${p?"stackable":""}`,children:[o("div",{className:"condition-main",onClick:()=>r(l),children:[o("div",{className:"condition-checkbox",children:d&&o("i",{className:"fas fa-check"})}),o("span",{className:"condition-label",children:[l,d&&p&&o("span",{className:"condition-value",children:[" ",s,"/",u]})]})]}),d&&p&&o("div",{className:"condition-controls",children:[o("button",{className:"btn btn-sm condition-btn decrease",onClick:m=>{m.stopPropagation(),c(l,-1)},title:"Decrease value",children:o("i",{className:"fas fa-minus"})}),o("button",{className:"btn btn-sm condition-btn increase",onClick:m=>{m.stopPropagation(),c(l,1)},disabled:s>=u,title:"Increase value",children:o("i",{className:"fas fa-plus"})})]})]},l)})}),i>0&&o("div",{className:"active-conditions-summary mt-2",children:[o("small",{className:"text-info",children:[o("i",{className:"fas fa-exclamation-triangle me-1"}),i," active condition",i!==1?"s":""]}),o("button",{className:"btn btn-sm btn-outline-secondary ms-2",onClick:a,"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Clear all conditions",children:o("i",{className:"fas fa-broom"})})]})]})};var Xn={exports:{}},Vo=Xn.exports,li;function Wo(){return li||(li=1,function(n,e){(function(t,r){n.exports=r()})(Vo,function(){return function(t){var r={};function c(a){if(r[a])return r[a].exports;var i=r[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,c),i.l=!0,i.exports}return c.m=t,c.c=r,c.d=function(a,i,l){c.o(a,i)||Object.defineProperty(a,i,{enumerable:!0,get:l})},c.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},c.t=function(a,i){if(1&i&&(a=c(a)),8&i||4&i&&typeof a=="object"&&a&&a.__esModule)return a;var l=Object.create(null);if(c.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:a}),2&i&&typeof a!="string")for(var u in a)c.d(l,u,(function(s){return a[s]}).bind(null,u));return l},c.n=function(a){var i=a&&a.__esModule?function(){return a.default}:function(){return a};return c.d(i,"a",i),i},c.o=function(a,i){return Object.prototype.hasOwnProperty.call(a,i)},c.p="",c(c.s=0)}([function(t,r,c){function a(i){for(var l in i)r.hasOwnProperty(l)||(r[l]=i[l])}Object.defineProperty(r,"__esModule",{value:!0}),a(c(1)),a(c(3))},function(t,r,c){Object.defineProperty(r,"__esModule",{value:!0});const a=c(2);r.DiceRoller=class{constructor(i,l=1e3){this.randFunction=Math.random,this.maxRollCount=1e3,i&&(this.randFunction=i),this.maxRollCount=l}parse(i){return a.parse(i)}roll(i){const l=a.parse(i);return this.rollType(l)}rollValue(i){return this.roll(i).value}rollParsed(i){return this.rollType(i)}rollType(i){let l;switch(i.type){case"diceExpression":l=this.rollDiceExpr(i);break;case"group":l=this.rollGroup(i);break;case"die":l=this.rollDie(i);break;case"expression":l=this.rollExpression(i);break;case"mathfunction":l=this.rollFunction(i);break;case"inline":l=this.rollType(i.expr);break;case"number":l=Object.assign(Object.assign({},i),{success:!1,valid:!0,order:0});break;default:throw new Error(`Unable to render ${i.type}`)}return i.label&&(l.label=i.label),l}rollDiceExpr(i){const l=this.rollType(i.head),u=[l],s=[],d=i.ops.reduce((p,m,_)=>{const E=this.rollType(m.tail);switch(E.order=_,u.push(E),s.push(m.op),m.op){case"+":return p+E.value;case"-":return p-E.value;default:return p}},l.value);return{dice:u,ops:s,success:!1,type:"diceexpressionroll",valid:!0,value:d,order:0}}rollGroup(i){let l=i.rolls.map((u,s)=>Object.assign(Object.assign({},this.rollType(u)),{order:s}));if(i.mods){const u=i.mods,s=d=>{const p=u.some(m=>["failure","success"].includes(m.type));return d=u.reduce((m,_)=>this.applyGroupMod(m,_),d),p&&(d=d.map(m=>(m.success||(m.value=0,m.success=!0),m))),d};if(l.length===1&&["die","diceexpressionroll"].includes(l[0].type)){const d=l[0];let p=d.type==="die"?d.rolls:d.dice.filter(m=>m.type!=="number").reduce((m,_)=>[...m,..._.type==="die"?_.rolls:_.dice],[]);p=s(p),d.value=p.reduce((m,_)=>_.valid?m+_.value:m,0)}else l=s(l)}return{dice:l,success:!1,type:"grouproll",valid:!0,value:l.reduce((u,s)=>s.valid?u+s.value:u,0),order:0}}rollDie(i){const l=this.rollType(i.count);if(l.value>this.maxRollCount)throw new Error("Entered number of dice too large.");let u,s;i.die.type==="fate"?(s={type:"fate",success:!1,valid:!1,value:0,order:0},u=Array.from({length:l.value},(m,_)=>this.generateFateRoll(_))):(s=this.rollType(i.die),u=Array.from({length:l.value},(m,_)=>this.generateDiceRoll(s.value,_))),i.mods&&(u=i.mods.reduce((m,_)=>this.applyMod(m,_),u)),i.targets&&(u=i.targets.reduce((m,_)=>this.applyMod(m,_),u).map(m=>(m.success||(m.value=0,m.success=!0),m)));let d=!1,p=0;if(i.match){const m=i.match,_=u.reduce((A,C)=>A.set(C.roll,(A.get(C.roll)||0)+1),new Map),E=new Set(Array.from(_.entries()).filter(([A,C])=>C>=m.min.value).filter(([A])=>!(m.mod&&m.expr)||this.successTest(m.mod,this.rollType(m.expr).value,A)).map(([A])=>A));u.filter(A=>E.has(A.roll)).forEach(A=>A.matched=!0),m.count&&(d=!0,p=E.size)}return i.sort&&(u=this.applySort(u,i.sort)),{count:l,die:s,rolls:u,success:!1,type:"die",valid:!0,value:d?p:u.reduce((m,_)=>_.valid?m+_.value:m,0),order:0,matched:d}}rollExpression(i){const l=this.rollType(i.head),u=[l],s=[],d=i.ops.reduce((p,m)=>{const _=this.rollType(m.tail);switch(u.push(_),s.push(m.op),m.op){case"+":return p+_.value;case"-":return p-_.value;case"*":return p*_.value;case"/":return p/_.value;case"%":return p%_.value;case"**":return p**_.value;default:return p}},l.value);return{dice:u,ops:s,success:!1,type:"expressionroll",valid:!0,value:d,order:0}}rollFunction(i){const l=this.rollType(i.expr);let u;switch(i.op){case"floor":u=Math.floor(l.value);break;case"ceil":u=Math.ceil(l.value);break;case"round":u=Math.round(l.value);break;case"abs":u=Math.abs(l.value);break;default:u=l.value}return{expr:l,op:i.op,success:!1,type:"mathfunction",valid:!0,value:u,order:0}}applyGroupMod(i,l){return this.getGroupModMethod(l)(i)}getGroupModMethod(i){const l=u=>u.value;switch(i.type){case"success":return this.getSuccessMethod(i,l);case"failure":return this.getFailureMethod(i,l);case"keep":return this.getKeepMethod(i,l);case"drop":return this.getDropMethod(i,l);default:throw new Error(`Mod ${i.type} is not recognised`)}}applyMod(i,l){return this.getModMethod(l)(i)}getModMethod(i){const l=u=>u.roll;switch(i.type){case"success":return this.getSuccessMethod(i,l);case"failure":return this.getFailureMethod(i,l);case"crit":return this.getCritSuccessMethod(i,l);case"critfail":return this.getCritFailureMethod(i,l);case"keep":return u=>this.getKeepMethod(i,l)(u).sort((s,d)=>s.order-d.order);case"drop":return u=>this.getDropMethod(i,l)(u).sort((s,d)=>s.order-d.order);case"explode":return this.getExplodeMethod(i);case"compound":return this.getCompoundMethod(i);case"penetrate":return this.getPenetrateMethod(i);case"reroll":return this.getReRollMethod(i);case"rerollOnce":return this.getReRollOnceMethod(i);default:throw new Error(`Mod ${i.type} is not recognised`)}}applySort(i,l){return i.sort((u,s)=>l.asc?u.roll-s.roll:s.roll-u.roll),i.forEach((u,s)=>u.order=s),i}getCritSuccessMethod(i,l){const u=this.rollType(i.expr);return s=>s.map(d=>{if(!d.valid||d.type!=="roll"||d.success)return d;const p=d;return this.successTest(i.mod,u.value,l(d))?p.critical="success":p.critical==="success"&&(p.critical=null),d})}getCritFailureMethod(i,l){const u=this.rollType(i.expr);return s=>s.map(d=>{if(!d.valid||d.type!=="roll"||d.success)return d;const p=d;return this.successTest(i.mod,u.value,l(d))?p.critical="failure":p.critical==="failure"&&(p.critical=null),d})}getSuccessMethod(i,l){const u=this.rollType(i.expr);return s=>s.map(d=>(d.valid&&this.successTest(i.mod,u.value,l(d))&&(d.success?d.value+=1:(d.value=1,d.success=!0)),d))}getFailureMethod(i,l){const u=this.rollType(i.expr);return s=>s.map(d=>(d.valid&&this.successTest(i.mod,u.value,l(d))&&(d.success?d.value-=1:(d.value=-1,d.success=!0)),d))}getKeepMethod(i,l){const u=this.rollType(i.expr);return s=>{if(s.length===0)return s;s=s.sort((E,A)=>i.highlow==="l"?l(A)-l(E):l(E)-l(A)).sort((E,A)=>(E.valid?1:0)-(A.valid?1:0));const d=Math.max(Math.min(u.value,s.length),0);let p=0,m=0;const _=s.reduce((E,A)=>(A.valid?1:0)+E,0)-d;for(;m<s.length&&p<_;)s[m].valid&&(s[m].valid=!1,p++),m++;return s}}getDropMethod(i,l){const u=this.rollType(i.expr);return s=>{s=s.sort((_,E)=>i.highlow==="h"?l(E)-l(_):l(_)-l(E));const d=Math.max(Math.min(u.value,s.length),0);let p=0,m=0;for(;m<s.length&&p<d;)s[m].valid&&(s[m].valid=!1,p++),m++;return s}}getExplodeMethod(i){const l=i.target?this.rollType(i.target.value):null;return u=>{const s=l?d=>this.successTest(i.target.mod,l.value,d.roll):d=>this.successTest("=",d.type==="fateroll"?1:d.die,d.roll);if(u[0].type==="roll"&&s({roll:1})&&s({roll:u[0].die}))throw new Error("Invalid reroll target");for(let d=0;d<u.length;d++){let p=u[d];p.order=d;let m=0;for(;s(p)&&m++<1e3;){const _=this.reRoll(p,++d);u.splice(d,0,_),p=_}}return u}}getCompoundMethod(i){const l=i.target?this.rollType(i.target.value):null;return u=>{const s=l?d=>this.successTest(i.target.mod,l.value,d.roll):d=>this.successTest("=",d.type==="fateroll"?1:d.die,d.roll);if(u[0].type==="roll"&&s({roll:1})&&s({roll:u[0].die}))throw new Error("Invalid reroll target");for(let d=0;d<u.length;d++){let p=u[d],m=p.roll,_=0;for(;s(p)&&_++<1e3;){const E=this.reRoll(u[d],++d);m+=E.roll,p=E}p.value=m,p.roll=m}return u}}getPenetrateMethod(i){const l=i.target?this.rollType(i.target.value):null;return u=>{const s=l?d=>this.successTest(i.target.mod,l.value,d.roll):d=>this.successTest("=",d.type==="fateroll"?1:d.die,d.roll);if(l&&u[0].type==="roll"&&s(u[0])&&this.successTest(i.target.mod,l.value,1))throw new Error("Invalid reroll target");for(let d=0;d<u.length;d++){let p=u[d];p.order=d;let m=0;for(;s(p)&&m++<1e3;){const _=this.reRoll(p,++d);_.value-=1,_.roll-=1,u.splice(d,0,_),p=_}}return u}}getReRollMethod(i){const l=i.target?this.successTest.bind(null,i.target.mod,this.rollType(i.target.value).value):this.successTest.bind(null,"=",1);return u=>{if(u[0].type==="roll"&&l(1)&&l(u[0].die))throw new Error("Invalid reroll target");for(let s=0;s<u.length;s++)for(;l(u[s].roll);){u[s].valid=!1;const d=this.reRoll(u[s],s+1);u.splice(++s,0,d)}return u}}getReRollOnceMethod(i){const l=i.target?this.successTest.bind(null,i.target.mod,this.rollType(i.target.value).value):this.successTest.bind(null,"=",1);return u=>{if(u[0].type==="roll"&&l(1)&&l(u[0].die))throw new Error("Invalid reroll target");for(let s=0;s<u.length;s++)if(l(u[s].roll)){u[s].valid=!1;const d=this.reRoll(u[s],s+1);u.splice(++s,0,d)}return u}}successTest(i,l,u){switch(i){case">":return u>=l;case"<":return u<=l;case"=":default:return u==l}}reRoll(i,l){switch(i.type){case"roll":return this.generateDiceRoll(i.die,l);case"fateroll":return this.generateFateRoll(l);default:throw new Error(`Cannot do a reroll of a ${i.type}.`)}}generateDiceRoll(i,l){const u=Math.floor(this.randFunction()*i)+1;return{critical:u===i?"success":u===1?"failure":null,die:i,matched:!1,order:l,roll:u,success:!1,type:"roll",valid:!0,value:u}}generateFateRoll(i){const l=Math.floor(3*this.randFunction())-1;return{matched:!1,order:i,roll:l,success:!1,type:"fateroll",valid:!0,value:l}}}},function(t,r,c){function a(i,l,u,s){this.message=i,this.expected=l,this.found=u,this.location=s,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,a)}(function(i,l){function u(){this.constructor=i}u.prototype=l.prototype,i.prototype=new u})(a,Error),a.buildMessage=function(i,l){var u={literal:function(m){return'"'+d(m.text)+'"'},class:function(m){var _,E="";for(_=0;_<m.parts.length;_++)E+=m.parts[_]instanceof Array?p(m.parts[_][0])+"-"+p(m.parts[_][1]):p(m.parts[_]);return"["+(m.inverted?"^":"")+E+"]"},any:function(m){return"any character"},end:function(m){return"end of input"},other:function(m){return m.description}};function s(m){return m.charCodeAt(0).toString(16).toUpperCase()}function d(m){return m.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(_){return"\\x0"+s(_)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(_){return"\\x"+s(_)})}function p(m){return m.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(_){return"\\x0"+s(_)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(_){return"\\x"+s(_)})}return"Expected "+function(m){var _,E,A,C=new Array(m.length);for(_=0;_<m.length;_++)C[_]=(A=m[_],u[A.type](A));if(C.sort(),C.length>0){for(_=1,E=1;_<C.length;_++)C[_-1]!==C[_]&&(C[E]=C[_],E++);C.length=E}switch(C.length){case 1:return C[0];case 2:return C[0]+" or "+C[1];default:return C.slice(0,-1).join(", ")+", or "+C[C.length-1]}}(i)+" but "+function(m){return m?'"'+d(m)+'"':"end of input"}(l)+" found."},t.exports={SyntaxError:a,parse:function(i,l){l=l!==void 0?l:{};var u,s={},d={start:Rr},p=Rr,m={type:"any"},_=q("[[",!1),E=q("]]",!1),A=function(f,v){return v&&(f.label=v),f},C=q(">",!1),O=q("<",!1),D=q("=",!1),B=q("f",!1),I=q("cs",!1),U=q("cf",!1),V=q("m",!1),Q=q("t",!1),X=q("k",!1),P=q("l",!1),F=q("h",!1),Y=q("d",!1),Z=q("{",!1),le=q(",",!1),Ne=q("}",!1),ue=q("+",!1),ie=q("sa",!1),ae=q("sd",!1),N=q("!",!1),x=q("!!",!1),K=q("!p",!1),Ce=q("r",!1),Se=q("ro",!1),Le=q("F",!1),Ae=q("%",!1),Te=q("(",!1),Ie=q(")",!1),ye=q("-",!1),ge=function(f,v){return v.length==0?f:{head:f,type:"expression",ops:v.map(g=>({type:"math",op:g[1],tail:g[3]}))}},fe=q("*",!1),pt=q("/",!1),He=q("**",!1),Fe=q("floor",!1),qe=q("ceil",!1),y=q("round",!1),j=q("abs",!1),$=Lr("integer"),ee=/^[0-9]/,de=vs([["0","9"]],!1,!1),tt=function(){return{type:"number",value:parseInt(i.substring(W,h),10)}},ke=q("[",!1),M=/^[^\]]/,ve=vs(["]"],!0,!1),be=q("]",!1),Ge=Lr("whitespace"),at=/^[ \t\n\r]/,Et=vs([" ","	",`
`,"\r"],!1,!1),h=0,W=0,Ut=[{line:1,column:1}],ot=0,gs=[],S=0;if("startRule"in l){if(!(l.startRule in d))throw new Error(`Can't start parsing from rule "`+l.startRule+'".');p=d[l.startRule]}function q(f,v){return{type:"literal",text:f,ignoreCase:v}}function vs(f,v,g){return{type:"class",parts:f,inverted:v,ignoreCase:g}}function Lr(f){return{type:"other",description:f}}function Ir(f){var v,g=Ut[f];if(g)return g;for(v=f-1;!Ut[v];)v--;for(g={line:(g=Ut[v]).line,column:g.column};v<f;)i.charCodeAt(v)===10?(g.line++,g.column=1):g.column++,v++;return Ut[f]=g,g}function Mr(f,v){var g=Ir(f),b=Ir(v);return{start:{offset:f,line:g.line,column:g.column},end:{offset:v,line:b.line,column:b.column}}}function k(f){h<ot||(h>ot&&(ot=h,gs=[]),gs.push(f))}function uo(f,v,g){return new a(a.buildMessage(f,v),f,v,g)}function Rr(){var f,v,g,b,R,w;if(f=h,(v=Es())!==s){for(g=[],i.length>h?(b=i.charAt(h),h++):(b=s,S===0&&k(m));b!==s;)g.push(b),i.length>h?(b=i.charAt(h),h++):(b=s,S===0&&k(m));g!==s?(W=f,w=g,(R=v).root=!0,w&&(R.label=w.join("")),f=v=R):(h=f,f=s)}else h=f,f=s;return f}function ho(){var f,v,g;return f=h,(v=function(){var b,R,w,L,G;if(b=h,(R=function(){var ne,Ve,mt,xe,he,We,Re,ze,Ee;if(ne=h,i.charCodeAt(h)===123?(Ve="{",h++):(Ve=s,S===0&&k(Z)),Ve!==s)if(se()!==s)if((mt=bs())!==s){for(xe=[],he=h,(We=se())!==s?(i.charCodeAt(h)===44?(Re=",",h++):(Re=s,S===0&&k(le)),Re!==s&&(ze=se())!==s&&(Ee=bs())!==s?he=We=[We,Re,ze,Ee]:(h=he,he=s)):(h=he,he=s);he!==s;)xe.push(he),he=h,(We=se())!==s?(i.charCodeAt(h)===44?(Re=",",h++):(Re=s,S===0&&k(le)),Re!==s&&(ze=se())!==s&&(Ee=bs())!==s?he=We=[We,Re,ze,Ee]:(h=he,he=s)):(h=he,he=s);xe!==s&&(he=se())!==s?(i.charCodeAt(h)===125?(We="}",h++):(We=s,S===0&&k(Ne)),We!==s?(W=ne,Ve={rolls:[mt,...xe.map(mo=>mo[3])],type:"group"},ne=Ve):(h=ne,ne=s)):(h=ne,ne=s)}else h=ne,ne=s;else h=ne,ne=s;else h=ne,ne=s;return ne}())!==s){for(w=[],(L=Mn())===s&&(L=Rn())===s&&(L=Ln())===s&&(L=In());L!==s;)w.push(L),(L=Mn())===s&&(L=Rn())===s&&(L=Ln())===s&&(L=In());w!==s&&(L=se())!==s?((G=Pn())===s&&(G=null),G!==s?(W=b,J=R,Me=G,(oe=w).length>0&&(J.mods=(J.mods||[]).concat(oe)),Me&&(J.label=Me),b=R=J):(h=b,b=s)):(h=b,b=s)}else h=b,b=s;var J,oe,Me;return b}())===s&&(v=Fr())===s&&(v=Ss()),v!==s&&se()!==s?((g=Pn())===s&&(g=null),g!==s?(W=f,f=v=A(v,g)):(h=f,f=s)):(h=f,f=s),f}function Ln(){var f,v,g;return f=h,i.charCodeAt(h)===62?(v=">",h++):(v=s,S===0&&k(C)),v===s&&(i.charCodeAt(h)===60?(v="<",h++):(v=s,S===0&&k(O)),v===s&&(i.charCodeAt(h)===61?(v="=",h++):(v=s,S===0&&k(D)))),v!==s&&(g=lt())!==s?(W=f,f=v={type:"success",mod:v,expr:g}):(h=f,f=s),f}function In(){var f,v,g,b;return f=h,i.charCodeAt(h)===102?(v="f",h++):(v=s,S===0&&k(B)),v!==s?(i.charCodeAt(h)===62?(g=">",h++):(g=s,S===0&&k(C)),g===s&&(i.charCodeAt(h)===60?(g="<",h++):(g=s,S===0&&k(O)),g===s&&(i.charCodeAt(h)===61?(g="=",h++):(g=s,S===0&&k(D)))),g===s&&(g=null),g!==s&&(b=lt())!==s?(W=f,f=v={type:"failure",mod:g,expr:b}):(h=f,f=s)):(h=f,f=s),f}function Pr(){var f,v,g,b;return f=h,i.substr(h,2)==="cs"?(v="cs",h+=2):(v=s,S===0&&k(I)),v!==s?(i.charCodeAt(h)===62?(g=">",h++):(g=s,S===0&&k(C)),g===s&&(i.charCodeAt(h)===60?(g="<",h++):(g=s,S===0&&k(O)),g===s&&(i.charCodeAt(h)===61?(g="=",h++):(g=s,S===0&&k(D)))),g===s&&(g=null),g!==s&&(b=lt())!==s?(W=f,f=v={type:"crit",mod:g,expr:b}):(h=f,f=s)):(h=f,f=s),f}function Hr(){var f,v,g,b;return f=h,i.substr(h,2)==="cf"?(v="cf",h+=2):(v=s,S===0&&k(U)),v!==s?(i.charCodeAt(h)===62?(g=">",h++):(g=s,S===0&&k(C)),g===s&&(i.charCodeAt(h)===60?(g="<",h++):(g=s,S===0&&k(O)),g===s&&(i.charCodeAt(h)===61?(g="=",h++):(g=s,S===0&&k(D)))),g===s&&(g=null),g!==s&&(b=lt())!==s?(W=f,f=v={type:"critfail",mod:g,expr:b}):(h=f,f=s)):(h=f,f=s),f}function fo(){var f,v,g,b,R;return f=h,i.charCodeAt(h)===109?(v="m",h++):(v=s,S===0&&k(V)),v!==s?(i.charCodeAt(h)===116?(g="t",h++):(g=s,S===0&&k(Q)),g===s&&(g=null),g!==s?((b=Ss())===s&&(b=null),b!==s?((R=function(){var w,L,G;return w=h,i.charCodeAt(h)===62?(L=">",h++):(L=s,S===0&&k(C)),L===s&&(i.charCodeAt(h)===60?(L="<",h++):(L=s,S===0&&k(O)),L===s&&(i.charCodeAt(h)===61?(L="=",h++):(L=s,S===0&&k(D)))),L!==s&&(G=lt())!==s?(W=w,w=L={mod:L,expr:G}):(h=w,w=s),w}())===s&&(R=null),R!==s?(W=f,f=v=function(w,L,G){const J={type:"match",min:L||{type:"number",value:2},count:!!w};return G&&(J.mod=G.mod,J.expr=G.expr),J}(g,b,R)):(h=f,f=s)):(h=f,f=s)):(h=f,f=s)):(h=f,f=s),f}function Mn(){var f,v,g,b;return f=h,i.charCodeAt(h)===107?(v="k",h++):(v=s,S===0&&k(X)),v!==s?(i.charCodeAt(h)===108?(g="l",h++):(g=s,S===0&&k(P)),g===s&&(i.charCodeAt(h)===104?(g="h",h++):(g=s,S===0&&k(F))),g===s&&(g=null),g!==s?((b=lt())===s&&(b=null),b!==s?(W=f,f=v={type:"keep",highlow:g,expr:b||Kr}):(h=f,f=s)):(h=f,f=s)):(h=f,f=s),f}function Rn(){var f,v,g,b;return f=h,i.charCodeAt(h)===100?(v="d",h++):(v=s,S===0&&k(Y)),v!==s?(i.charCodeAt(h)===108?(g="l",h++):(g=s,S===0&&k(P)),g===s&&(i.charCodeAt(h)===104?(g="h",h++):(g=s,S===0&&k(F))),g===s&&(g=null),g!==s?((b=lt())===s&&(b=null),b!==s?(W=f,f=v={type:"drop",highlow:g,expr:b||Kr}):(h=f,f=s)):(h=f,f=s)):(h=f,f=s),f}function bs(){var f,v,g,b,R,w,L,G;if(f=h,(v=ys())!==s){for(g=[],b=h,(R=se())!==s?(i.charCodeAt(h)===43?(w="+",h++):(w=s,S===0&&k(ue)),w!==s&&(L=se())!==s&&(G=ys())!==s?b=R=[R,w,L,G]:(h=b,b=s)):(h=b,b=s);b!==s;)g.push(b),b=h,(R=se())!==s?(i.charCodeAt(h)===43?(w="+",h++):(w=s,S===0&&k(ue)),w!==s&&(L=se())!==s&&(G=ys())!==s?b=R=[R,w,L,G]:(h=b,b=s)):(h=b,b=s);g!==s?(W=f,f=v=function(J,oe){return oe.length==0?J:{head:J,type:"diceExpression",ops:oe.map(Me=>({type:"math",op:Me[1],tail:Me[3]}))}}(v,g)):(h=f,f=s)}else h=f,f=s;return f}function ys(){var f;return(f=Fr())===s&&(f=Es()),f}function Fr(){var f,v,g;return f=h,(v=function(){var b,R,w,L,G;if(b=h,(R=function(){var J,oe,Me,ne;if(J=h,(oe=function(){var xe,he,We,Re;return xe=h,(he=lt())===s&&(he=null),he!==s?(i.charCodeAt(h)===100?(We="d",h++):(We=s,S===0&&k(Y)),We!==s?((Re=function(){var ze,Ee;return ze=h,i.charCodeAt(h)===70?(Ee="F",h++):(Ee=s,S===0&&k(Le)),Ee===s&&(i.charCodeAt(h)===102?(Ee="f",h++):(Ee=s,S===0&&k(B))),Ee!==s&&(W=ze,Ee={type:"fate"}),ze=Ee}())===s&&(Re=function(){var ze,Ee;return ze=h,i.charCodeAt(h)===37?(Ee="%",h++):(Ee=s,S===0&&k(Ae)),Ee!==s&&(W=ze,Ee={type:"number",value:"100"}),ze=Ee}())===s&&(Re=lt()),Re!==s?(W=xe,he={die:Re,count:he||{type:"number",value:1},type:"die"},xe=he):(h=xe,xe=s)):(h=xe,xe=s)):(h=xe,xe=s),xe}())!==s){for(Me=[],(ne=Wr())===s&&(ne=jr())===s&&(ne=Vr())===s&&(ne=Br())===s&&(ne=Ur());ne!==s;)Me.push(ne),(ne=Wr())===s&&(ne=jr())===s&&(ne=Vr())===s&&(ne=Br())===s&&(ne=Ur());Me!==s?(W=J,mt=Me,(Ve=oe).mods=(Ve.mods||[]).concat(mt),J=oe=Ve):(h=J,J=s)}else h=J,J=s;var Ve,mt;return J}())!==s){for(w=[],(L=Rn())===s&&(L=Mn())===s&&(L=Ln())===s&&(L=In())===s&&(L=Hr())===s&&(L=Pr());L!==s;)w.push(L),(L=Rn())===s&&(L=Mn())===s&&(L=Ln())===s&&(L=In())===s&&(L=Hr())===s&&(L=Pr());w!==s?((L=fo())===s&&(L=null),L!==s?((G=function(){var J,oe;return J=h,i.substr(h,2)==="sa"?(oe="sa",h+=2):(oe=s,S===0&&k(ie)),oe!==s&&(W=J,oe={type:"sort",asc:!0}),J=oe}())===s&&(G=function(){var J,oe;return J=h,i.substr(h,2)==="sd"?(oe="sd",h+=2):(oe=s,S===0&&k(ae)),oe!==s&&(W=J,oe={type:"sort",asc:!1}),J=oe}()),G===s&&(G=null),G!==s?(W=b,R=function(J,oe,Me,ne){const Ve=oe.filter(mt=>["success","failure"].includes(mt.type));return oe=oe.filter(mt=>!Ve.includes(mt)),J.mods=(J.mods||[]).concat(oe),Ve.length>0&&(J.targets=Ve),Me&&(J.match=Me),ne&&(J.sort=ne),J}(R,w,L,G),b=R):(h=b,b=s)):(h=b,b=s)):(h=b,b=s)}else h=b,b=s;return b}())!==s&&se()!==s?((g=Pn())===s&&(g=null),g!==s?(W=f,f=v=A(v,g)):(h=f,f=s)):(h=f,f=s),f}function Vr(){var f,v,g;return f=h,i.charCodeAt(h)===33?(v="!",h++):(v=s,S===0&&k(N)),v!==s?((g=un())===s&&(g=null),g!==s?(W=f,f=v={type:"explode",target:g}):(h=f,f=s)):(h=f,f=s),f}function Wr(){var f,v,g;return f=h,i.substr(h,2)==="!!"?(v="!!",h+=2):(v=s,S===0&&k(x)),v!==s?((g=un())===s&&(g=null),g!==s?(W=f,f=v={type:"compound",target:g}):(h=f,f=s)):(h=f,f=s),f}function jr(){var f,v,g;return f=h,i.substr(h,2)==="!p"?(v="!p",h+=2):(v=s,S===0&&k(K)),v!==s?((g=un())===s&&(g=null),g!==s?(W=f,f=v={type:"penetrate",target:g}):(h=f,f=s)):(h=f,f=s),f}function Ur(){var f,v,g;return f=h,i.charCodeAt(h)===114?(v="r",h++):(v=s,S===0&&k(Ce)),v!==s?((g=un())===s&&(g=null),g!==s?(W=f,f=v={type:"reroll",target:g||Yr}):(h=f,f=s)):(h=f,f=s),f}function Br(){var f,v,g;return f=h,i.substr(h,2)==="ro"?(v="ro",h+=2):(v=s,S===0&&k(Se)),v!==s?((g=un())===s&&(g=null),g!==s?(W=f,f=v={type:"rerollOnce",target:g||Yr}):(h=f,f=s)):(h=f,f=s),f}function un(){var f,v,g;return f=h,i.charCodeAt(h)===62?(v=">",h++):(v=s,S===0&&k(C)),v===s&&(i.charCodeAt(h)===60?(v="<",h++):(v=s,S===0&&k(O)),v===s&&(i.charCodeAt(h)===61?(v="=",h++):(v=s,S===0&&k(D)))),v===s&&(v=null),v!==s&&(g=lt())!==s?(W=f,f=v={type:"target",mod:v,value:g}):(h=f,f=s),f}function lt(){var f;return(f=Ns())===s&&(f=Ss()),f}function Es(){var f;return(f=function(){var v,g,b,R;return v=h,i.substr(h,2)==="[["?(g="[[",h+=2):(g=s,S===0&&k(_)),g!==s&&(b=Es())!==s?(i.substr(h,2)==="]]"?(R="]]",h+=2):(R=s,S===0&&k(E)),R!==s?(W=v,v=g={type:"inline",expr:b}):(h=v,v=s)):(h=v,v=s),v}())===s&&(f=As())===s&&(f=Ns()),f}function Ns(){var f,v,g,b,R,w,L;return f=h,i.charCodeAt(h)===40?(v="(",h++):(v=s,S===0&&k(Te)),v!==s&&(g=As())!==s?(i.charCodeAt(h)===41?(b=")",h++):(b=s,S===0&&k(Ie)),b!==s&&se()!==s?((R=Pn())===s&&(R=null),R!==s?(W=f,w=g,(L=R)&&(w.label=L),f=v=w):(h=f,f=s)):(h=f,f=s)):(h=f,f=s),f}function As(){var f,v,g,b,R,w,L,G;if(f=h,(v=Ts())!==s){for(g=[],b=h,(R=se())!==s?(i.charCodeAt(h)===43?(w="+",h++):(w=s,S===0&&k(ue)),w===s&&(i.charCodeAt(h)===45?(w="-",h++):(w=s,S===0&&k(ye))),w!==s&&(L=se())!==s&&(G=Ts())!==s?b=R=[R,w,L,G]:(h=b,b=s)):(h=b,b=s);b!==s;)g.push(b),b=h,(R=se())!==s?(i.charCodeAt(h)===43?(w="+",h++):(w=s,S===0&&k(ue)),w===s&&(i.charCodeAt(h)===45?(w="-",h++):(w=s,S===0&&k(ye))),w!==s&&(L=se())!==s&&(G=Ts())!==s?b=R=[R,w,L,G]:(h=b,b=s)):(h=b,b=s);g!==s?(W=f,f=v=ge(v,g)):(h=f,f=s)}else h=f,f=s;return f}function Ts(){var f,v,g,b,R,w,L,G;if(f=h,(v=Cs())!==s){for(g=[],b=h,(R=se())!==s?(i.charCodeAt(h)===42?(w="*",h++):(w=s,S===0&&k(fe)),w===s&&(i.charCodeAt(h)===47?(w="/",h++):(w=s,S===0&&k(pt))),w!==s&&(L=se())!==s&&(G=Cs())!==s?b=R=[R,w,L,G]:(h=b,b=s)):(h=b,b=s);b!==s;)g.push(b),b=h,(R=se())!==s?(i.charCodeAt(h)===42?(w="*",h++):(w=s,S===0&&k(fe)),w===s&&(i.charCodeAt(h)===47?(w="/",h++):(w=s,S===0&&k(pt))),w!==s&&(L=se())!==s&&(G=Cs())!==s?b=R=[R,w,L,G]:(h=b,b=s)):(h=b,b=s);g!==s?(W=f,f=v=ge(v,g)):(h=f,f=s)}else h=f,f=s;return f}function Cs(){var f,v,g,b,R,w,L,G;if(f=h,(v=ws())!==s){for(g=[],b=h,(R=se())!==s?(i.substr(h,2)==="**"?(w="**",h+=2):(w=s,S===0&&k(He)),w===s&&(i.charCodeAt(h)===37?(w="%",h++):(w=s,S===0&&k(Ae))),w!==s&&(L=se())!==s&&(G=ws())!==s?b=R=[R,w,L,G]:(h=b,b=s)):(h=b,b=s);b!==s;)g.push(b),b=h,(R=se())!==s?(i.substr(h,2)==="**"?(w="**",h+=2):(w=s,S===0&&k(He)),w===s&&(i.charCodeAt(h)===37?(w="%",h++):(w=s,S===0&&k(Ae))),w!==s&&(L=se())!==s&&(G=ws())!==s?b=R=[R,w,L,G]:(h=b,b=s)):(h=b,b=s);g!==s?(W=f,f=v=ge(v,g)):(h=f,f=s)}else h=f,f=s;return f}function po(){var f,v,g,b,R;return f=h,(v=function(){var w;return i.substr(h,5)==="floor"?(w="floor",h+=5):(w=s,S===0&&k(Fe)),w===s&&(i.substr(h,4)==="ceil"?(w="ceil",h+=4):(w=s,S===0&&k(qe)),w===s&&(i.substr(h,5)==="round"?(w="round",h+=5):(w=s,S===0&&k(y)),w===s&&(i.substr(h,3)==="abs"?(w="abs",h+=3):(w=s,S===0&&k(j))))),w}())!==s&&se()!==s?(i.charCodeAt(h)===40?(g="(",h++):(g=s,S===0&&k(Te)),g!==s&&se()!==s&&(b=As())!==s&&se()!==s?(i.charCodeAt(h)===41?(R=")",h++):(R=s,S===0&&k(Ie)),R!==s?(W=f,f=v={type:"mathfunction",op:v,expr:b}):(h=f,f=s)):(h=f,f=s)):(h=f,f=s),f}function ws(){var f;return(f=po())===s&&(f=ho())===s&&(f=Ns()),f}function Ss(){var f,v,g,b;if(S++,f=h,i.charCodeAt(h)===45?(v="-",h++):(v=s,S===0&&k(ye)),v===s&&(v=null),v!==s){if(g=[],ee.test(i.charAt(h))?(b=i.charAt(h),h++):(b=s,S===0&&k(de)),b!==s)for(;b!==s;)g.push(b),ee.test(i.charAt(h))?(b=i.charAt(h),h++):(b=s,S===0&&k(de));else g=s;g!==s?(W=f,f=v=tt()):(h=f,f=s)}else h=f,f=s;return S--,f===s&&(v=s,S===0&&k($)),f}function Pn(){var f,v,g,b;if(f=h,i.charCodeAt(h)===91?(v="[",h++):(v=s,S===0&&k(ke)),v!==s){if(g=[],M.test(i.charAt(h))?(b=i.charAt(h),h++):(b=s,S===0&&k(ve)),b!==s)for(;b!==s;)g.push(b),M.test(i.charAt(h))?(b=i.charAt(h),h++):(b=s,S===0&&k(ve));else g=s;g!==s?(i.charCodeAt(h)===93?(b="]",h++):(b=s,S===0&&k(be)),b!==s?(W=f,f=v=g.join("")):(h=f,f=s)):(h=f,f=s)}else h=f,f=s;return f}function se(){var f,v;for(S++,f=[],at.test(i.charAt(h))?(v=i.charAt(h),h++):(v=s,S===0&&k(Et));v!==s;)f.push(v),at.test(i.charAt(h))?(v=i.charAt(h),h++):(v=s,S===0&&k(Et));return S--,f===s&&(v=s,S===0&&k(Ge)),f}const Yr={type:"target",mod:"=",value:{type:"number",value:1}},Kr={type:"number",value:1};if((u=p())!==s&&h===i.length)return u;throw u!==s&&h<i.length&&k({type:"end"}),uo(gs,ot<i.length?i.charAt(ot):null,ot<i.length?Mr(ot,ot+1):Mr(ot,ot))}}},function(t,r,c){Object.defineProperty(r,"__esModule",{value:!0}),r.DiscordRollRenderer=class{render(a){return this.doRender(a,!0)}doRender(a,i=!1){let l="";switch(a.type){case"diceexpressionroll":l=this.renderGroupExpr(a);break;case"grouproll":l=this.renderGroup(a);break;case"die":l=this.renderDie(a);break;case"expressionroll":l=this.renderExpression(a);break;case"mathfunction":l=this.renderFunction(a);break;case"roll":return this.renderRoll(a);case"fateroll":return this.renderFateRoll(a);case"number":const u=a.label?` (${a.label})`:"";return`${a.value}${u}`;case"fate":return"F";default:throw new Error("Unable to render")}return a.valid||(l="~~"+l.replace(/~~/g,"")+"~~"),i?this.stripBrackets(l):a.label?`(${a.label}: ${l})`:l}renderGroup(a){const i=[];for(const l of a.dice)i.push(this.doRender(l));return i.length>1?`{ ${i.join(" + ")} } = ${a.value}`:`{ ${this.stripBrackets(i[0])} } = ${a.value}`}renderGroupExpr(a){const i=[];for(const l of a.dice)i.push(this.doRender(l));return i.length>1?`(${i.join(" + ")} = ${a.value})`:i[0]}renderDie(a){const i=[];for(const s of a.rolls)i.push(this.doRender(s));let l=`${i.join(", ")}`;["number","fate"].includes(a.die.type)&&a.count.type==="number"||(l+=`[*Rolling: ${this.doRender(a.count)}d${this.doRender(a.die)}*]`);const u=a.matched?` Match${a.value===1?"":"es"}`:"";return l+=` = ${a.value}${u}`,`(${l})`}renderExpression(a){if(a.dice.length>1){const i=[];for(let l=0;l<a.dice.length-1;l++)i.push(this.doRender(a.dice[l])),i.push(a.ops[l]);return i.push(this.doRender(a.dice.slice(-1)[0])),i.push("="),i.push(a.value+""),`(${i.join(" ")})`}return a.dice[0].type==="number"?a.value+"":this.doRender(a.dice[0])}renderFunction(a){const i=this.doRender(a.expr);return`(${a.op}${this.addBrackets(i)} = ${a.value})`}addBrackets(a){return a.startsWith("(")||(a=`(${a}`),a.endsWith(")")||(a=`${a})`),a}stripBrackets(a){return a.startsWith("(")&&(a=a.substring(1)),a.endsWith(")")&&(a=a.substring(0,a.length-1)),a}renderRoll(a){let i=`${a.roll}`;return a.valid?a.success&&a.value===1?i=`**${a.roll}**`:a.success&&a.value===-1?i=`*${a.roll}*`:a.success||a.critical!=="success"?a.success||a.critical!=="failure"||(i=`*${a.roll}*`):i=`**${a.roll}**`:i=`~~${a.roll}~~`,a.matched&&(i=`__${i}__`),i}renderFateRoll(a){const i=a.roll===0?"0":a.roll>0?"+":"-";let l=`${a.roll}`;return a.valid?a.success&&a.value===1?l=`**${i}**`:a.success&&a.value===-1&&(l=`*${i}*`):l=`~~${i}~~`,a.matched&&(l=`__${l}__`),l}}}])})}(Xn)),Xn.exports}var jo=Wo();function pr(n){return String(n).charAt(0).toUpperCase()+String(n).slice(1)}const _n="/requiem-pathfinder-preact/",At=16,Os=4,rs=(n,e)=>Math.floor(Math.floor(n*e)/5),ct=(n,e)=>{const t=n.find(r=>r.isLinked&&r.linkedStat===e);return t?rs(t.quantity,t.rank):0},Qt=(n,e,t,r=!1)=>e.replace(/\[(\w+)\]/g,(c,a)=>{const i=t[a]||0,l=ct(n,a),u=i+l;return r?pr(u.toString()):`${u}[${a}]`}),Uo=n=>{const e=[];return n.name||e.push("Spell name is required"),n.quantity<0&&e.push("Quantity must be 0 or higher"),n.quantity>At&&e.push("Quantity over maximum stack limit"),n.power<=0&&e.push("Spell level must be greater than 0"),n.dice||e.push("Damage roll is required"),e},Jn=(n,e)=>{if(!n)return{isValid:!1,error:"A valid dice roll is required."};try{const t=n.replace(/\[\w+\]/g,"0");new jo.DiceRoller().roll(t);const c=(n.match(/\[(\w+)\]/g)||[]).map(a=>a.slice(1,-1)).filter(a=>e[a]===void 0);return c.length>0?{isValid:!1,error:`Unknown stats: ${c.join(", ")}`}:{isValid:!0,error:null}}catch{return{isValid:!1,error:"Invalid dice format. Use format like '1d6+[spellAttackModifier]' or '2d8+3'"}}};var Oe="top",Be="bottom",Ye="right",De="left",cs="auto",on=[Oe,Be,Ye,De],Ht="start",Zt="end",ca="clippingParents",mr="viewport",Kt="popper",ua="reference",Zs=on.reduce(function(n,e){return n.concat([e+"-"+Ht,e+"-"+Zt])},[]),_r=[].concat(on,[cs]).reduce(function(n,e){return n.concat([e,e+"-"+Ht,e+"-"+Zt])},[]),da="beforeRead",ha="read",fa="afterRead",pa="beforeMain",ma="main",_a="afterMain",ga="beforeWrite",va="write",ba="afterWrite",ya=[da,ha,fa,pa,ma,_a,ga,va,ba];function ft(n){return n?(n.nodeName||"").toLowerCase():null}function Ke(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function Ft(n){var e=Ke(n).Element;return n instanceof e||n instanceof Element}function Xe(n){var e=Ke(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function gr(n){if(typeof ShadowRoot>"u")return!1;var e=Ke(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function Bo(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},c=e.attributes[t]||{},a=e.elements[t];!Xe(a)||!ft(a)||(Object.assign(a.style,r),Object.keys(c).forEach(function(i){var l=c[i];l===!1?a.removeAttribute(i):a.setAttribute(i,l===!0?"":l)}))})}function Yo(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var c=e.elements[r],a=e.attributes[r]||{},i=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]),l=i.reduce(function(u,s){return u[s]="",u},{});!Xe(c)||!ft(c)||(Object.assign(c.style,l),Object.keys(a).forEach(function(u){c.removeAttribute(u)}))})}}const vr={name:"applyStyles",enabled:!0,phase:"write",fn:Bo,effect:Yo,requires:["computeStyles"]};function dt(n){return n.split("-")[0]}var Rt=Math.max,is=Math.min,en=Math.round;function er(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Ea(){return!/^((?!chrome|android).)*safari/i.test(er())}function tn(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var r=n.getBoundingClientRect(),c=1,a=1;e&&Xe(n)&&(c=n.offsetWidth>0&&en(r.width)/n.offsetWidth||1,a=n.offsetHeight>0&&en(r.height)/n.offsetHeight||1);var i=Ft(n)?Ke(n):window,l=i.visualViewport,u=!Ea()&&t,s=(r.left+(u&&l?l.offsetLeft:0))/c,d=(r.top+(u&&l?l.offsetTop:0))/a,p=r.width/c,m=r.height/a;return{width:p,height:m,top:d,right:s+p,bottom:d+m,left:s,x:s,y:d}}function br(n){var e=tn(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}function Na(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&gr(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function vt(n){return Ke(n).getComputedStyle(n)}function Ko(n){return["table","td","th"].indexOf(ft(n))>=0}function kt(n){return((Ft(n)?n.ownerDocument:n.document)||window.document).documentElement}function us(n){return ft(n)==="html"?n:n.assignedSlot||n.parentNode||(gr(n)?n.host:null)||kt(n)}function ci(n){return!Xe(n)||vt(n).position==="fixed"?null:n.offsetParent}function qo(n){var e=/firefox/i.test(er()),t=/Trident/i.test(er());if(t&&Xe(n)){var r=vt(n);if(r.position==="fixed")return null}var c=us(n);for(gr(c)&&(c=c.host);Xe(c)&&["html","body"].indexOf(ft(c))<0;){var a=vt(c);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return c;c=c.parentNode}return null}function Sn(n){for(var e=Ke(n),t=ci(n);t&&Ko(t)&&vt(t).position==="static";)t=ci(t);return t&&(ft(t)==="html"||ft(t)==="body"&&vt(t).position==="static")?e:t||qo(n)||e}function yr(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function gn(n,e,t){return Rt(n,is(e,t))}function Go(n,e,t){var r=gn(n,e,t);return r>t?t:r}function Aa(){return{top:0,right:0,bottom:0,left:0}}function Ta(n){return Object.assign({},Aa(),n)}function Ca(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}var zo=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,Ta(typeof e!="number"?e:Ca(e,on))};function Qo(n){var e,t=n.state,r=n.name,c=n.options,a=t.elements.arrow,i=t.modifiersData.popperOffsets,l=dt(t.placement),u=yr(l),s=[De,Ye].indexOf(l)>=0,d=s?"height":"width";if(!(!a||!i)){var p=zo(c.padding,t),m=br(a),_=u==="y"?Oe:De,E=u==="y"?Be:Ye,A=t.rects.reference[d]+t.rects.reference[u]-i[u]-t.rects.popper[d],C=i[u]-t.rects.reference[u],O=Sn(a),D=O?u==="y"?O.clientHeight||0:O.clientWidth||0:0,B=A/2-C/2,I=p[_],U=D-m[d]-p[E],V=D/2-m[d]/2+B,Q=gn(I,V,U),X=u;t.modifiersData[r]=(e={},e[X]=Q,e.centerOffset=Q-V,e)}}function Xo(n){var e=n.state,t=n.options,r=t.element,c=r===void 0?"[data-popper-arrow]":r;c!=null&&(typeof c=="string"&&(c=e.elements.popper.querySelector(c),!c)||Na(e.elements.popper,c)&&(e.elements.arrow=c))}const wa={name:"arrow",enabled:!0,phase:"main",fn:Qo,effect:Xo,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function nn(n){return n.split("-")[1]}var Jo={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Zo(n,e){var t=n.x,r=n.y,c=e.devicePixelRatio||1;return{x:en(t*c)/c||0,y:en(r*c)/c||0}}function ui(n){var e,t=n.popper,r=n.popperRect,c=n.placement,a=n.variation,i=n.offsets,l=n.position,u=n.gpuAcceleration,s=n.adaptive,d=n.roundOffsets,p=n.isFixed,m=i.x,_=m===void 0?0:m,E=i.y,A=E===void 0?0:E,C=typeof d=="function"?d({x:_,y:A}):{x:_,y:A};_=C.x,A=C.y;var O=i.hasOwnProperty("x"),D=i.hasOwnProperty("y"),B=De,I=Oe,U=window;if(s){var V=Sn(t),Q="clientHeight",X="clientWidth";if(V===Ke(t)&&(V=kt(t),vt(V).position!=="static"&&l==="absolute"&&(Q="scrollHeight",X="scrollWidth")),V=V,c===Oe||(c===De||c===Ye)&&a===Zt){I=Be;var P=p&&V===U&&U.visualViewport?U.visualViewport.height:V[Q];A-=P-r.height,A*=u?1:-1}if(c===De||(c===Oe||c===Be)&&a===Zt){B=Ye;var F=p&&V===U&&U.visualViewport?U.visualViewport.width:V[X];_-=F-r.width,_*=u?1:-1}}var Y=Object.assign({position:l},s&&Jo),Z=d===!0?Zo({x:_,y:A},Ke(t)):{x:_,y:A};if(_=Z.x,A=Z.y,u){var le;return Object.assign({},Y,(le={},le[I]=D?"0":"",le[B]=O?"0":"",le.transform=(U.devicePixelRatio||1)<=1?"translate("+_+"px, "+A+"px)":"translate3d("+_+"px, "+A+"px, 0)",le))}return Object.assign({},Y,(e={},e[I]=D?A+"px":"",e[B]=O?_+"px":"",e.transform="",e))}function el(n){var e=n.state,t=n.options,r=t.gpuAcceleration,c=r===void 0?!0:r,a=t.adaptive,i=a===void 0?!0:a,l=t.roundOffsets,u=l===void 0?!0:l,s={placement:dt(e.placement),variation:nn(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:c,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,ui(Object.assign({},s,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:i,roundOffsets:u})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,ui(Object.assign({},s,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Er={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:el,data:{}};var jn={passive:!0};function tl(n){var e=n.state,t=n.instance,r=n.options,c=r.scroll,a=c===void 0?!0:c,i=r.resize,l=i===void 0?!0:i,u=Ke(e.elements.popper),s=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&s.forEach(function(d){d.addEventListener("scroll",t.update,jn)}),l&&u.addEventListener("resize",t.update,jn),function(){a&&s.forEach(function(d){d.removeEventListener("scroll",t.update,jn)}),l&&u.removeEventListener("resize",t.update,jn)}}const Nr={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:tl,data:{}};var nl={left:"right",right:"left",bottom:"top",top:"bottom"};function Zn(n){return n.replace(/left|right|bottom|top/g,function(e){return nl[e]})}var sl={start:"end",end:"start"};function di(n){return n.replace(/start|end/g,function(e){return sl[e]})}function Ar(n){var e=Ke(n),t=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:t,scrollTop:r}}function Tr(n){return tn(kt(n)).left+Ar(n).scrollLeft}function rl(n,e){var t=Ke(n),r=kt(n),c=t.visualViewport,a=r.clientWidth,i=r.clientHeight,l=0,u=0;if(c){a=c.width,i=c.height;var s=Ea();(s||!s&&e==="fixed")&&(l=c.offsetLeft,u=c.offsetTop)}return{width:a,height:i,x:l+Tr(n),y:u}}function il(n){var e,t=kt(n),r=Ar(n),c=(e=n.ownerDocument)==null?void 0:e.body,a=Rt(t.scrollWidth,t.clientWidth,c?c.scrollWidth:0,c?c.clientWidth:0),i=Rt(t.scrollHeight,t.clientHeight,c?c.scrollHeight:0,c?c.clientHeight:0),l=-r.scrollLeft+Tr(n),u=-r.scrollTop;return vt(c||t).direction==="rtl"&&(l+=Rt(t.clientWidth,c?c.clientWidth:0)-a),{width:a,height:i,x:l,y:u}}function Cr(n){var e=vt(n),t=e.overflow,r=e.overflowX,c=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+c+r)}function Sa(n){return["html","body","#document"].indexOf(ft(n))>=0?n.ownerDocument.body:Xe(n)&&Cr(n)?n:Sa(us(n))}function vn(n,e){var t;e===void 0&&(e=[]);var r=Sa(n),c=r===((t=n.ownerDocument)==null?void 0:t.body),a=Ke(r),i=c?[a].concat(a.visualViewport||[],Cr(r)?r:[]):r,l=e.concat(i);return c?l:l.concat(vn(us(i)))}function tr(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function al(n,e){var t=tn(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function hi(n,e,t){return e===mr?tr(rl(n,t)):Ft(e)?al(e,t):tr(il(kt(n)))}function ol(n){var e=vn(us(n)),t=["absolute","fixed"].indexOf(vt(n).position)>=0,r=t&&Xe(n)?Sn(n):n;return Ft(r)?e.filter(function(c){return Ft(c)&&Na(c,r)&&ft(c)!=="body"}):[]}function ll(n,e,t,r){var c=e==="clippingParents"?ol(n):[].concat(e),a=[].concat(c,[t]),i=a[0],l=a.reduce(function(u,s){var d=hi(n,s,r);return u.top=Rt(d.top,u.top),u.right=is(d.right,u.right),u.bottom=is(d.bottom,u.bottom),u.left=Rt(d.left,u.left),u},hi(n,i,r));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function ka(n){var e=n.reference,t=n.element,r=n.placement,c=r?dt(r):null,a=r?nn(r):null,i=e.x+e.width/2-t.width/2,l=e.y+e.height/2-t.height/2,u;switch(c){case Oe:u={x:i,y:e.y-t.height};break;case Be:u={x:i,y:e.y+e.height};break;case Ye:u={x:e.x+e.width,y:l};break;case De:u={x:e.x-t.width,y:l};break;default:u={x:e.x,y:e.y}}var s=c?yr(c):null;if(s!=null){var d=s==="y"?"height":"width";switch(a){case Ht:u[s]=u[s]-(e[d]/2-t[d]/2);break;case Zt:u[s]=u[s]+(e[d]/2-t[d]/2);break}}return u}function sn(n,e){e===void 0&&(e={});var t=e,r=t.placement,c=r===void 0?n.placement:r,a=t.strategy,i=a===void 0?n.strategy:a,l=t.boundary,u=l===void 0?ca:l,s=t.rootBoundary,d=s===void 0?mr:s,p=t.elementContext,m=p===void 0?Kt:p,_=t.altBoundary,E=_===void 0?!1:_,A=t.padding,C=A===void 0?0:A,O=Ta(typeof C!="number"?C:Ca(C,on)),D=m===Kt?ua:Kt,B=n.rects.popper,I=n.elements[E?D:m],U=ll(Ft(I)?I:I.contextElement||kt(n.elements.popper),u,d,i),V=tn(n.elements.reference),Q=ka({reference:V,element:B,placement:c}),X=tr(Object.assign({},B,Q)),P=m===Kt?X:V,F={top:U.top-P.top+O.top,bottom:P.bottom-U.bottom+O.bottom,left:U.left-P.left+O.left,right:P.right-U.right+O.right},Y=n.modifiersData.offset;if(m===Kt&&Y){var Z=Y[c];Object.keys(F).forEach(function(le){var Ne=[Ye,Be].indexOf(le)>=0?1:-1,ue=[Oe,Be].indexOf(le)>=0?"y":"x";F[le]+=Z[ue]*Ne})}return F}function cl(n,e){e===void 0&&(e={});var t=e,r=t.placement,c=t.boundary,a=t.rootBoundary,i=t.padding,l=t.flipVariations,u=t.allowedAutoPlacements,s=u===void 0?_r:u,d=nn(r),p=d?l?Zs:Zs.filter(function(E){return nn(E)===d}):on,m=p.filter(function(E){return s.indexOf(E)>=0});m.length===0&&(m=p);var _=m.reduce(function(E,A){return E[A]=sn(n,{placement:A,boundary:c,rootBoundary:a,padding:i})[dt(A)],E},{});return Object.keys(_).sort(function(E,A){return _[E]-_[A]})}function ul(n){if(dt(n)===cs)return[];var e=Zn(n);return[di(n),e,di(e)]}function dl(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var c=t.mainAxis,a=c===void 0?!0:c,i=t.altAxis,l=i===void 0?!0:i,u=t.fallbackPlacements,s=t.padding,d=t.boundary,p=t.rootBoundary,m=t.altBoundary,_=t.flipVariations,E=_===void 0?!0:_,A=t.allowedAutoPlacements,C=e.options.placement,O=dt(C),D=O===C,B=u||(D||!E?[Zn(C)]:ul(C)),I=[C].concat(B).reduce(function(Ae,Te){return Ae.concat(dt(Te)===cs?cl(e,{placement:Te,boundary:d,rootBoundary:p,padding:s,flipVariations:E,allowedAutoPlacements:A}):Te)},[]),U=e.rects.reference,V=e.rects.popper,Q=new Map,X=!0,P=I[0],F=0;F<I.length;F++){var Y=I[F],Z=dt(Y),le=nn(Y)===Ht,Ne=[Oe,Be].indexOf(Z)>=0,ue=Ne?"width":"height",ie=sn(e,{placement:Y,boundary:d,rootBoundary:p,altBoundary:m,padding:s}),ae=Ne?le?Ye:De:le?Be:Oe;U[ue]>V[ue]&&(ae=Zn(ae));var N=Zn(ae),x=[];if(a&&x.push(ie[Z]<=0),l&&x.push(ie[ae]<=0,ie[N]<=0),x.every(function(Ae){return Ae})){P=Y,X=!1;break}Q.set(Y,x)}if(X)for(var K=E?3:1,Ce=function(Te){var Ie=I.find(function(ye){var ge=Q.get(ye);if(ge)return ge.slice(0,Te).every(function(fe){return fe})});if(Ie)return P=Ie,"break"},Se=K;Se>0;Se--){var Le=Ce(Se);if(Le==="break")break}e.placement!==P&&(e.modifiersData[r]._skip=!0,e.placement=P,e.reset=!0)}}const xa={name:"flip",enabled:!0,phase:"main",fn:dl,requiresIfExists:["offset"],data:{_skip:!1}};function fi(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function pi(n){return[Oe,Ye,Be,De].some(function(e){return n[e]>=0})}function hl(n){var e=n.state,t=n.name,r=e.rects.reference,c=e.rects.popper,a=e.modifiersData.preventOverflow,i=sn(e,{elementContext:"reference"}),l=sn(e,{altBoundary:!0}),u=fi(i,r),s=fi(l,c,a),d=pi(u),p=pi(s);e.modifiersData[t]={referenceClippingOffsets:u,popperEscapeOffsets:s,isReferenceHidden:d,hasPopperEscaped:p},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":p})}const $a={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hl};function fl(n,e,t){var r=dt(n),c=[De,Oe].indexOf(r)>=0?-1:1,a=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,i=a[0],l=a[1];return i=i||0,l=(l||0)*c,[De,Ye].indexOf(r)>=0?{x:l,y:i}:{x:i,y:l}}function pl(n){var e=n.state,t=n.options,r=n.name,c=t.offset,a=c===void 0?[0,0]:c,i=_r.reduce(function(d,p){return d[p]=fl(p,e.rects,a),d},{}),l=i[e.placement],u=l.x,s=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=u,e.modifiersData.popperOffsets.y+=s),e.modifiersData[r]=i}const Oa={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:pl};function ml(n){var e=n.state,t=n.name;e.modifiersData[t]=ka({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const wr={name:"popperOffsets",enabled:!0,phase:"read",fn:ml,data:{}};function _l(n){return n==="x"?"y":"x"}function gl(n){var e=n.state,t=n.options,r=n.name,c=t.mainAxis,a=c===void 0?!0:c,i=t.altAxis,l=i===void 0?!1:i,u=t.boundary,s=t.rootBoundary,d=t.altBoundary,p=t.padding,m=t.tether,_=m===void 0?!0:m,E=t.tetherOffset,A=E===void 0?0:E,C=sn(e,{boundary:u,rootBoundary:s,padding:p,altBoundary:d}),O=dt(e.placement),D=nn(e.placement),B=!D,I=yr(O),U=_l(I),V=e.modifiersData.popperOffsets,Q=e.rects.reference,X=e.rects.popper,P=typeof A=="function"?A(Object.assign({},e.rects,{placement:e.placement})):A,F=typeof P=="number"?{mainAxis:P,altAxis:P}:Object.assign({mainAxis:0,altAxis:0},P),Y=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,Z={x:0,y:0};if(V){if(a){var le,Ne=I==="y"?Oe:De,ue=I==="y"?Be:Ye,ie=I==="y"?"height":"width",ae=V[I],N=ae+C[Ne],x=ae-C[ue],K=_?-X[ie]/2:0,Ce=D===Ht?Q[ie]:X[ie],Se=D===Ht?-X[ie]:-Q[ie],Le=e.elements.arrow,Ae=_&&Le?br(Le):{width:0,height:0},Te=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Aa(),Ie=Te[Ne],ye=Te[ue],ge=gn(0,Q[ie],Ae[ie]),fe=B?Q[ie]/2-K-ge-Ie-F.mainAxis:Ce-ge-Ie-F.mainAxis,pt=B?-Q[ie]/2+K+ge+ye+F.mainAxis:Se+ge+ye+F.mainAxis,He=e.elements.arrow&&Sn(e.elements.arrow),Fe=He?I==="y"?He.clientTop||0:He.clientLeft||0:0,qe=(le=Y==null?void 0:Y[I])!=null?le:0,y=ae+fe-qe-Fe,j=ae+pt-qe,$=gn(_?is(N,y):N,ae,_?Rt(x,j):x);V[I]=$,Z[I]=$-ae}if(l){var ee,de=I==="x"?Oe:De,tt=I==="x"?Be:Ye,ke=V[U],M=U==="y"?"height":"width",ve=ke+C[de],be=ke-C[tt],Ge=[Oe,De].indexOf(O)!==-1,at=(ee=Y==null?void 0:Y[U])!=null?ee:0,Et=Ge?ve:ke-Q[M]-X[M]-at+F.altAxis,h=Ge?ke+Q[M]+X[M]-at-F.altAxis:be,W=_&&Ge?Go(Et,ke,h):gn(_?Et:ve,ke,_?h:be);V[U]=W,Z[U]=W-ke}e.modifiersData[r]=Z}}const Da={name:"preventOverflow",enabled:!0,phase:"main",fn:gl,requiresIfExists:["offset"]};function vl(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function bl(n){return n===Ke(n)||!Xe(n)?Ar(n):vl(n)}function yl(n){var e=n.getBoundingClientRect(),t=en(e.width)/n.offsetWidth||1,r=en(e.height)/n.offsetHeight||1;return t!==1||r!==1}function El(n,e,t){t===void 0&&(t=!1);var r=Xe(e),c=Xe(e)&&yl(e),a=kt(e),i=tn(n,c,t),l={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!t)&&((ft(e)!=="body"||Cr(a))&&(l=bl(e)),Xe(e)?(u=tn(e,!0),u.x+=e.clientLeft,u.y+=e.clientTop):a&&(u.x=Tr(a))),{x:i.left+l.scrollLeft-u.x,y:i.top+l.scrollTop-u.y,width:i.width,height:i.height}}function Nl(n){var e=new Map,t=new Set,r=[];n.forEach(function(a){e.set(a.name,a)});function c(a){t.add(a.name);var i=[].concat(a.requires||[],a.requiresIfExists||[]);i.forEach(function(l){if(!t.has(l)){var u=e.get(l);u&&c(u)}}),r.push(a)}return n.forEach(function(a){t.has(a.name)||c(a)}),r}function Al(n){var e=Nl(n);return ya.reduce(function(t,r){return t.concat(e.filter(function(c){return c.phase===r}))},[])}function Tl(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function Cl(n){var e=n.reduce(function(t,r){var c=t[r.name];return t[r.name]=c?Object.assign({},c,r,{options:Object.assign({},c.options,r.options),data:Object.assign({},c.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}var mi={placement:"bottom",modifiers:[],strategy:"absolute"};function _i(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function ds(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,r=t===void 0?[]:t,c=e.defaultOptions,a=c===void 0?mi:c;return function(l,u,s){s===void 0&&(s=a);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},mi,a),modifiersData:{},elements:{reference:l,popper:u},attributes:{},styles:{}},p=[],m=!1,_={state:d,setOptions:function(O){var D=typeof O=="function"?O(d.options):O;A(),d.options=Object.assign({},a,d.options,D),d.scrollParents={reference:Ft(l)?vn(l):l.contextElement?vn(l.contextElement):[],popper:vn(u)};var B=Al(Cl([].concat(r,d.options.modifiers)));return d.orderedModifiers=B.filter(function(I){return I.enabled}),E(),_.update()},forceUpdate:function(){if(!m){var O=d.elements,D=O.reference,B=O.popper;if(_i(D,B)){d.rects={reference:El(D,Sn(B),d.options.strategy==="fixed"),popper:br(B)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(F){return d.modifiersData[F.name]=Object.assign({},F.data)});for(var I=0;I<d.orderedModifiers.length;I++){if(d.reset===!0){d.reset=!1,I=-1;continue}var U=d.orderedModifiers[I],V=U.fn,Q=U.options,X=Q===void 0?{}:Q,P=U.name;typeof V=="function"&&(d=V({state:d,options:X,name:P,instance:_})||d)}}}},update:Tl(function(){return new Promise(function(C){_.forceUpdate(),C(d)})}),destroy:function(){A(),m=!0}};if(!_i(l,u))return _;_.setOptions(s).then(function(C){!m&&s.onFirstUpdate&&s.onFirstUpdate(C)});function E(){d.orderedModifiers.forEach(function(C){var O=C.name,D=C.options,B=D===void 0?{}:D,I=C.effect;if(typeof I=="function"){var U=I({state:d,name:O,instance:_,options:B}),V=function(){};p.push(U||V)}})}function A(){p.forEach(function(C){return C()}),p=[]}return _}}var wl=ds(),Sl=[Nr,wr,Er,vr],kl=ds({defaultModifiers:Sl}),xl=[Nr,wr,Er,vr,Oa,xa,Da,wa,$a],Sr=ds({defaultModifiers:xl});const La=Object.freeze(Object.defineProperty({__proto__:null,afterMain:_a,afterRead:fa,afterWrite:ba,applyStyles:vr,arrow:wa,auto:cs,basePlacements:on,beforeMain:pa,beforeRead:da,beforeWrite:ga,bottom:Be,clippingParents:ca,computeStyles:Er,createPopper:Sr,createPopperBase:wl,createPopperLite:kl,detectOverflow:sn,end:Zt,eventListeners:Nr,flip:xa,hide:$a,left:De,main:ma,modifierPhases:ya,offset:Oa,placements:_r,popper:Kt,popperGenerator:ds,popperOffsets:wr,preventOverflow:Da,read:ha,reference:ua,right:Ye,start:Ht,top:Oe,variationPlacements:Zs,viewport:mr,write:va},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.6 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Nt=new Map,Ds={set(n,e,t){Nt.has(n)||Nt.set(n,new Map);const r=Nt.get(n);if(!r.has(e)&&r.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`);return}r.set(e,t)},get(n,e){return Nt.has(n)&&Nt.get(n).get(e)||null},remove(n,e){if(!Nt.has(n))return;const t=Nt.get(n);t.delete(e),t.size===0&&Nt.delete(n)}},$l=1e6,Ol=1e3,nr="transitionend",Ia=n=>(n&&window.CSS&&window.CSS.escape&&(n=n.replace(/#([^\s"#']+)/g,(e,t)=>`#${CSS.escape(t)}`)),n),Dl=n=>n==null?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase(),Ll=n=>{do n+=Math.floor(Math.random()*$l);while(document.getElementById(n));return n},Il=n=>{if(!n)return 0;let{transitionDuration:e,transitionDelay:t}=window.getComputedStyle(n);const r=Number.parseFloat(e),c=Number.parseFloat(t);return!r&&!c?0:(e=e.split(",")[0],t=t.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(t))*Ol)},Ma=n=>{n.dispatchEvent(new Event(nr))},_t=n=>!n||typeof n!="object"?!1:(typeof n.jquery<"u"&&(n=n[0]),typeof n.nodeType<"u"),Tt=n=>_t(n)?n.jquery?n[0]:n:typeof n=="string"&&n.length>0?document.querySelector(Ia(n)):null,ln=n=>{if(!_t(n)||n.getClientRects().length===0)return!1;const e=getComputedStyle(n).getPropertyValue("visibility")==="visible",t=n.closest("details:not([open])");if(!t)return e;if(t!==n){const r=n.closest("summary");if(r&&r.parentNode!==t||r===null)return!1}return e},Ct=n=>!n||n.nodeType!==Node.ELEMENT_NODE||n.classList.contains("disabled")?!0:typeof n.disabled<"u"?n.disabled:n.hasAttribute("disabled")&&n.getAttribute("disabled")!=="false",Ra=n=>{if(!document.documentElement.attachShadow)return null;if(typeof n.getRootNode=="function"){const e=n.getRootNode();return e instanceof ShadowRoot?e:null}return n instanceof ShadowRoot?n:n.parentNode?Ra(n.parentNode):null},as=()=>{},kn=n=>{n.offsetHeight},Pa=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Ls=[],Ml=n=>{document.readyState==="loading"?(Ls.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of Ls)e()}),Ls.push(n)):n()},Je=()=>document.documentElement.dir==="rtl",et=n=>{Ml(()=>{const e=Pa();if(e){const t=n.NAME,r=e.fn[t];e.fn[t]=n.jQueryInterface,e.fn[t].Constructor=n,e.fn[t].noConflict=()=>(e.fn[t]=r,n.jQueryInterface)}})},Pe=(n,e=[],t=n)=>typeof n=="function"?n.call(...e):t,Ha=(n,e,t=!0)=>{if(!t){Pe(n);return}const c=Il(e)+5;let a=!1;const i=({target:l})=>{l===e&&(a=!0,e.removeEventListener(nr,i),Pe(n))};e.addEventListener(nr,i),setTimeout(()=>{a||Ma(e)},c)},kr=(n,e,t,r)=>{const c=n.length;let a=n.indexOf(e);return a===-1?!t&&r?n[c-1]:n[0]:(a+=t?1:-1,r&&(a=(a+c)%c),n[Math.max(0,Math.min(a,c-1))])},Rl=/[^.]*(?=\..*)\.|.*/,Pl=/\..*/,Hl=/::\d+$/,Is={};let gi=1;const Fa={mouseenter:"mouseover",mouseleave:"mouseout"},Fl=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Va(n,e){return e&&`${e}::${gi++}`||n.uidEvent||gi++}function Wa(n){const e=Va(n);return n.uidEvent=e,Is[e]=Is[e]||{},Is[e]}function Vl(n,e){return function t(r){return xr(r,{delegateTarget:n}),t.oneOff&&T.off(n,r.type,e),e.apply(n,[r])}}function Wl(n,e,t){return function r(c){const a=n.querySelectorAll(e);for(let{target:i}=c;i&&i!==this;i=i.parentNode)for(const l of a)if(l===i)return xr(c,{delegateTarget:i}),r.oneOff&&T.off(n,c.type,e,t),t.apply(i,[c])}}function ja(n,e,t=null){return Object.values(n).find(r=>r.callable===e&&r.delegationSelector===t)}function Ua(n,e,t){const r=typeof e=="string",c=r?t:e||t;let a=Ba(n);return Fl.has(a)||(a=n),[r,c,a]}function vi(n,e,t,r,c){if(typeof e!="string"||!n)return;let[a,i,l]=Ua(e,t,r);e in Fa&&(i=(E=>function(A){if(!A.relatedTarget||A.relatedTarget!==A.delegateTarget&&!A.delegateTarget.contains(A.relatedTarget))return E.call(this,A)})(i));const u=Wa(n),s=u[l]||(u[l]={}),d=ja(s,i,a?t:null);if(d){d.oneOff=d.oneOff&&c;return}const p=Va(i,e.replace(Rl,"")),m=a?Wl(n,t,i):Vl(n,i);m.delegationSelector=a?t:null,m.callable=i,m.oneOff=c,m.uidEvent=p,s[p]=m,n.addEventListener(l,m,a)}function sr(n,e,t,r,c){const a=ja(e[t],r,c);a&&(n.removeEventListener(t,a,!!c),delete e[t][a.uidEvent])}function jl(n,e,t,r){const c=e[t]||{};for(const[a,i]of Object.entries(c))a.includes(r)&&sr(n,e,t,i.callable,i.delegationSelector)}function Ba(n){return n=n.replace(Pl,""),Fa[n]||n}const T={on(n,e,t,r){vi(n,e,t,r,!1)},one(n,e,t,r){vi(n,e,t,r,!0)},off(n,e,t,r){if(typeof e!="string"||!n)return;const[c,a,i]=Ua(e,t,r),l=i!==e,u=Wa(n),s=u[i]||{},d=e.startsWith(".");if(typeof a<"u"){if(!Object.keys(s).length)return;sr(n,u,i,a,c?t:null);return}if(d)for(const p of Object.keys(u))jl(n,u,p,e.slice(1));for(const[p,m]of Object.entries(s)){const _=p.replace(Hl,"");(!l||e.includes(_))&&sr(n,u,i,m.callable,m.delegationSelector)}},trigger(n,e,t){if(typeof e!="string"||!n)return null;const r=Pa(),c=Ba(e),a=e!==c;let i=null,l=!0,u=!0,s=!1;a&&r&&(i=r.Event(e,t),r(n).trigger(i),l=!i.isPropagationStopped(),u=!i.isImmediatePropagationStopped(),s=i.isDefaultPrevented());const d=xr(new Event(e,{bubbles:l,cancelable:!0}),t);return s&&d.preventDefault(),u&&n.dispatchEvent(d),d.defaultPrevented&&i&&i.preventDefault(),d}};function xr(n,e={}){for(const[t,r]of Object.entries(e))try{n[t]=r}catch{Object.defineProperty(n,t,{configurable:!0,get(){return r}})}return n}function bi(n){if(n==="true")return!0;if(n==="false")return!1;if(n===Number(n).toString())return Number(n);if(n===""||n==="null")return null;if(typeof n!="string")return n;try{return JSON.parse(decodeURIComponent(n))}catch{return n}}function Ms(n){return n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const gt={setDataAttribute(n,e,t){n.setAttribute(`data-bs-${Ms(e)}`,t)},removeDataAttribute(n,e){n.removeAttribute(`data-bs-${Ms(e)}`)},getDataAttributes(n){if(!n)return{};const e={},t=Object.keys(n.dataset).filter(r=>r.startsWith("bs")&&!r.startsWith("bsConfig"));for(const r of t){let c=r.replace(/^bs/,"");c=c.charAt(0).toLowerCase()+c.slice(1),e[c]=bi(n.dataset[r])}return e},getDataAttribute(n,e){return bi(n.getAttribute(`data-bs-${Ms(e)}`))}};class xn{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const r=_t(t)?gt.getDataAttribute(t,"config"):{};return{...this.constructor.Default,...typeof r=="object"?r:{},..._t(t)?gt.getDataAttributes(t):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,t=this.constructor.DefaultType){for(const[r,c]of Object.entries(t)){const a=e[r],i=_t(a)?"element":Dl(a);if(!new RegExp(c).test(i))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${r}" provided type "${i}" but expected type "${c}".`)}}}const Ul="5.3.6";class it extends xn{constructor(e,t){super(),e=Tt(e),e&&(this._element=e,this._config=this._getConfig(t),Ds.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Ds.remove(this._element,this.constructor.DATA_KEY),T.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t,r=!0){Ha(e,t,r)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return Ds.get(Tt(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,typeof t=="object"?t:null)}static get VERSION(){return Ul}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const Rs=n=>{let e=n.getAttribute("data-bs-target");if(!e||e==="#"){let t=n.getAttribute("href");if(!t||!t.includes("#")&&!t.startsWith("."))return null;t.includes("#")&&!t.startsWith("#")&&(t=`#${t.split("#")[1]}`),e=t&&t!=="#"?t.trim():null}return e?e.split(",").map(t=>Ia(t)).join(","):null},H={find(n,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,n))},findOne(n,e=document.documentElement){return Element.prototype.querySelector.call(e,n)},children(n,e){return[].concat(...n.children).filter(t=>t.matches(e))},parents(n,e){const t=[];let r=n.parentNode.closest(e);for(;r;)t.push(r),r=r.parentNode.closest(e);return t},prev(n,e){let t=n.previousElementSibling;for(;t;){if(t.matches(e))return[t];t=t.previousElementSibling}return[]},next(n,e){let t=n.nextElementSibling;for(;t;){if(t.matches(e))return[t];t=t.nextElementSibling}return[]},focusableChildren(n){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(t=>`${t}:not([tabindex^="-"])`).join(",");return this.find(e,n).filter(t=>!Ct(t)&&ln(t))},getSelectorFromElement(n){const e=Rs(n);return e&&H.findOne(e)?e:null},getElementFromSelector(n){const e=Rs(n);return e?H.findOne(e):null},getMultipleElementsFromSelector(n){const e=Rs(n);return e?H.find(e):[]}},hs=(n,e="hide")=>{const t=`click.dismiss${n.EVENT_KEY}`,r=n.NAME;T.on(document,t,`[data-bs-dismiss="${r}"]`,function(c){if(["A","AREA"].includes(this.tagName)&&c.preventDefault(),Ct(this))return;const a=H.getElementFromSelector(this)||this.closest(`.${r}`);n.getOrCreateInstance(a)[e]()})},Bl="alert",Yl="bs.alert",Ya=`.${Yl}`,Kl=`close${Ya}`,ql=`closed${Ya}`,Gl="fade",zl="show";class fs extends it{static get NAME(){return Bl}close(){if(T.trigger(this._element,Kl).defaultPrevented)return;this._element.classList.remove(zl);const t=this._element.classList.contains(Gl);this._queueCallback(()=>this._destroyElement(),this._element,t)}_destroyElement(){this._element.remove(),T.trigger(this._element,ql),this.dispose()}static jQueryInterface(e){return this.each(function(){const t=fs.getOrCreateInstance(this);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}hs(fs,"close");et(fs);const Ql="button",Xl="bs.button",Jl=`.${Xl}`,Zl=".data-api",ec="active",yi='[data-bs-toggle="button"]',tc=`click${Jl}${Zl}`;class ps extends it{static get NAME(){return Ql}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(ec))}static jQueryInterface(e){return this.each(function(){const t=ps.getOrCreateInstance(this);e==="toggle"&&t[e]()})}}T.on(document,tc,yi,n=>{n.preventDefault();const e=n.target.closest(yi);ps.getOrCreateInstance(e).toggle()});et(ps);const nc="swipe",cn=".bs.swipe",sc=`touchstart${cn}`,rc=`touchmove${cn}`,ic=`touchend${cn}`,ac=`pointerdown${cn}`,oc=`pointerup${cn}`,lc="touch",cc="pen",uc="pointer-event",dc=40,hc={endCallback:null,leftCallback:null,rightCallback:null},fc={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class os extends xn{constructor(e,t){super(),this._element=e,!(!e||!os.isSupported())&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return hc}static get DefaultType(){return fc}static get NAME(){return nc}dispose(){T.off(this._element,cn)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),Pe(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=dc)return;const t=e/this._deltaX;this._deltaX=0,t&&Pe(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(T.on(this._element,ac,e=>this._start(e)),T.on(this._element,oc,e=>this._end(e)),this._element.classList.add(uc)):(T.on(this._element,sc,e=>this._start(e)),T.on(this._element,rc,e=>this._move(e)),T.on(this._element,ic,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===cc||e.pointerType===lc)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const pc="carousel",mc="bs.carousel",xt=`.${mc}`,Ka=".data-api",_c="ArrowLeft",gc="ArrowRight",vc=500,hn="next",Bt="prev",qt="left",es="right",bc=`slide${xt}`,Ps=`slid${xt}`,yc=`keydown${xt}`,Ec=`mouseenter${xt}`,Nc=`mouseleave${xt}`,Ac=`dragstart${xt}`,Tc=`load${xt}${Ka}`,Cc=`click${xt}${Ka}`,qa="carousel",Un="active",wc="slide",Sc="carousel-item-end",kc="carousel-item-start",xc="carousel-item-next",$c="carousel-item-prev",Ga=".active",za=".carousel-item",Oc=Ga+za,Dc=".carousel-item img",Lc=".carousel-indicators",Ic="[data-bs-slide], [data-bs-slide-to]",Mc='[data-bs-ride="carousel"]',Rc={[_c]:es,[gc]:qt},Pc={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Hc={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class $n extends it{constructor(e,t){super(e,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=H.findOne(Lc,this._element),this._addEventListeners(),this._config.ride===qa&&this.cycle()}static get Default(){return Pc}static get DefaultType(){return Hc}static get NAME(){return pc}next(){this._slide(hn)}nextWhenVisible(){!document.hidden&&ln(this._element)&&this.next()}prev(){this._slide(Bt)}pause(){this._isSliding&&Ma(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){T.one(this._element,Ps,()=>this.cycle());return}this.cycle()}}to(e){const t=this._getItems();if(e>t.length-1||e<0)return;if(this._isSliding){T.one(this._element,Ps,()=>this.to(e));return}const r=this._getItemIndex(this._getActive());if(r===e)return;const c=e>r?hn:Bt;this._slide(c,t[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&T.on(this._element,yc,e=>this._keydown(e)),this._config.pause==="hover"&&(T.on(this._element,Ec,()=>this.pause()),T.on(this._element,Nc,()=>this._maybeEnableCycle())),this._config.touch&&os.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const r of H.find(Dc,this._element))T.on(r,Ac,c=>c.preventDefault());const t={leftCallback:()=>this._slide(this._directionToOrder(qt)),rightCallback:()=>this._slide(this._directionToOrder(es)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),vc+this._config.interval))}};this._swipeHelper=new os(this._element,t)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=Rc[e.key];t&&(e.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const t=H.findOne(Ga,this._indicatorsElement);t.classList.remove(Un),t.removeAttribute("aria-current");const r=H.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);r&&(r.classList.add(Un),r.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(e,t=null){if(this._isSliding)return;const r=this._getActive(),c=e===hn,a=t||kr(this._getItems(),r,c,this._config.wrap);if(a===r)return;const i=this._getItemIndex(a),l=_=>T.trigger(this._element,_,{relatedTarget:a,direction:this._orderToDirection(e),from:this._getItemIndex(r),to:i});if(l(bc).defaultPrevented||!r||!a)return;const s=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(i),this._activeElement=a;const d=c?kc:Sc,p=c?xc:$c;a.classList.add(p),kn(a),r.classList.add(d),a.classList.add(d);const m=()=>{a.classList.remove(d,p),a.classList.add(Un),r.classList.remove(Un,p,d),this._isSliding=!1,l(Ps)};this._queueCallback(m,r,this._isAnimated()),s&&this.cycle()}_isAnimated(){return this._element.classList.contains(wc)}_getActive(){return H.findOne(Oc,this._element)}_getItems(){return H.find(za,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return Je()?e===qt?Bt:hn:e===qt?hn:Bt}_orderToDirection(e){return Je()?e===Bt?qt:es:e===Bt?es:qt}static jQueryInterface(e){return this.each(function(){const t=$n.getOrCreateInstance(this,e);if(typeof e=="number"){t.to(e);return}if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}T.on(document,Cc,Ic,function(n){const e=H.getElementFromSelector(this);if(!e||!e.classList.contains(qa))return;n.preventDefault();const t=$n.getOrCreateInstance(e),r=this.getAttribute("data-bs-slide-to");if(r){t.to(r),t._maybeEnableCycle();return}if(gt.getDataAttribute(this,"slide")==="next"){t.next(),t._maybeEnableCycle();return}t.prev(),t._maybeEnableCycle()});T.on(window,Tc,()=>{const n=H.find(Mc);for(const e of n)$n.getOrCreateInstance(e)});et($n);const Fc="collapse",Vc="bs.collapse",On=`.${Vc}`,Wc=".data-api",jc=`show${On}`,Uc=`shown${On}`,Bc=`hide${On}`,Yc=`hidden${On}`,Kc=`click${On}${Wc}`,Hs="show",zt="collapse",Bn="collapsing",qc="collapsed",Gc=`:scope .${zt} .${zt}`,zc="collapse-horizontal",Qc="width",Xc="height",Jc=".collapse.show, .collapse.collapsing",rr='[data-bs-toggle="collapse"]',Zc={parent:null,toggle:!0},eu={parent:"(null|element)",toggle:"boolean"};class yn extends it{constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const r=H.find(rr);for(const c of r){const a=H.getSelectorFromElement(c),i=H.find(a).filter(l=>l===this._element);a!==null&&i.length&&this._triggerArray.push(c)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Zc}static get DefaultType(){return eu}static get NAME(){return Fc}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(Jc).filter(l=>l!==this._element).map(l=>yn.getOrCreateInstance(l,{toggle:!1}))),e.length&&e[0]._isTransitioning||T.trigger(this._element,jc).defaultPrevented)return;for(const l of e)l.hide();const r=this._getDimension();this._element.classList.remove(zt),this._element.classList.add(Bn),this._element.style[r]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const c=()=>{this._isTransitioning=!1,this._element.classList.remove(Bn),this._element.classList.add(zt,Hs),this._element.style[r]="",T.trigger(this._element,Uc)},i=`scroll${r[0].toUpperCase()+r.slice(1)}`;this._queueCallback(c,this._element,!0),this._element.style[r]=`${this._element[i]}px`}hide(){if(this._isTransitioning||!this._isShown()||T.trigger(this._element,Bc).defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,kn(this._element),this._element.classList.add(Bn),this._element.classList.remove(zt,Hs);for(const c of this._triggerArray){const a=H.getElementFromSelector(c);a&&!this._isShown(a)&&this._addAriaAndCollapsedClass([c],!1)}this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(Bn),this._element.classList.add(zt),T.trigger(this._element,Yc)};this._element.style[t]="",this._queueCallback(r,this._element,!0)}_isShown(e=this._element){return e.classList.contains(Hs)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=Tt(e.parent),e}_getDimension(){return this._element.classList.contains(zc)?Qc:Xc}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(rr);for(const t of e){const r=H.getElementFromSelector(t);r&&this._addAriaAndCollapsedClass([t],this._isShown(r))}}_getFirstLevelChildren(e){const t=H.find(Gc,this._config.parent);return H.find(e,this._config.parent).filter(r=>!t.includes(r))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const r of e)r.classList.toggle(qc,!t),r.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return typeof e=="string"&&/show|hide/.test(e)&&(t.toggle=!1),this.each(function(){const r=yn.getOrCreateInstance(this,t);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e]()}})}}T.on(document,Kc,rr,function(n){(n.target.tagName==="A"||n.delegateTarget&&n.delegateTarget.tagName==="A")&&n.preventDefault();for(const e of H.getMultipleElementsFromSelector(this))yn.getOrCreateInstance(e,{toggle:!1}).toggle()});et(yn);const Ei="dropdown",tu="bs.dropdown",Wt=`.${tu}`,$r=".data-api",nu="Escape",Ni="Tab",su="ArrowUp",Ai="ArrowDown",ru=2,iu=`hide${Wt}`,au=`hidden${Wt}`,ou=`show${Wt}`,lu=`shown${Wt}`,Qa=`click${Wt}${$r}`,Xa=`keydown${Wt}${$r}`,cu=`keyup${Wt}${$r}`,Gt="show",uu="dropup",du="dropend",hu="dropstart",fu="dropup-center",pu="dropdown-center",It='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',mu=`${It}.${Gt}`,ts=".dropdown-menu",_u=".navbar",gu=".navbar-nav",vu=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",bu=Je()?"top-end":"top-start",yu=Je()?"top-start":"top-end",Eu=Je()?"bottom-end":"bottom-start",Nu=Je()?"bottom-start":"bottom-end",Au=Je()?"left-start":"right-start",Tu=Je()?"right-start":"left-start",Cu="top",wu="bottom",Su={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},ku={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class ht extends it{constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=H.next(this._element,ts)[0]||H.prev(this._element,ts)[0]||H.findOne(ts,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Su}static get DefaultType(){return ku}static get NAME(){return Ei}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Ct(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!T.trigger(this._element,ou,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(gu))for(const r of[].concat(...document.body.children))T.on(r,"mouseover",as);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Gt),this._element.classList.add(Gt),T.trigger(this._element,lu,e)}}hide(){if(Ct(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!T.trigger(this._element,iu,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))T.off(r,"mouseover",as);this._popper&&this._popper.destroy(),this._menu.classList.remove(Gt),this._element.classList.remove(Gt),this._element.setAttribute("aria-expanded","false"),gt.removeDataAttribute(this._menu,"popper"),T.trigger(this._element,au,e),this._element.focus()}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!_t(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${Ei.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof La>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let e=this._element;this._config.reference==="parent"?e=this._parent:_t(this._config.reference)?e=Tt(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const t=this._getPopperConfig();this._popper=Sr(e,this._menu,t)}_isShown(){return this._menu.classList.contains(Gt)}_getPlacement(){const e=this._parent;if(e.classList.contains(du))return Au;if(e.classList.contains(hu))return Tu;if(e.classList.contains(fu))return Cu;if(e.classList.contains(pu))return wu;const t=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(uu)?t?yu:bu:t?Nu:Eu}_detectNavbar(){return this._element.closest(_u)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(t=>Number.parseInt(t,10)):typeof e=="function"?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(gt.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...Pe(this._config.popperConfig,[void 0,e])}}_selectMenuItem({key:e,target:t}){const r=H.find(vu,this._menu).filter(c=>ln(c));r.length&&kr(r,t,e===Ai,!r.includes(t)).focus()}static jQueryInterface(e){return this.each(function(){const t=ht.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}static clearMenus(e){if(e.button===ru||e.type==="keyup"&&e.key!==Ni)return;const t=H.find(mu);for(const r of t){const c=ht.getInstance(r);if(!c||c._config.autoClose===!1)continue;const a=e.composedPath(),i=a.includes(c._menu);if(a.includes(c._element)||c._config.autoClose==="inside"&&!i||c._config.autoClose==="outside"&&i||c._menu.contains(e.target)&&(e.type==="keyup"&&e.key===Ni||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const l={relatedTarget:c._element};e.type==="click"&&(l.clickEvent=e),c._completeHide(l)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName),r=e.key===nu,c=[su,Ai].includes(e.key);if(!c&&!r||t&&!r)return;e.preventDefault();const a=this.matches(It)?this:H.prev(this,It)[0]||H.next(this,It)[0]||H.findOne(It,e.delegateTarget.parentNode),i=ht.getOrCreateInstance(a);if(c){e.stopPropagation(),i.show(),i._selectMenuItem(e);return}i._isShown()&&(e.stopPropagation(),i.hide(),a.focus())}}T.on(document,Xa,It,ht.dataApiKeydownHandler);T.on(document,Xa,ts,ht.dataApiKeydownHandler);T.on(document,Qa,ht.clearMenus);T.on(document,cu,ht.clearMenus);T.on(document,Qa,It,function(n){n.preventDefault(),ht.getOrCreateInstance(this).toggle()});et(ht);const Ja="backdrop",xu="fade",Ti="show",Ci=`mousedown.bs.${Ja}`,$u={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Ou={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Za extends xn{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return $u}static get DefaultType(){return Ou}static get NAME(){return Ja}show(e){if(!this._config.isVisible){Pe(e);return}this._append();const t=this._getElement();this._config.isAnimated&&kn(t),t.classList.add(Ti),this._emulateAnimation(()=>{Pe(e)})}hide(e){if(!this._config.isVisible){Pe(e);return}this._getElement().classList.remove(Ti),this._emulateAnimation(()=>{this.dispose(),Pe(e)})}dispose(){this._isAppended&&(T.off(this._element,Ci),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(xu),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=Tt(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),T.on(e,Ci,()=>{Pe(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){Ha(e,this._getElement(),this._config.isAnimated)}}const Du="focustrap",Lu="bs.focustrap",ls=`.${Lu}`,Iu=`focusin${ls}`,Mu=`keydown.tab${ls}`,Ru="Tab",Pu="forward",wi="backward",Hu={autofocus:!0,trapElement:null},Fu={autofocus:"boolean",trapElement:"element"};class eo extends xn{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Hu}static get DefaultType(){return Fu}static get NAME(){return Du}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),T.off(document,ls),T.on(document,Iu,e=>this._handleFocusin(e)),T.on(document,Mu,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,T.off(document,ls))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const r=H.focusableChildren(t);r.length===0?t.focus():this._lastTabNavDirection===wi?r[r.length-1].focus():r[0].focus()}_handleKeydown(e){e.key===Ru&&(this._lastTabNavDirection=e.shiftKey?wi:Pu)}}const Si=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ki=".sticky-top",Yn="padding-right",xi="margin-right";class ir{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Yn,t=>t+e),this._setElementAttributes(Si,Yn,t=>t+e),this._setElementAttributes(ki,xi,t=>t-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Yn),this._resetElementAttributes(Si,Yn),this._resetElementAttributes(ki,xi)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,r){const c=this.getWidth(),a=i=>{if(i!==this._element&&window.innerWidth>i.clientWidth+c)return;this._saveInitialAttribute(i,t);const l=window.getComputedStyle(i).getPropertyValue(t);i.style.setProperty(t,`${r(Number.parseFloat(l))}px`)};this._applyManipulationCallback(e,a)}_saveInitialAttribute(e,t){const r=e.style.getPropertyValue(t);r&&gt.setDataAttribute(e,t,r)}_resetElementAttributes(e,t){const r=c=>{const a=gt.getDataAttribute(c,t);if(a===null){c.style.removeProperty(t);return}gt.removeDataAttribute(c,t),c.style.setProperty(t,a)};this._applyManipulationCallback(e,r)}_applyManipulationCallback(e,t){if(_t(e)){t(e);return}for(const r of H.find(e,this._element))t(r)}}const Vu="modal",Wu="bs.modal",Ze=`.${Wu}`,ju=".data-api",Uu="Escape",Bu=`hide${Ze}`,Yu=`hidePrevented${Ze}`,to=`hidden${Ze}`,no=`show${Ze}`,Ku=`shown${Ze}`,qu=`resize${Ze}`,Gu=`click.dismiss${Ze}`,zu=`mousedown.dismiss${Ze}`,Qu=`keydown.dismiss${Ze}`,Xu=`click${Ze}${ju}`,$i="modal-open",Ju="fade",Oi="show",Fs="modal-static",Zu=".modal.show",ed=".modal-dialog",td=".modal-body",nd='[data-bs-toggle="modal"]',sd={backdrop:!0,focus:!0,keyboard:!0},rd={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class rn extends it{constructor(e,t){super(e,t),this._dialog=H.findOne(ed,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ir,this._addEventListeners()}static get Default(){return sd}static get DefaultType(){return rd}static get NAME(){return Vu}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||T.trigger(this._element,no,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add($i),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||T.trigger(this._element,Bu).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Oi),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){T.off(window,Ze),T.off(this._dialog,Ze),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Za({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new eo({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=H.findOne(td,this._dialog);t&&(t.scrollTop=0),kn(this._element),this._element.classList.add(Oi);const r=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,T.trigger(this._element,Ku,{relatedTarget:e})};this._queueCallback(r,this._dialog,this._isAnimated())}_addEventListeners(){T.on(this._element,Qu,e=>{if(e.key===Uu){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),T.on(window,qu,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),T.on(this._element,zu,e=>{T.one(this._element,Gu,t=>{if(!(this._element!==e.target||this._element!==t.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove($i),this._resetAdjustments(),this._scrollBar.reset(),T.trigger(this._element,to)})}_isAnimated(){return this._element.classList.contains(Ju)}_triggerBackdropTransition(){if(T.trigger(this._element,Yu).defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,r=this._element.style.overflowY;r==="hidden"||this._element.classList.contains(Fs)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(Fs),this._queueCallback(()=>{this._element.classList.remove(Fs),this._queueCallback(()=>{this._element.style.overflowY=r},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),r=t>0;if(r&&!e){const c=Je()?"paddingLeft":"paddingRight";this._element.style[c]=`${t}px`}if(!r&&e){const c=Je()?"paddingRight":"paddingLeft";this._element.style[c]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each(function(){const r=rn.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e](t)}})}}T.on(document,Xu,nd,function(n){const e=H.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&n.preventDefault(),T.one(e,no,c=>{c.defaultPrevented||T.one(e,to,()=>{ln(this)&&this.focus()})});const t=H.findOne(Zu);t&&rn.getInstance(t).hide(),rn.getOrCreateInstance(e).toggle(this)});hs(rn);et(rn);const id="offcanvas",ad="bs.offcanvas",bt=`.${ad}`,so=".data-api",od=`load${bt}${so}`,ld="Escape",Di="show",Li="showing",Ii="hiding",cd="offcanvas-backdrop",ro=".offcanvas.show",ud=`show${bt}`,dd=`shown${bt}`,hd=`hide${bt}`,Mi=`hidePrevented${bt}`,io=`hidden${bt}`,fd=`resize${bt}`,pd=`click${bt}${so}`,md=`keydown.dismiss${bt}`,_d='[data-bs-toggle="offcanvas"]',gd={backdrop:!0,keyboard:!0,scroll:!1},vd={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class wt extends it{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return gd}static get DefaultType(){return vd}static get NAME(){return id}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||T.trigger(this._element,ud,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new ir().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Li);const r=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Di),this._element.classList.remove(Li),T.trigger(this._element,dd,{relatedTarget:e})};this._queueCallback(r,this._element,!0)}hide(){if(!this._isShown||T.trigger(this._element,hd).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Ii),this._backdrop.hide();const t=()=>{this._element.classList.remove(Di,Ii),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new ir().reset(),T.trigger(this._element,io)};this._queueCallback(t,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){T.trigger(this._element,Mi);return}this.hide()},t=!!this._config.backdrop;return new Za({className:cd,isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?e:null})}_initializeFocusTrap(){return new eo({trapElement:this._element})}_addEventListeners(){T.on(this._element,md,e=>{if(e.key===ld){if(this._config.keyboard){this.hide();return}T.trigger(this._element,Mi)}})}static jQueryInterface(e){return this.each(function(){const t=wt.getOrCreateInstance(this,e);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}T.on(document,pd,_d,function(n){const e=H.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),Ct(this))return;T.one(e,io,()=>{ln(this)&&this.focus()});const t=H.findOne(ro);t&&t!==e&&wt.getInstance(t).hide(),wt.getOrCreateInstance(e).toggle(this)});T.on(window,od,()=>{for(const n of H.find(ro))wt.getOrCreateInstance(n).show()});T.on(window,fd,()=>{for(const n of H.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(n).position!=="fixed"&&wt.getOrCreateInstance(n).hide()});hs(wt);et(wt);const bd=/^aria-[\w-]*$/i,ao={"*":["class","dir","id","lang","role",bd],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},yd=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Ed=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Nd=(n,e)=>{const t=n.nodeName.toLowerCase();return e.includes(t)?yd.has(t)?!!Ed.test(n.nodeValue):!0:e.filter(r=>r instanceof RegExp).some(r=>r.test(t))};function Ad(n,e,t){if(!n.length)return n;if(t&&typeof t=="function")return t(n);const c=new window.DOMParser().parseFromString(n,"text/html"),a=[].concat(...c.body.querySelectorAll("*"));for(const i of a){const l=i.nodeName.toLowerCase();if(!Object.keys(e).includes(l)){i.remove();continue}const u=[].concat(...i.attributes),s=[].concat(e["*"]||[],e[l]||[]);for(const d of u)Nd(d,s)||i.removeAttribute(d.nodeName)}return c.body.innerHTML}const Td="TemplateFactory",Cd={allowList:ao,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},wd={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Sd={entry:"(string|element|function|null)",selector:"(string|element)"};class kd extends xn{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Cd}static get DefaultType(){return wd}static get NAME(){return Td}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[c,a]of Object.entries(this._config.content))this._setContent(e,a,c);const t=e.children[0],r=this._resolvePossibleFunction(this._config.extraClass);return r&&t.classList.add(...r.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,r]of Object.entries(e))super._typeCheckConfig({selector:t,entry:r},Sd)}_setContent(e,t,r){const c=H.findOne(r,e);if(c){if(t=this._resolvePossibleFunction(t),!t){c.remove();return}if(_t(t)){this._putElementInTemplate(Tt(t),c);return}if(this._config.html){c.innerHTML=this._maybeSanitize(t);return}c.textContent=t}}_maybeSanitize(e){return this._config.sanitize?Ad(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return Pe(e,[void 0,this])}_putElementInTemplate(e,t){if(this._config.html){t.innerHTML="",t.append(e);return}t.textContent=e.textContent}}const xd="tooltip",$d=new Set(["sanitize","allowList","sanitizeFn"]),Vs="fade",Od="modal",Kn="show",Dd=".tooltip-inner",Ri=`.${Od}`,Pi="hide.bs.modal",fn="hover",Ws="focus",Ld="click",Id="manual",Md="hide",Rd="hidden",Pd="show",Hd="shown",Fd="inserted",Vd="click",Wd="focusin",jd="focusout",Ud="mouseenter",Bd="mouseleave",Yd={AUTO:"auto",TOP:"top",RIGHT:Je()?"left":"right",BOTTOM:"bottom",LEFT:Je()?"right":"left"},Kd={allowList:ao,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},qd={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class yt extends it{constructor(e,t){if(typeof La>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(e,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Kd}static get DefaultType(){return qd}static get NAME(){return xd}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),T.off(this._element.closest(Ri),Pi,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=T.trigger(this._element,this.constructor.eventName(Pd)),r=(Ra(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!r)return;this._disposePopper();const c=this._getTipElement();this._element.setAttribute("aria-describedby",c.getAttribute("id"));const{container:a}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(a.append(c),T.trigger(this._element,this.constructor.eventName(Fd))),this._popper=this._createPopper(c),c.classList.add(Kn),"ontouchstart"in document.documentElement)for(const l of[].concat(...document.body.children))T.on(l,"mouseover",as);const i=()=>{T.trigger(this._element,this.constructor.eventName(Hd)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(i,this.tip,this._isAnimated())}hide(){if(!this._isShown()||T.trigger(this._element,this.constructor.eventName(Md)).defaultPrevented)return;if(this._getTipElement().classList.remove(Kn),"ontouchstart"in document.documentElement)for(const c of[].concat(...document.body.children))T.off(c,"mouseover",as);this._activeTrigger[Ld]=!1,this._activeTrigger[Ws]=!1,this._activeTrigger[fn]=!1,this._isHovered=null;const r=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),T.trigger(this._element,this.constructor.eventName(Rd)))};this._queueCallback(r,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(Vs,Kn),t.classList.add(`bs-${this.constructor.NAME}-auto`);const r=Ll(this.constructor.NAME).toString();return t.setAttribute("id",r),this._isAnimated()&&t.classList.add(Vs),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new kd({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Dd]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Vs)}_isShown(){return this.tip&&this.tip.classList.contains(Kn)}_createPopper(e){const t=Pe(this._config.placement,[this,e,this._element]),r=Yd[t.toUpperCase()];return Sr(this._element,e,this._getPopperConfig(r))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(t=>Number.parseInt(t,10)):typeof e=="function"?t=>e(t,this._element):e}_resolvePossibleFunction(e){return Pe(e,[this._element,this._element])}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:r=>{this._getTipElement().setAttribute("data-popper-placement",r.state.placement)}}]};return{...t,...Pe(this._config.popperConfig,[void 0,t])}}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e)if(t==="click")T.on(this._element,this.constructor.eventName(Vd),this._config.selector,r=>{this._initializeOnDelegatedTarget(r).toggle()});else if(t!==Id){const r=t===fn?this.constructor.eventName(Ud):this.constructor.eventName(Wd),c=t===fn?this.constructor.eventName(Bd):this.constructor.eventName(jd);T.on(this._element,r,this._config.selector,a=>{const i=this._initializeOnDelegatedTarget(a);i._activeTrigger[a.type==="focusin"?Ws:fn]=!0,i._enter()}),T.on(this._element,c,this._config.selector,a=>{const i=this._initializeOnDelegatedTarget(a);i._activeTrigger[a.type==="focusout"?Ws:fn]=i._element.contains(a.relatedTarget),i._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},T.on(this._element.closest(Ri),Pi,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=gt.getDataAttributes(this._element);for(const r of Object.keys(t))$d.has(r)&&delete t[r];return e={...t,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:Tt(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[t,r]of Object.entries(this._config))this.constructor.Default[t]!==r&&(e[t]=r);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const t=yt.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}}et(yt);const Gd="popover",zd=".popover-header",Qd=".popover-body",Xd={...yt.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Jd={...yt.DefaultType,content:"(null|string|element|function)"};class Or extends yt{static get Default(){return Xd}static get DefaultType(){return Jd}static get NAME(){return Gd}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[zd]:this._getTitle(),[Qd]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const t=Or.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}}et(Or);const Zd="scrollspy",eh="bs.scrollspy",Dr=`.${eh}`,th=".data-api",nh=`activate${Dr}`,Hi=`click${Dr}`,sh=`load${Dr}${th}`,rh="dropdown-item",Yt="active",ih='[data-bs-spy="scroll"]',js="[href]",ah=".nav, .list-group",Fi=".nav-link",oh=".nav-item",lh=".list-group-item",ch=`${Fi}, ${oh} > ${Fi}, ${lh}`,uh=".dropdown",dh=".dropdown-toggle",hh={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},fh={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class ms extends it{constructor(e,t){super(e,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return hh}static get DefaultType(){return fh}static get NAME(){return Zd}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=Tt(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(t=>Number.parseFloat(t))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(T.off(this._config.target,Hi),T.on(this._config.target,Hi,js,e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const r=this._rootElement||window,c=t.offsetTop-this._element.offsetTop;if(r.scrollTo){r.scrollTo({top:c,behavior:"smooth"});return}r.scrollTop=c}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(t=>this._observerCallback(t),e)}_observerCallback(e){const t=i=>this._targetLinks.get(`#${i.target.id}`),r=i=>{this._previousScrollData.visibleEntryTop=i.target.offsetTop,this._process(t(i))},c=(this._rootElement||document.documentElement).scrollTop,a=c>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=c;for(const i of e){if(!i.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(i));continue}const l=i.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(a&&l){if(r(i),!c)return;continue}!a&&!l&&r(i)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=H.find(js,this._config.target);for(const t of e){if(!t.hash||Ct(t))continue;const r=H.findOne(decodeURI(t.hash),this._element);ln(r)&&(this._targetLinks.set(decodeURI(t.hash),t),this._observableSections.set(t.hash,r))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(Yt),this._activateParents(e),T.trigger(this._element,nh,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(rh)){H.findOne(dh,e.closest(uh)).classList.add(Yt);return}for(const t of H.parents(e,ah))for(const r of H.prev(t,ch))r.classList.add(Yt)}_clearActiveClass(e){e.classList.remove(Yt);const t=H.find(`${js}.${Yt}`,e);for(const r of t)r.classList.remove(Yt)}static jQueryInterface(e){return this.each(function(){const t=ms.getOrCreateInstance(this,e);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}T.on(window,sh,()=>{for(const n of H.find(ih))ms.getOrCreateInstance(n)});et(ms);const ph="tab",mh="bs.tab",jt=`.${mh}`,_h=`hide${jt}`,gh=`hidden${jt}`,vh=`show${jt}`,bh=`shown${jt}`,yh=`click${jt}`,Eh=`keydown${jt}`,Nh=`load${jt}`,Ah="ArrowLeft",Vi="ArrowRight",Th="ArrowUp",Wi="ArrowDown",Us="Home",ji="End",Mt="active",Ui="fade",Bs="show",Ch="dropdown",oo=".dropdown-toggle",wh=".dropdown-menu",Ys=`:not(${oo})`,Sh='.list-group, .nav, [role="tablist"]',kh=".nav-item, .list-group-item",xh=`.nav-link${Ys}, .list-group-item${Ys}, [role="tab"]${Ys}`,lo='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Ks=`${xh}, ${lo}`,$h=`.${Mt}[data-bs-toggle="tab"], .${Mt}[data-bs-toggle="pill"], .${Mt}[data-bs-toggle="list"]`;class an extends it{constructor(e){super(e),this._parent=this._element.closest(Sh),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),T.on(this._element,Eh,t=>this._keydown(t)))}static get NAME(){return ph}show(){const e=this._element;if(this._elemIsActive(e))return;const t=this._getActiveElem(),r=t?T.trigger(t,_h,{relatedTarget:e}):null;T.trigger(e,vh,{relatedTarget:t}).defaultPrevented||r&&r.defaultPrevented||(this._deactivate(t,e),this._activate(e,t))}_activate(e,t){if(!e)return;e.classList.add(Mt),this._activate(H.getElementFromSelector(e));const r=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(Bs);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),T.trigger(e,bh,{relatedTarget:t})};this._queueCallback(r,e,e.classList.contains(Ui))}_deactivate(e,t){if(!e)return;e.classList.remove(Mt),e.blur(),this._deactivate(H.getElementFromSelector(e));const r=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(Bs);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),T.trigger(e,gh,{relatedTarget:t})};this._queueCallback(r,e,e.classList.contains(Ui))}_keydown(e){if(![Ah,Vi,Th,Wi,Us,ji].includes(e.key))return;e.stopPropagation(),e.preventDefault();const t=this._getChildren().filter(c=>!Ct(c));let r;if([Us,ji].includes(e.key))r=t[e.key===Us?0:t.length-1];else{const c=[Vi,Wi].includes(e.key);r=kr(t,e.target,c,!0)}r&&(r.focus({preventScroll:!0}),an.getOrCreateInstance(r).show())}_getChildren(){return H.find(Ks,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const r of t)this._setInitialAttributesOnChild(r)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e),r=this._getOuterElement(e);e.setAttribute("aria-selected",t),r!==e&&this._setAttributeIfNotExists(r,"role","presentation"),t||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const t=H.getElementFromSelector(e);t&&(this._setAttributeIfNotExists(t,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(t,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,t){const r=this._getOuterElement(e);if(!r.classList.contains(Ch))return;const c=(a,i)=>{const l=H.findOne(a,r);l&&l.classList.toggle(i,t)};c(oo,Mt),c(wh,Bs),r.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(e,t,r){e.hasAttribute(t)||e.setAttribute(t,r)}_elemIsActive(e){return e.classList.contains(Mt)}_getInnerElement(e){return e.matches(Ks)?e:H.findOne(Ks,e)}_getOuterElement(e){return e.closest(kh)||e}static jQueryInterface(e){return this.each(function(){const t=an.getOrCreateInstance(this);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}T.on(document,yh,lo,function(n){["A","AREA"].includes(this.tagName)&&n.preventDefault(),!Ct(this)&&an.getOrCreateInstance(this).show()});T.on(window,Nh,()=>{for(const n of H.find($h))an.getOrCreateInstance(n)});et(an);const Oh="toast",Dh="bs.toast",$t=`.${Dh}`,Lh=`mouseover${$t}`,Ih=`mouseout${$t}`,Mh=`focusin${$t}`,Rh=`focusout${$t}`,Ph=`hide${$t}`,Hh=`hidden${$t}`,Fh=`show${$t}`,Vh=`shown${$t}`,Wh="fade",Bi="hide",qn="show",Gn="showing",jh={animation:"boolean",autohide:"boolean",delay:"number"},Uh={animation:!0,autohide:!0,delay:5e3};class Dn extends it{constructor(e,t){super(e,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Uh}static get DefaultType(){return jh}static get NAME(){return Oh}show(){if(T.trigger(this._element,Fh).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Wh);const t=()=>{this._element.classList.remove(Gn),T.trigger(this._element,Vh),this._maybeScheduleHide()};this._element.classList.remove(Bi),kn(this._element),this._element.classList.add(qn,Gn),this._queueCallback(t,this._element,this._config.animation)}hide(){if(!this.isShown()||T.trigger(this._element,Ph).defaultPrevented)return;const t=()=>{this._element.classList.add(Bi),this._element.classList.remove(Gn,qn),T.trigger(this._element,Hh)};this._element.classList.add(Gn),this._queueCallback(t,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(qn),super.dispose()}isShown(){return this._element.classList.contains(qn)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=t;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=t;break}}if(t){this._clearTimeout();return}const r=e.relatedTarget;this._element===r||this._element.contains(r)||this._maybeScheduleHide()}_setListeners(){T.on(this._element,Lh,e=>this._onInteraction(e,!0)),T.on(this._element,Ih,e=>this._onInteraction(e,!1)),T.on(this._element,Mh,e=>this._onInteraction(e,!0)),T.on(this._element,Rh,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const t=Dn.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}hs(Dn);et(Dn);const qs=({value:n,maxValue:e,color:t,labelLeft:r=null,labelCenter:c=null,labelRight:a=null,className:i="",isOverlay:l=!1,trailingStartValue:u=null,trailColor:s="rgba(128, 128, 128, 0.5)"})=>{const d=Math.min(Math.max(n/e*100,0),100);let p=0;u!==null&&(p=Math.min(Math.max(u/e*100,0),100));let m={};return typeof t=="object"&&t.from&&t.to?m.backgroundImage=`linear-gradient(to right, ${t.from}, ${t.to} 100%)`:m.backgroundColor=t,o("div",{class:`progress-bar-pointed-container ${i} ${l?"progress-bar-pointed-container--overlay":""}`,children:[r&&o("span",{class:"progress-bar-pointed__label progress-bar-pointed__label--left",children:r}),u!==null&&o("div",{class:"progress-bar-pointed__trail",style:{width:`${p}%`,backgroundColor:s,"--progress-trail-color":s}}),o("div",{class:"progress-bar-pointed__fill",style:{width:`${d}%`,...m},children:c&&o("span",{class:"progress-bar-pointed__label progress-bar-pointed__label--center",children:c})}),a&&o("span",{class:"progress-bar-pointed__label progress-bar-pointed__label--right",children:a})]})};function Bh(){const{characterStats:n,setCharacterStats:e}=rt(St),[t,r]=z(1),[c,a]=z(!1),[i,l]=z(!1),[u,s]=z(!1),[d,p]=z(!1),[m,_]=z(!1),[E,A]=z(null),[C,O]=z(null),[D,B]=z(!1),[I,U]=z(!1),[V,Q]=z(!1),X=Ue(null),P=Ue(null),F=Ue(null),Y=Ue(null),Z=Ue(null),le=300,Ne=600,[ue,ie]=z(!1);_e(()=>{const ve=[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map(be=>new yt(be));return()=>{ve.forEach(be=>{be&&typeof be.dispose=="function"&&be.dispose()})}},[V]),_e(()=>{if(c){const M=setTimeout(()=>a(!1),300);return()=>clearTimeout(M)}},[c]),_e(()=>{if(u){const M=setTimeout(()=>s(!1),300);return()=>clearTimeout(M)}},[u]),_e(()=>{if(i){const M=setTimeout(()=>l(!1),300);return()=>clearTimeout(M)}},[i]),_e(()=>{if(d){const M=setTimeout(()=>p(!1),300);return()=>clearTimeout(M)}},[d]),_e(()=>{if(m){const M=setTimeout(()=>_(!1),300);return()=>clearTimeout(M)}},[m]),_e(()=>{const M=be=>{be.key==="Control"&&Q(!0)},ve=be=>{be.key==="Control"&&Q(!1)};return window.addEventListener("keydown",M),window.addEventListener("keyup",ve),()=>{window.removeEventListener("keydown",M),window.removeEventListener("keyup",ve)}},[]);const ae=M=>{e(ve=>({...ve,...M}))};_e(()=>{(n.currentMp===void 0||n.maxMp===void 0)&&e(M=>({...M,currentMp:M.currentMp||0,maxMp:M.maxMp||10}))},[]);const N=()=>{X.current&&(clearTimeout(X.current),X.current=null),P.current&&(clearTimeout(P.current),P.current=null);const M=n.tempHealth||0;let ve=!1;A(n.currentHealth),M>0?(O(M),ve=!0):O(null);let be=M,Ge=n.currentHealth,at=t,Et=!1,h=!1;if(be>0){const W=Math.min(at,be);W>0&&(be-=W,at-=W,s(!0),U(!0),Et=!0)}if(at>0&&Ge>0){const W=Math.min(at,Ge);W>0&&(Ge=Math.max(0,Ge-W),a(!0),B(!0),h=!0)}h&&setTimeout(()=>B(!1),200),Et&&setTimeout(()=>U(!1),200),setTimeout(()=>{e(Ut=>({...Ut,currentHealth:Ge,tempHealth:be}));const W=1e3;X.current=setTimeout(()=>{A(Ge)},W),ve&&(P.current=setTimeout(()=>{O(be)},W))},50),r(1)},x=()=>{l(!0),ae({currentHealth:Math.min(n.maxHealth,n.currentHealth+t)}),r(1)},K=()=>{_(!0),ae({tempHealth:(n.tempHealth||0)+t}),r(1)},Ce=()=>{r(V?n.maxHealth||0:M=>Math.min(M+1,n.maxHealth||1/0))},Se=()=>{r(V?0:M=>Math.max(0,M-1))},Le=()=>{p(!0),ae({currentMp:Math.max(0,n.currentMp-t)}),r(1)},Ae=()=>{p(!0),ae({currentMp:Math.min(n.maxMp,n.currentMp+t)})},Te=()=>{const M=Math.max(0,Math.min(n.maxHealth,t));ae({currentHealth:M}),l(!0),r(1)},Ie=()=>{const M=Math.max(0,Math.min(n.maxMp,t));ae({currentMp:M}),p(!0),r(1)},ye=()=>{ae({tempHealth:0}),s(!0)},ge=()=>{n.maxHealth!==void 0&&(ae({currentHealth:n.maxHealth}),l(!0))},fe=()=>{n.maxMp!==void 0&&(ae({currentMp:n.maxMp}),p(!0))},pt=M=>{M.type==="touchstart"&&M.preventDefault(),ie(!0),Z.current=setTimeout(()=>{ge(),ye(),A(n.maxHealth||ee),O(0),ie(!1),F.current&&(clearTimeout(F.current),F.current=null)},Ne)},He=M=>{M.type==="touchstart"&&M.preventDefault(),ie(!0),Z.current=setTimeout(()=>{fe(),ie(!1),Y.current&&(clearTimeout(Y.current),Y.current=null)},Ne)},Fe=M=>{if(Z.current&&(clearTimeout(Z.current),Z.current=null,ue&&M.type==="touchend")){const ve=M.currentTarget.getAttribute("data-bar-type");ve==="hp"?y():ve==="mp"&&j()}ie(!1)},qe=()=>{Z.current&&(clearTimeout(Z.current),Z.current=null),ie(!1)},y=()=>{ue||(F.current?(clearTimeout(F.current),F.current=null,ge(),ye(),A(n.maxHealth||ee),O(0)):(Te(),F.current=setTimeout(()=>{F.current=null},le)))},j=()=>{ue||(Y.current?(clearTimeout(Y.current),Y.current=null,fe()):(Ie(),Y.current=setTimeout(()=>{Y.current=null},le)))},$=n.currentHealth||0,ee=Math.max(1,n.maxHealth||0),de=n.tempHealth||0,tt=n.currentMp||0,ke=Math.max(1,n.maxMp||0);return o("div",{className:"hit-points-component-container container-fluid mb-4",children:[o("div",{className:"row align-items-center mb-3",children:[o(Vt,{title:"HEALTH AND MANA",containerClassName:"mb-3"}),o("div",{className:"d-flex justify-content-center align-items-center gap-1",children:[o("button",{onClick:Le,className:"btn btn-outline-primary btn-icon-square","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Use MP",children:o("i",{className:"fas fa-bolt-lightning"})}),o("button",{onClick:ye,className:"btn btn-icon-square btn-outline-warning","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Clear Temporary HP","data-bs-original-title":"Clear Temporary HP",children:o("i",{className:"fas fa-times-circle"})}),o("button",{onClick:N,className:"btn btn-icon-square btn-outline-danger","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Damage HP","data-bs-original-title":"Damage HP",children:o("i",{className:"fas fa-heart-circle-minus"})}),o("div",{className:"input-group amount-input-container",style:{width:"auto",alignItems:"center"},children:[o("button",{onClick:Se,className:"btn btn-outline-secondary btn-icon-square amount-control-btn",type:"button","data-bs-toggle":"tooltip","data-bs-placement":"top",title:V?"Set to Min (0)":"Decrease Amount","data-bs-original-title":V?"Set to Min (0)":"Decrease Amount",children:o("i",{className:"fas fa-minus"})}),o("input",{type:"number",value:t,onChange:M=>r(Math.max(0,parseInt(M.currentTarget.value)||0)),className:"form-control text-center bg-dark text-light",min:"0",style:{width:"70px",height:"40px"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Enter amount","aria-label":"Amount for HP/MP changes"}),o("button",{onClick:Ce,className:"btn btn-outline-secondary btn-icon-square amount-control-btn",type:"button","data-bs-toggle":"tooltip","data-bs-placement":"top",title:V?`Set to Max (${n.maxHealth||0})`:"Increase Amount","data-bs-original-title":V?`Set to Max (${n.maxHealth||0})`:"Increase Amount",children:o("i",{className:"fas fa-plus"})})]}),o("button",{onClick:x,className:"btn btn-icon-square btn-outline-success","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Heal HP","data-bs-original-title":"Heal HP",children:o("i",{className:"fas fa-heart-circle-plus"})}),o("button",{onClick:K,className:"btn btn-icon-square btn-outline-info","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Heal Temporary HP","data-bs-original-title":"Heal Temporary HP",children:o("i",{className:"fas fa-heart-pulse"})}),o("button",{onClick:Ae,className:"btn btn-outline-info btn-icon-square","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Restore MP","data-bs-original-title":"Restore MP",children:o("i",{className:"fas fa-droplet"})})]})]}),o("div",{className:"mb-3",children:["                ",o("div",{style:{position:"relative",cursor:"pointer"},className:"mb-2",onClick:M=>{M.type!=="touchend"&&y()},onMouseDown:pt,onMouseUp:Fe,onMouseLeave:qe,onTouchStart:pt,onTouchEnd:Fe,onTouchCancel:qe,onContextMenu:M=>M.preventDefault(),"data-bar-type":"hp","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Click to Set HP to ${t}, Long press/double click to reset HP & Temp HP`,"data-bs-original-title":`Click to Set HP to ${t}, Long press/double click to reset HP & Temp HP`,children:[o(qs,{value:$,maxValue:ee,color:{from:"#ef4444",to:"#e11d48"},labelRight:`${$} / ${ee}`,trailingStartValue:E,trailColor:"rgba(200, 0, 0, 0.7)",className:D?"progress-bar-damage-flash":""}),(de>0||C!==null)&&o(qs,{value:de,maxValue:ee,color:{from:"#21d2ec",to:"#14b8a7"},labelCenter:de>0?`${de} Temp`:"",isOverlay:!0,className:`health-overlay-bar ${I?"progress-bar-damage-flash":""}`,trailingStartValue:C,trailColor:"rgba(0, 50, 200, 0.7)"})]}),"                ",o("div",{style:{cursor:"pointer"},onClick:M=>{M.type!=="touchend"&&j()},onMouseDown:He,onMouseUp:Fe,onMouseLeave:qe,onTouchStart:He,onTouchEnd:Fe,onTouchCancel:qe,onContextMenu:M=>M.preventDefault(),"data-bar-type":"mp","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Click to Set MP to ${t}, Long press/double click to Full Restore MP`,"data-bs-original-title":`Click to Set MP to ${t}, Long press/double click to Full Restore MP`,children:o(qs,{value:tt,maxValue:ke,color:{from:"#3c82f6",to:"#6366f1"},labelRight:`${tt} / ${ke}`,className:d?"progress-bar-damage-flash":"",trailingStartValue:tt,trailColor:"rgba(0, 50, 200, 0.7)"})})]})]})}function Yh(){const{spells:n}=wn(),{characterStats:e,setCharacterStats:t}=rt(St),r=()=>(e.speed||0)+ct(n,"speed"),c=l=>{t(u=>({...u,...l}))},a=l=>{const u=l.currentTarget,s=Math.max(1,parseInt(u.value)||1);c({maxHealth:s}),e.currentHealth>s&&c({currentHealth:s})},i=l=>{const u=l.currentTarget,s=Math.max(1,parseInt(u.value)||1);c({maxMp:s}),e.currentMp>s&&c({currentMp:s})};return o("div",{className:"character-sheet container-fluid",children:o("div",{className:"column",children:[o(Bh,{}),o("div",{className:"row justify-content-between mt-4",children:[o("div",{className:"col-md-7",children:o(Po,{})}),"                    ",o("div",{className:"col-md-5 p-3",children:[o("div",{className:"row align-items-center mb-3",children:[o("div",{className:"col-auto",children:o("div",{className:"d-flex gap-2",children:[o("div",{className:"text-center",children:[o("small",{className:"d-block mb-1 text-secondary",children:"Speed"}),o("input",{type:"number",className:"form-control form-control box-no-input text-center bg-dark text-light",id:"speedInput",value:r()+30,readOnly:!0,"aria-label":"Speed"})]}),o("div",{className:"text-center",children:[o("small",{className:"d-block mb-1 text-secondary",children:"AC"}),o("input",{type:"number",className:"form-control box-no-input text-center bg-dark text-light",id:"acInput",value:e.AC||10,readOnly:!0,"aria-label":"Armor Class"})]})]})}),o("div",{className:"col-auto ms-auto",children:o("div",{className:"d-flex gap-2",children:[o("div",{className:"text-center",children:[o("small",{className:"d-block mb-1 text-secondary",children:"Max HP"}),o("input",{type:"number",className:"form-control form-control hp-input text-center bg-dark text-light",id:"maxHealthInput",value:e.maxHealth||"",onChange:a,min:"1","aria-label":"Maximum Hit Points"})]}),o("div",{className:"text-center",children:[o("small",{className:"d-block mb-1 text-secondary",children:"Max MP"}),o("input",{type:"number",className:"form-control form-control hp-input text-center bg-dark text-light",id:"maxMpInput",value:e.maxMp||"",onChange:i,min:"1","aria-label":"Maximum Mana Points"})]})]})})]}),o(Fo,{})]})]})]})})}const _s=()=>{const[n,e]=z(null);return _e(()=>{e(document.createElement("div"))},[]),_e(()=>{if(n)return n.className="toast-container position-fixed bottom-0 end-0 p-3",document.body.appendChild(n),()=>{document.body.removeChild(n)}},[n]),{showToast:(r,c="info-circle",a="primary",i="Notification")=>{if(!n)return;const l=document.createElement("div");l.className="toast",l.setAttribute("role","alert"),l.setAttribute("aria-live","assertive"),l.setAttribute("aria-atomic","true"),l.innerHTML=`
            <div class="toast-header">
                <i class="fas fa-${c} me-2 text-${a}"></i>
                <strong class="me-auto">${i}</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body">
                ${r}
            </div>
        `,n.appendChild(l),new Dn(l,{autohide:!0,delay:3e3}).show(),l.addEventListener("hidden.bs.toast",()=>{n.removeChild(l)})}}},Kh=()=>{const{characterStats:n,setCharacterStats:e}=rt(St),{spells:t}=wn(),{showToast:r}=_s(),c=(u,s)=>{e(d=>({...d,[u]:parseInt(s,10)||0}))},a=Object.entries(n).filter(([u])=>{var s;return((s=we[u])==null?void 0:s.category)!==je.CORE}).reduce((u,[s,d])=>u+(parseInt(d,10)||0),0),i=u=>{const s=prompt("Enter a DC for the roll (leave blank for normal roll):");if(s===null)return;const d=Math.max(0,parseInt(s,10)),p=(n[u]||0)+ct(t,u),m=we[u];let _=`1d20+${p}`;d>1&&(_=`${_}cs>=${d}cf<${d}`);const E=d?`check vs DC ${d}`:"check",A=`&{template:default} {{name=${pr(u)} ${E}}}{{Roll=[[${_}]]}}{{Stat Bonus=[[${p}]] from ${m.shortName}}}`;navigator.clipboard.writeText(A);const C=d?`${m.name} roll vs DC ${d} copied! Paste it into Roll20.`:`${m.name} roll command copied! Paste it into Roll20.`;r(C,"clipboard","success","Copied to clipboard")},l=u=>{const s=Object.entries(we).filter(([d,p])=>p.category===u);return s.length>0&&o("div",{className:"stat-category",children:[o("h6",{className:"stat-category-title text-secondary mb-2",children:u.toUpperCase()}),o("div",{className:"stat-grid",children:s.map(([d,p])=>o("div",{className:"stat-group mb-2",title:`${p.name} ${p.description}`,"data-bs-toggle":"tooltip","data-bs-placement":"top",children:o("div",{className:"input-group",children:[o("span",{className:`input-group-text gap-1 text-${p.color}`,onClick:()=>i(d),style:{cursor:"pointer"},children:[o("i",{className:`fas ${p.icon}`})," ",o("span",{className:"stat-text",children:p.shortName})]}),o("input",{type:"number",className:"form-control",value:n[d]||0,onChange:m=>c(d,m.currentTarget.value)}),o("span",{className:"input-group-text",children:[o("i",{className:`fas ${ct(t,d)?"":"fa-link-slash"} text-muted`}),ct(t,d)>0&&o("div",{children:[o("span",{className:"text-secondary ms-1",children:["+",ct(t,d)," ="]}),o("span",{className:"text-muted ms-1",children:n[d]+ct(t,d)})]})]})]})},d))})]})};return o("div",{className:"character-stats",children:[o(Vt,{title:"STATS",lineMaxWidth:"50px",containerClassName:"mb-1"}),o("h6",{className:"stat-category-title text-danger mb-4",children:["BASE ALLOCATED POINTS: ",a]}),l(je.PHYSICAL),l(je.MAGICAL),l(je.UTILITY)]})},qh=({spellToDelete:n,confirmDelete:e,setSpellToDelete:t})=>o("div",{className:`modal fade ${n?"show":""}`,style:{display:n?"block":"none"},tabIndex:-1,children:o("div",{className:"modal-dialog",children:o("div",{className:"modal-content",children:[o("div",{className:"modal-header",children:[o("h5",{className:"modal-title",children:"Confirm Deletion"}),o("button",{type:"button",className:"btn-close",onClick:()=>t(null),"aria-label":"Close"})]}),o("div",{className:"modal-body",children:"Are you sure you want to delete this spell?"}),o("div",{className:"modal-footer",children:[o("button",{type:"button",className:"btn btn-secondary",onClick:()=>t(null),children:"No, Keep It"}),o("button",{type:"button",className:"btn btn-danger",onClick:e,children:"Yes, Delete It"})]})]})})}),Gh=({isModalOpen:n,closeModal:e,spellBeingEdited:t,currentSpell:r,setCurrentSpell:c,incrementPower:a,decrementPower:i,getSpellRank:l,getActionLabel:u,validateDiceRoll:s,diceError:d,saveSpell:p,removeSpell:m})=>o("div",{className:`modal ${n?"show":""}`,style:{display:n?"block":"none"},tabIndex:-1,children:o("div",{className:"modal-dialog",children:o("div",{className:"modal-content",children:[o("div",{className:"modal-header",children:[o("h5",{className:"modal-title",children:t?"Edit Spell Entry":"Add Spell"}),o("button",{type:"button",className:"btn-close",onClick:e})]}),o("div",{className:"modal-body",children:[o("div",{className:"mb-2",children:[o("label",{className:"form-label",children:"Spell Name"}),o("input",{type:"text",className:"form-control",placeholder:"Spell Name",value:r.name,onInput:_=>c({...r,name:_.currentTarget.value})})]}),o("div",{className:"mb-2",children:[o("label",{className:"form-label",children:"Spell Level"}),o("div",{className:"input-group",children:[o("button",{className:"btn btn-outline-secondary",type:"button",onClick:i,disabled:r.power<=1,children:o("i",{className:"fas fa-minus"})}),o("input",{type:"number",className:`form-control ${r.power<=0?"is-invalid":""}`,placeholder:"Spell Level",min:"1",value:r.power,onInput:_=>{const E=Math.max(1,parseInt(_.currentTarget.value,10)||1);c({...r,power:E,rank:l(E)})}}),o("button",{className:"btn btn-outline-secondary",type:"button",onClick:a,children:o("i",{className:"fas fa-plus"})}),r.power<=0&&o("div",{className:"invalid-feedback",children:"Spell level must be at least 1"})]})]}),o("div",{className:"alert alert-info py-1 mb-2",children:[o("i",{className:"fas fa-link me-2"}),o("small",{className:"text-muted d-block mt-1",children:["This spell's ",o("a",{href:"https://docs.google.com/document/d/1ZTxCemR8j6GhIMqhvmBd7kOo8wNsOisO_vOutlQBYv0/edit?tab=t.0",target:"_blank",children:"Soul Link Rank"})," will be ",o("b",{children:[l(r.power),"."]})]})]}),o("label",{className:"form-label",children:"Actions to Cast"}),o("div",{className:"input-group mb-2",children:[o("span",{className:"input-group-text",children:u(r.actions)}),o("select",{className:"form-select",value:r.actions,onChange:_=>c({...r,actions:parseInt(_.currentTarget.value)}),children:[o("option",{value:"1",children:"1 Action"}),o("option",{value:"2",children:"2 Actions"}),o("option",{value:"3",children:"3 Actions"}),o("option",{value:"0",children:"Free Action"})]})]}),o("label",{className:"form-label",children:"Element"}),o("div",{className:"input-group mb-2",children:[o("span",{className:"input-group-text",children:st(r.element)}),o("select",{className:"form-select",value:r.element,onChange:_=>c({...r,element:_.currentTarget.value}),children:Object.entries(re).map(([_,E])=>o("option",{value:E,children:E},_))})]}),o("label",{className:"form-label",children:"Damage Roll(s)"}),o("div",{className:"input-group mb-2",children:[o("span",{className:"input-group-text",children:o("i",{className:"fas fa-dice-d20"})}),o("input",{type:"text",className:`form-control ${d?"is-invalid":""}`,placeholder:"Dice Roll (e.g. 1d4)",value:r.dice,onInput:_=>{const E=_.currentTarget.value;c({...r,dice:E}),s(E)}}),d&&o("div",{className:"invalid-feedback",children:d})]}),o("div",{className:"alert alert-info py-1 mb-2",children:[o("i",{className:"fas fa-info-circle me-2"}),o("small",{children:"Use [stat] to include a stat's value (e.g., [strength] + 1d6)"})]}),o("div",{className:"mb-2",children:[o("label",{className:"form-label",children:"Spell Description"}),o("textarea",{className:"form-control",placeholder:"Spell Description",value:r.description,onInput:_=>c({...r,description:_.currentTarget.value})})]}),o("div",{className:"mb-2",children:[o("label",{className:"form-label",children:["Amount currently stocked ",o("i",{children:'("Spell Charges")'})]}),o("div",{className:"input-group",children:o("input",{type:"number",className:`form-control ${r.quantity<0||r.quantity>At?"is-invalid":""}`,placeholder:"Quantity",min:"0",max:At.toString(),value:r.quantity,onInput:_=>{const E=parseInt(_.currentTarget.value,10)||0;E>At?c({...r,quantity:At}):c({...r,quantity:Math.max(0,E)})}})})]})]}),o("div",{className:"modal-footer",children:[o("button",{type:"button",className:"btn btn-secondary",onClick:e,children:[o("i",{className:"fas fa-times me-1"}),"Close"]}),t&&o("button",{type:"button",className:"btn btn-danger",onClick:()=>m(t.id),children:[o("i",{className:"fas fa-trash-alt me-1"}),"Delete"]}),o("button",{type:"button",className:"btn btn-success",onClick:p,children:[o("i",{className:`fas ${t?"fa-save":"fa-plus"} me-1`}),t?"Save Changes":"Add Spell"]})]})]})})}),zh=({isLinkModalOpen:n,closeLinkModal:e,currentSpell:t,setCurrentSpell:r,saveSpell:c,getLinkedStats:a})=>{var l;if(!t)return null;const{spells:i}=wn();return o("div",{className:`modal fade ${n?"show":""}`,style:{display:n?"block":"none"},tabIndex:-1,children:o("div",{className:"modal-dialog",children:o("div",{className:"modal-content",children:[o("div",{className:"modal-header",children:[o("h5",{className:"modal-title",children:`Link ${t.name} to stat`}),o("button",{type:"button",className:"btn-close",onClick:e,"aria-label":"Close"})]}),o("div",{className:"modal-body",children:o("div",{className:"input-group mb-2",children:[o("span",{className:"input-group-text gap-1",children:o("i",{className:`fas ${t.linkedStat&&t.linkedStat!=="None"&&((l=we[t.linkedStat])==null?void 0:l.icon)||"fa-link-slash"}`})}),o("select",{className:"form-select",value:t.linkedStat||"None",onChange:u=>r({...t,linkedStat:u.currentTarget.value==="None"?null:u.currentTarget.value,isLinked:u.currentTarget.value!=="None"}),children:[o("option",{value:"None",children:"None"}),Object.entries(we).map(([u,s])=>(!a().includes(u)||u===t.linkedStat)&&s.type!==$e.CORE?o("option",{value:u,children:s.name},u):null)]}),o("span",{className:"input-group-text",children:["+",rs(t.quantity,t.rank)]})]})}),o("div",{className:"modal-footer",children:[o("button",{type:"button",className:"btn btn-secondary",onClick:e,children:[o("i",{className:"fas fa-times me-1"}),"Close"]}),o("button",{type:"button",className:"btn btn-success",onClick:c,children:[o("i",{className:`fas ${t.id?"fa-save":"fa-plus"} me-1`})," ",t.id?"Save Changes":"Add Spell"]})]})]})})})},Qh=()=>{const{characterStats:n,setCharacterStats:e}=rt(St),{spells:t,setSpells:r,getLinkedStats:c}=wn(),{showToast:a}=_s(),i={name:"",quantity:1,power:1,dice:"",description:"",actions:1,rank:1,isLinked:!1,linkedStat:"None",element:re.PHYS},[l,u]=z(i),[s,d]=z(null),[p,m]=z(!1),[_,E]=z(!1),[A,C]=z(null),[O,D]=z(!1);_e(()=>{const y=$=>{$.key==="Control"&&D(!0)},j=$=>{$.key==="Control"&&D(!1)};return window.addEventListener("keydown",y),window.addEventListener("keyup",j),()=>{window.removeEventListener("keydown",y),window.removeEventListener("keyup",j)}},[]);const B=y=>{var j,$;return y&&(($=(j=n.affinities)==null?void 0:j[y.element])==null?void 0:$.mastered)||!1},I=y=>{y&&U(B(y))},U=y=>{const j=n.luck+ct(t,"luck")||0,$=Math.min(j,Os);var ee=`🍀 Luck=[[${j}`;j>Os?ee+=`]] (+${Os} max bonus)`:ee+="]]";const tt=`${y?2:1}d6cf1 + ${$}[Luck Bonus]`,ke=y?"Draw Spell (Mastery)":"Draw Spell",M=`&{template:default} {{name=${ke}}} {{Charges Gained=[[${tt}]]}} {{${ee}}} {{Note=If the number is highlighted red, the true amount of Charges Gained is that total MINUS the Luck Bonus.}}`;navigator.clipboard.writeText(M).then(()=>{a(`${ke} command copied! Paste it into Roll20.`,"clipboard","success","Copied to clipboard")}).catch(ve=>{console.error("Failed to copy command: ",ve),a("Failed to copy command.","exclamation-triangle","danger","Copy Error")})},V=y=>{if(y.quantity>0&&y.dice)try{const j=Qt(t,y.dice,n),$=st(y.element),ee=Qt(t,"1d20+[strength]",n);let de;y.actions===0?de="Free Action":de=y.actions===1?"Action":"Actions";const tt=`&{template:default} {{name=${y.name}}}                                 {{Actions=${y.actions} ${de}}}                                 {{Level=**Spell ${y.power}** (S.Link Rank ${y.rank})}}                                 {{Attack=[[${ee}]]}}                                 {{Damage=[[${j}]] ${$} ${y.element}}}                                 ${y.description?`{{Description=${y.description}}}
                                `:""}`;navigator.clipboard.writeText(tt),a("Spell roll command copied! Paste it into the text chat on Roll20.","clipboard","success","Copied to clipboard"),x(y.id,"quantity",y.quantity-1)}catch(j){alert(j.message||"Invalid dice format!")}else a("No more charges of this spell remaining!","exclamation-triangle","warning","Cannot cast spell")},Q=(y,j,$)=>{const ee=j-$,de=`${y.name}: ${$} → ${j} (${ee>=0?"+":""}${ee})`;console.log(de)},X=y=>{C(A===y?null:y)};_e(()=>{localStorage.setItem("spells",JSON.stringify(t))},[t]),_e(()=>{const j=[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map($=>new yt($));return()=>{j.forEach($=>$.dispose())}},[]);const P=(y=null)=>{d(y),u(y||i),m(!0)},F=()=>{d(null),m(!1)},Y=(y=null)=>{d(y),u(y||i),E(!0)},Z=()=>{d(null),E(!1)},[le,Ne]=z(""),ue=y=>{const j=Jn(y,n);return Ne(j.error||""),j.isValid},ie=()=>{const y=Uo(l);if(y.length>0){alert(`Please fix the following:
${y.join(`
`)}`);return}ue(l.dice)&&(r(s?t.map(j=>j.id===s.id?{...l,id:s.id}:j):[...t,{...l,id:Date.now()}]),p&&F(),_&&Z(),console.log("Spell saved:",l))},[ae,N]=z(null),x=(y,j,$)=>{const ee=t.find(de=>de.id===y);ee&&(ee.quantity!==$&&(N(y),setTimeout(()=>N(null),300),Q(ee,$,ee.quantity)),r(t.map(de=>de.id===y?{...de,[j]:$}:de)))},[K,Ce]=z(null),Se=y=>{Ce(y)},Le=()=>{K&&(t.find(y=>y.id===K),r(t.filter(y=>y.id!==K)),Ce(null),F())},Ae=(y,j)=>{const $=[...t],ee=y+j;ee>=0&&ee<t.length&&([$[y],$[ee]]=[$[ee],$[y]],r($))},Te=()=>{const y=l.power+1;u({...l,power:y,rank:$s(y)})},Ie=()=>{if(l.power>1){const y=l.power-1;u({...l,power:y,rank:$s(y)})}},[ye,ge]=z(1),fe=y=>{const j=t.find(ee=>ee.id===y),$=Math.min(At,j.quantity+ye);x(y,"quantity",$),ge(1)},pt=y=>{const j=t.find(ee=>ee.id===y),$=Math.max(0,j.quantity-ye);x(y,"quantity",$),ge(1)},He=y=>{let j="",$="";switch(y){case 0:j="[free-action]",$="Free Action";break;case 1:j="[one-action]",$="One Action";break;case 2:j="[two-actions]",$="Two Actions";break;case 3:j="[three-actions]",$="Three Actions";break;default:return""}return o("span",{className:"action","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-original-title":$,title:$,role:"img","aria-label":$,children:j})},Fe=y=>y.isLinked?"Linked to "+we[y.linkedStat].name:"No linked stat",qe=y=>{y.isLinked?console.log(`Linked stat: ${y.linkedStat}`):console.log("No linked stat"),Y(y)};return o("div",{className:"spell-inventory","data-bs-theme":"dark",children:o("div",{className:"container",children:[o(Vt,{title:"SPELL INVENTORY",lineMaxWidth:"50px"}),o("div",{className:"d-flex align-items-center justify-content-center mb-4",children:[o("button",{className:`dark-btn me-2 ${O?"gold-button":"dark-btn-secondary"}`,onClick:y=>U(y.ctrlKey),style:{width:"160px",height:"60px"},children:o("div",{className:"d-flex flex-column align-items-center",children:[o("div",{children:[o("i",{className:"fas fa-dice me-2"})," ",o("span",{children:"Stock Roll"})]}),o("span",{style:{fontSize:"0.7em"},children:"hold Ctrl for mastery"})]})}),o("button",{className:"dark-btn dark-btn-primary",onClick:()=>P(),style:{width:"160px",height:"60px"},children:[o("i",{className:"fas fa-plus me-2"})," ",o("span",{children:"Add Spell"})]})]}),t.length===0&&o("span",{className:"text-muted text-center d-flex flex-column align-items-center justify-content-center"+(window.innerWidth<=750?" mt-4":""),children:"[ Inventory Empty ]"}),o("ul",{className:"list-group",children:t.map((y,j)=>o("li",{className:`list-group-item spell-item ${ae===y.id?"quantity-flash":""}`,children:[o("div",{class:"d-flex justify-content-left",children:[o("div",{className:"d-flex align-items-center overflow-hidden",style:{flex:"1 1 0"},onClick:()=>X(y.id),children:[o("span",{id:`quantity-badge-${y.id}`,className:"text-black badge quantity-badge me-2",style:{width:"2.5rem",flexShrink:0},children:o("small",{children:y.quantity})}),o("div",{class:"text-truncate",children:[st(y.element)," ",o("span",{className:"arsenal me-2",children:y.name}),o("span",{className:"action-label hide-on-small me-2",style:{width:window.innerWidth<=750?"0px":"50px"},children:He(y.actions)})]})]}),o("div",{className:"d-flex align-items-center justify-content-right",style:{gap:"0.5rem"},children:[o("i",{className:"fas fa-edit text-primary",onClick:$=>{$.stopPropagation(),P(y)},style:{cursor:"pointer",transition:"opacity 0.3s",opacity:.6,flexShrink:0},onMouseOver:$=>{$.stopPropagation(),$.currentTarget.style.opacity="1"},onMouseOut:$=>{$.stopPropagation(),$.currentTarget.style.opacity="0.6"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Edit Spell"}),o("span",{className:`badge bg-dark border text-${y.isLinked?we[y.linkedStat].color:"secondary"} ms-2 d-flex justify-content-between align-items-center link-badge-normal`,"data-bs-toggle":"tooltip","data-bs-original-title":Fe(y),title:Fe(y),onClick:$=>{$.stopPropagation(),qe(y)},style:{cursor:"pointer",width:"4rem"},children:[o("i",{className:`fas ${y.isLinked?we[y.linkedStat].icon:"fa-link-slash"}`}),o("span",{children:y.isLinked?`+${rs(y.quantity,y.rank)}`:""})]}),o("button",{className:"btn btn-outline-danger btn-sm roll-button",style:{width:"120px",whiteSpace:"nowrap",overflow:"hidden"},onClick:$=>{$.stopPropagation(),V(y)},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Click to copy roll command",children:[o("i",{className:"fas fa-dice-d20"}),o("span",{className:"ms-1 text-truncate",children:Qt(t,y.dice,n,!0)})]}),o("button",{className:"btn btn-outline-info btn-sm",onClick:$=>{$.stopPropagation(),I(y)},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Click to copy the Stock roll command for ${y.name} (${y.element} - ${B(y)?"mastery":"normal"})`,style:{flexShrink:0},children:o("i",{className:"fas fa-hand-sparkles"})}),o("div",{className:"input-group input-group-sm",children:[o("button",{className:"btn btn-outline-danger btn-sm",onClick:$=>{$.stopPropagation(),pt(y.id)},children:o("i",{className:"fas fa-minus"})}),o("input",{type:"number",className:"form-control form-control-sm text-center",style:{width:"60px"},value:ye,min:"1",max:At,onChange:$=>ge(Math.max(1,Math.min(At,parseInt($.currentTarget.value)||1))),onClick:$=>$.stopPropagation()}),o("button",{className:"btn btn-outline-success btn-sm",onClick:$=>{$.stopPropagation(),fe(y.id)},children:o("i",{className:"fas fa-plus"})})]}),o("div",{className:"btn-group hide-on-small",style:{flexShrink:0},children:[o("button",{className:"btn btn-outline-secondary btn-sm",onClick:$=>{$.stopPropagation(),Ae(j,1)},children:o("i",{className:"fas fa-chevron-down"})}),o("button",{className:"btn btn-outline-secondary btn-sm",onClick:$=>{$.stopPropagation(),Ae(j,-1)},children:o("i",{className:"fas fa-chevron-up"})})]})]}),o("br",{})]}),A===y.id&&o("div",{className:"mt-3",children:[o("div",{className:"d-flex flex-wrap justify-content-center mb-2",style:{gap:"0.5rem"},children:[o("span",{className:`badge bg-dark border text-${y.isLinked?we[y.linkedStat].color:"secondary"}
                                                link-badge-responsive`,"data-bs-toggle":"tooltip","data-bs-original-title":Fe(y),title:Fe(y),onClick:$=>{$.stopPropagation(),qe(y)},style:{cursor:"pointer"},children:[o("i",{className:`fas ${y.isLinked?we[y.linkedStat].icon:"fa-link-slash"}`}),o("span",{children:y.isLinked?o(Xt,{children:[`${we[y.linkedStat].name}`,o("span",{className:"ms-2",children:`+${rs(y.quantity,y.rank)}`})]}):""})]}),o("span",{className:"badge bg-dark border",children:[He(y.actions)," ",y.actions," Actions"]}),o("span",{className:"badge bg-dark border",children:[st(y.element)," ",y.element]}),o("span",{className:"badge bg-dark border",children:["Spell ",y.power," ",o("i",{children:["(SL. Rank: ",y.rank,")"]})]})]}),y.description&&o(Xt,{children:[o("p",{className:"py-1 border-bottom h5 arsenal",children:"Description"}),o("div",{className:"mb-0 spell-description arsenal",style:{display:"-webkit-box",WebkitLineClamp:"5",WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},dangerouslySetInnerHTML:{__html:y.description}})]})]})]},y.id))}),o(Gh,{isModalOpen:p,closeModal:F,spellBeingEdited:s,currentSpell:l,setCurrentSpell:u,incrementPower:Te,decrementPower:Ie,getSpellRank:$s,getActionLabel:He,validateDiceRoll:ue,diceError:le,saveSpell:ie,removeSpell:Se}),o(zh,{isLinkModalOpen:_,closeLinkModal:Z,currentSpell:l,setCurrentSpell:u,saveSpell:ie,getLinkedStats:c}),o(qh,{spellToDelete:K,confirmDelete:Le,setSpellToDelete:Ce})]})})};function Xh(){return o("div",{className:"spell-inventory container-fluid",children:o("div",{className:"row",children:[o("div",{className:"col-12 col-md-4 order-2 order-md-1",style:{minHeight:"50vh",overflowY:"auto"},children:o(Kh,{})}),o("div",{className:"col-12 col-md-8 order-1 order-md-2",style:{minHeight:"50vh",overflowY:"auto"},children:o(Qh,{})})]})})}const Jh="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs/%3e%3cg%3e%3cpath%20stroke='none'%20fill='%23FFFFFF'%20d='M16%208%20L48%208%20Q56%208%2056%2016%20L56%2048%20Q56%2056%2048%2056%20L16%2056%20Q8%2056%208%2048%20L8%2016%20Q8%208%2016%208%20M11%2016%20L11%2048%20Q11%2053%2016%2053%20L48%2053%20Q53%2053%2053%2048%20L53%2016%20Q53%2011%2048%2011%20L16%2011%20Q11%2011%2011%2016%20M22%2032%20L30%2024%2032%2024%2032%2028%2042%2028%2042%2036%2032%2036%2032%2040%2030%2040%2022%2032'/%3e%3c/g%3e%3c/svg%3e",Zh="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs/%3e%3cg%3e%3cpath%20stroke='none'%20fill='%23FFFFFF'%20d='M42%2032%20L34%2040%2032%2040%2032%2036%2022%2036%2022%2028%2032%2028%2032%2024%2034%2024%2042%2032%20M53%2048%20L53%2016%20Q53%2011%2048%2011%20L16%2011%20Q11%2011%2011%2016%20L11%2048%20Q11%2053%2016%2053%20L48%2053%20Q53%2053%2053%2048%20M48%2056%20L16%2056%20Q8%2056%208%2048%20L8%2016%20Q8%208%2016%208%20L48%208%20Q56%208%2056%2016%20L56%2048%20Q56%2056%2048%2056'/%3e%3c/g%3e%3c/svg%3e",ef=[{id:"character",title:"Health"},{id:"spells",title:"Spells and Stats"},{id:"abilities",title:"Abilities"}],nt=ef.map(n=>({title:n.title,path:n.id==="character"?_n:`${_n.replace(/\/$/,"")}/${n.id}`}));function tf(){const{url:n,route:e}=fr(),t=nt.findIndex(a=>a.path===n);_e(()=>{const a=i=>{const l=i.target.tagName.toLowerCase(),u=i.target.isContentEditable;l==="input"||l==="textarea"||u||(i.key==="ArrowLeft"?t>0&&e(nt[t-1].path):i.key==="ArrowRight"&&t<nt.length-1&&e(nt[t+1].path))};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}},[n,t]);const r={height:"48px",verticalAlign:"middle",cursor:"pointer"},c=a=>{e(a)};return o("header",{className:"header mb-4",children:o("div",{className:"d-flex justify-content-center align-items-center p-3 border-bottom",children:o("div",{className:"col-md-8 col-lg-6 text-center",children:o("nav",{className:"btn-group gap-2",role:"group","aria-label":"Main navigation",children:[o("img",{src:Jh,alt:"Navigate left",onClick:()=>t>0&&c(nt[t-1].path),style:{...r,marginRight:"8px",filter:t>0?"opacity(0.75)":"opacity(0.3)",cursor:t>0?"pointer":""},"aria-disabled":t<=0}),"                        ",nt.map((a,i)=>{let l="dark-btn dark-btn-secondary";return n===a.path&&(l+=" dark-btn--active"),o("button",{className:l,onClick:()=>c(a.path),children:o("span",{children:a.title})},a.path)}),o("img",{src:Zh,alt:"Navigate right",onClick:()=>t<nt.length-1&&c(nt[t+1].path),style:{...r,marginLeft:"8px",filter:t<nt.length-1?"opacity(0.75)":"opacity(0.3)",cursor:t<nt.length-1?"pointer":""},"aria-disabled":t>=nt.length-1})]})})})})}const nf=()=>{const{showToast:n}=_s(),{spells:e}=wn(),t=(a,i)=>{let l="[[1d20+"+ct(e,i);a==="Initiative"&&(l+="&{tracker}"),l+="]]";const u=`&{template:default} {{name=${a}}}{{Roll=${l}}}{{Stat Bonus=[[${ct(e,i)}]] from ${pr(i)}}}`;navigator.clipboard.writeText(u),n(a+" roll command copied! Paste it into the text chat on Roll20.","clipboard","success","Copied to clipboard")},r=[{name:"Fortitude Save",stat:"vitality"},{name:"Will Save",stat:"spirit"},{name:"Reflex Save",stat:"speed"}],c={name:"Initiative",stat:"speed",icon:"fa-bolt"};return o("div",{className:"save-rolls",children:o("div",{className:"d-flex flex-wrap gap-2 align-items-center justify-content-center",children:[r.map(a=>o("button",{onClick:()=>t(a.name,a.stat),className:"dark-btn dark-btn-secondary d-flex align-items-center justify-content-center flex-grow-1 position-relative",style:{minWidth:"140px",maxWidth:"170px",height:"48px"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Roll ${a.name} (${we[a.stat].shortName})`,children:[o("i",{className:`fas ${we[a.stat].icon} me-2`,style:{width:"20px"}}),o("span",{children:a.name})]},a.name)),o("button",{onClick:()=>t(c.name,c.stat),className:"dark-btn dark-btn-primary d-flex align-items-center justify-content-center flex-grow-1 position-relative",style:{minWidth:"140px",maxWidth:"170px",height:"48px"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Roll ${c.name} (${we[c.stat].shortName})`,children:[o("i",{className:`fas ${c.icon} text-${c.color} me-2`,style:{width:"20px"}}),o("span",{children:c.name})]},c.name)]})})},sf=({buildDate:n})=>{const{url:e}=fr();return o("footer",{className:"footer mt-auto py-3 text-light border-top",children:o("div",{className:"container-fluid",children:o("div",{className:"row",children:[o("div",{className:"col-4 text-start text-truncate d-flex align-items-center",children:[o("span",{className:"me-2",children:["Build Date: ",n]}),o("a",{href:"https://github.com/btarg/requiem-pathfinder-preact",target:"_blank",rel:"noopener noreferrer",className:"text-light",title:"GitHub Repository",children:o("i",{className:"fab fa-github"})})]}),o("div",{className:"col-4 text-center",children:[o(Vt,{title:"QUICK ROLLS",containerClassName:"mb-3"}),o(nf,{})]}),o("div",{className:"col-4 d-flex align-items-center justify-content-end",children:o("a",{href:"https://btarg.github.io/requiem-vault/",target:"_blank",rel:"noopener noreferrer",className:"dark-btn dark-btn-secondary",children:[o("i",{className:"fas fa-book me-2"}),o("span",{className:"me-2",children:"Open Wiki"}),o("i",{className:"fa-solid fa-arrow-up-right-from-square",style:{fontSize:"0.75rem"}})]})})]})})})},co=An({abilities:[],setAbilities:n=>{},subscribe:n=>{},unsubscribe:n=>{}}),rf=({children:n})=>{const[e,t]=z(()=>{try{const l=localStorage.getItem("abilities");return l?JSON.parse(l):[]}catch(l){return console.error("Error loading abilities from localStorage:",l),[]}}),[r,c]=z([]);_e(()=>{console.log("Saving abilities to localStorage:",e),localStorage.setItem("abilities",JSON.stringify(e)),r.forEach(l=>l(e))},[e,r]);const a=l=>{c(u=>[...u,l])},i=l=>{c(u=>u.filter(s=>s!==l))};return o(co.Provider,{value:{abilities:e,setAbilities:t,subscribe:a,unsubscribe:i},children:n})},af=()=>rt(co),of=({isModalOpen:n,closeModal:e,abilityBeingEdited:t,currentAbility:r,setCurrentAbility:c,getActionLabel:a,validateDiceRoll:i,diceError:l,saveAbility:u,removeAbility:s})=>o("div",{className:`modal ${n?"show":""}`,style:{display:n?"block":"none"},tabIndex:-1,children:o("div",{className:"modal-dialog",children:o("div",{className:"modal-content",children:[o("div",{className:"modal-header",children:[o("h5",{className:"modal-title",children:t?"Edit Ability":"Add Ability"}),o("button",{type:"button",className:"btn-close",onClick:e})]}),o("div",{className:"modal-body",children:[o("div",{className:"mb-2",children:[o("label",{className:"form-label",children:"Ability Type"}),o("div",{className:"btn-group w-100",children:[o("button",{type:"button",className:`btn ${r.type===Qe.GENERIC?"btn-danger":"btn-outline-danger"}`,onClick:()=>c({...r,type:Qe.GENERIC}),children:"Generic Ability"}),o("button",{type:"button",className:`btn ${r.type===Qe.WEAPON?"btn-danger":"btn-outline-danger"}`,onClick:()=>c({...r,type:Qe.WEAPON}),children:"Attack"})]})]}),o("div",{className:"mb-2",children:[o("label",{className:"form-label",children:"Name"}),o("input",{type:"text",className:"form-control",placeholder:r.type===Qe.WEAPON?"Attack Name":"Ability Name",value:r.name,onInput:d=>c({...r,name:d.currentTarget.value})})]}),o("label",{className:"form-label",children:"Actions to Use"}),o("div",{className:"input-group mb-2",children:[o("span",{className:"input-group-text",children:a(r.actions)}),o("select",{className:"form-select",value:r.actions,onChange:d=>c({...r,actions:parseInt(d.currentTarget.value)}),children:[o("option",{value:"1",children:"1 Action"}),o("option",{value:"2",children:"2 Actions"}),o("option",{value:"3",children:"3 Actions"}),o("option",{value:"4",children:"Reaction"}),o("option",{value:"0",children:"Free Action"})]})]}),"                        ",o("label",{className:"form-label",children:"Element"}),o("div",{className:"input-group mb-2",children:[o("span",{className:"input-group-text",children:st(r.element)}),o("select",{className:"form-select",value:r.element,onChange:d=>c({...r,element:d.currentTarget.value}),children:Object.values(re).map(d=>o("option",{value:d,children:d},d))})]}),o("label",{className:"form-label",children:"Range"}),o("div",{className:"input-group mb-2",children:[o("span",{className:"input-group-text",children:o("i",{className:"fas fa-crosshairs"})}),o("input",{type:"number",className:"form-control",placeholder:"Range in metres (0 = infinite)",value:r.range||0,min:"0",onInput:d=>c({...r,range:parseInt(d.currentTarget.value)||0})}),o("span",{className:"input-group-text",children:(r.range||0)===0?"Infinite":"m"})]}),o("label",{className:"form-label",children:r.type===Qe.WEAPON?"Attack Roll":"Dice Roll"}),o("div",{className:"input-group mb-2",children:[o("span",{className:"input-group-text",children:o("i",{className:"fas fa-dice-d20"})}),o("input",{type:"text",className:`form-control ${l?"is-invalid":""}`,placeholder:"Dice Roll (e.g. 1d4)",value:r.dice,onInput:d=>{const p=d.currentTarget.value;c({...r,dice:p}),i(p)}}),l&&o("div",{className:"invalid-feedback",children:l})]}),o("div",{className:"alert alert-info py-1 mb-2",children:[o("i",{className:"fas fa-info-circle me-2"}),o("small",{children:"Use [stat] to include a stat's value (e.g., [strength] + 1d6)"})]}),r.type===Qe.WEAPON&&o("div",{className:"mb-3",children:[o("label",{className:"form-label",children:"Additional Attacks"}),o("br",{}),r.additionalAttacks&&r.additionalAttacks.map((d,p)=>o("div",{className:"input-group mb-2",children:[o("span",{className:"input-group-text",children:["Attack ",p+2," Modifier"]}),o("input",{type:"number",className:"form-control",value:d.penalty,onChange:m=>{const _=parseInt(m.currentTarget.value)||0,E=[...r.additionalAttacks];E[p]={...d,penalty:_},c({...r,additionalAttacks:E})}}),o("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>{const m=[...r.additionalAttacks];m.splice(p,1),c({...r,additionalAttacks:m})},children:o("i",{className:"fas fa-times"})})]},p)),o("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>{const d=[...r.additionalAttacks||[]];d.push({penalty:-5}),c({...r,additionalAttacks:d})},children:[o("i",{className:"fas fa-plus me-1"})," Add Attack"]})]}),o("div",{className:"mb-2",children:[o("label",{className:"form-label",children:"Description"}),o("textarea",{className:"form-control",placeholder:"Ability Description",value:r.description,onInput:d=>c({...r,description:d.currentTarget.value})})]})]}),o("div",{className:"modal-footer",children:[o("button",{type:"button",className:"btn btn-secondary",onClick:e,children:[o("i",{className:"fas fa-times me-1"}),"Close"]}),t&&o("button",{type:"button",className:"btn btn-danger",onClick:()=>s(t.id),children:[o("i",{className:"fas fa-trash-alt me-1"}),"Delete"]}),o("button",{type:"button",className:"btn btn-success",onClick:u,children:[o("i",{className:`fas ${t?"fa-save":"fa-plus"} me-1`}),t?"Save Changes":"Add Ability"]})]})]})})}),lf=({abilityToDelete:n,confirmDelete:e,setAbilityToDelete:t})=>o("div",{className:`modal fade ${n?"show":""}`,style:{display:n?"block":"none"},tabIndex:-1,children:o("div",{className:"modal-dialog",children:o("div",{className:"modal-content",children:[o("div",{className:"modal-header",children:[o("h5",{className:"modal-title",children:"Confirm Deletion"}),o("button",{type:"button",className:"btn-close",onClick:()=>t(null),"aria-label":"Close"})]}),o("div",{className:"modal-body",children:"Are you sure you want to delete this ability?"}),o("div",{className:"modal-footer",children:[o("button",{type:"button",className:"btn btn-secondary",onClick:()=>t(null),children:"No, Keep It"}),o("button",{type:"button",className:"btn btn-danger",onClick:e,children:"Yes, Delete It"})]})]})})}),cf=()=>{const{abilities:n,setAbilities:e}=af(),{characterStats:t}=rt(St),{showToast:r}=_s(),c={id:null,name:"",type:Qe.GENERIC,description:"",dice:"",actions:1,element:"Physical",additionalAttacks:[],range:0},[a,i]=z(null),[l,u]=z(c),[s,d]=z(null),[p,m]=z(!1),[_,E]=z(null),[A,C]=z(""),[O,D]=z(null);_e(()=>{console.log("Saving abilities to localStorage:",n),localStorage.setItem("abilities",JSON.stringify(n))},[n]),_e(()=>{const x=[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map(K=>new yt(K));return()=>{x.forEach(K=>{K&&typeof K.dispose=="function"&&K.dispose()})}},[]);const B=N=>{i(a===N?null:N)},I=(N=null)=>{d(N),u(N||c),m(!0)},U=()=>{d(null),m(!1),C("")},V=N=>{E(N)},Q=()=>{if(_){const N=n.find(x=>x.id===_);e(n.filter(x=>x.id!==_)),E(null),U(),r(`${N.name} deleted successfully`,"trash","danger","Deleted")}},X=N=>{if(!N)return!0;const x=Jn(N,t);return C(x.error||""),x.isValid},P=()=>{var N;if(!l.name.trim()){C("Name is required");return}if(((N=l.type)==null?void 0:N.toString())===Qe.WEAPON.toString()&&!l.dice.trim()){C("Attack roll is required for weapons");return}if(!(l.dice&&!X(l.dice))){if(s)e(n.map(x=>x.id===s.id?{...l,id:s.id}:x)),r(`${l.name} updated successfully`,"check","success","Updated"),D(s.id);else{const x={...l,id:Date.now()};e(K=>[...K,x]),r(`${l.name} added successfully`,"plus","success","Added"),D(x.id)}setTimeout(()=>D(null),1e3),console.log("Ability saved:",l),U()}},F=N=>{let x="",K="";switch(N){case 0:x="[free-action]",K="Free Action";break;case 1:x="[one-action]",K="One Action";break;case 2:x="[two-actions]",K="Two Actions";break;case 3:x="[three-actions]",K="Three Actions";break;case 4:x="[reaction]",K="Reaction";break;default:return""}return o("span",{className:"action","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-original-title":K,title:K,role:"img","aria-label":K,children:x})},Y=N=>{N.type===Qe.WEAPON?Z(N):le(N)},Z=(N,x=0)=>{const K=N.dice,{isValid:Ce,error:Se}=Jn(K,t);if(!Ce){r(Se,"exclamation-triangle","danger","Invalid Dice");return}const Le=Qt([],K,t),Ae=N.name;let Te=Le;if(x>0&&N.additionalAttacks&&N.additionalAttacks[x-1]){const fe=N.additionalAttacks[x-1].penalty||0;fe!==0&&(Te=`${Le}${fe<0?fe:`+${fe}`}`)}const Ie=`{{Attack ${x>0?x+1:""}=[[${Te}]]}}`;let ye="";N.element&&(ye=`{{Element=${st(N.element)} ${N.element}}}`);const ge=`&{template:default} {{name=${Ae}}} ${Ie} ${ye} {{Description=${N.description||""}}}`;navigator.clipboard.writeText(ge).then(()=>{const fe=x>0?` (Attack #${x+1})`:"";r(`${Ae}${fe} command copied! Paste it into Roll20.`,"clipboard","success","Copied to clipboard")}).catch(fe=>{console.error("Failed to copy command: ",fe),r("Failed to copy command.","exclamation-triangle","danger","Copy Error")})},le=N=>{let x="";if(N.dice){const{isValid:Ce,error:Se}=Jn(N.dice,t);if(!Ce){r(Se,"exclamation-triangle","danger","Invalid Dice");return}x=`{{Roll=[[${Qt([],N.dice,t)}]]}}`}const K=`&{template:default} {{name=${N.name}}} ${x} {{Description=${N.description||""}}}`;navigator.clipboard.writeText(K).then(()=>{r(`${N.name} command copied! Paste it into Roll20.`,"clipboard","success","Copied to clipboard")}).catch(Ce=>{console.error("Failed to copy command: ",Ce),r("Failed to copy command.","exclamation-triangle","danger","Copy Error")})},Ne=n.filter(N=>{var x;return((x=N.type)==null?void 0:x.toString())===Qe.WEAPON.toString()}),ue=n.filter(N=>{var x;return((x=N.type)==null?void 0:x.toString())===Qe.GENERIC.toString()}),ie=N=>o("li",{className:`list-group-item ${O===N.id?"quantity-flash":""}`,children:[o("div",{className:"d-flex justify-content-between align-items-center",children:[o("div",{className:"d-flex align-items-center overflow-hidden",style:{flex:"1 1 0"},onClick:()=>B(N.id),children:[o("span",{className:"me-2",children:st(N.element)}),o("div",{className:"text-truncate",children:[o("span",{className:"arsenal me-2",children:N.name}),o("span",{className:"action-label hide-on-small me-2",children:F(N.actions)})]})]}),o("div",{className:"d-flex align-items-center justify-content-center",style:{gap:"0.5rem"},children:["                    ",o("i",{className:"fas fa-edit text-primary",onClick:x=>{x.stopPropagation(),I(N)},style:{cursor:"pointer",transition:"opacity 0.3s",opacity:.6,flexShrink:0},onMouseOver:x=>{x.stopPropagation(),x.currentTarget.style.opacity="1"},onMouseOut:x=>{x.stopPropagation(),x.currentTarget.style.opacity="0.6"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Edit Weapon"}),o("div",{className:"btn-group d-flex justify-content-center",children:[o("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>Z(N,0),"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Roll base attack",children:[o("i",{className:"fas fa-dice-d20 me-1"}),o("span",{className:"ms-1 text-truncate",children:Qt(Ne,N.dice,t,!0)})]}),"                        ",N.additionalAttacks.map((x,K)=>o("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>Z(N,K+1),"data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Roll attack #${K+2} (${x.penalty<0?x.penalty:`+${x.penalty}`})`,children:["#",K+2," (",x.penalty<0?x.penalty:`+${x.penalty}`,")"]},K))]})]})]}),a===N.id&&o("div",{className:"ability-details mt-2",children:["                    ",o("div",{className:"d-flex flex-wrap mb-2 justify-content-center gap-1",children:[N.element&&o("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`${N.element} damage type`,children:[st(N.element)," ",N.element]}),o("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Takes ${N.actions} action${N.actions!==1?"s":""} to use`,children:[F(N.actions)," ",N.actions===4?"Reaction":`${N.actions} Action${N.actions!==1?"s":""}`]}),N.additionalAttacks&&N.additionalAttacks.length>0&&o("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Can make ${N.additionalAttacks.length+1} attacks in total`,children:[o("i",{className:"fas fa-hand-fist"})," ",N.additionalAttacks.length+1," Attacks"]}),"                        ",N.range>0&&o("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Can be used up to ${N.range||0} metres away`,children:[o("i",{className:"fas fa-crosshairs"})," ",N.range||0," m"]})]}),N.description&&o("div",{children:[o("p",{className:"py-1 border-bottom h6 arsenal text-center",children:"Description"}),o("p",{className:"mb-2",children:N.description})]})]})]},N.id),ae=N=>o("li",{className:`list-group-item ${O===N.id?"quantity-flash":""}`,children:[o("div",{className:"d-flex justify-content-between align-items-center",children:[o("div",{className:"d-flex align-items-center overflow-hidden",style:{flex:"1 1 0"},onClick:()=>B(N.id),children:[o("span",{className:"me-2",children:st(N.element)}),o("div",{className:"text-truncate",children:[o("span",{className:"arsenal me-2",children:N.name}),o("span",{className:"action-label hide-on-small me-2",children:F(N.actions)})]})]}),o("div",{className:"d-flex align-items-center",style:{gap:"0.5rem"},children:[o("i",{className:"fas fa-edit text-primary",onClick:x=>{x.stopPropagation(),I(N)},style:{cursor:"pointer",transition:"opacity 0.3s",opacity:.6,flexShrink:0},onMouseOver:x=>{x.stopPropagation(),x.currentTarget.style.opacity="1"},onMouseOut:x=>{x.stopPropagation(),x.currentTarget.style.opacity="0.6"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Edit Ability"}),N.dice&&o("button",{className:"btn btn-sm btn-outline-danger",onClick:x=>{x.stopPropagation(),Y(N)},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Roll this ability",children:[o("i",{className:"fas fa-dice-d20 me-1"}),o("span",{className:"text-truncate",children:N.dice})]})]})]}),a===N.id&&o("div",{className:"ability-details mt-2",children:["                    ",o("div",{className:"d-flex flex-wrap mb-2 justify-content-center gap-1",children:[o("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Takes ${N.actions} action${N.actions!==1?"s":""} to use`,children:[F(N.actions)," ",N.actions===4?"Reaction":`${N.actions} Action${N.actions!==1?"s":""}`]}),N.element&&o("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`${N.element} element type`,children:[st(N.element)," ",N.element]}),N.dice&&o("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Dice formula for this ability",children:[o("i",{className:"fas fa-dice-d20"})," ",N.dice]}),N.range>0&&o("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Can be cast up to ${N.range||0} metres away`,children:[o("i",{className:"fas fa-crosshairs"})," ",N.range||0," m"]})]}),N.description&&o("div",{children:[o("p",{className:"py-1 border-bottom h6 arsenal",children:"Description"}),o("p",{className:"mb-0",children:N.description})]})]})]},N.id);return o("div",{className:"abilities-list-container",children:[o(Vt,{title:"ABILITIES & ATTACKS"}),o("div",{className:"d-flex flex-column justify-content-between align-items-center mb-4",children:o("button",{className:"dark-btn dark-btn-primary mt-2 mt-md-0",onClick:()=>I(),style:{width:"160px",height:"60px"},"data-bs-toggle":"tooltip","data-bs-placement":"bottom",title:"Create a new ability or weapon",children:[o("i",{className:"fas fa-plus me-2"})," ",o("span",{children:"Add Ability"})]})}),o("div",{className:"row",children:[o("div",{className:"col-12 col-md-6 mb-3",children:o("div",{className:"card",children:[o("div",{className:"card-header",children:o("h5",{className:"arsenal m-0",children:"Attacks"})}),o("div",{className:"card-body p-0",children:Ne.length>0?o("ul",{className:"list-group list-group-flush",children:Ne.map(N=>ie(N))}):o("div",{className:"text-center p-4",children:o("p",{className:"arsenal mb-0",children:'No weapons found. Click "Add Ability" to create one.'})})})]})}),o("div",{className:"col-12 col-md-6 mb-3",children:o("div",{className:"card",children:[o("div",{className:"card-header",children:o("h5",{className:"arsenal m-0",children:"Generic Abilities"})}),o("div",{className:"card-body p-0",children:ue.length>0?o("ul",{className:"list-group list-group-flush",children:ue.map(N=>ae(N))}):o("div",{className:"text-center p-4",children:o("p",{className:"arsenal mb-0",children:'No abilities found. Click "Add Ability" to create one.'})})})]})})]}),o(of,{isModalOpen:p,closeModal:U,abilityBeingEdited:s,currentAbility:l,setCurrentAbility:u,getActionLabel:F,validateDiceRoll:X,diceError:A,saveAbility:P,removeAbility:V}),o(lf,{abilityToDelete:_,confirmDelete:Q,setAbilityToDelete:E})]})};function uf(){return o("div",{className:"abilities-page container-fluid",children:o(cf,{})})}function df(){return o(xo,{children:o($o,{children:o(rf,{children:o(Cn,{children:o("div",{className:"d-flex flex-column min-vh-100",children:[o(tf,{}),o("main",{className:"flex-grow-1",children:o(oa,{children:[o(Wn,{path:_n,component:Yh}),o(Wn,{path:`${_n}spells`,component:Xh}),o(Wn,{path:`${_n}abilities`,component:uf}),o(Wn,{default:!0,component:Ao})]})}),o(sf,{buildDate:"2025-06-28T14:34:17.499Z"})]})})})})})}Eo(o(df,{}),document.getElementById("app"));
