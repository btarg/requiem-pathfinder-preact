(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function e(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=e(o);fetch(o.href,a)}})();var En,et,Bi,Oe,Kr,Yi,Ki,qi,ir,Gs,zs,Gi,bn={},zi=[],mo=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Nn=Array.isArray;function ce(n,t){for(var e in t)n[e]=t[e];return n}function ar(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function Le(n,t,e){var r,o,a,i={};for(a in t)a=="key"?r=t[a]:a=="ref"?o=t[a]:i[a]=t[a];if(arguments.length>2&&(i.children=arguments.length>3?En.call(arguments,2):e),typeof n=="function"&&n.defaultProps!=null)for(a in n.defaultProps)i[a]==null&&(i[a]=n.defaultProps[a]);return mn(n,i,r,o,null)}function mn(n,t,e,r,o){var a={type:n,props:t,key:e,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++Bi,__i:-1,__u:0};return o==null&&et.vnode!=null&&et.vnode(a),a}function Xe(n){return n.children}function zn(n,t){this.props=n,this.context=t}function Je(n,t){if(t==null)return n.__?Je(n.__,n.__i+1):null;for(var e;t<n.__k.length;t++)if((e=n.__k[t])!=null&&e.__e!=null)return e.__e;return typeof n.type=="function"?Je(n):null}function Qi(n){var t,e;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,t=0;t<n.__k.length;t++)if((e=n.__k[t])!=null&&e.__e!=null){n.__e=n.__c.base=e.__e;break}return Qi(n)}}function Qs(n){(!n.__d&&(n.__d=!0)&&Oe.push(n)&&!ns.__r++||Kr!=et.debounceRendering)&&((Kr=et.debounceRendering)||Yi)(ns)}function ns(){for(var n,t,e,r,o,a,i,c=1;Oe.length;)Oe.length>c&&Oe.sort(Ki),n=Oe.shift(),c=Oe.length,n.__d&&(e=void 0,o=(r=(t=n).__v).__e,a=[],i=[],t.__P&&((e=ce({},r)).__v=r.__v+1,et.vnode&&et.vnode(e),or(t.__P,e,r,t.__n,t.__P.namespaceURI,32&r.__u?[o]:null,a,o??Je(r),!!(32&r.__u),i),e.__v=r.__v,e.__.__k[e.__i]=e,ta(a,e,i),e.__e!=o&&Qi(e)));ns.__r=0}function Xi(n,t,e,r,o,a,i,c,u,s,h){var p,m,_,E,A,C,O=r&&r.__k||zi,L=t.length;for(u=_o(e,t,O,u,L),p=0;p<L;p++)(_=e.__k[p])!=null&&(m=_.__i==-1?bn:O[_.__i]||bn,_.__i=p,C=or(n,_,m,o,a,i,c,u,s,h),E=_.__e,_.ref&&m.ref!=_.ref&&(m.ref&&lr(m.ref,null,_),h.push(_.ref,_.__c||E,_)),A==null&&E!=null&&(A=E),4&_.__u||m.__k===_.__k?u=Ji(_,u,n):typeof _.type=="function"&&C!==void 0?u=C:E&&(u=E.nextSibling),_.__u&=-7);return e.__e=A,u}function _o(n,t,e,r,o){var a,i,c,u,s,h=e.length,p=h,m=0;for(n.__k=new Array(o),a=0;a<o;a++)(i=t[a])!=null&&typeof i!="boolean"&&typeof i!="function"?(u=a+m,(i=n.__k[a]=typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?mn(null,i,null,null,null):Nn(i)?mn(Xe,{children:i},null,null,null):i.constructor==null&&i.__b>0?mn(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=n,i.__b=n.__b+1,c=null,(s=i.__i=go(i,e,u,p))!=-1&&(p--,(c=e[s])&&(c.__u|=2)),c==null||c.__v==null?(s==-1&&(o>h?m--:o<h&&m++),typeof i.type!="function"&&(i.__u|=4)):s!=u&&(s==u-1?m--:s==u+1?m++:(s>u?m--:m++,i.__u|=4))):n.__k[a]=null;if(p)for(a=0;a<h;a++)(c=e[a])!=null&&(2&c.__u)==0&&(c.__e==r&&(r=Je(c)),na(c,c));return r}function Ji(n,t,e){var r,o;if(typeof n.type=="function"){for(r=n.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=n,t=Ji(r[o],t,e));return t}n.__e!=t&&(t&&n.type&&!e.contains(t)&&(t=Je(n)),e.insertBefore(n.__e,t||null),t=n.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function Zi(n,t){return t=t||[],n==null||typeof n=="boolean"||(Nn(n)?n.some(function(e){Zi(e,t)}):t.push(n)),t}function go(n,t,e,r){var o,a,i=n.key,c=n.type,u=t[e];if(u===null&&n.key==null||u&&i==u.key&&c==u.type&&(2&u.__u)==0)return e;if(r>(u!=null&&(2&u.__u)==0?1:0))for(o=e-1,a=e+1;o>=0||a<t.length;){if(o>=0){if((u=t[o])&&(2&u.__u)==0&&i==u.key&&c==u.type)return o;o--}if(a<t.length){if((u=t[a])&&(2&u.__u)==0&&i==u.key&&c==u.type)return a;a++}}return-1}function qr(n,t,e){t[0]=="-"?n.setProperty(t,e??""):n[t]=e==null?"":typeof e!="number"||mo.test(t)?e:e+"px"}function Hn(n,t,e,r,o){var a;t:if(t=="style")if(typeof e=="string")n.style.cssText=e;else{if(typeof r=="string"&&(n.style.cssText=r=""),r)for(t in r)e&&t in e||qr(n.style,t,"");if(e)for(t in e)r&&e[t]==r[t]||qr(n.style,t,e[t])}else if(t[0]=="o"&&t[1]=="n")a=t!=(t=t.replace(qi,"$1")),t=t.toLowerCase()in n||t=="onFocusOut"||t=="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),n.l||(n.l={}),n.l[t+a]=e,e?r?e.u=r.u:(e.u=ir,n.addEventListener(t,a?zs:Gs,a)):n.removeEventListener(t,a?zs:Gs,a);else{if(o=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in n)try{n[t]=e??"";break t}catch{}typeof e=="function"||(e==null||e===!1&&t[4]!="-"?n.removeAttribute(t):n.setAttribute(t,t=="popover"&&e==1?"":e))}}function Gr(n){return function(t){if(this.l){var e=this.l[t.type+n];if(t.t==null)t.t=ir++;else if(t.t<e.u)return;return e(et.event?et.event(t):t)}}}function or(n,t,e,r,o,a,i,c,u,s){var h,p,m,_,E,A,C,O,L,B,M,U,V,Q,X,P,F,Y=t.type;if(t.constructor!=null)return null;128&e.__u&&(u=!!(32&e.__u),a=[c=t.__e=e.__e]),(h=et.__b)&&h(t);t:if(typeof Y=="function")try{if(O=t.props,L="prototype"in Y&&Y.prototype.render,B=(h=Y.contextType)&&r[h.__c],M=h?B?B.props.value:h.__:r,e.__c?C=(p=t.__c=e.__c).__=p.__E:(L?t.__c=p=new Y(O,M):(t.__c=p=new zn(O,M),p.constructor=Y,p.render=bo),B&&B.sub(p),p.props=O,p.state||(p.state={}),p.context=M,p.__n=r,m=p.__d=!0,p.__h=[],p._sb=[]),L&&p.__s==null&&(p.__s=p.state),L&&Y.getDerivedStateFromProps!=null&&(p.__s==p.state&&(p.__s=ce({},p.__s)),ce(p.__s,Y.getDerivedStateFromProps(O,p.__s))),_=p.props,E=p.state,p.__v=t,m)L&&Y.getDerivedStateFromProps==null&&p.componentWillMount!=null&&p.componentWillMount(),L&&p.componentDidMount!=null&&p.__h.push(p.componentDidMount);else{if(L&&Y.getDerivedStateFromProps==null&&O!==_&&p.componentWillReceiveProps!=null&&p.componentWillReceiveProps(O,M),!p.__e&&p.shouldComponentUpdate!=null&&p.shouldComponentUpdate(O,p.__s,M)===!1||t.__v==e.__v){for(t.__v!=e.__v&&(p.props=O,p.state=p.__s,p.__d=!1),t.__e=e.__e,t.__k=e.__k,t.__k.some(function(Z){Z&&(Z.__=t)}),U=0;U<p._sb.length;U++)p.__h.push(p._sb[U]);p._sb=[],p.__h.length&&i.push(p);break t}p.componentWillUpdate!=null&&p.componentWillUpdate(O,p.__s,M),L&&p.componentDidUpdate!=null&&p.__h.push(function(){p.componentDidUpdate(_,E,A)})}if(p.context=M,p.props=O,p.__P=n,p.__e=!1,V=et.__r,Q=0,L){for(p.state=p.__s,p.__d=!1,V&&V(t),h=p.render(p.props,p.state,p.context),X=0;X<p._sb.length;X++)p.__h.push(p._sb[X]);p._sb=[]}else do p.__d=!1,V&&V(t),h=p.render(p.props,p.state,p.context),p.state=p.__s;while(p.__d&&++Q<25);p.state=p.__s,p.getChildContext!=null&&(r=ce(ce({},r),p.getChildContext())),L&&!m&&p.getSnapshotBeforeUpdate!=null&&(A=p.getSnapshotBeforeUpdate(_,E)),P=h,h!=null&&h.type===Xe&&h.key==null&&(P=ea(h.props.children)),c=Xi(n,Nn(P)?P:[P],t,e,r,o,a,i,c,u,s),p.base=t.__e,t.__u&=-161,p.__h.length&&i.push(p),C&&(p.__E=p.__=null)}catch(Z){if(t.__v=null,u||a!=null)if(Z.then){for(t.__u|=u?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;a[a.indexOf(c)]=null,t.__e=c}else for(F=a.length;F--;)ar(a[F]);else t.__e=e.__e,t.__k=e.__k;et.__e(Z,t,e)}else a==null&&t.__v==e.__v?(t.__k=e.__k,t.__e=e.__e):c=t.__e=vo(e.__e,t,e,r,o,a,i,u,s);return(h=et.diffed)&&h(t),128&t.__u?void 0:c}function ta(n,t,e){for(var r=0;r<e.length;r++)lr(e[r],e[++r],e[++r]);et.__c&&et.__c(t,n),n.some(function(o){try{n=o.__h,o.__h=[],n.some(function(a){a.call(o)})}catch(a){et.__e(a,o.__v)}})}function ea(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:Nn(n)?n.map(ea):ce({},n)}function vo(n,t,e,r,o,a,i,c,u){var s,h,p,m,_,E,A,C=e.props,O=t.props,L=t.type;if(L=="svg"?o="http://www.w3.org/2000/svg":L=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),a!=null){for(s=0;s<a.length;s++)if((_=a[s])&&"setAttribute"in _==!!L&&(L?_.localName==L:_.nodeType==3)){n=_,a[s]=null;break}}if(n==null){if(L==null)return document.createTextNode(O);n=document.createElementNS(o,L,O.is&&O),c&&(et.__m&&et.__m(t,a),c=!1),a=null}if(L==null)C===O||c&&n.data==O||(n.data=O);else{if(a=a&&En.call(n.childNodes),C=e.props||bn,!c&&a!=null)for(C={},s=0;s<n.attributes.length;s++)C[(_=n.attributes[s]).name]=_.value;for(s in C)if(_=C[s],s!="children"){if(s=="dangerouslySetInnerHTML")p=_;else if(!(s in O)){if(s=="value"&&"defaultValue"in O||s=="checked"&&"defaultChecked"in O)continue;Hn(n,s,null,_,o)}}for(s in O)_=O[s],s=="children"?m=_:s=="dangerouslySetInnerHTML"?h=_:s=="value"?E=_:s=="checked"?A=_:c&&typeof _!="function"||C[s]===_||Hn(n,s,_,C[s],o);if(h)c||p&&(h.__html==p.__html||h.__html==n.innerHTML)||(n.innerHTML=h.__html),t.__k=[];else if(p&&(n.innerHTML=""),Xi(t.type=="template"?n.content:n,Nn(m)?m:[m],t,e,r,L=="foreignObject"?"http://www.w3.org/1999/xhtml":o,a,i,a?a[0]:e.__k&&Je(e,0),c,u),a!=null)for(s=a.length;s--;)ar(a[s]);c||(s="value",L=="progress"&&E==null?n.removeAttribute("value"):E!=null&&(E!==n[s]||L=="progress"&&!E||L=="option"&&E!=C[s])&&Hn(n,s,E,C[s],o),s="checked",A!=null&&A!=n[s]&&Hn(n,s,A,C[s],o))}return n}function lr(n,t,e){try{if(typeof n=="function"){var r=typeof n.__u=="function";r&&n.__u(),r&&t==null||(n.__u=n(t))}else n.current=t}catch(o){et.__e(o,e)}}function na(n,t,e){var r,o;if(et.unmount&&et.unmount(n),(r=n.ref)&&(r.current&&r.current!=n.__e||lr(r,null,t)),(r=n.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(a){et.__e(a,t)}r.base=r.__P=null}if(r=n.__k)for(o=0;o<r.length;o++)r[o]&&na(r[o],t,e||typeof n.type!="function");e||ar(n.__e),n.__c=n.__=n.__e=void 0}function bo(n,t,e){return this.constructor(n,e)}function yo(n,t,e){var r,o,a,i;t==document&&(t=document.documentElement),et.__&&et.__(n,t),o=(r=!1)?null:t.__k,a=[],i=[],or(t,n=t.__k=Le(Xe,null,[n]),o||bn,bn,t.namespaceURI,o?null:t.firstChild?En.call(t.childNodes):null,a,o?o.__e:t.firstChild,r,i),ta(a,n,i)}function zr(n,t,e){var r,o,a,i,c=ce({},n.props);for(a in n.type&&n.type.defaultProps&&(i=n.type.defaultProps),t)a=="key"?r=t[a]:a=="ref"?o=t[a]:c[a]=t[a]==null&&i!=null?i[a]:t[a];return arguments.length>2&&(c.children=arguments.length>3?En.call(arguments,2):e),mn(n.type,c,r||n.key,o||n.ref,null)}function An(n){function t(e){var r,o;return this.getChildContext||(r=new Set,(o={})[t.__c]=this,this.getChildContext=function(){return o},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(a){this.props.value!=a.value&&r.forEach(function(i){i.__e=!0,Qs(i)})},this.sub=function(a){r.add(a);var i=a.componentWillUnmount;a.componentWillUnmount=function(){r&&r.delete(a),i&&i.call(a)}}),e.children}return t.__c="__cC"+Gi++,t.__=n,t.Provider=t.__l=(t.Consumer=function(e,r){return e.children(r)}).contextType=t,t}En=zi.slice,et={__e:function(n,t,e,r){for(var o,a,i;t=t.__;)if((o=t.__c)&&!o.__)try{if((a=o.constructor)&&a.getDerivedStateFromError!=null&&(o.setState(a.getDerivedStateFromError(n)),i=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(n,r||{}),i=o.__d),i)return o.__E=o}catch(c){n=c}throw n}},Bi=0,zn.prototype.setState=function(n,t){var e;e=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=ce({},this.state),typeof n=="function"&&(n=n(ce({},e),this.props)),n&&ce(e,n),n!=null&&this.__v&&(t&&this._sb.push(t),Qs(this))},zn.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),Qs(this))},zn.prototype.render=Xe,Oe=[],Yi=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ki=function(n,t){return n.__v.__b-t.__v.__b},ns.__r=0,qi=/(PointerCapture)$|Capture$/i,ir=0,Gs=Gr(!1),zs=Gr(!0),Gi=0;var Eo=0;function l(n,t,e,r,o,a){t||(t={});var i,c,u=t;if("ref"in u)for(c in u={},t)c=="ref"?i=t[c]:u[c]=t[c];var s={type:n,props:u,key:e,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Eo,__i:-1,__u:0,__source:o,__self:a};if(typeof n=="function"&&(i=n.defaultProps))for(c in i)u[c]===void 0&&(u[c]=i[c]);return et.vnode&&et.vnode(s),s}function No(){return l("section",{children:[l("h1",{children:"404: Not Found"}),l("p",{children:"It's gone :("})]})}var Re,ct,ks,Qr,ss=0,sa=[],mt=et,Xr=mt.__b,Jr=mt.__r,Zr=mt.diffed,ti=mt.__c,ei=mt.unmount,ni=mt.__;function Tn(n,t){mt.__h&&mt.__h(ct,n,ss||t),ss=0;var e=ct.__H||(ct.__H={__:[],__h:[]});return n>=e.__.length&&e.__.push({}),e.__[n]}function z(n){return ss=1,cr(ia,n)}function cr(n,t,e){var r=Tn(Re++,2);if(r.t=n,!r.__c&&(r.__=[ia(void 0,t),function(c){var u=r.__N?r.__N[0]:r.__[0],s=r.t(u,c);u!==s&&(r.__N=[s,r.__[1]],r.__c.setState({}))}],r.__c=ct,!ct.__f)){var o=function(c,u,s){if(!r.__c.__H)return!0;var h=r.__c.__H.__.filter(function(m){return!!m.__c});if(h.every(function(m){return!m.__N}))return!a||a.call(this,c,u,s);var p=r.__c.props!==c;return h.forEach(function(m){if(m.__N){var _=m.__[0];m.__=m.__N,m.__N=void 0,_!==m.__[0]&&(p=!0)}}),a&&a.call(this,c,u,s)||p};ct.__f=!0;var a=ct.shouldComponentUpdate,i=ct.componentWillUpdate;ct.componentWillUpdate=function(c,u,s){if(this.__e){var h=a;a=void 0,o(c,u,s),a=h}i&&i.call(this,c,u,s)},ct.shouldComponentUpdate=o}return r.__N||r.__}function _t(n,t){var e=Tn(Re++,3);!mt.__s&&dr(e.__H,t)&&(e.__=n,e.u=t,ct.__H.__h.push(e))}function ra(n,t){var e=Tn(Re++,4);!mt.__s&&dr(e.__H,t)&&(e.__=n,e.u=t,ct.__h.push(e))}function Ut(n){return ss=5,ur(function(){return{current:n}},[])}function ur(n,t){var e=Tn(Re++,7);return dr(e.__H,t)&&(e.__=n(),e.__H=t,e.__h=n),e.__}function fe(n){var t=ct.context[n.__c],e=Tn(Re++,9);return e.c=n,t?(e.__==null&&(e.__=!0,t.sub(ct)),t.props.value):n.__}function Ao(){for(var n;n=sa.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(Qn),n.__H.__h.forEach(Xs),n.__H.__h=[]}catch(t){n.__H.__h=[],mt.__e(t,n.__v)}}mt.__b=function(n){ct=null,Xr&&Xr(n)},mt.__=function(n,t){n&&t.__k&&t.__k.__m&&(n.__m=t.__k.__m),ni&&ni(n,t)},mt.__r=function(n){Jr&&Jr(n),Re=0;var t=(ct=n.__c).__H;t&&(ks===ct?(t.__h=[],ct.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.u=e.__N=void 0})):(t.__h.forEach(Qn),t.__h.forEach(Xs),t.__h=[],Re=0)),ks=ct},mt.diffed=function(n){Zr&&Zr(n);var t=n.__c;t&&t.__H&&(t.__H.__h.length&&(sa.push(t)!==1&&Qr===mt.requestAnimationFrame||((Qr=mt.requestAnimationFrame)||To)(Ao)),t.__H.__.forEach(function(e){e.u&&(e.__H=e.u),e.u=void 0})),ks=ct=null},mt.__c=function(n,t){t.some(function(e){try{e.__h.forEach(Qn),e.__h=e.__h.filter(function(r){return!r.__||Xs(r)})}catch(r){t.some(function(o){o.__h&&(o.__h=[])}),t=[],mt.__e(r,e.__v)}}),ti&&ti(n,t)},mt.unmount=function(n){ei&&ei(n);var t,e=n.__c;e&&e.__H&&(e.__H.__.forEach(function(r){try{Qn(r)}catch(o){t=o}}),e.__H=void 0,t&&mt.__e(t,e.__v))};var si=typeof requestAnimationFrame=="function";function To(n){var t,e=function(){clearTimeout(r),si&&cancelAnimationFrame(t),setTimeout(n)},r=setTimeout(e,100);si&&(t=requestAnimationFrame(e))}function Qn(n){var t=ct,e=n.__c;typeof e=="function"&&(n.__c=void 0,e()),ct=t}function Xs(n){var t=ct;n.__c=n.__(),ct=t}function dr(n,t){return!n||n.length!==t.length||t.some(function(e,r){return e!==n[r]})}function ia(n,t){return typeof t=="function"?t(n):t}let $e,pn;const Co=(n,t)=>{if($e=void 0,t&&t.type==="click"){if(t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||t.button!==0)return n;const e=t.target.closest("a[href]"),r=e&&e.getAttribute("href");if(!e||e.origin!=location.origin||/^#/.test(r)||!/^(_?self)?$/i.test(e.target)||pn&&(typeof pn=="string"?!r.startsWith(pn):!pn.test(r)))return n;$e=!0,t.preventDefault(),t=e.href.replace(location.origin,"")}else typeof t=="string"?$e=!0:t&&t.url?($e=!t.replace,t=t.url):t=location.pathname+location.search;return $e===!0?history.pushState(null,"",t):$e===!1&&history.replaceState(null,"",t),t},wo=(n,t,e={})=>{n=n.split("/").filter(Boolean),t=(t||"").split("/").filter(Boolean),e.params||(e.params={});for(let r=0,o,a;r<Math.max(n.length,t.length);r++){let[,i,c,u]=(t[r]||"").match(/^(:?)(.*?)([+*?]?)$/);if(o=n[r],!(!i&&c==o)){if(!i&&o&&u=="*"){e.rest="/"+n.slice(r).map(decodeURIComponent).join("/");break}if(!i||!o&&u!="?"&&u!="*")return;if(a=u=="+"||u=="*",a?o=n.slice(r).map(decodeURIComponent).join("/")||void 0:o&&(o=decodeURIComponent(o)),e.params[c]=o,c in e||(e[c]=o),a)break}}return e};function Cn(n){const[t,e]=cr(Co,n.url||location.pathname+location.search);n.scope&&(pn=n.scope);const r=$e===!0,o=ur(()=>{const a=new URL(t,location.origin),i=a.pathname.replace(/\/+$/g,"")||"/";return{url:t,path:i,query:Object.fromEntries(a.searchParams),route:(c,u)=>e({url:c,replace:u}),wasPush:r}},[t]);return ra(()=>(addEventListener("click",e),addEventListener("popstate",e),()=>{removeEventListener("click",e),removeEventListener("popstate",e)}),[]),Le(Cn.ctx.Provider,{value:o},n.children)}const So=Promise.resolve();function aa(n){const[t,e]=cr(P=>P+1,0),{url:r,query:o,wasPush:a,path:i}=hr(),{rest:c=i,params:u={}}=fe(ri),s=Ut(!1),h=Ut(i),p=Ut(0),m=Ut(),_=Ut(),E=Ut(),A=Ut(!1),C=Ut();C.current=!1;let O,L,B;Zi(n.children).some(P=>{if(wo(c,P.props.path,B={...P.props,path:c,query:o,params:u,rest:""}))return O=zr(P,B);P.props.default&&(L=zr(P,B))});let M=O||L;const U=m.current&&m.current.__u&Fn&&m.current.__u&Vn,V=m.current&&m.current.__h,Q=ur(()=>{_.current=m.current,m.current=Le(ri.Provider,{value:B},M);const P=_.current&&_.current.props.children;return!P||!M||M.type!==P.type||M.props.component!==P.props.component?(this.__v&&this.__v.__k&&this.__v.__k.reverse(),p.current++,!0):!1},[r,JSON.stringify(B)]);U?(m.current.__u|=Fn,m.current.__u|=Vn):V&&(m.current.__h=!0);const X=_.current;return _.current=null,this.__c=(P,F)=>{C.current=!0,_.current=X,n.onLoadStart&&n.onLoadStart(r),s.current=!0;let Y=p.current;P.then(()=>{Y===p.current&&(_.current=null,m.current&&(F.__h&&(m.current.__h=F.__h),F.__u&Vn&&(m.current.__u|=Vn),F.__u&Fn&&(m.current.__u|=Fn)),So.then(e))})},ra(()=>{const P=this.__v&&this.__v.__e;if(C.current){!A.current&&!E.current&&(E.current=P);return}!A.current&&E.current&&(E.current!==P&&E.current.remove(),E.current=null),A.current=!0,h.current!==i&&(a&&scrollTo(0,0),n.onRouteChange&&n.onRouteChange(r),h.current=i),n.onLoadEnd&&s.current&&n.onLoadEnd(r),s.current=!1},[i,a,t]),Q?[Le(xs,{r:m}),Le(xs,{r:_})]:Le(xs,{r:m})}const Fn=32,Vn=128,xs=({r:n})=>n.current;aa.Provider=Cn;Cn.ctx=An({});const ri=An({}),Wn=n=>Le(n.component,n),hr=()=>fe(Cn.ctx),ii=et.__b;et.__b=n=>{n.type&&n.type._forwarded&&n.ref&&(n.props.ref=n.ref,n.ref=null),ii&&ii(n)};const ai=et.__e;et.__e=(n,t,e)=>{if(n&&n.then){let r=t;for(;r=r.__;)if(r.__c&&r.__c.__c)return t.__e==null&&(t.__c.__z=[e.__e],t.__e=e.__e,t.__k=e.__k),t.__k||(t.__k=[]),r.__c.__c(n,t)}ai&&ai(n,t,e)};const jt={PHYSICAL:"physical",MAGICAL:"magical",UTILITY:"utility"},$t={OFFENSIVE:"offensive",DEFENSIVE:"defensive",UTILITY:"utility",CORE:"core"},wt={currentHealth:{defaultValue:10,label:"Current HP",type:$t.CORE},maxHealth:{defaultValue:10,label:"Max HP",type:$t.CORE},currentMp:{defaultValue:10,label:"Current MP",type:$t.CORE},maxMp:{defaultValue:10,label:"Max MP",type:$t.CORE},tempHealth:{defaultValue:0,label:"Temporary HP",type:$t.CORE},strength:{name:"Strength",shortName:"STR",icon:"fa-fist-raised",color:"danger",description:"Increases physical attack damage unless resisted/absorbed/immune. Applied as flat bonus to Physical damage rolls.",category:jt.PHYSICAL,type:$t.OFFENSIVE,defaultValue:0,displayModifier:!0,affectsRolls:!0,damageType:"physical"},vitality:{name:"Vitality",shortName:"VIT",icon:"fa-shield-alt",color:"primary-emphasis",description:"Reduces incoming Physical damage when attack is resisted. Does not affect neutral or absorbed damage.",category:jt.PHYSICAL,type:$t.DEFENSIVE,defaultValue:0,displayModifier:!0,damageReduction:!0,damageType:"physical"},magic:{name:"Magic",shortName:"MAG",icon:"fa-hand-sparkles",color:"success-emphasis",description:"Increases magical attack damage unless resisted/absorbed/immune. Applied as flat bonus.",category:jt.MAGICAL,type:$t.OFFENSIVE,defaultValue:0,displayModifier:!0,affectsRolls:!0,damageType:"magical"},spirit:{name:"Spirit",shortName:"SPR",icon:"fa-shield-heart",color:"info",description:"Reduces incoming magical damage when attack is resisted. Does not affect neutral or absorbed damage.",category:jt.MAGICAL,type:$t.DEFENSIVE,defaultValue:0,displayModifier:!0,damageReduction:!0,damageType:"magical"},speed:{name:"Speed",shortName:"SPD",icon:"fa-running",color:"secondary-emphasis",description:"Bonus to Initiative and movement distance per turn",category:jt.PHYSICAL,type:$t.UTILITY,defaultValue:0,displayModifier:!0,derived:{initiative:n=>n,movement:n=>n}},luck:{name:"Luck",shortName:"LCK",icon:"fa-clover",color:"success",description:"Affects spell draws and knockdown resistance",category:jt.MAGICAL,type:$t.UTILITY,defaultValue:0,displayModifier:!0,derived:{maxExtraDrawDice:n=>Math.min(Math.floor(n),4),knockdownBonus:n=>n}},perception:{name:"Perception",shortName:"PER",icon:"fa-eye",color:"danger-emphasis",description:"Used for Scanning for an enemy's Elemental Affinities, for noticing weak points, hidden treasure, hidden enemies etc.",category:jt.UTILITY,type:$t.UTILITY,defaultValue:0,displayModifier:!0},wisdom:{name:"Wisdom",shortName:"WIS",icon:"fa-book-open",color:"warning-emphasis",description:"Used for Recalling Knowledge of any kind: essentially every Pathfinder 2E lore skill rolled into one. Also useful in social situations.",category:jt.UTILITY,type:$t.UTILITY,defaultValue:0,displayModifier:!0},influence:{name:"Influence",shortName:"INF",icon:"fa-comments",color:"warning",description:"Used for social rolls, such as Deception, Intimidation, Performance, Diplomacy and Persuasion.",category:jt.UTILITY,type:$t.UTILITY,defaultValue:0,displayModifier:!0}},dn={CANTRIP_AND_FIRST:1,SECOND_AND_THIRD:2,FOURTH_AND_FIFTH:3,SIXTH_AND_SEVENTH:4,EIGHTH_TO_TENTH:5},$s=n=>n<=1?dn.CANTRIP_AND_FIRST:n<=3?dn.SECOND_AND_THIRD:n<=5?dn.FOURTH_AND_FIFTH:n<=7?dn.SIXTH_AND_SEVENTH:dn.EIGHTH_TO_TENTH,Fe=An({characterStats:{},setCharacterStats:n=>{}});function ko({children:n}){const t=()=>{const a=localStorage.getItem("characterStats");if(a)return JSON.parse(a);{const i={};for(const c in wt)i[c]=wt[c].defaultValue||0;return i}},[e,r]=z(t);_t(()=>{localStorage.setItem("characterStats",JSON.stringify(e))},[e]);const o={characterStats:e,setCharacterStats:r};return l(Fe.Provider,{value:o,children:n})}const oa=An({spells:[],setSpells:n=>{},getLinkedStats:()=>[],subscribe:n=>{},unsubscribe:n=>{}}),xo=({children:n})=>{const[t,e]=z(()=>{const u=localStorage.getItem("spells");return u?JSON.parse(u):[]}),[r,o]=z([]);_t(()=>{localStorage.setItem("spells",JSON.stringify(t)),r.forEach(u=>u(t))},[t]);const a=()=>t.filter(u=>u.isLinked).map(u=>u.linkedStat),i=u=>{o(s=>[...s,u])},c=u=>{o(s=>s.filter(h=>h!==u))};return l(oa.Provider,{value:{spells:t,setSpells:e,getLinkedStats:a,subscribe:i,unsubscribe:c},children:n})},wn=()=>fe(oa),Qt=Object.freeze({WEAPON:"Weapon",GENERIC:"Generic"}),rt=Object.freeze({PHYS:"Physical",FIRE:"Fire",ICE:"Cold",ELEC:"Electricity",FORCE:"Force",PSY:"Psychic",CHEM:"Chemical",RAD:"Radiant",VOID:"Void",TRUE:"Almighty"}),pt=Object.freeze({WEAK:"Weak",NEUTRAL:"Neutral",RESIST:"Resist",IMMUNE:"Immune",ABSORB:"Drain",REFLECT:"Reflect"}),$o={[rt.PHYS]:"⚔️",[rt.CHEM]:"🧪",[rt.ICE]:"❄️",[rt.ELEC]:"⚡",[rt.FIRE]:"🔥",[rt.FORCE]:"💥",[rt.RAD]:"✨",[rt.VOID]:"🌌",[rt.PSY]:"🌀"},se=n=>$o[n]||"☄️",Oo=n=>({[rt.PHYS]:"Phys",[rt.CHEM]:"Chem",[rt.ICE]:"Ice",[rt.ELEC]:"Elec",[rt.FIRE]:"Fire",[rt.FORCE]:"Force",[rt.RAD]:"Rad",[rt.VOID]:"Void",[rt.PSY]:"Psy",[rt.TRUE]:"???"})[n]||"???",Lo=n=>({[pt.WEAK]:"WK",[pt.NEUTRAL]:"-",[pt.RESIST]:"RES",[pt.IMMUNE]:"NULL",[pt.ABSORB]:"DR",[pt.REFLECT]:"RFL"})[n]||"???",Ve=({title:n,titleClassName:t="text-danger",lineColor:e="var(--bs-danger)",lineThickness:r="1px",containerClassName:o="mb-3",lineMaxWidth:a="none"})=>{const i={height:r,maxWidth:a};return l("div",{className:o,children:l("div",{className:"d-flex align-items-center justify-content-center",children:[l("div",{className:"flex-grow-1",style:{...i,backgroundImage:`linear-gradient(to right, transparent, ${e})`}}),l("h5",{className:`${t} mx-3 my-0 arsenal`,children:n}),l("div",{className:"flex-grow-1",style:{...i,backgroundImage:`linear-gradient(to left, transparent, ${e})`}})]})})},Do="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%20style='height:%20512px;%20width:%20512px;'%3e%3cg%20class=''%20transform='translate(0,0)'%20style=''%3e%3cpath%20d='m19.36%2019.457-.38%2027.84%20267.127%20154.75-58.703%2019.916%2057.602%2019.36L142.12%20383.546l-19.214-19.213-51.47%20114.324%20123.125-43.482-17.492-18.95%20151.868-151.87%2012.433%2043.078%2022.976-68.5%2056.675-16.565-57.475-15.492-22.934-79.828-14.145%2048.266-268.65-155.41-38.454-.446zM370.614%2081.94c-4.53.02-9.035.12-13.51.302-3.275.134-6.528.32-9.76.547l31.25%20108.786%20104.05%2028.045c6.204-39.085%208.902-80.275%209.18-120.075C456.37%2088.82%20415.098%2082.257%20375.15%2081.95a403.83%20403.83%200%200%200-4.537-.01zm-36.87%202.1c-31.99%203.653-61.013%2012.153-83.014%2025.87l64.493%2037.31%2018.52-63.18zm148.18%20139.997L378.958%20254.13l-38.93%20116.054-20.268-70.225-39.07%2039.067c18.814%2035.364%2046.1%2062.287%2086.175%2077.604%2047.473-17.834%2078.566-62.795%2098.014-121.6%207.323-22.14%2012.905-46.11%2017.042-70.993z'%20fill='%23fff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",Mo="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%20style='height:%20512px;%20width:%20512px;'%3e%3cg%20class=''%20transform='translate(0,0)'%20style=''%3e%3cpath%20d='M362.188%2017.998c-12.9%2065.825-49.788%20140.505-98.616%20197.37L352%20224l-89.377%2019.414%2052.197%2075.27-71.111-56.364L224%20336l-8.576-73.182%202.812-2.779c-45.221%2040.71-35.888%2074.86.702%2096.49%206.775%204.005%2016.257%209.046%2027.38%208.7%2058.243-1.813%2093.255%2035.012%20126.575%2076.199%2018.234%2022.54%2048.35%2030.059%2073.529%2044.246%2052.44%2029.548%2067.894-32.667%2014.767-53.445l-70.677-111.036c-11.42-53.08%2052.186-171.824%20103.49-248.37V17.997zM92.454%2023.424v32.17l32.799%2032.79%208.043-24.126zM78.578%2067.352c-.233-.026-.57.037-1.224.199-1.31.323-3.41%201.482-5.075%203.146-1.664%201.664-2.823%203.763-3.146%205.073-.266%201.074-.207%201.3.012%201.61l120.228%20120.208%203.275-6.55%206.545-3.272L78.97%2067.563c-.123-.086-.24-.195-.39-.211zM21.162%2087.029%2062%20127.86l24.13-8.043-30.335-30.33-.397-.396-.343-.442a17.99%2017.99%200%200%201-1.112-1.619zm213.563%20103.098-28.663%2014.326-14.33%2028.654%2038.264%2015.303%2020.096-19.869z'%20fill='%23fff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",Io="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%20style='height:%20512px;%20width:%20512px;'%3e%3cg%20class=''%20transform='translate(0,0)'%20style=''%3e%3cpath%20d='M372.48%2031.215c-77.65%200-116.48%2065.73-116.48%2065.73s-38.83-65.72-116.48-65.72c-37.14%200-107.77%2033.72-107.77%20125.13%200%20161.24%20224.25%20324.43%20224.25%20324.43s224.25-163.19%20224.25-324.43c0-91.42-70.63-125.13-107.77-125.14zm-145.492%20115.02h60.698v79.415h79.238v60.7h-79.238v79.884h-60.698V286.35h-80.064v-60.7h80.064z'%20fill='%23fff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e";function Ro(){const{characterStats:n,setCharacterStats:t}=fe(Fe),[e,r]=z(null),[o,a]=z(typeof window<"u"?window.innerWidth:1024);_t(()=>{const m=()=>a(window.innerWidth);return window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]);let i=o<1080;_t(()=>{let m=!n.affinities;if(n.affinities){const _=Object.keys(rt)[0];_&&n.affinities[rt[_]]&&typeof n.affinities[rt[_]]!="object"&&(m=!0)}if(m){const _={};Object.values(rt).forEach(E=>{_[E]={type:pt.NEUTRAL,mastered:!1}}),t(E=>({...E,affinities:_}))}},[n.affinities,t]);const c=m=>{r(_=>_===m?null:m)},u=(m,_)=>{t(E=>{var A;return{...E,affinities:{...E.affinities,[m]:{...((A=E.affinities)==null?void 0:A[m])||{type:pt.NEUTRAL,mastered:!1},type:_}}}})},s=m=>{t(_=>{var E,A,C;return{..._,affinities:{..._.affinities,[m]:{...((E=_.affinities)==null?void 0:E[m])||{type:pt.NEUTRAL,mastered:!1},mastered:!((C=(A=_.affinities)==null?void 0:A[m])!=null&&C.mastered)}}}})},h=m=>{switch(m){case pt.WEAK:return"danger";case pt.RESIST:return"info";case pt.IMMUNE:return"warning";case pt.ABSORB:return"success";case pt.REFLECT:return"primary";default:return"secondary"}},p=m=>{const _={width:"1.25em",height:"1.25em",color:"white"};switch(m){case pt.WEAK:return l("img",{src:Mo,alt:"Weak",style:_});case pt.RESIST:return l("i",{className:"fas fa-shield-alt",style:_});case pt.IMMUNE:return l("i",{className:"fas fa-ban",style:_});case pt.ABSORB:return l("img",{src:Io,alt:"Absorb",style:_});case pt.REFLECT:return l("img",{src:Do,alt:"Reflect",style:_});default:return l("i",{className:"fas fa-minus",style:_})}};return!n.affinities||typeof n.affinities[Object.values(rt)[0]]!="object"?l("div",{className:"p-3",children:"Loading affinities..."}):l("div",{className:"affinity-tracker p-3",children:[l(Ve,{title:"ELEMENTAL AFFINITIES"}),l("div",{className:"element-grid mt-4 gap-1",children:Object.values(rt).filter(m=>m!=="Almighty").map(m=>{const _=n.affinities[m]||{type:pt.NEUTRAL,mastered:!1};return l("div",{className:`element-item clickable-card mb-3 ${_.mastered?"gold-bg":""} ${e===m?"editing":""}`,onClick:()=>c(m),children:[_.mastered&&l("div",{className:"mastery-watermark",children:"MASTERY"}),l("div",{className:"element-header d-flex align-items-center justify-content-between mb-1",children:[l("div",{className:"d-flex align-items-center element-info",children:[l("span",{className:"element-icon",children:se(m)}),l("span",{className:"arsenal element-name",children:[i?Oo(m):m,":"]}),l("span",{className:`arsenal ms-1 affinity-name text-${h(_.type)}`,children:i?Lo(_.type):_.type})]}),l("button",{className:`mastery-toggle-button ${_.mastered?"mastered":""}`,onClick:E=>{E.stopPropagation(),s(m)},title:_.mastered?"Disable Mastery":"Enable Mastery",children:l("i",{className:`${_.mastered?"fas fa-star":"fa-regular fa-star"}`})})]}),e===m&&l("div",{className:"affinity-buttons btn-group d-flex mt-2",children:Object.values(pt).map(E=>l("button",{className:`btn btn-${_.type===E?h(E):"dark inactive-btn"}`,onClick:A=>{A.stopPropagation(),u(m,E)},title:E,children:p(E)},E))})]},m)})})]})}var Xn={exports:{}},Po=Xn.exports,oi;function Ho(){return oi||(oi=1,function(n,t){(function(e,r){n.exports=r()})(Po,function(){return function(e){var r={};function o(a){if(r[a])return r[a].exports;var i=r[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=e,o.c=r,o.d=function(a,i,c){o.o(a,i)||Object.defineProperty(a,i,{enumerable:!0,get:c})},o.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,i){if(1&i&&(a=o(a)),8&i||4&i&&typeof a=="object"&&a&&a.__esModule)return a;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:a}),2&i&&typeof a!="string")for(var u in a)o.d(c,u,(function(s){return a[s]}).bind(null,u));return c},o.n=function(a){var i=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(i,"a",i),i},o.o=function(a,i){return Object.prototype.hasOwnProperty.call(a,i)},o.p="",o(o.s=0)}([function(e,r,o){function a(i){for(var c in i)r.hasOwnProperty(c)||(r[c]=i[c])}Object.defineProperty(r,"__esModule",{value:!0}),a(o(1)),a(o(3))},function(e,r,o){Object.defineProperty(r,"__esModule",{value:!0});const a=o(2);r.DiceRoller=class{constructor(i,c=1e3){this.randFunction=Math.random,this.maxRollCount=1e3,i&&(this.randFunction=i),this.maxRollCount=c}parse(i){return a.parse(i)}roll(i){const c=a.parse(i);return this.rollType(c)}rollValue(i){return this.roll(i).value}rollParsed(i){return this.rollType(i)}rollType(i){let c;switch(i.type){case"diceExpression":c=this.rollDiceExpr(i);break;case"group":c=this.rollGroup(i);break;case"die":c=this.rollDie(i);break;case"expression":c=this.rollExpression(i);break;case"mathfunction":c=this.rollFunction(i);break;case"inline":c=this.rollType(i.expr);break;case"number":c=Object.assign(Object.assign({},i),{success:!1,valid:!0,order:0});break;default:throw new Error(`Unable to render ${i.type}`)}return i.label&&(c.label=i.label),c}rollDiceExpr(i){const c=this.rollType(i.head),u=[c],s=[],h=i.ops.reduce((p,m,_)=>{const E=this.rollType(m.tail);switch(E.order=_,u.push(E),s.push(m.op),m.op){case"+":return p+E.value;case"-":return p-E.value;default:return p}},c.value);return{dice:u,ops:s,success:!1,type:"diceexpressionroll",valid:!0,value:h,order:0}}rollGroup(i){let c=i.rolls.map((u,s)=>Object.assign(Object.assign({},this.rollType(u)),{order:s}));if(i.mods){const u=i.mods,s=h=>{const p=u.some(m=>["failure","success"].includes(m.type));return h=u.reduce((m,_)=>this.applyGroupMod(m,_),h),p&&(h=h.map(m=>(m.success||(m.value=0,m.success=!0),m))),h};if(c.length===1&&["die","diceexpressionroll"].includes(c[0].type)){const h=c[0];let p=h.type==="die"?h.rolls:h.dice.filter(m=>m.type!=="number").reduce((m,_)=>[...m,..._.type==="die"?_.rolls:_.dice],[]);p=s(p),h.value=p.reduce((m,_)=>_.valid?m+_.value:m,0)}else c=s(c)}return{dice:c,success:!1,type:"grouproll",valid:!0,value:c.reduce((u,s)=>s.valid?u+s.value:u,0),order:0}}rollDie(i){const c=this.rollType(i.count);if(c.value>this.maxRollCount)throw new Error("Entered number of dice too large.");let u,s;i.die.type==="fate"?(s={type:"fate",success:!1,valid:!1,value:0,order:0},u=Array.from({length:c.value},(m,_)=>this.generateFateRoll(_))):(s=this.rollType(i.die),u=Array.from({length:c.value},(m,_)=>this.generateDiceRoll(s.value,_))),i.mods&&(u=i.mods.reduce((m,_)=>this.applyMod(m,_),u)),i.targets&&(u=i.targets.reduce((m,_)=>this.applyMod(m,_),u).map(m=>(m.success||(m.value=0,m.success=!0),m)));let h=!1,p=0;if(i.match){const m=i.match,_=u.reduce((A,C)=>A.set(C.roll,(A.get(C.roll)||0)+1),new Map),E=new Set(Array.from(_.entries()).filter(([A,C])=>C>=m.min.value).filter(([A])=>!(m.mod&&m.expr)||this.successTest(m.mod,this.rollType(m.expr).value,A)).map(([A])=>A));u.filter(A=>E.has(A.roll)).forEach(A=>A.matched=!0),m.count&&(h=!0,p=E.size)}return i.sort&&(u=this.applySort(u,i.sort)),{count:c,die:s,rolls:u,success:!1,type:"die",valid:!0,value:h?p:u.reduce((m,_)=>_.valid?m+_.value:m,0),order:0,matched:h}}rollExpression(i){const c=this.rollType(i.head),u=[c],s=[],h=i.ops.reduce((p,m)=>{const _=this.rollType(m.tail);switch(u.push(_),s.push(m.op),m.op){case"+":return p+_.value;case"-":return p-_.value;case"*":return p*_.value;case"/":return p/_.value;case"%":return p%_.value;case"**":return p**_.value;default:return p}},c.value);return{dice:u,ops:s,success:!1,type:"expressionroll",valid:!0,value:h,order:0}}rollFunction(i){const c=this.rollType(i.expr);let u;switch(i.op){case"floor":u=Math.floor(c.value);break;case"ceil":u=Math.ceil(c.value);break;case"round":u=Math.round(c.value);break;case"abs":u=Math.abs(c.value);break;default:u=c.value}return{expr:c,op:i.op,success:!1,type:"mathfunction",valid:!0,value:u,order:0}}applyGroupMod(i,c){return this.getGroupModMethod(c)(i)}getGroupModMethod(i){const c=u=>u.value;switch(i.type){case"success":return this.getSuccessMethod(i,c);case"failure":return this.getFailureMethod(i,c);case"keep":return this.getKeepMethod(i,c);case"drop":return this.getDropMethod(i,c);default:throw new Error(`Mod ${i.type} is not recognised`)}}applyMod(i,c){return this.getModMethod(c)(i)}getModMethod(i){const c=u=>u.roll;switch(i.type){case"success":return this.getSuccessMethod(i,c);case"failure":return this.getFailureMethod(i,c);case"crit":return this.getCritSuccessMethod(i,c);case"critfail":return this.getCritFailureMethod(i,c);case"keep":return u=>this.getKeepMethod(i,c)(u).sort((s,h)=>s.order-h.order);case"drop":return u=>this.getDropMethod(i,c)(u).sort((s,h)=>s.order-h.order);case"explode":return this.getExplodeMethod(i);case"compound":return this.getCompoundMethod(i);case"penetrate":return this.getPenetrateMethod(i);case"reroll":return this.getReRollMethod(i);case"rerollOnce":return this.getReRollOnceMethod(i);default:throw new Error(`Mod ${i.type} is not recognised`)}}applySort(i,c){return i.sort((u,s)=>c.asc?u.roll-s.roll:s.roll-u.roll),i.forEach((u,s)=>u.order=s),i}getCritSuccessMethod(i,c){const u=this.rollType(i.expr);return s=>s.map(h=>{if(!h.valid||h.type!=="roll"||h.success)return h;const p=h;return this.successTest(i.mod,u.value,c(h))?p.critical="success":p.critical==="success"&&(p.critical=null),h})}getCritFailureMethod(i,c){const u=this.rollType(i.expr);return s=>s.map(h=>{if(!h.valid||h.type!=="roll"||h.success)return h;const p=h;return this.successTest(i.mod,u.value,c(h))?p.critical="failure":p.critical==="failure"&&(p.critical=null),h})}getSuccessMethod(i,c){const u=this.rollType(i.expr);return s=>s.map(h=>(h.valid&&this.successTest(i.mod,u.value,c(h))&&(h.success?h.value+=1:(h.value=1,h.success=!0)),h))}getFailureMethod(i,c){const u=this.rollType(i.expr);return s=>s.map(h=>(h.valid&&this.successTest(i.mod,u.value,c(h))&&(h.success?h.value-=1:(h.value=-1,h.success=!0)),h))}getKeepMethod(i,c){const u=this.rollType(i.expr);return s=>{if(s.length===0)return s;s=s.sort((E,A)=>i.highlow==="l"?c(A)-c(E):c(E)-c(A)).sort((E,A)=>(E.valid?1:0)-(A.valid?1:0));const h=Math.max(Math.min(u.value,s.length),0);let p=0,m=0;const _=s.reduce((E,A)=>(A.valid?1:0)+E,0)-h;for(;m<s.length&&p<_;)s[m].valid&&(s[m].valid=!1,p++),m++;return s}}getDropMethod(i,c){const u=this.rollType(i.expr);return s=>{s=s.sort((_,E)=>i.highlow==="h"?c(E)-c(_):c(_)-c(E));const h=Math.max(Math.min(u.value,s.length),0);let p=0,m=0;for(;m<s.length&&p<h;)s[m].valid&&(s[m].valid=!1,p++),m++;return s}}getExplodeMethod(i){const c=i.target?this.rollType(i.target.value):null;return u=>{const s=c?h=>this.successTest(i.target.mod,c.value,h.roll):h=>this.successTest("=",h.type==="fateroll"?1:h.die,h.roll);if(u[0].type==="roll"&&s({roll:1})&&s({roll:u[0].die}))throw new Error("Invalid reroll target");for(let h=0;h<u.length;h++){let p=u[h];p.order=h;let m=0;for(;s(p)&&m++<1e3;){const _=this.reRoll(p,++h);u.splice(h,0,_),p=_}}return u}}getCompoundMethod(i){const c=i.target?this.rollType(i.target.value):null;return u=>{const s=c?h=>this.successTest(i.target.mod,c.value,h.roll):h=>this.successTest("=",h.type==="fateroll"?1:h.die,h.roll);if(u[0].type==="roll"&&s({roll:1})&&s({roll:u[0].die}))throw new Error("Invalid reroll target");for(let h=0;h<u.length;h++){let p=u[h],m=p.roll,_=0;for(;s(p)&&_++<1e3;){const E=this.reRoll(u[h],++h);m+=E.roll,p=E}p.value=m,p.roll=m}return u}}getPenetrateMethod(i){const c=i.target?this.rollType(i.target.value):null;return u=>{const s=c?h=>this.successTest(i.target.mod,c.value,h.roll):h=>this.successTest("=",h.type==="fateroll"?1:h.die,h.roll);if(c&&u[0].type==="roll"&&s(u[0])&&this.successTest(i.target.mod,c.value,1))throw new Error("Invalid reroll target");for(let h=0;h<u.length;h++){let p=u[h];p.order=h;let m=0;for(;s(p)&&m++<1e3;){const _=this.reRoll(p,++h);_.value-=1,_.roll-=1,u.splice(h,0,_),p=_}}return u}}getReRollMethod(i){const c=i.target?this.successTest.bind(null,i.target.mod,this.rollType(i.target.value).value):this.successTest.bind(null,"=",1);return u=>{if(u[0].type==="roll"&&c(1)&&c(u[0].die))throw new Error("Invalid reroll target");for(let s=0;s<u.length;s++)for(;c(u[s].roll);){u[s].valid=!1;const h=this.reRoll(u[s],s+1);u.splice(++s,0,h)}return u}}getReRollOnceMethod(i){const c=i.target?this.successTest.bind(null,i.target.mod,this.rollType(i.target.value).value):this.successTest.bind(null,"=",1);return u=>{if(u[0].type==="roll"&&c(1)&&c(u[0].die))throw new Error("Invalid reroll target");for(let s=0;s<u.length;s++)if(c(u[s].roll)){u[s].valid=!1;const h=this.reRoll(u[s],s+1);u.splice(++s,0,h)}return u}}successTest(i,c,u){switch(i){case">":return u>=c;case"<":return u<=c;case"=":default:return u==c}}reRoll(i,c){switch(i.type){case"roll":return this.generateDiceRoll(i.die,c);case"fateroll":return this.generateFateRoll(c);default:throw new Error(`Cannot do a reroll of a ${i.type}.`)}}generateDiceRoll(i,c){const u=Math.floor(this.randFunction()*i)+1;return{critical:u===i?"success":u===1?"failure":null,die:i,matched:!1,order:c,roll:u,success:!1,type:"roll",valid:!0,value:u}}generateFateRoll(i){const c=Math.floor(3*this.randFunction())-1;return{matched:!1,order:i,roll:c,success:!1,type:"fateroll",valid:!0,value:c}}}},function(e,r,o){function a(i,c,u,s){this.message=i,this.expected=c,this.found=u,this.location=s,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,a)}(function(i,c){function u(){this.constructor=i}u.prototype=c.prototype,i.prototype=new u})(a,Error),a.buildMessage=function(i,c){var u={literal:function(m){return'"'+h(m.text)+'"'},class:function(m){var _,E="";for(_=0;_<m.parts.length;_++)E+=m.parts[_]instanceof Array?p(m.parts[_][0])+"-"+p(m.parts[_][1]):p(m.parts[_]);return"["+(m.inverted?"^":"")+E+"]"},any:function(m){return"any character"},end:function(m){return"end of input"},other:function(m){return m.description}};function s(m){return m.charCodeAt(0).toString(16).toUpperCase()}function h(m){return m.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(_){return"\\x0"+s(_)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(_){return"\\x"+s(_)})}function p(m){return m.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(_){return"\\x0"+s(_)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(_){return"\\x"+s(_)})}return"Expected "+function(m){var _,E,A,C=new Array(m.length);for(_=0;_<m.length;_++)C[_]=(A=m[_],u[A.type](A));if(C.sort(),C.length>0){for(_=1,E=1;_<C.length;_++)C[_-1]!==C[_]&&(C[E]=C[_],E++);C.length=E}switch(C.length){case 1:return C[0];case 2:return C[0]+" or "+C[1];default:return C.slice(0,-1).join(", ")+", or "+C[C.length-1]}}(i)+" but "+function(m){return m?'"'+h(m)+'"':"end of input"}(c)+" found."},e.exports={SyntaxError:a,parse:function(i,c){c=c!==void 0?c:{};var u,s={},h={start:Ir},p=Ir,m={type:"any"},_=q("[[",!1),E=q("]]",!1),A=function(f,v){return v&&(f.label=v),f},C=q(">",!1),O=q("<",!1),L=q("=",!1),B=q("f",!1),M=q("cs",!1),U=q("cf",!1),V=q("m",!1),Q=q("t",!1),X=q("k",!1),P=q("l",!1),F=q("h",!1),Y=q("d",!1),Z=q("{",!1),lt=q(",",!1),Nt=q("}",!1),ut=q("+",!1),it=q("sa",!1),at=q("sd",!1),N=q("!",!1),x=q("!!",!1),K=q("!p",!1),Ct=q("r",!1),St=q("ro",!1),Dt=q("F",!1),At=q("%",!1),Tt=q("(",!1),Mt=q(")",!1),yt=q("-",!1),gt=function(f,v){return v.length==0?f:{head:f,type:"expression",ops:v.map(g=>({type:"math",op:g[1],tail:g[3]}))}},ft=q("*",!1),pe=q("/",!1),Ht=q("**",!1),Ft=q("floor",!1),qt=q("ceil",!1),y=q("round",!1),j=q("abs",!1),$=Lr("integer"),tt=/^[0-9]/,dt=vs([["0","9"]],!1,!1),ee=function(){return{type:"number",value:parseInt(i.substring(W,d),10)}},kt=q("[",!1),I=/^[^\]]/,vt=vs(["]"],!0,!1),bt=q("]",!1),Gt=Lr("whitespace"),ie=/^[ \t\n\r]/,Ee=vs([" ","	",`
`,"\r"],!1,!1),d=0,W=0,Ue=[{line:1,column:1}],ae=0,gs=[],S=0;if("startRule"in c){if(!(c.startRule in h))throw new Error(`Can't start parsing from rule "`+c.startRule+'".');p=h[c.startRule]}function q(f,v){return{type:"literal",text:f,ignoreCase:v}}function vs(f,v,g){return{type:"class",parts:f,inverted:v,ignoreCase:g}}function Lr(f){return{type:"other",description:f}}function Dr(f){var v,g=Ue[f];if(g)return g;for(v=f-1;!Ue[v];)v--;for(g={line:(g=Ue[v]).line,column:g.column};v<f;)i.charCodeAt(v)===10?(g.line++,g.column=1):g.column++,v++;return Ue[f]=g,g}function Mr(f,v){var g=Dr(f),b=Dr(v);return{start:{offset:f,line:g.line,column:g.column},end:{offset:v,line:b.line,column:b.column}}}function k(f){d<ae||(d>ae&&(ae=d,gs=[]),gs.push(f))}function co(f,v,g){return new a(a.buildMessage(f,v),f,v,g)}function Ir(){var f,v,g,b,R,w;if(f=d,(v=Es())!==s){for(g=[],i.length>d?(b=i.charAt(d),d++):(b=s,S===0&&k(m));b!==s;)g.push(b),i.length>d?(b=i.charAt(d),d++):(b=s,S===0&&k(m));g!==s?(W=f,w=g,(R=v).root=!0,w&&(R.label=w.join("")),f=v=R):(d=f,f=s)}else d=f,f=s;return f}function uo(){var f,v,g;return f=d,(v=function(){var b,R,w,D,G;if(b=d,(R=function(){var nt,Vt,me,xt,ht,Wt,Rt,zt,Et;if(nt=d,i.charCodeAt(d)===123?(Vt="{",d++):(Vt=s,S===0&&k(Z)),Vt!==s)if(st()!==s)if((me=bs())!==s){for(xt=[],ht=d,(Wt=st())!==s?(i.charCodeAt(d)===44?(Rt=",",d++):(Rt=s,S===0&&k(lt)),Rt!==s&&(zt=st())!==s&&(Et=bs())!==s?ht=Wt=[Wt,Rt,zt,Et]:(d=ht,ht=s)):(d=ht,ht=s);ht!==s;)xt.push(ht),ht=d,(Wt=st())!==s?(i.charCodeAt(d)===44?(Rt=",",d++):(Rt=s,S===0&&k(lt)),Rt!==s&&(zt=st())!==s&&(Et=bs())!==s?ht=Wt=[Wt,Rt,zt,Et]:(d=ht,ht=s)):(d=ht,ht=s);xt!==s&&(ht=st())!==s?(i.charCodeAt(d)===125?(Wt="}",d++):(Wt=s,S===0&&k(Nt)),Wt!==s?(W=nt,Vt={rolls:[me,...xt.map(po=>po[3])],type:"group"},nt=Vt):(d=nt,nt=s)):(d=nt,nt=s)}else d=nt,nt=s;else d=nt,nt=s;else d=nt,nt=s;return nt}())!==s){for(w=[],(D=In())===s&&(D=Rn())===s&&(D=Dn())===s&&(D=Mn());D!==s;)w.push(D),(D=In())===s&&(D=Rn())===s&&(D=Dn())===s&&(D=Mn());w!==s&&(D=st())!==s?((G=Pn())===s&&(G=null),G!==s?(W=b,J=R,It=G,(ot=w).length>0&&(J.mods=(J.mods||[]).concat(ot)),It&&(J.label=It),b=R=J):(d=b,b=s)):(d=b,b=s)}else d=b,b=s;var J,ot,It;return b}())===s&&(v=Hr())===s&&(v=Ss()),v!==s&&st()!==s?((g=Pn())===s&&(g=null),g!==s?(W=f,f=v=A(v,g)):(d=f,f=s)):(d=f,f=s),f}function Dn(){var f,v,g;return f=d,i.charCodeAt(d)===62?(v=">",d++):(v=s,S===0&&k(C)),v===s&&(i.charCodeAt(d)===60?(v="<",d++):(v=s,S===0&&k(O)),v===s&&(i.charCodeAt(d)===61?(v="=",d++):(v=s,S===0&&k(L)))),v!==s&&(g=oe())!==s?(W=f,f=v={type:"success",mod:v,expr:g}):(d=f,f=s),f}function Mn(){var f,v,g,b;return f=d,i.charCodeAt(d)===102?(v="f",d++):(v=s,S===0&&k(B)),v!==s?(i.charCodeAt(d)===62?(g=">",d++):(g=s,S===0&&k(C)),g===s&&(i.charCodeAt(d)===60?(g="<",d++):(g=s,S===0&&k(O)),g===s&&(i.charCodeAt(d)===61?(g="=",d++):(g=s,S===0&&k(L)))),g===s&&(g=null),g!==s&&(b=oe())!==s?(W=f,f=v={type:"failure",mod:g,expr:b}):(d=f,f=s)):(d=f,f=s),f}function Rr(){var f,v,g,b;return f=d,i.substr(d,2)==="cs"?(v="cs",d+=2):(v=s,S===0&&k(M)),v!==s?(i.charCodeAt(d)===62?(g=">",d++):(g=s,S===0&&k(C)),g===s&&(i.charCodeAt(d)===60?(g="<",d++):(g=s,S===0&&k(O)),g===s&&(i.charCodeAt(d)===61?(g="=",d++):(g=s,S===0&&k(L)))),g===s&&(g=null),g!==s&&(b=oe())!==s?(W=f,f=v={type:"crit",mod:g,expr:b}):(d=f,f=s)):(d=f,f=s),f}function Pr(){var f,v,g,b;return f=d,i.substr(d,2)==="cf"?(v="cf",d+=2):(v=s,S===0&&k(U)),v!==s?(i.charCodeAt(d)===62?(g=">",d++):(g=s,S===0&&k(C)),g===s&&(i.charCodeAt(d)===60?(g="<",d++):(g=s,S===0&&k(O)),g===s&&(i.charCodeAt(d)===61?(g="=",d++):(g=s,S===0&&k(L)))),g===s&&(g=null),g!==s&&(b=oe())!==s?(W=f,f=v={type:"critfail",mod:g,expr:b}):(d=f,f=s)):(d=f,f=s),f}function ho(){var f,v,g,b,R;return f=d,i.charCodeAt(d)===109?(v="m",d++):(v=s,S===0&&k(V)),v!==s?(i.charCodeAt(d)===116?(g="t",d++):(g=s,S===0&&k(Q)),g===s&&(g=null),g!==s?((b=Ss())===s&&(b=null),b!==s?((R=function(){var w,D,G;return w=d,i.charCodeAt(d)===62?(D=">",d++):(D=s,S===0&&k(C)),D===s&&(i.charCodeAt(d)===60?(D="<",d++):(D=s,S===0&&k(O)),D===s&&(i.charCodeAt(d)===61?(D="=",d++):(D=s,S===0&&k(L)))),D!==s&&(G=oe())!==s?(W=w,w=D={mod:D,expr:G}):(d=w,w=s),w}())===s&&(R=null),R!==s?(W=f,f=v=function(w,D,G){const J={type:"match",min:D||{type:"number",value:2},count:!!w};return G&&(J.mod=G.mod,J.expr=G.expr),J}(g,b,R)):(d=f,f=s)):(d=f,f=s)):(d=f,f=s)):(d=f,f=s),f}function In(){var f,v,g,b;return f=d,i.charCodeAt(d)===107?(v="k",d++):(v=s,S===0&&k(X)),v!==s?(i.charCodeAt(d)===108?(g="l",d++):(g=s,S===0&&k(P)),g===s&&(i.charCodeAt(d)===104?(g="h",d++):(g=s,S===0&&k(F))),g===s&&(g=null),g!==s?((b=oe())===s&&(b=null),b!==s?(W=f,f=v={type:"keep",highlow:g,expr:b||Yr}):(d=f,f=s)):(d=f,f=s)):(d=f,f=s),f}function Rn(){var f,v,g,b;return f=d,i.charCodeAt(d)===100?(v="d",d++):(v=s,S===0&&k(Y)),v!==s?(i.charCodeAt(d)===108?(g="l",d++):(g=s,S===0&&k(P)),g===s&&(i.charCodeAt(d)===104?(g="h",d++):(g=s,S===0&&k(F))),g===s&&(g=null),g!==s?((b=oe())===s&&(b=null),b!==s?(W=f,f=v={type:"drop",highlow:g,expr:b||Yr}):(d=f,f=s)):(d=f,f=s)):(d=f,f=s),f}function bs(){var f,v,g,b,R,w,D,G;if(f=d,(v=ys())!==s){for(g=[],b=d,(R=st())!==s?(i.charCodeAt(d)===43?(w="+",d++):(w=s,S===0&&k(ut)),w!==s&&(D=st())!==s&&(G=ys())!==s?b=R=[R,w,D,G]:(d=b,b=s)):(d=b,b=s);b!==s;)g.push(b),b=d,(R=st())!==s?(i.charCodeAt(d)===43?(w="+",d++):(w=s,S===0&&k(ut)),w!==s&&(D=st())!==s&&(G=ys())!==s?b=R=[R,w,D,G]:(d=b,b=s)):(d=b,b=s);g!==s?(W=f,f=v=function(J,ot){return ot.length==0?J:{head:J,type:"diceExpression",ops:ot.map(It=>({type:"math",op:It[1],tail:It[3]}))}}(v,g)):(d=f,f=s)}else d=f,f=s;return f}function ys(){var f;return(f=Hr())===s&&(f=Es()),f}function Hr(){var f,v,g;return f=d,(v=function(){var b,R,w,D,G;if(b=d,(R=function(){var J,ot,It,nt;if(J=d,(ot=function(){var xt,ht,Wt,Rt;return xt=d,(ht=oe())===s&&(ht=null),ht!==s?(i.charCodeAt(d)===100?(Wt="d",d++):(Wt=s,S===0&&k(Y)),Wt!==s?((Rt=function(){var zt,Et;return zt=d,i.charCodeAt(d)===70?(Et="F",d++):(Et=s,S===0&&k(Dt)),Et===s&&(i.charCodeAt(d)===102?(Et="f",d++):(Et=s,S===0&&k(B))),Et!==s&&(W=zt,Et={type:"fate"}),zt=Et}())===s&&(Rt=function(){var zt,Et;return zt=d,i.charCodeAt(d)===37?(Et="%",d++):(Et=s,S===0&&k(At)),Et!==s&&(W=zt,Et={type:"number",value:"100"}),zt=Et}())===s&&(Rt=oe()),Rt!==s?(W=xt,ht={die:Rt,count:ht||{type:"number",value:1},type:"die"},xt=ht):(d=xt,xt=s)):(d=xt,xt=s)):(d=xt,xt=s),xt}())!==s){for(It=[],(nt=Vr())===s&&(nt=Wr())===s&&(nt=Fr())===s&&(nt=Ur())===s&&(nt=jr());nt!==s;)It.push(nt),(nt=Vr())===s&&(nt=Wr())===s&&(nt=Fr())===s&&(nt=Ur())===s&&(nt=jr());It!==s?(W=J,me=It,(Vt=ot).mods=(Vt.mods||[]).concat(me),J=ot=Vt):(d=J,J=s)}else d=J,J=s;var Vt,me;return J}())!==s){for(w=[],(D=Rn())===s&&(D=In())===s&&(D=Dn())===s&&(D=Mn())===s&&(D=Pr())===s&&(D=Rr());D!==s;)w.push(D),(D=Rn())===s&&(D=In())===s&&(D=Dn())===s&&(D=Mn())===s&&(D=Pr())===s&&(D=Rr());w!==s?((D=ho())===s&&(D=null),D!==s?((G=function(){var J,ot;return J=d,i.substr(d,2)==="sa"?(ot="sa",d+=2):(ot=s,S===0&&k(it)),ot!==s&&(W=J,ot={type:"sort",asc:!0}),J=ot}())===s&&(G=function(){var J,ot;return J=d,i.substr(d,2)==="sd"?(ot="sd",d+=2):(ot=s,S===0&&k(at)),ot!==s&&(W=J,ot={type:"sort",asc:!1}),J=ot}()),G===s&&(G=null),G!==s?(W=b,R=function(J,ot,It,nt){const Vt=ot.filter(me=>["success","failure"].includes(me.type));return ot=ot.filter(me=>!Vt.includes(me)),J.mods=(J.mods||[]).concat(ot),Vt.length>0&&(J.targets=Vt),It&&(J.match=It),nt&&(J.sort=nt),J}(R,w,D,G),b=R):(d=b,b=s)):(d=b,b=s)):(d=b,b=s)}else d=b,b=s;return b}())!==s&&st()!==s?((g=Pn())===s&&(g=null),g!==s?(W=f,f=v=A(v,g)):(d=f,f=s)):(d=f,f=s),f}function Fr(){var f,v,g;return f=d,i.charCodeAt(d)===33?(v="!",d++):(v=s,S===0&&k(N)),v!==s?((g=un())===s&&(g=null),g!==s?(W=f,f=v={type:"explode",target:g}):(d=f,f=s)):(d=f,f=s),f}function Vr(){var f,v,g;return f=d,i.substr(d,2)==="!!"?(v="!!",d+=2):(v=s,S===0&&k(x)),v!==s?((g=un())===s&&(g=null),g!==s?(W=f,f=v={type:"compound",target:g}):(d=f,f=s)):(d=f,f=s),f}function Wr(){var f,v,g;return f=d,i.substr(d,2)==="!p"?(v="!p",d+=2):(v=s,S===0&&k(K)),v!==s?((g=un())===s&&(g=null),g!==s?(W=f,f=v={type:"penetrate",target:g}):(d=f,f=s)):(d=f,f=s),f}function jr(){var f,v,g;return f=d,i.charCodeAt(d)===114?(v="r",d++):(v=s,S===0&&k(Ct)),v!==s?((g=un())===s&&(g=null),g!==s?(W=f,f=v={type:"reroll",target:g||Br}):(d=f,f=s)):(d=f,f=s),f}function Ur(){var f,v,g;return f=d,i.substr(d,2)==="ro"?(v="ro",d+=2):(v=s,S===0&&k(St)),v!==s?((g=un())===s&&(g=null),g!==s?(W=f,f=v={type:"rerollOnce",target:g||Br}):(d=f,f=s)):(d=f,f=s),f}function un(){var f,v,g;return f=d,i.charCodeAt(d)===62?(v=">",d++):(v=s,S===0&&k(C)),v===s&&(i.charCodeAt(d)===60?(v="<",d++):(v=s,S===0&&k(O)),v===s&&(i.charCodeAt(d)===61?(v="=",d++):(v=s,S===0&&k(L)))),v===s&&(v=null),v!==s&&(g=oe())!==s?(W=f,f=v={type:"target",mod:v,value:g}):(d=f,f=s),f}function oe(){var f;return(f=Ns())===s&&(f=Ss()),f}function Es(){var f;return(f=function(){var v,g,b,R;return v=d,i.substr(d,2)==="[["?(g="[[",d+=2):(g=s,S===0&&k(_)),g!==s&&(b=Es())!==s?(i.substr(d,2)==="]]"?(R="]]",d+=2):(R=s,S===0&&k(E)),R!==s?(W=v,v=g={type:"inline",expr:b}):(d=v,v=s)):(d=v,v=s),v}())===s&&(f=As())===s&&(f=Ns()),f}function Ns(){var f,v,g,b,R,w,D;return f=d,i.charCodeAt(d)===40?(v="(",d++):(v=s,S===0&&k(Tt)),v!==s&&(g=As())!==s?(i.charCodeAt(d)===41?(b=")",d++):(b=s,S===0&&k(Mt)),b!==s&&st()!==s?((R=Pn())===s&&(R=null),R!==s?(W=f,w=g,(D=R)&&(w.label=D),f=v=w):(d=f,f=s)):(d=f,f=s)):(d=f,f=s),f}function As(){var f,v,g,b,R,w,D,G;if(f=d,(v=Ts())!==s){for(g=[],b=d,(R=st())!==s?(i.charCodeAt(d)===43?(w="+",d++):(w=s,S===0&&k(ut)),w===s&&(i.charCodeAt(d)===45?(w="-",d++):(w=s,S===0&&k(yt))),w!==s&&(D=st())!==s&&(G=Ts())!==s?b=R=[R,w,D,G]:(d=b,b=s)):(d=b,b=s);b!==s;)g.push(b),b=d,(R=st())!==s?(i.charCodeAt(d)===43?(w="+",d++):(w=s,S===0&&k(ut)),w===s&&(i.charCodeAt(d)===45?(w="-",d++):(w=s,S===0&&k(yt))),w!==s&&(D=st())!==s&&(G=Ts())!==s?b=R=[R,w,D,G]:(d=b,b=s)):(d=b,b=s);g!==s?(W=f,f=v=gt(v,g)):(d=f,f=s)}else d=f,f=s;return f}function Ts(){var f,v,g,b,R,w,D,G;if(f=d,(v=Cs())!==s){for(g=[],b=d,(R=st())!==s?(i.charCodeAt(d)===42?(w="*",d++):(w=s,S===0&&k(ft)),w===s&&(i.charCodeAt(d)===47?(w="/",d++):(w=s,S===0&&k(pe))),w!==s&&(D=st())!==s&&(G=Cs())!==s?b=R=[R,w,D,G]:(d=b,b=s)):(d=b,b=s);b!==s;)g.push(b),b=d,(R=st())!==s?(i.charCodeAt(d)===42?(w="*",d++):(w=s,S===0&&k(ft)),w===s&&(i.charCodeAt(d)===47?(w="/",d++):(w=s,S===0&&k(pe))),w!==s&&(D=st())!==s&&(G=Cs())!==s?b=R=[R,w,D,G]:(d=b,b=s)):(d=b,b=s);g!==s?(W=f,f=v=gt(v,g)):(d=f,f=s)}else d=f,f=s;return f}function Cs(){var f,v,g,b,R,w,D,G;if(f=d,(v=ws())!==s){for(g=[],b=d,(R=st())!==s?(i.substr(d,2)==="**"?(w="**",d+=2):(w=s,S===0&&k(Ht)),w===s&&(i.charCodeAt(d)===37?(w="%",d++):(w=s,S===0&&k(At))),w!==s&&(D=st())!==s&&(G=ws())!==s?b=R=[R,w,D,G]:(d=b,b=s)):(d=b,b=s);b!==s;)g.push(b),b=d,(R=st())!==s?(i.substr(d,2)==="**"?(w="**",d+=2):(w=s,S===0&&k(Ht)),w===s&&(i.charCodeAt(d)===37?(w="%",d++):(w=s,S===0&&k(At))),w!==s&&(D=st())!==s&&(G=ws())!==s?b=R=[R,w,D,G]:(d=b,b=s)):(d=b,b=s);g!==s?(W=f,f=v=gt(v,g)):(d=f,f=s)}else d=f,f=s;return f}function fo(){var f,v,g,b,R;return f=d,(v=function(){var w;return i.substr(d,5)==="floor"?(w="floor",d+=5):(w=s,S===0&&k(Ft)),w===s&&(i.substr(d,4)==="ceil"?(w="ceil",d+=4):(w=s,S===0&&k(qt)),w===s&&(i.substr(d,5)==="round"?(w="round",d+=5):(w=s,S===0&&k(y)),w===s&&(i.substr(d,3)==="abs"?(w="abs",d+=3):(w=s,S===0&&k(j))))),w}())!==s&&st()!==s?(i.charCodeAt(d)===40?(g="(",d++):(g=s,S===0&&k(Tt)),g!==s&&st()!==s&&(b=As())!==s&&st()!==s?(i.charCodeAt(d)===41?(R=")",d++):(R=s,S===0&&k(Mt)),R!==s?(W=f,f=v={type:"mathfunction",op:v,expr:b}):(d=f,f=s)):(d=f,f=s)):(d=f,f=s),f}function ws(){var f;return(f=fo())===s&&(f=uo())===s&&(f=Ns()),f}function Ss(){var f,v,g,b;if(S++,f=d,i.charCodeAt(d)===45?(v="-",d++):(v=s,S===0&&k(yt)),v===s&&(v=null),v!==s){if(g=[],tt.test(i.charAt(d))?(b=i.charAt(d),d++):(b=s,S===0&&k(dt)),b!==s)for(;b!==s;)g.push(b),tt.test(i.charAt(d))?(b=i.charAt(d),d++):(b=s,S===0&&k(dt));else g=s;g!==s?(W=f,f=v=ee()):(d=f,f=s)}else d=f,f=s;return S--,f===s&&(v=s,S===0&&k($)),f}function Pn(){var f,v,g,b;if(f=d,i.charCodeAt(d)===91?(v="[",d++):(v=s,S===0&&k(kt)),v!==s){if(g=[],I.test(i.charAt(d))?(b=i.charAt(d),d++):(b=s,S===0&&k(vt)),b!==s)for(;b!==s;)g.push(b),I.test(i.charAt(d))?(b=i.charAt(d),d++):(b=s,S===0&&k(vt));else g=s;g!==s?(i.charCodeAt(d)===93?(b="]",d++):(b=s,S===0&&k(bt)),b!==s?(W=f,f=v=g.join("")):(d=f,f=s)):(d=f,f=s)}else d=f,f=s;return f}function st(){var f,v;for(S++,f=[],ie.test(i.charAt(d))?(v=i.charAt(d),d++):(v=s,S===0&&k(Ee));v!==s;)f.push(v),ie.test(i.charAt(d))?(v=i.charAt(d),d++):(v=s,S===0&&k(Ee));return S--,f===s&&(v=s,S===0&&k(Gt)),f}const Br={type:"target",mod:"=",value:{type:"number",value:1}},Yr={type:"number",value:1};if((u=p())!==s&&d===i.length)return u;throw u!==s&&d<i.length&&k({type:"end"}),co(gs,ae<i.length?i.charAt(ae):null,ae<i.length?Mr(ae,ae+1):Mr(ae,ae))}}},function(e,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.DiscordRollRenderer=class{render(a){return this.doRender(a,!0)}doRender(a,i=!1){let c="";switch(a.type){case"diceexpressionroll":c=this.renderGroupExpr(a);break;case"grouproll":c=this.renderGroup(a);break;case"die":c=this.renderDie(a);break;case"expressionroll":c=this.renderExpression(a);break;case"mathfunction":c=this.renderFunction(a);break;case"roll":return this.renderRoll(a);case"fateroll":return this.renderFateRoll(a);case"number":const u=a.label?` (${a.label})`:"";return`${a.value}${u}`;case"fate":return"F";default:throw new Error("Unable to render")}return a.valid||(c="~~"+c.replace(/~~/g,"")+"~~"),i?this.stripBrackets(c):a.label?`(${a.label}: ${c})`:c}renderGroup(a){const i=[];for(const c of a.dice)i.push(this.doRender(c));return i.length>1?`{ ${i.join(" + ")} } = ${a.value}`:`{ ${this.stripBrackets(i[0])} } = ${a.value}`}renderGroupExpr(a){const i=[];for(const c of a.dice)i.push(this.doRender(c));return i.length>1?`(${i.join(" + ")} = ${a.value})`:i[0]}renderDie(a){const i=[];for(const s of a.rolls)i.push(this.doRender(s));let c=`${i.join(", ")}`;["number","fate"].includes(a.die.type)&&a.count.type==="number"||(c+=`[*Rolling: ${this.doRender(a.count)}d${this.doRender(a.die)}*]`);const u=a.matched?` Match${a.value===1?"":"es"}`:"";return c+=` = ${a.value}${u}`,`(${c})`}renderExpression(a){if(a.dice.length>1){const i=[];for(let c=0;c<a.dice.length-1;c++)i.push(this.doRender(a.dice[c])),i.push(a.ops[c]);return i.push(this.doRender(a.dice.slice(-1)[0])),i.push("="),i.push(a.value+""),`(${i.join(" ")})`}return a.dice[0].type==="number"?a.value+"":this.doRender(a.dice[0])}renderFunction(a){const i=this.doRender(a.expr);return`(${a.op}${this.addBrackets(i)} = ${a.value})`}addBrackets(a){return a.startsWith("(")||(a=`(${a}`),a.endsWith(")")||(a=`${a})`),a}stripBrackets(a){return a.startsWith("(")&&(a=a.substring(1)),a.endsWith(")")&&(a=a.substring(0,a.length-1)),a}renderRoll(a){let i=`${a.roll}`;return a.valid?a.success&&a.value===1?i=`**${a.roll}**`:a.success&&a.value===-1?i=`*${a.roll}*`:a.success||a.critical!=="success"?a.success||a.critical!=="failure"||(i=`*${a.roll}*`):i=`**${a.roll}**`:i=`~~${a.roll}~~`,a.matched&&(i=`__${i}__`),i}renderFateRoll(a){const i=a.roll===0?"0":a.roll>0?"+":"-";let c=`${a.roll}`;return a.valid?a.success&&a.value===1?c=`**${i}**`:a.success&&a.value===-1&&(c=`*${i}*`):c=`~~${i}~~`,a.matched&&(c=`__${c}__`),c}}}])})}(Xn)),Xn.exports}var Fo=Ho();function fr(n){return String(n).charAt(0).toUpperCase()+String(n).slice(1)}const _n="/requiem-pathfinder-preact/",Ae=16,Os=4,rs=(n,t)=>Math.floor(Math.floor(n*t)/5),le=(n,t)=>{const e=n.find(r=>r.isLinked&&r.linkedStat===t);return e?rs(e.quantity,e.rank):0},Qe=(n,t,e,r=!1)=>t.replace(/\[(\w+)\]/g,(o,a)=>{const i=e[a]||0,c=le(n,a),u=i+c;return r?fr(u.toString()):`${u}[${a}]`}),Vo=n=>{const t=[];return n.name||t.push("Spell name is required"),n.quantity<0&&t.push("Quantity must be 0 or higher"),n.quantity>Ae&&t.push("Quantity over maximum stack limit"),n.power<=0&&t.push("Spell level must be greater than 0"),n.dice||t.push("Damage roll is required"),t},Jn=(n,t)=>{if(!n)return{isValid:!1,error:"A valid dice roll is required."};try{const e=n.replace(/\[\w+\]/g,"0");new Fo.DiceRoller().roll(e);const o=(n.match(/\[(\w+)\]/g)||[]).map(a=>a.slice(1,-1)).filter(a=>t[a]===void 0);return o.length>0?{isValid:!1,error:`Unknown stats: ${o.join(", ")}`}:{isValid:!0,error:null}}catch{return{isValid:!1,error:"Invalid dice format. Use format like '1d6+[spellAttackModifier]' or '2d8+3'"}}};var Ot="top",Bt="bottom",Yt="right",Lt="left",cs="auto",on=[Ot,Bt,Yt,Lt],Pe="start",Ze="end",la="clippingParents",pr="viewport",Ke="popper",ca="reference",Js=on.reduce(function(n,t){return n.concat([t+"-"+Pe,t+"-"+Ze])},[]),mr=[].concat(on,[cs]).reduce(function(n,t){return n.concat([t,t+"-"+Pe,t+"-"+Ze])},[]),ua="beforeRead",da="read",ha="afterRead",fa="beforeMain",pa="main",ma="afterMain",_a="beforeWrite",ga="write",va="afterWrite",ba=[ua,da,ha,fa,pa,ma,_a,ga,va];function he(n){return n?(n.nodeName||"").toLowerCase():null}function Kt(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var t=n.ownerDocument;return t&&t.defaultView||window}return n}function He(n){var t=Kt(n).Element;return n instanceof t||n instanceof Element}function Xt(n){var t=Kt(n).HTMLElement;return n instanceof t||n instanceof HTMLElement}function _r(n){if(typeof ShadowRoot>"u")return!1;var t=Kt(n).ShadowRoot;return n instanceof t||n instanceof ShadowRoot}function Wo(n){var t=n.state;Object.keys(t.elements).forEach(function(e){var r=t.styles[e]||{},o=t.attributes[e]||{},a=t.elements[e];!Xt(a)||!he(a)||(Object.assign(a.style,r),Object.keys(o).forEach(function(i){var c=o[i];c===!1?a.removeAttribute(i):a.setAttribute(i,c===!0?"":c)}))})}function jo(n){var t=n.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(r){var o=t.elements[r],a=t.attributes[r]||{},i=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:e[r]),c=i.reduce(function(u,s){return u[s]="",u},{});!Xt(o)||!he(o)||(Object.assign(o.style,c),Object.keys(a).forEach(function(u){o.removeAttribute(u)}))})}}const gr={name:"applyStyles",enabled:!0,phase:"write",fn:Wo,effect:jo,requires:["computeStyles"]};function ue(n){return n.split("-")[0]}var Ie=Math.max,is=Math.min,tn=Math.round;function Zs(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function ya(){return!/^((?!chrome|android).)*safari/i.test(Zs())}function en(n,t,e){t===void 0&&(t=!1),e===void 0&&(e=!1);var r=n.getBoundingClientRect(),o=1,a=1;t&&Xt(n)&&(o=n.offsetWidth>0&&tn(r.width)/n.offsetWidth||1,a=n.offsetHeight>0&&tn(r.height)/n.offsetHeight||1);var i=He(n)?Kt(n):window,c=i.visualViewport,u=!ya()&&e,s=(r.left+(u&&c?c.offsetLeft:0))/o,h=(r.top+(u&&c?c.offsetTop:0))/a,p=r.width/o,m=r.height/a;return{width:p,height:m,top:h,right:s+p,bottom:h+m,left:s,x:s,y:h}}function vr(n){var t=en(n),e=n.offsetWidth,r=n.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:n.offsetLeft,y:n.offsetTop,width:e,height:r}}function Ea(n,t){var e=t.getRootNode&&t.getRootNode();if(n.contains(t))return!0;if(e&&_r(e)){var r=t;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function ve(n){return Kt(n).getComputedStyle(n)}function Uo(n){return["table","td","th"].indexOf(he(n))>=0}function Se(n){return((He(n)?n.ownerDocument:n.document)||window.document).documentElement}function us(n){return he(n)==="html"?n:n.assignedSlot||n.parentNode||(_r(n)?n.host:null)||Se(n)}function li(n){return!Xt(n)||ve(n).position==="fixed"?null:n.offsetParent}function Bo(n){var t=/firefox/i.test(Zs()),e=/Trident/i.test(Zs());if(e&&Xt(n)){var r=ve(n);if(r.position==="fixed")return null}var o=us(n);for(_r(o)&&(o=o.host);Xt(o)&&["html","body"].indexOf(he(o))<0;){var a=ve(o);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||t&&a.willChange==="filter"||t&&a.filter&&a.filter!=="none")return o;o=o.parentNode}return null}function Sn(n){for(var t=Kt(n),e=li(n);e&&Uo(e)&&ve(e).position==="static";)e=li(e);return e&&(he(e)==="html"||he(e)==="body"&&ve(e).position==="static")?t:e||Bo(n)||t}function br(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function gn(n,t,e){return Ie(n,is(t,e))}function Yo(n,t,e){var r=gn(n,t,e);return r>e?e:r}function Na(){return{top:0,right:0,bottom:0,left:0}}function Aa(n){return Object.assign({},Na(),n)}function Ta(n,t){return t.reduce(function(e,r){return e[r]=n,e},{})}var Ko=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,Aa(typeof t!="number"?t:Ta(t,on))};function qo(n){var t,e=n.state,r=n.name,o=n.options,a=e.elements.arrow,i=e.modifiersData.popperOffsets,c=ue(e.placement),u=br(c),s=[Lt,Yt].indexOf(c)>=0,h=s?"height":"width";if(!(!a||!i)){var p=Ko(o.padding,e),m=vr(a),_=u==="y"?Ot:Lt,E=u==="y"?Bt:Yt,A=e.rects.reference[h]+e.rects.reference[u]-i[u]-e.rects.popper[h],C=i[u]-e.rects.reference[u],O=Sn(a),L=O?u==="y"?O.clientHeight||0:O.clientWidth||0:0,B=A/2-C/2,M=p[_],U=L-m[h]-p[E],V=L/2-m[h]/2+B,Q=gn(M,V,U),X=u;e.modifiersData[r]=(t={},t[X]=Q,t.centerOffset=Q-V,t)}}function Go(n){var t=n.state,e=n.options,r=e.element,o=r===void 0?"[data-popper-arrow]":r;o!=null&&(typeof o=="string"&&(o=t.elements.popper.querySelector(o),!o)||Ea(t.elements.popper,o)&&(t.elements.arrow=o))}const Ca={name:"arrow",enabled:!0,phase:"main",fn:qo,effect:Go,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function nn(n){return n.split("-")[1]}var zo={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Qo(n,t){var e=n.x,r=n.y,o=t.devicePixelRatio||1;return{x:tn(e*o)/o||0,y:tn(r*o)/o||0}}function ci(n){var t,e=n.popper,r=n.popperRect,o=n.placement,a=n.variation,i=n.offsets,c=n.position,u=n.gpuAcceleration,s=n.adaptive,h=n.roundOffsets,p=n.isFixed,m=i.x,_=m===void 0?0:m,E=i.y,A=E===void 0?0:E,C=typeof h=="function"?h({x:_,y:A}):{x:_,y:A};_=C.x,A=C.y;var O=i.hasOwnProperty("x"),L=i.hasOwnProperty("y"),B=Lt,M=Ot,U=window;if(s){var V=Sn(e),Q="clientHeight",X="clientWidth";if(V===Kt(e)&&(V=Se(e),ve(V).position!=="static"&&c==="absolute"&&(Q="scrollHeight",X="scrollWidth")),V=V,o===Ot||(o===Lt||o===Yt)&&a===Ze){M=Bt;var P=p&&V===U&&U.visualViewport?U.visualViewport.height:V[Q];A-=P-r.height,A*=u?1:-1}if(o===Lt||(o===Ot||o===Bt)&&a===Ze){B=Yt;var F=p&&V===U&&U.visualViewport?U.visualViewport.width:V[X];_-=F-r.width,_*=u?1:-1}}var Y=Object.assign({position:c},s&&zo),Z=h===!0?Qo({x:_,y:A},Kt(e)):{x:_,y:A};if(_=Z.x,A=Z.y,u){var lt;return Object.assign({},Y,(lt={},lt[M]=L?"0":"",lt[B]=O?"0":"",lt.transform=(U.devicePixelRatio||1)<=1?"translate("+_+"px, "+A+"px)":"translate3d("+_+"px, "+A+"px, 0)",lt))}return Object.assign({},Y,(t={},t[M]=L?A+"px":"",t[B]=O?_+"px":"",t.transform="",t))}function Xo(n){var t=n.state,e=n.options,r=e.gpuAcceleration,o=r===void 0?!0:r,a=e.adaptive,i=a===void 0?!0:a,c=e.roundOffsets,u=c===void 0?!0:c,s={placement:ue(t.placement),variation:nn(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,ci(Object.assign({},s,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:i,roundOffsets:u})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,ci(Object.assign({},s,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const yr={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Xo,data:{}};var jn={passive:!0};function Jo(n){var t=n.state,e=n.instance,r=n.options,o=r.scroll,a=o===void 0?!0:o,i=r.resize,c=i===void 0?!0:i,u=Kt(t.elements.popper),s=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&s.forEach(function(h){h.addEventListener("scroll",e.update,jn)}),c&&u.addEventListener("resize",e.update,jn),function(){a&&s.forEach(function(h){h.removeEventListener("scroll",e.update,jn)}),c&&u.removeEventListener("resize",e.update,jn)}}const Er={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Jo,data:{}};var Zo={left:"right",right:"left",bottom:"top",top:"bottom"};function Zn(n){return n.replace(/left|right|bottom|top/g,function(t){return Zo[t]})}var tl={start:"end",end:"start"};function ui(n){return n.replace(/start|end/g,function(t){return tl[t]})}function Nr(n){var t=Kt(n),e=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:e,scrollTop:r}}function Ar(n){return en(Se(n)).left+Nr(n).scrollLeft}function el(n,t){var e=Kt(n),r=Se(n),o=e.visualViewport,a=r.clientWidth,i=r.clientHeight,c=0,u=0;if(o){a=o.width,i=o.height;var s=ya();(s||!s&&t==="fixed")&&(c=o.offsetLeft,u=o.offsetTop)}return{width:a,height:i,x:c+Ar(n),y:u}}function nl(n){var t,e=Se(n),r=Nr(n),o=(t=n.ownerDocument)==null?void 0:t.body,a=Ie(e.scrollWidth,e.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),i=Ie(e.scrollHeight,e.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),c=-r.scrollLeft+Ar(n),u=-r.scrollTop;return ve(o||e).direction==="rtl"&&(c+=Ie(e.clientWidth,o?o.clientWidth:0)-a),{width:a,height:i,x:c,y:u}}function Tr(n){var t=ve(n),e=t.overflow,r=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+o+r)}function wa(n){return["html","body","#document"].indexOf(he(n))>=0?n.ownerDocument.body:Xt(n)&&Tr(n)?n:wa(us(n))}function vn(n,t){var e;t===void 0&&(t=[]);var r=wa(n),o=r===((e=n.ownerDocument)==null?void 0:e.body),a=Kt(r),i=o?[a].concat(a.visualViewport||[],Tr(r)?r:[]):r,c=t.concat(i);return o?c:c.concat(vn(us(i)))}function tr(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function sl(n,t){var e=en(n,!1,t==="fixed");return e.top=e.top+n.clientTop,e.left=e.left+n.clientLeft,e.bottom=e.top+n.clientHeight,e.right=e.left+n.clientWidth,e.width=n.clientWidth,e.height=n.clientHeight,e.x=e.left,e.y=e.top,e}function di(n,t,e){return t===pr?tr(el(n,e)):He(t)?sl(t,e):tr(nl(Se(n)))}function rl(n){var t=vn(us(n)),e=["absolute","fixed"].indexOf(ve(n).position)>=0,r=e&&Xt(n)?Sn(n):n;return He(r)?t.filter(function(o){return He(o)&&Ea(o,r)&&he(o)!=="body"}):[]}function il(n,t,e,r){var o=t==="clippingParents"?rl(n):[].concat(t),a=[].concat(o,[e]),i=a[0],c=a.reduce(function(u,s){var h=di(n,s,r);return u.top=Ie(h.top,u.top),u.right=is(h.right,u.right),u.bottom=is(h.bottom,u.bottom),u.left=Ie(h.left,u.left),u},di(n,i,r));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function Sa(n){var t=n.reference,e=n.element,r=n.placement,o=r?ue(r):null,a=r?nn(r):null,i=t.x+t.width/2-e.width/2,c=t.y+t.height/2-e.height/2,u;switch(o){case Ot:u={x:i,y:t.y-e.height};break;case Bt:u={x:i,y:t.y+t.height};break;case Yt:u={x:t.x+t.width,y:c};break;case Lt:u={x:t.x-e.width,y:c};break;default:u={x:t.x,y:t.y}}var s=o?br(o):null;if(s!=null){var h=s==="y"?"height":"width";switch(a){case Pe:u[s]=u[s]-(t[h]/2-e[h]/2);break;case Ze:u[s]=u[s]+(t[h]/2-e[h]/2);break}}return u}function sn(n,t){t===void 0&&(t={});var e=t,r=e.placement,o=r===void 0?n.placement:r,a=e.strategy,i=a===void 0?n.strategy:a,c=e.boundary,u=c===void 0?la:c,s=e.rootBoundary,h=s===void 0?pr:s,p=e.elementContext,m=p===void 0?Ke:p,_=e.altBoundary,E=_===void 0?!1:_,A=e.padding,C=A===void 0?0:A,O=Aa(typeof C!="number"?C:Ta(C,on)),L=m===Ke?ca:Ke,B=n.rects.popper,M=n.elements[E?L:m],U=il(He(M)?M:M.contextElement||Se(n.elements.popper),u,h,i),V=en(n.elements.reference),Q=Sa({reference:V,element:B,placement:o}),X=tr(Object.assign({},B,Q)),P=m===Ke?X:V,F={top:U.top-P.top+O.top,bottom:P.bottom-U.bottom+O.bottom,left:U.left-P.left+O.left,right:P.right-U.right+O.right},Y=n.modifiersData.offset;if(m===Ke&&Y){var Z=Y[o];Object.keys(F).forEach(function(lt){var Nt=[Yt,Bt].indexOf(lt)>=0?1:-1,ut=[Ot,Bt].indexOf(lt)>=0?"y":"x";F[lt]+=Z[ut]*Nt})}return F}function al(n,t){t===void 0&&(t={});var e=t,r=e.placement,o=e.boundary,a=e.rootBoundary,i=e.padding,c=e.flipVariations,u=e.allowedAutoPlacements,s=u===void 0?mr:u,h=nn(r),p=h?c?Js:Js.filter(function(E){return nn(E)===h}):on,m=p.filter(function(E){return s.indexOf(E)>=0});m.length===0&&(m=p);var _=m.reduce(function(E,A){return E[A]=sn(n,{placement:A,boundary:o,rootBoundary:a,padding:i})[ue(A)],E},{});return Object.keys(_).sort(function(E,A){return _[E]-_[A]})}function ol(n){if(ue(n)===cs)return[];var t=Zn(n);return[ui(n),t,ui(t)]}function ll(n){var t=n.state,e=n.options,r=n.name;if(!t.modifiersData[r]._skip){for(var o=e.mainAxis,a=o===void 0?!0:o,i=e.altAxis,c=i===void 0?!0:i,u=e.fallbackPlacements,s=e.padding,h=e.boundary,p=e.rootBoundary,m=e.altBoundary,_=e.flipVariations,E=_===void 0?!0:_,A=e.allowedAutoPlacements,C=t.options.placement,O=ue(C),L=O===C,B=u||(L||!E?[Zn(C)]:ol(C)),M=[C].concat(B).reduce(function(At,Tt){return At.concat(ue(Tt)===cs?al(t,{placement:Tt,boundary:h,rootBoundary:p,padding:s,flipVariations:E,allowedAutoPlacements:A}):Tt)},[]),U=t.rects.reference,V=t.rects.popper,Q=new Map,X=!0,P=M[0],F=0;F<M.length;F++){var Y=M[F],Z=ue(Y),lt=nn(Y)===Pe,Nt=[Ot,Bt].indexOf(Z)>=0,ut=Nt?"width":"height",it=sn(t,{placement:Y,boundary:h,rootBoundary:p,altBoundary:m,padding:s}),at=Nt?lt?Yt:Lt:lt?Bt:Ot;U[ut]>V[ut]&&(at=Zn(at));var N=Zn(at),x=[];if(a&&x.push(it[Z]<=0),c&&x.push(it[at]<=0,it[N]<=0),x.every(function(At){return At})){P=Y,X=!1;break}Q.set(Y,x)}if(X)for(var K=E?3:1,Ct=function(Tt){var Mt=M.find(function(yt){var gt=Q.get(yt);if(gt)return gt.slice(0,Tt).every(function(ft){return ft})});if(Mt)return P=Mt,"break"},St=K;St>0;St--){var Dt=Ct(St);if(Dt==="break")break}t.placement!==P&&(t.modifiersData[r]._skip=!0,t.placement=P,t.reset=!0)}}const ka={name:"flip",enabled:!0,phase:"main",fn:ll,requiresIfExists:["offset"],data:{_skip:!1}};function hi(n,t,e){return e===void 0&&(e={x:0,y:0}),{top:n.top-t.height-e.y,right:n.right-t.width+e.x,bottom:n.bottom-t.height+e.y,left:n.left-t.width-e.x}}function fi(n){return[Ot,Yt,Bt,Lt].some(function(t){return n[t]>=0})}function cl(n){var t=n.state,e=n.name,r=t.rects.reference,o=t.rects.popper,a=t.modifiersData.preventOverflow,i=sn(t,{elementContext:"reference"}),c=sn(t,{altBoundary:!0}),u=hi(i,r),s=hi(c,o,a),h=fi(u),p=fi(s);t.modifiersData[e]={referenceClippingOffsets:u,popperEscapeOffsets:s,isReferenceHidden:h,hasPopperEscaped:p},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":p})}const xa={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:cl};function ul(n,t,e){var r=ue(n),o=[Lt,Ot].indexOf(r)>=0?-1:1,a=typeof e=="function"?e(Object.assign({},t,{placement:n})):e,i=a[0],c=a[1];return i=i||0,c=(c||0)*o,[Lt,Yt].indexOf(r)>=0?{x:c,y:i}:{x:i,y:c}}function dl(n){var t=n.state,e=n.options,r=n.name,o=e.offset,a=o===void 0?[0,0]:o,i=mr.reduce(function(h,p){return h[p]=ul(p,t.rects,a),h},{}),c=i[t.placement],u=c.x,s=c.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=u,t.modifiersData.popperOffsets.y+=s),t.modifiersData[r]=i}const $a={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:dl};function hl(n){var t=n.state,e=n.name;t.modifiersData[e]=Sa({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const Cr={name:"popperOffsets",enabled:!0,phase:"read",fn:hl,data:{}};function fl(n){return n==="x"?"y":"x"}function pl(n){var t=n.state,e=n.options,r=n.name,o=e.mainAxis,a=o===void 0?!0:o,i=e.altAxis,c=i===void 0?!1:i,u=e.boundary,s=e.rootBoundary,h=e.altBoundary,p=e.padding,m=e.tether,_=m===void 0?!0:m,E=e.tetherOffset,A=E===void 0?0:E,C=sn(t,{boundary:u,rootBoundary:s,padding:p,altBoundary:h}),O=ue(t.placement),L=nn(t.placement),B=!L,M=br(O),U=fl(M),V=t.modifiersData.popperOffsets,Q=t.rects.reference,X=t.rects.popper,P=typeof A=="function"?A(Object.assign({},t.rects,{placement:t.placement})):A,F=typeof P=="number"?{mainAxis:P,altAxis:P}:Object.assign({mainAxis:0,altAxis:0},P),Y=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Z={x:0,y:0};if(V){if(a){var lt,Nt=M==="y"?Ot:Lt,ut=M==="y"?Bt:Yt,it=M==="y"?"height":"width",at=V[M],N=at+C[Nt],x=at-C[ut],K=_?-X[it]/2:0,Ct=L===Pe?Q[it]:X[it],St=L===Pe?-X[it]:-Q[it],Dt=t.elements.arrow,At=_&&Dt?vr(Dt):{width:0,height:0},Tt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Na(),Mt=Tt[Nt],yt=Tt[ut],gt=gn(0,Q[it],At[it]),ft=B?Q[it]/2-K-gt-Mt-F.mainAxis:Ct-gt-Mt-F.mainAxis,pe=B?-Q[it]/2+K+gt+yt+F.mainAxis:St+gt+yt+F.mainAxis,Ht=t.elements.arrow&&Sn(t.elements.arrow),Ft=Ht?M==="y"?Ht.clientTop||0:Ht.clientLeft||0:0,qt=(lt=Y==null?void 0:Y[M])!=null?lt:0,y=at+ft-qt-Ft,j=at+pe-qt,$=gn(_?is(N,y):N,at,_?Ie(x,j):x);V[M]=$,Z[M]=$-at}if(c){var tt,dt=M==="x"?Ot:Lt,ee=M==="x"?Bt:Yt,kt=V[U],I=U==="y"?"height":"width",vt=kt+C[dt],bt=kt-C[ee],Gt=[Ot,Lt].indexOf(O)!==-1,ie=(tt=Y==null?void 0:Y[U])!=null?tt:0,Ee=Gt?vt:kt-Q[I]-X[I]-ie+F.altAxis,d=Gt?kt+Q[I]+X[I]-ie-F.altAxis:bt,W=_&&Gt?Yo(Ee,kt,d):gn(_?Ee:vt,kt,_?d:bt);V[U]=W,Z[U]=W-kt}t.modifiersData[r]=Z}}const Oa={name:"preventOverflow",enabled:!0,phase:"main",fn:pl,requiresIfExists:["offset"]};function ml(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function _l(n){return n===Kt(n)||!Xt(n)?Nr(n):ml(n)}function gl(n){var t=n.getBoundingClientRect(),e=tn(t.width)/n.offsetWidth||1,r=tn(t.height)/n.offsetHeight||1;return e!==1||r!==1}function vl(n,t,e){e===void 0&&(e=!1);var r=Xt(t),o=Xt(t)&&gl(t),a=Se(t),i=en(n,o,e),c={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!e)&&((he(t)!=="body"||Tr(a))&&(c=_l(t)),Xt(t)?(u=en(t,!0),u.x+=t.clientLeft,u.y+=t.clientTop):a&&(u.x=Ar(a))),{x:i.left+c.scrollLeft-u.x,y:i.top+c.scrollTop-u.y,width:i.width,height:i.height}}function bl(n){var t=new Map,e=new Set,r=[];n.forEach(function(a){t.set(a.name,a)});function o(a){e.add(a.name);var i=[].concat(a.requires||[],a.requiresIfExists||[]);i.forEach(function(c){if(!e.has(c)){var u=t.get(c);u&&o(u)}}),r.push(a)}return n.forEach(function(a){e.has(a.name)||o(a)}),r}function yl(n){var t=bl(n);return ba.reduce(function(e,r){return e.concat(t.filter(function(o){return o.phase===r}))},[])}function El(n){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(n())})})),t}}function Nl(n){var t=n.reduce(function(e,r){var o=e[r.name];return e[r.name]=o?Object.assign({},o,r,{options:Object.assign({},o.options,r.options),data:Object.assign({},o.data,r.data)}):r,e},{});return Object.keys(t).map(function(e){return t[e]})}var pi={placement:"bottom",modifiers:[],strategy:"absolute"};function mi(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function ds(n){n===void 0&&(n={});var t=n,e=t.defaultModifiers,r=e===void 0?[]:e,o=t.defaultOptions,a=o===void 0?pi:o;return function(c,u,s){s===void 0&&(s=a);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},pi,a),modifiersData:{},elements:{reference:c,popper:u},attributes:{},styles:{}},p=[],m=!1,_={state:h,setOptions:function(O){var L=typeof O=="function"?O(h.options):O;A(),h.options=Object.assign({},a,h.options,L),h.scrollParents={reference:He(c)?vn(c):c.contextElement?vn(c.contextElement):[],popper:vn(u)};var B=yl(Nl([].concat(r,h.options.modifiers)));return h.orderedModifiers=B.filter(function(M){return M.enabled}),E(),_.update()},forceUpdate:function(){if(!m){var O=h.elements,L=O.reference,B=O.popper;if(mi(L,B)){h.rects={reference:vl(L,Sn(B),h.options.strategy==="fixed"),popper:vr(B)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(F){return h.modifiersData[F.name]=Object.assign({},F.data)});for(var M=0;M<h.orderedModifiers.length;M++){if(h.reset===!0){h.reset=!1,M=-1;continue}var U=h.orderedModifiers[M],V=U.fn,Q=U.options,X=Q===void 0?{}:Q,P=U.name;typeof V=="function"&&(h=V({state:h,options:X,name:P,instance:_})||h)}}}},update:El(function(){return new Promise(function(C){_.forceUpdate(),C(h)})}),destroy:function(){A(),m=!0}};if(!mi(c,u))return _;_.setOptions(s).then(function(C){!m&&s.onFirstUpdate&&s.onFirstUpdate(C)});function E(){h.orderedModifiers.forEach(function(C){var O=C.name,L=C.options,B=L===void 0?{}:L,M=C.effect;if(typeof M=="function"){var U=M({state:h,name:O,instance:_,options:B}),V=function(){};p.push(U||V)}})}function A(){p.forEach(function(C){return C()}),p=[]}return _}}var Al=ds(),Tl=[Er,Cr,yr,gr],Cl=ds({defaultModifiers:Tl}),wl=[Er,Cr,yr,gr,$a,ka,Oa,Ca,xa],wr=ds({defaultModifiers:wl});const La=Object.freeze(Object.defineProperty({__proto__:null,afterMain:ma,afterRead:ha,afterWrite:va,applyStyles:gr,arrow:Ca,auto:cs,basePlacements:on,beforeMain:fa,beforeRead:ua,beforeWrite:_a,bottom:Bt,clippingParents:la,computeStyles:yr,createPopper:wr,createPopperBase:Al,createPopperLite:Cl,detectOverflow:sn,end:Ze,eventListeners:Er,flip:ka,hide:xa,left:Lt,main:pa,modifierPhases:ba,offset:$a,placements:mr,popper:Ke,popperGenerator:ds,popperOffsets:Cr,preventOverflow:Oa,read:da,reference:ca,right:Yt,start:Pe,top:Ot,variationPlacements:Js,viewport:pr,write:ga},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.6 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Ne=new Map,Ls={set(n,t,e){Ne.has(n)||Ne.set(n,new Map);const r=Ne.get(n);if(!r.has(t)&&r.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`);return}r.set(t,e)},get(n,t){return Ne.has(n)&&Ne.get(n).get(t)||null},remove(n,t){if(!Ne.has(n))return;const e=Ne.get(n);e.delete(t),e.size===0&&Ne.delete(n)}},Sl=1e6,kl=1e3,er="transitionend",Da=n=>(n&&window.CSS&&window.CSS.escape&&(n=n.replace(/#([^\s"#']+)/g,(t,e)=>`#${CSS.escape(e)}`)),n),xl=n=>n==null?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase(),$l=n=>{do n+=Math.floor(Math.random()*Sl);while(document.getElementById(n));return n},Ol=n=>{if(!n)return 0;let{transitionDuration:t,transitionDelay:e}=window.getComputedStyle(n);const r=Number.parseFloat(t),o=Number.parseFloat(e);return!r&&!o?0:(t=t.split(",")[0],e=e.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(e))*kl)},Ma=n=>{n.dispatchEvent(new Event(er))},_e=n=>!n||typeof n!="object"?!1:(typeof n.jquery<"u"&&(n=n[0]),typeof n.nodeType<"u"),Te=n=>_e(n)?n.jquery?n[0]:n:typeof n=="string"&&n.length>0?document.querySelector(Da(n)):null,ln=n=>{if(!_e(n)||n.getClientRects().length===0)return!1;const t=getComputedStyle(n).getPropertyValue("visibility")==="visible",e=n.closest("details:not([open])");if(!e)return t;if(e!==n){const r=n.closest("summary");if(r&&r.parentNode!==e||r===null)return!1}return t},Ce=n=>!n||n.nodeType!==Node.ELEMENT_NODE||n.classList.contains("disabled")?!0:typeof n.disabled<"u"?n.disabled:n.hasAttribute("disabled")&&n.getAttribute("disabled")!=="false",Ia=n=>{if(!document.documentElement.attachShadow)return null;if(typeof n.getRootNode=="function"){const t=n.getRootNode();return t instanceof ShadowRoot?t:null}return n instanceof ShadowRoot?n:n.parentNode?Ia(n.parentNode):null},as=()=>{},kn=n=>{n.offsetHeight},Ra=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Ds=[],Ll=n=>{document.readyState==="loading"?(Ds.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of Ds)t()}),Ds.push(n)):n()},Jt=()=>document.documentElement.dir==="rtl",te=n=>{Ll(()=>{const t=Ra();if(t){const e=n.NAME,r=t.fn[e];t.fn[e]=n.jQueryInterface,t.fn[e].Constructor=n,t.fn[e].noConflict=()=>(t.fn[e]=r,n.jQueryInterface)}})},Pt=(n,t=[],e=n)=>typeof n=="function"?n.call(...t):e,Pa=(n,t,e=!0)=>{if(!e){Pt(n);return}const o=Ol(t)+5;let a=!1;const i=({target:c})=>{c===t&&(a=!0,t.removeEventListener(er,i),Pt(n))};t.addEventListener(er,i),setTimeout(()=>{a||Ma(t)},o)},Sr=(n,t,e,r)=>{const o=n.length;let a=n.indexOf(t);return a===-1?!e&&r?n[o-1]:n[0]:(a+=e?1:-1,r&&(a=(a+o)%o),n[Math.max(0,Math.min(a,o-1))])},Dl=/[^.]*(?=\..*)\.|.*/,Ml=/\..*/,Il=/::\d+$/,Ms={};let _i=1;const Ha={mouseenter:"mouseover",mouseleave:"mouseout"},Rl=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Fa(n,t){return t&&`${t}::${_i++}`||n.uidEvent||_i++}function Va(n){const t=Fa(n);return n.uidEvent=t,Ms[t]=Ms[t]||{},Ms[t]}function Pl(n,t){return function e(r){return kr(r,{delegateTarget:n}),e.oneOff&&T.off(n,r.type,t),t.apply(n,[r])}}function Hl(n,t,e){return function r(o){const a=n.querySelectorAll(t);for(let{target:i}=o;i&&i!==this;i=i.parentNode)for(const c of a)if(c===i)return kr(o,{delegateTarget:i}),r.oneOff&&T.off(n,o.type,t,e),e.apply(i,[o])}}function Wa(n,t,e=null){return Object.values(n).find(r=>r.callable===t&&r.delegationSelector===e)}function ja(n,t,e){const r=typeof t=="string",o=r?e:t||e;let a=Ua(n);return Rl.has(a)||(a=n),[r,o,a]}function gi(n,t,e,r,o){if(typeof t!="string"||!n)return;let[a,i,c]=ja(t,e,r);t in Ha&&(i=(E=>function(A){if(!A.relatedTarget||A.relatedTarget!==A.delegateTarget&&!A.delegateTarget.contains(A.relatedTarget))return E.call(this,A)})(i));const u=Va(n),s=u[c]||(u[c]={}),h=Wa(s,i,a?e:null);if(h){h.oneOff=h.oneOff&&o;return}const p=Fa(i,t.replace(Dl,"")),m=a?Hl(n,e,i):Pl(n,i);m.delegationSelector=a?e:null,m.callable=i,m.oneOff=o,m.uidEvent=p,s[p]=m,n.addEventListener(c,m,a)}function nr(n,t,e,r,o){const a=Wa(t[e],r,o);a&&(n.removeEventListener(e,a,!!o),delete t[e][a.uidEvent])}function Fl(n,t,e,r){const o=t[e]||{};for(const[a,i]of Object.entries(o))a.includes(r)&&nr(n,t,e,i.callable,i.delegationSelector)}function Ua(n){return n=n.replace(Ml,""),Ha[n]||n}const T={on(n,t,e,r){gi(n,t,e,r,!1)},one(n,t,e,r){gi(n,t,e,r,!0)},off(n,t,e,r){if(typeof t!="string"||!n)return;const[o,a,i]=ja(t,e,r),c=i!==t,u=Va(n),s=u[i]||{},h=t.startsWith(".");if(typeof a<"u"){if(!Object.keys(s).length)return;nr(n,u,i,a,o?e:null);return}if(h)for(const p of Object.keys(u))Fl(n,u,p,t.slice(1));for(const[p,m]of Object.entries(s)){const _=p.replace(Il,"");(!c||t.includes(_))&&nr(n,u,i,m.callable,m.delegationSelector)}},trigger(n,t,e){if(typeof t!="string"||!n)return null;const r=Ra(),o=Ua(t),a=t!==o;let i=null,c=!0,u=!0,s=!1;a&&r&&(i=r.Event(t,e),r(n).trigger(i),c=!i.isPropagationStopped(),u=!i.isImmediatePropagationStopped(),s=i.isDefaultPrevented());const h=kr(new Event(t,{bubbles:c,cancelable:!0}),e);return s&&h.preventDefault(),u&&n.dispatchEvent(h),h.defaultPrevented&&i&&i.preventDefault(),h}};function kr(n,t={}){for(const[e,r]of Object.entries(t))try{n[e]=r}catch{Object.defineProperty(n,e,{configurable:!0,get(){return r}})}return n}function vi(n){if(n==="true")return!0;if(n==="false")return!1;if(n===Number(n).toString())return Number(n);if(n===""||n==="null")return null;if(typeof n!="string")return n;try{return JSON.parse(decodeURIComponent(n))}catch{return n}}function Is(n){return n.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const ge={setDataAttribute(n,t,e){n.setAttribute(`data-bs-${Is(t)}`,e)},removeDataAttribute(n,t){n.removeAttribute(`data-bs-${Is(t)}`)},getDataAttributes(n){if(!n)return{};const t={},e=Object.keys(n.dataset).filter(r=>r.startsWith("bs")&&!r.startsWith("bsConfig"));for(const r of e){let o=r.replace(/^bs/,"");o=o.charAt(0).toLowerCase()+o.slice(1),t[o]=vi(n.dataset[r])}return t},getDataAttribute(n,t){return vi(n.getAttribute(`data-bs-${Is(t)}`))}};class xn{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const r=_e(e)?ge.getDataAttribute(e,"config"):{};return{...this.constructor.Default,...typeof r=="object"?r:{},..._e(e)?ge.getDataAttributes(e):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const[r,o]of Object.entries(e)){const a=t[r],i=_e(a)?"element":xl(a);if(!new RegExp(o).test(i))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${r}" provided type "${i}" but expected type "${o}".`)}}}const Vl="5.3.6";class re extends xn{constructor(t,e){super(),t=Te(t),t&&(this._element=t,this._config=this._getConfig(e),Ls.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Ls.remove(this._element,this.constructor.DATA_KEY),T.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,r=!0){Pa(t,e,r)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return Ls.get(Te(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,typeof e=="object"?e:null)}static get VERSION(){return Vl}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const Rs=n=>{let t=n.getAttribute("data-bs-target");if(!t||t==="#"){let e=n.getAttribute("href");if(!e||!e.includes("#")&&!e.startsWith("."))return null;e.includes("#")&&!e.startsWith("#")&&(e=`#${e.split("#")[1]}`),t=e&&e!=="#"?e.trim():null}return t?t.split(",").map(e=>Da(e)).join(","):null},H={find(n,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,n))},findOne(n,t=document.documentElement){return Element.prototype.querySelector.call(t,n)},children(n,t){return[].concat(...n.children).filter(e=>e.matches(t))},parents(n,t){const e=[];let r=n.parentNode.closest(t);for(;r;)e.push(r),r=r.parentNode.closest(t);return e},prev(n,t){let e=n.previousElementSibling;for(;e;){if(e.matches(t))return[e];e=e.previousElementSibling}return[]},next(n,t){let e=n.nextElementSibling;for(;e;){if(e.matches(t))return[e];e=e.nextElementSibling}return[]},focusableChildren(n){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>`${e}:not([tabindex^="-"])`).join(",");return this.find(t,n).filter(e=>!Ce(e)&&ln(e))},getSelectorFromElement(n){const t=Rs(n);return t&&H.findOne(t)?t:null},getElementFromSelector(n){const t=Rs(n);return t?H.findOne(t):null},getMultipleElementsFromSelector(n){const t=Rs(n);return t?H.find(t):[]}},hs=(n,t="hide")=>{const e=`click.dismiss${n.EVENT_KEY}`,r=n.NAME;T.on(document,e,`[data-bs-dismiss="${r}"]`,function(o){if(["A","AREA"].includes(this.tagName)&&o.preventDefault(),Ce(this))return;const a=H.getElementFromSelector(this)||this.closest(`.${r}`);n.getOrCreateInstance(a)[t]()})},Wl="alert",jl="bs.alert",Ba=`.${jl}`,Ul=`close${Ba}`,Bl=`closed${Ba}`,Yl="fade",Kl="show";class fs extends re{static get NAME(){return Wl}close(){if(T.trigger(this._element,Ul).defaultPrevented)return;this._element.classList.remove(Kl);const e=this._element.classList.contains(Yl);this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),T.trigger(this._element,Bl),this.dispose()}static jQueryInterface(t){return this.each(function(){const e=fs.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}hs(fs,"close");te(fs);const ql="button",Gl="bs.button",zl=`.${Gl}`,Ql=".data-api",Xl="active",bi='[data-bs-toggle="button"]',Jl=`click${zl}${Ql}`;class ps extends re{static get NAME(){return ql}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Xl))}static jQueryInterface(t){return this.each(function(){const e=ps.getOrCreateInstance(this);t==="toggle"&&e[t]()})}}T.on(document,Jl,bi,n=>{n.preventDefault();const t=n.target.closest(bi);ps.getOrCreateInstance(t).toggle()});te(ps);const Zl="swipe",cn=".bs.swipe",tc=`touchstart${cn}`,ec=`touchmove${cn}`,nc=`touchend${cn}`,sc=`pointerdown${cn}`,rc=`pointerup${cn}`,ic="touch",ac="pen",oc="pointer-event",lc=40,cc={endCallback:null,leftCallback:null,rightCallback:null},uc={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class os extends xn{constructor(t,e){super(),this._element=t,!(!t||!os.isSupported())&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return cc}static get DefaultType(){return uc}static get NAME(){return Zl}dispose(){T.off(this._element,cn)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),Pt(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=lc)return;const e=t/this._deltaX;this._deltaX=0,e&&Pt(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(T.on(this._element,sc,t=>this._start(t)),T.on(this._element,rc,t=>this._end(t)),this._element.classList.add(oc)):(T.on(this._element,tc,t=>this._start(t)),T.on(this._element,ec,t=>this._move(t)),T.on(this._element,nc,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===ac||t.pointerType===ic)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const dc="carousel",hc="bs.carousel",ke=`.${hc}`,Ya=".data-api",fc="ArrowLeft",pc="ArrowRight",mc=500,hn="next",Be="prev",qe="left",ts="right",_c=`slide${ke}`,Ps=`slid${ke}`,gc=`keydown${ke}`,vc=`mouseenter${ke}`,bc=`mouseleave${ke}`,yc=`dragstart${ke}`,Ec=`load${ke}${Ya}`,Nc=`click${ke}${Ya}`,Ka="carousel",Un="active",Ac="slide",Tc="carousel-item-end",Cc="carousel-item-start",wc="carousel-item-next",Sc="carousel-item-prev",qa=".active",Ga=".carousel-item",kc=qa+Ga,xc=".carousel-item img",$c=".carousel-indicators",Oc="[data-bs-slide], [data-bs-slide-to]",Lc='[data-bs-ride="carousel"]',Dc={[fc]:ts,[pc]:qe},Mc={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Ic={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class $n extends re{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=H.findOne($c,this._element),this._addEventListeners(),this._config.ride===Ka&&this.cycle()}static get Default(){return Mc}static get DefaultType(){return Ic}static get NAME(){return dc}next(){this._slide(hn)}nextWhenVisible(){!document.hidden&&ln(this._element)&&this.next()}prev(){this._slide(Be)}pause(){this._isSliding&&Ma(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){T.one(this._element,Ps,()=>this.cycle());return}this.cycle()}}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding){T.one(this._element,Ps,()=>this.to(t));return}const r=this._getItemIndex(this._getActive());if(r===t)return;const o=t>r?hn:Be;this._slide(o,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&T.on(this._element,gc,t=>this._keydown(t)),this._config.pause==="hover"&&(T.on(this._element,vc,()=>this.pause()),T.on(this._element,bc,()=>this._maybeEnableCycle())),this._config.touch&&os.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const r of H.find(xc,this._element))T.on(r,yc,o=>o.preventDefault());const e={leftCallback:()=>this._slide(this._directionToOrder(qe)),rightCallback:()=>this._slide(this._directionToOrder(ts)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),mc+this._config.interval))}};this._swipeHelper=new os(this._element,e)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=Dc[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=H.findOne(qa,this._indicatorsElement);e.classList.remove(Un),e.removeAttribute("aria-current");const r=H.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);r&&(r.classList.add(Un),r.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const r=this._getActive(),o=t===hn,a=e||Sr(this._getItems(),r,o,this._config.wrap);if(a===r)return;const i=this._getItemIndex(a),c=_=>T.trigger(this._element,_,{relatedTarget:a,direction:this._orderToDirection(t),from:this._getItemIndex(r),to:i});if(c(_c).defaultPrevented||!r||!a)return;const s=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(i),this._activeElement=a;const h=o?Cc:Tc,p=o?wc:Sc;a.classList.add(p),kn(a),r.classList.add(h),a.classList.add(h);const m=()=>{a.classList.remove(h,p),a.classList.add(Un),r.classList.remove(Un,p,h),this._isSliding=!1,c(Ps)};this._queueCallback(m,r,this._isAnimated()),s&&this.cycle()}_isAnimated(){return this._element.classList.contains(Ac)}_getActive(){return H.findOne(kc,this._element)}_getItems(){return H.find(Ga,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return Jt()?t===qe?Be:hn:t===qe?hn:Be}_orderToDirection(t){return Jt()?t===Be?qe:ts:t===Be?ts:qe}static jQueryInterface(t){return this.each(function(){const e=$n.getOrCreateInstance(this,t);if(typeof t=="number"){e.to(t);return}if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}T.on(document,Nc,Oc,function(n){const t=H.getElementFromSelector(this);if(!t||!t.classList.contains(Ka))return;n.preventDefault();const e=$n.getOrCreateInstance(t),r=this.getAttribute("data-bs-slide-to");if(r){e.to(r),e._maybeEnableCycle();return}if(ge.getDataAttribute(this,"slide")==="next"){e.next(),e._maybeEnableCycle();return}e.prev(),e._maybeEnableCycle()});T.on(window,Ec,()=>{const n=H.find(Lc);for(const t of n)$n.getOrCreateInstance(t)});te($n);const Rc="collapse",Pc="bs.collapse",On=`.${Pc}`,Hc=".data-api",Fc=`show${On}`,Vc=`shown${On}`,Wc=`hide${On}`,jc=`hidden${On}`,Uc=`click${On}${Hc}`,Hs="show",ze="collapse",Bn="collapsing",Bc="collapsed",Yc=`:scope .${ze} .${ze}`,Kc="collapse-horizontal",qc="width",Gc="height",zc=".collapse.show, .collapse.collapsing",sr='[data-bs-toggle="collapse"]',Qc={parent:null,toggle:!0},Xc={parent:"(null|element)",toggle:"boolean"};class yn extends re{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const r=H.find(sr);for(const o of r){const a=H.getSelectorFromElement(o),i=H.find(a).filter(c=>c===this._element);a!==null&&i.length&&this._triggerArray.push(o)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Qc}static get DefaultType(){return Xc}static get NAME(){return Rc}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(zc).filter(c=>c!==this._element).map(c=>yn.getOrCreateInstance(c,{toggle:!1}))),t.length&&t[0]._isTransitioning||T.trigger(this._element,Fc).defaultPrevented)return;for(const c of t)c.hide();const r=this._getDimension();this._element.classList.remove(ze),this._element.classList.add(Bn),this._element.style[r]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const o=()=>{this._isTransitioning=!1,this._element.classList.remove(Bn),this._element.classList.add(ze,Hs),this._element.style[r]="",T.trigger(this._element,Vc)},i=`scroll${r[0].toUpperCase()+r.slice(1)}`;this._queueCallback(o,this._element,!0),this._element.style[r]=`${this._element[i]}px`}hide(){if(this._isTransitioning||!this._isShown()||T.trigger(this._element,Wc).defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,kn(this._element),this._element.classList.add(Bn),this._element.classList.remove(ze,Hs);for(const o of this._triggerArray){const a=H.getElementFromSelector(o);a&&!this._isShown(a)&&this._addAriaAndCollapsedClass([o],!1)}this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(Bn),this._element.classList.add(ze),T.trigger(this._element,jc)};this._element.style[e]="",this._queueCallback(r,this._element,!0)}_isShown(t=this._element){return t.classList.contains(Hs)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=Te(t.parent),t}_getDimension(){return this._element.classList.contains(Kc)?qc:Gc}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(sr);for(const e of t){const r=H.getElementFromSelector(e);r&&this._addAriaAndCollapsedClass([e],this._isShown(r))}}_getFirstLevelChildren(t){const e=H.find(Yc,this._config.parent);return H.find(t,this._config.parent).filter(r=>!e.includes(r))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const r of t)r.classList.toggle(Bc,!e),r.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return typeof t=="string"&&/show|hide/.test(t)&&(e.toggle=!1),this.each(function(){const r=yn.getOrCreateInstance(this,e);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t]()}})}}T.on(document,Uc,sr,function(n){(n.target.tagName==="A"||n.delegateTarget&&n.delegateTarget.tagName==="A")&&n.preventDefault();for(const t of H.getMultipleElementsFromSelector(this))yn.getOrCreateInstance(t,{toggle:!1}).toggle()});te(yn);const yi="dropdown",Jc="bs.dropdown",We=`.${Jc}`,xr=".data-api",Zc="Escape",Ei="Tab",tu="ArrowUp",Ni="ArrowDown",eu=2,nu=`hide${We}`,su=`hidden${We}`,ru=`show${We}`,iu=`shown${We}`,za=`click${We}${xr}`,Qa=`keydown${We}${xr}`,au=`keyup${We}${xr}`,Ge="show",ou="dropup",lu="dropend",cu="dropstart",uu="dropup-center",du="dropdown-center",De='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',hu=`${De}.${Ge}`,es=".dropdown-menu",fu=".navbar",pu=".navbar-nav",mu=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",_u=Jt()?"top-end":"top-start",gu=Jt()?"top-start":"top-end",vu=Jt()?"bottom-end":"bottom-start",bu=Jt()?"bottom-start":"bottom-end",yu=Jt()?"left-start":"right-start",Eu=Jt()?"right-start":"left-start",Nu="top",Au="bottom",Tu={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Cu={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class de extends re{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=H.next(this._element,es)[0]||H.prev(this._element,es)[0]||H.findOne(es,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Tu}static get DefaultType(){return Cu}static get NAME(){return yi}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Ce(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!T.trigger(this._element,ru,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(pu))for(const r of[].concat(...document.body.children))T.on(r,"mouseover",as);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Ge),this._element.classList.add(Ge),T.trigger(this._element,iu,t)}}hide(){if(Ce(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!T.trigger(this._element,nu,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))T.off(r,"mouseover",as);this._popper&&this._popper.destroy(),this._menu.classList.remove(Ge),this._element.classList.remove(Ge),this._element.setAttribute("aria-expanded","false"),ge.removeDataAttribute(this._menu,"popper"),T.trigger(this._element,su,t),this._element.focus()}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!_e(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${yi.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof La>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let t=this._element;this._config.reference==="parent"?t=this._parent:_e(this._config.reference)?t=Te(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=wr(t,this._menu,e)}_isShown(){return this._menu.classList.contains(Ge)}_getPlacement(){const t=this._parent;if(t.classList.contains(lu))return yu;if(t.classList.contains(cu))return Eu;if(t.classList.contains(uu))return Nu;if(t.classList.contains(du))return Au;const e=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(ou)?e?gu:_u:e?bu:vu}_detectNavbar(){return this._element.closest(fu)!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(ge.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...Pt(this._config.popperConfig,[void 0,t])}}_selectMenuItem({key:t,target:e}){const r=H.find(mu,this._menu).filter(o=>ln(o));r.length&&Sr(r,e,t===Ni,!r.includes(e)).focus()}static jQueryInterface(t){return this.each(function(){const e=de.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}static clearMenus(t){if(t.button===eu||t.type==="keyup"&&t.key!==Ei)return;const e=H.find(hu);for(const r of e){const o=de.getInstance(r);if(!o||o._config.autoClose===!1)continue;const a=t.composedPath(),i=a.includes(o._menu);if(a.includes(o._element)||o._config.autoClose==="inside"&&!i||o._config.autoClose==="outside"&&i||o._menu.contains(t.target)&&(t.type==="keyup"&&t.key===Ei||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const c={relatedTarget:o._element};t.type==="click"&&(c.clickEvent=t),o._completeHide(c)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),r=t.key===Zc,o=[tu,Ni].includes(t.key);if(!o&&!r||e&&!r)return;t.preventDefault();const a=this.matches(De)?this:H.prev(this,De)[0]||H.next(this,De)[0]||H.findOne(De,t.delegateTarget.parentNode),i=de.getOrCreateInstance(a);if(o){t.stopPropagation(),i.show(),i._selectMenuItem(t);return}i._isShown()&&(t.stopPropagation(),i.hide(),a.focus())}}T.on(document,Qa,De,de.dataApiKeydownHandler);T.on(document,Qa,es,de.dataApiKeydownHandler);T.on(document,za,de.clearMenus);T.on(document,au,de.clearMenus);T.on(document,za,De,function(n){n.preventDefault(),de.getOrCreateInstance(this).toggle()});te(de);const Xa="backdrop",wu="fade",Ai="show",Ti=`mousedown.bs.${Xa}`,Su={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},ku={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Ja extends xn{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return Su}static get DefaultType(){return ku}static get NAME(){return Xa}show(t){if(!this._config.isVisible){Pt(t);return}this._append();const e=this._getElement();this._config.isAnimated&&kn(e),e.classList.add(Ai),this._emulateAnimation(()=>{Pt(t)})}hide(t){if(!this._config.isVisible){Pt(t);return}this._getElement().classList.remove(Ai),this._emulateAnimation(()=>{this.dispose(),Pt(t)})}dispose(){this._isAppended&&(T.off(this._element,Ti),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(wu),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=Te(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),T.on(t,Ti,()=>{Pt(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){Pa(t,this._getElement(),this._config.isAnimated)}}const xu="focustrap",$u="bs.focustrap",ls=`.${$u}`,Ou=`focusin${ls}`,Lu=`keydown.tab${ls}`,Du="Tab",Mu="forward",Ci="backward",Iu={autofocus:!0,trapElement:null},Ru={autofocus:"boolean",trapElement:"element"};class Za extends xn{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Iu}static get DefaultType(){return Ru}static get NAME(){return xu}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),T.off(document,ls),T.on(document,Ou,t=>this._handleFocusin(t)),T.on(document,Lu,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,T.off(document,ls))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const r=H.focusableChildren(e);r.length===0?e.focus():this._lastTabNavDirection===Ci?r[r.length-1].focus():r[0].focus()}_handleKeydown(t){t.key===Du&&(this._lastTabNavDirection=t.shiftKey?Ci:Mu)}}const wi=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Si=".sticky-top",Yn="padding-right",ki="margin-right";class rr{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Yn,e=>e+t),this._setElementAttributes(wi,Yn,e=>e+t),this._setElementAttributes(Si,ki,e=>e-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Yn),this._resetElementAttributes(wi,Yn),this._resetElementAttributes(Si,ki)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,r){const o=this.getWidth(),a=i=>{if(i!==this._element&&window.innerWidth>i.clientWidth+o)return;this._saveInitialAttribute(i,e);const c=window.getComputedStyle(i).getPropertyValue(e);i.style.setProperty(e,`${r(Number.parseFloat(c))}px`)};this._applyManipulationCallback(t,a)}_saveInitialAttribute(t,e){const r=t.style.getPropertyValue(e);r&&ge.setDataAttribute(t,e,r)}_resetElementAttributes(t,e){const r=o=>{const a=ge.getDataAttribute(o,e);if(a===null){o.style.removeProperty(e);return}ge.removeDataAttribute(o,e),o.style.setProperty(e,a)};this._applyManipulationCallback(t,r)}_applyManipulationCallback(t,e){if(_e(t)){e(t);return}for(const r of H.find(t,this._element))e(r)}}const Pu="modal",Hu="bs.modal",Zt=`.${Hu}`,Fu=".data-api",Vu="Escape",Wu=`hide${Zt}`,ju=`hidePrevented${Zt}`,to=`hidden${Zt}`,eo=`show${Zt}`,Uu=`shown${Zt}`,Bu=`resize${Zt}`,Yu=`click.dismiss${Zt}`,Ku=`mousedown.dismiss${Zt}`,qu=`keydown.dismiss${Zt}`,Gu=`click${Zt}${Fu}`,xi="modal-open",zu="fade",$i="show",Fs="modal-static",Qu=".modal.show",Xu=".modal-dialog",Ju=".modal-body",Zu='[data-bs-toggle="modal"]',td={backdrop:!0,focus:!0,keyboard:!0},ed={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class rn extends re{constructor(t,e){super(t,e),this._dialog=H.findOne(Xu,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new rr,this._addEventListeners()}static get Default(){return td}static get DefaultType(){return ed}static get NAME(){return Pu}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||T.trigger(this._element,eo,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(xi),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||T.trigger(this._element,Wu).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove($i),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){T.off(window,Zt),T.off(this._dialog,Zt),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Ja({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Za({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=H.findOne(Ju,this._dialog);e&&(e.scrollTop=0),kn(this._element),this._element.classList.add($i);const r=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,T.trigger(this._element,Uu,{relatedTarget:t})};this._queueCallback(r,this._dialog,this._isAnimated())}_addEventListeners(){T.on(this._element,qu,t=>{if(t.key===Vu){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),T.on(window,Bu,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),T.on(this._element,Ku,t=>{T.one(this._element,Yu,e=>{if(!(this._element!==t.target||this._element!==e.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(xi),this._resetAdjustments(),this._scrollBar.reset(),T.trigger(this._element,to)})}_isAnimated(){return this._element.classList.contains(zu)}_triggerBackdropTransition(){if(T.trigger(this._element,ju).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,r=this._element.style.overflowY;r==="hidden"||this._element.classList.contains(Fs)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(Fs),this._queueCallback(()=>{this._element.classList.remove(Fs),this._queueCallback(()=>{this._element.style.overflowY=r},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),r=e>0;if(r&&!t){const o=Jt()?"paddingLeft":"paddingRight";this._element.style[o]=`${e}px`}if(!r&&t){const o=Jt()?"paddingRight":"paddingLeft";this._element.style[o]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each(function(){const r=rn.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t](e)}})}}T.on(document,Gu,Zu,function(n){const t=H.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&n.preventDefault(),T.one(t,eo,o=>{o.defaultPrevented||T.one(t,to,()=>{ln(this)&&this.focus()})});const e=H.findOne(Qu);e&&rn.getInstance(e).hide(),rn.getOrCreateInstance(t).toggle(this)});hs(rn);te(rn);const nd="offcanvas",sd="bs.offcanvas",be=`.${sd}`,no=".data-api",rd=`load${be}${no}`,id="Escape",Oi="show",Li="showing",Di="hiding",ad="offcanvas-backdrop",so=".offcanvas.show",od=`show${be}`,ld=`shown${be}`,cd=`hide${be}`,Mi=`hidePrevented${be}`,ro=`hidden${be}`,ud=`resize${be}`,dd=`click${be}${no}`,hd=`keydown.dismiss${be}`,fd='[data-bs-toggle="offcanvas"]',pd={backdrop:!0,keyboard:!0,scroll:!1},md={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class we extends re{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return pd}static get DefaultType(){return md}static get NAME(){return nd}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||T.trigger(this._element,od,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new rr().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Li);const r=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Oi),this._element.classList.remove(Li),T.trigger(this._element,ld,{relatedTarget:t})};this._queueCallback(r,this._element,!0)}hide(){if(!this._isShown||T.trigger(this._element,cd).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Di),this._backdrop.hide();const e=()=>{this._element.classList.remove(Oi,Di),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new rr().reset(),T.trigger(this._element,ro)};this._queueCallback(e,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{if(this._config.backdrop==="static"){T.trigger(this._element,Mi);return}this.hide()},e=!!this._config.backdrop;return new Ja({className:ad,isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?t:null})}_initializeFocusTrap(){return new Za({trapElement:this._element})}_addEventListeners(){T.on(this._element,hd,t=>{if(t.key===id){if(this._config.keyboard){this.hide();return}T.trigger(this._element,Mi)}})}static jQueryInterface(t){return this.each(function(){const e=we.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}T.on(document,dd,fd,function(n){const t=H.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),Ce(this))return;T.one(t,ro,()=>{ln(this)&&this.focus()});const e=H.findOne(so);e&&e!==t&&we.getInstance(e).hide(),we.getOrCreateInstance(t).toggle(this)});T.on(window,rd,()=>{for(const n of H.find(so))we.getOrCreateInstance(n).show()});T.on(window,ud,()=>{for(const n of H.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(n).position!=="fixed"&&we.getOrCreateInstance(n).hide()});hs(we);te(we);const _d=/^aria-[\w-]*$/i,io={"*":["class","dir","id","lang","role",_d],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},gd=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),vd=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,bd=(n,t)=>{const e=n.nodeName.toLowerCase();return t.includes(e)?gd.has(e)?!!vd.test(n.nodeValue):!0:t.filter(r=>r instanceof RegExp).some(r=>r.test(e))};function yd(n,t,e){if(!n.length)return n;if(e&&typeof e=="function")return e(n);const o=new window.DOMParser().parseFromString(n,"text/html"),a=[].concat(...o.body.querySelectorAll("*"));for(const i of a){const c=i.nodeName.toLowerCase();if(!Object.keys(t).includes(c)){i.remove();continue}const u=[].concat(...i.attributes),s=[].concat(t["*"]||[],t[c]||[]);for(const h of u)bd(h,s)||i.removeAttribute(h.nodeName)}return o.body.innerHTML}const Ed="TemplateFactory",Nd={allowList:io,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Ad={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Td={entry:"(string|element|function|null)",selector:"(string|element)"};class Cd extends xn{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return Nd}static get DefaultType(){return Ad}static get NAME(){return Ed}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[o,a]of Object.entries(this._config.content))this._setContent(t,a,o);const e=t.children[0],r=this._resolvePossibleFunction(this._config.extraClass);return r&&e.classList.add(...r.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,r]of Object.entries(t))super._typeCheckConfig({selector:e,entry:r},Td)}_setContent(t,e,r){const o=H.findOne(r,t);if(o){if(e=this._resolvePossibleFunction(e),!e){o.remove();return}if(_e(e)){this._putElementInTemplate(Te(e),o);return}if(this._config.html){o.innerHTML=this._maybeSanitize(e);return}o.textContent=e}}_maybeSanitize(t){return this._config.sanitize?yd(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return Pt(t,[void 0,this])}_putElementInTemplate(t,e){if(this._config.html){e.innerHTML="",e.append(t);return}e.textContent=t.textContent}}const wd="tooltip",Sd=new Set(["sanitize","allowList","sanitizeFn"]),Vs="fade",kd="modal",Kn="show",xd=".tooltip-inner",Ii=`.${kd}`,Ri="hide.bs.modal",fn="hover",Ws="focus",$d="click",Od="manual",Ld="hide",Dd="hidden",Md="show",Id="shown",Rd="inserted",Pd="click",Hd="focusin",Fd="focusout",Vd="mouseenter",Wd="mouseleave",jd={AUTO:"auto",TOP:"top",RIGHT:Jt()?"left":"right",BOTTOM:"bottom",LEFT:Jt()?"right":"left"},Ud={allowList:io,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Bd={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class ye extends re{constructor(t,e){if(typeof La>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Ud}static get DefaultType(){return Bd}static get NAME(){return wd}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),T.off(this._element.closest(Ii),Ri,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const t=T.trigger(this._element,this.constructor.eventName(Md)),r=(Ia(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!r)return;this._disposePopper();const o=this._getTipElement();this._element.setAttribute("aria-describedby",o.getAttribute("id"));const{container:a}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(a.append(o),T.trigger(this._element,this.constructor.eventName(Rd))),this._popper=this._createPopper(o),o.classList.add(Kn),"ontouchstart"in document.documentElement)for(const c of[].concat(...document.body.children))T.on(c,"mouseover",as);const i=()=>{T.trigger(this._element,this.constructor.eventName(Id)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(i,this.tip,this._isAnimated())}hide(){if(!this._isShown()||T.trigger(this._element,this.constructor.eventName(Ld)).defaultPrevented)return;if(this._getTipElement().classList.remove(Kn),"ontouchstart"in document.documentElement)for(const o of[].concat(...document.body.children))T.off(o,"mouseover",as);this._activeTrigger[$d]=!1,this._activeTrigger[Ws]=!1,this._activeTrigger[fn]=!1,this._isHovered=null;const r=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),T.trigger(this._element,this.constructor.eventName(Dd)))};this._queueCallback(r,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(Vs,Kn),e.classList.add(`bs-${this.constructor.NAME}-auto`);const r=$l(this.constructor.NAME).toString();return e.setAttribute("id",r),this._isAnimated()&&e.classList.add(Vs),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new Cd({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[xd]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Vs)}_isShown(){return this.tip&&this.tip.classList.contains(Kn)}_createPopper(t){const e=Pt(this._config.placement,[this,t,this._element]),r=jd[e.toUpperCase()];return wr(this._element,t,this._getPopperConfig(r))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_resolvePossibleFunction(t){return Pt(t,[this._element,this._element])}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:r=>{this._getTipElement().setAttribute("data-popper-placement",r.state.placement)}}]};return{...e,...Pt(this._config.popperConfig,[void 0,e])}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if(e==="click")T.on(this._element,this.constructor.eventName(Pd),this._config.selector,r=>{this._initializeOnDelegatedTarget(r).toggle()});else if(e!==Od){const r=e===fn?this.constructor.eventName(Vd):this.constructor.eventName(Hd),o=e===fn?this.constructor.eventName(Wd):this.constructor.eventName(Fd);T.on(this._element,r,this._config.selector,a=>{const i=this._initializeOnDelegatedTarget(a);i._activeTrigger[a.type==="focusin"?Ws:fn]=!0,i._enter()}),T.on(this._element,o,this._config.selector,a=>{const i=this._initializeOnDelegatedTarget(a);i._activeTrigger[a.type==="focusout"?Ws:fn]=i._element.contains(a.relatedTarget),i._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},T.on(this._element.closest(Ii),Ri,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=ge.getDataAttributes(this._element);for(const r of Object.keys(e))Sd.has(r)&&delete e[r];return t={...e,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:Te(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[e,r]of Object.entries(this._config))this.constructor.Default[e]!==r&&(t[e]=r);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const e=ye.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}}te(ye);const Yd="popover",Kd=".popover-header",qd=".popover-body",Gd={...ye.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},zd={...ye.DefaultType,content:"(null|string|element|function)"};class $r extends ye{static get Default(){return Gd}static get DefaultType(){return zd}static get NAME(){return Yd}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Kd]:this._getTitle(),[qd]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const e=$r.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}}te($r);const Qd="scrollspy",Xd="bs.scrollspy",Or=`.${Xd}`,Jd=".data-api",Zd=`activate${Or}`,Pi=`click${Or}`,th=`load${Or}${Jd}`,eh="dropdown-item",Ye="active",nh='[data-bs-spy="scroll"]',js="[href]",sh=".nav, .list-group",Hi=".nav-link",rh=".nav-item",ih=".list-group-item",ah=`${Hi}, ${rh} > ${Hi}, ${ih}`,oh=".dropdown",lh=".dropdown-toggle",ch={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},uh={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class ms extends re{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return ch}static get DefaultType(){return uh}static get NAME(){return Qd}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=Te(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(e=>Number.parseFloat(e))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(T.off(this._config.target,Pi),T.on(this._config.target,Pi,js,t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const r=this._rootElement||window,o=e.offsetTop-this._element.offsetTop;if(r.scrollTo){r.scrollTo({top:o,behavior:"smooth"});return}r.scrollTop=o}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(e=>this._observerCallback(e),t)}_observerCallback(t){const e=i=>this._targetLinks.get(`#${i.target.id}`),r=i=>{this._previousScrollData.visibleEntryTop=i.target.offsetTop,this._process(e(i))},o=(this._rootElement||document.documentElement).scrollTop,a=o>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=o;for(const i of t){if(!i.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(i));continue}const c=i.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(a&&c){if(r(i),!o)return;continue}!a&&!c&&r(i)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=H.find(js,this._config.target);for(const e of t){if(!e.hash||Ce(e))continue;const r=H.findOne(decodeURI(e.hash),this._element);ln(r)&&(this._targetLinks.set(decodeURI(e.hash),e),this._observableSections.set(e.hash,r))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(Ye),this._activateParents(t),T.trigger(this._element,Zd,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(eh)){H.findOne(lh,t.closest(oh)).classList.add(Ye);return}for(const e of H.parents(t,sh))for(const r of H.prev(e,ah))r.classList.add(Ye)}_clearActiveClass(t){t.classList.remove(Ye);const e=H.find(`${js}.${Ye}`,t);for(const r of e)r.classList.remove(Ye)}static jQueryInterface(t){return this.each(function(){const e=ms.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}T.on(window,th,()=>{for(const n of H.find(nh))ms.getOrCreateInstance(n)});te(ms);const dh="tab",hh="bs.tab",je=`.${hh}`,fh=`hide${je}`,ph=`hidden${je}`,mh=`show${je}`,_h=`shown${je}`,gh=`click${je}`,vh=`keydown${je}`,bh=`load${je}`,yh="ArrowLeft",Fi="ArrowRight",Eh="ArrowUp",Vi="ArrowDown",Us="Home",Wi="End",Me="active",ji="fade",Bs="show",Nh="dropdown",ao=".dropdown-toggle",Ah=".dropdown-menu",Ys=`:not(${ao})`,Th='.list-group, .nav, [role="tablist"]',Ch=".nav-item, .list-group-item",wh=`.nav-link${Ys}, .list-group-item${Ys}, [role="tab"]${Ys}`,oo='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Ks=`${wh}, ${oo}`,Sh=`.${Me}[data-bs-toggle="tab"], .${Me}[data-bs-toggle="pill"], .${Me}[data-bs-toggle="list"]`;class an extends re{constructor(t){super(t),this._parent=this._element.closest(Th),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),T.on(this._element,vh,e=>this._keydown(e)))}static get NAME(){return dh}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),r=e?T.trigger(e,fh,{relatedTarget:t}):null;T.trigger(t,mh,{relatedTarget:e}).defaultPrevented||r&&r.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){if(!t)return;t.classList.add(Me),this._activate(H.getElementFromSelector(t));const r=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(Bs);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),T.trigger(t,_h,{relatedTarget:e})};this._queueCallback(r,t,t.classList.contains(ji))}_deactivate(t,e){if(!t)return;t.classList.remove(Me),t.blur(),this._deactivate(H.getElementFromSelector(t));const r=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(Bs);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),T.trigger(t,ph,{relatedTarget:e})};this._queueCallback(r,t,t.classList.contains(ji))}_keydown(t){if(![yh,Fi,Eh,Vi,Us,Wi].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=this._getChildren().filter(o=>!Ce(o));let r;if([Us,Wi].includes(t.key))r=e[t.key===Us?0:e.length-1];else{const o=[Fi,Vi].includes(t.key);r=Sr(e,t.target,o,!0)}r&&(r.focus({preventScroll:!0}),an.getOrCreateInstance(r).show())}_getChildren(){return H.find(Ks,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const r of e)this._setInitialAttributesOnChild(r)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),r=this._getOuterElement(t);t.setAttribute("aria-selected",e),r!==t&&this._setAttributeIfNotExists(r,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=H.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,e){const r=this._getOuterElement(t);if(!r.classList.contains(Nh))return;const o=(a,i)=>{const c=H.findOne(a,r);c&&c.classList.toggle(i,e)};o(ao,Me),o(Ah,Bs),r.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,r){t.hasAttribute(e)||t.setAttribute(e,r)}_elemIsActive(t){return t.classList.contains(Me)}_getInnerElement(t){return t.matches(Ks)?t:H.findOne(Ks,t)}_getOuterElement(t){return t.closest(Ch)||t}static jQueryInterface(t){return this.each(function(){const e=an.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}T.on(document,gh,oo,function(n){["A","AREA"].includes(this.tagName)&&n.preventDefault(),!Ce(this)&&an.getOrCreateInstance(this).show()});T.on(window,bh,()=>{for(const n of H.find(Sh))an.getOrCreateInstance(n)});te(an);const kh="toast",xh="bs.toast",xe=`.${xh}`,$h=`mouseover${xe}`,Oh=`mouseout${xe}`,Lh=`focusin${xe}`,Dh=`focusout${xe}`,Mh=`hide${xe}`,Ih=`hidden${xe}`,Rh=`show${xe}`,Ph=`shown${xe}`,Hh="fade",Ui="hide",qn="show",Gn="showing",Fh={animation:"boolean",autohide:"boolean",delay:"number"},Vh={animation:!0,autohide:!0,delay:5e3};class Ln extends re{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Vh}static get DefaultType(){return Fh}static get NAME(){return kh}show(){if(T.trigger(this._element,Rh).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Hh);const e=()=>{this._element.classList.remove(Gn),T.trigger(this._element,Ph),this._maybeScheduleHide()};this._element.classList.remove(Ui),kn(this._element),this._element.classList.add(qn,Gn),this._queueCallback(e,this._element,this._config.animation)}hide(){if(!this.isShown()||T.trigger(this._element,Mh).defaultPrevented)return;const e=()=>{this._element.classList.add(Ui),this._element.classList.remove(Gn,qn),T.trigger(this._element,Ih)};this._element.classList.add(Gn),this._queueCallback(e,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(qn),super.dispose()}isShown(){return this._element.classList.contains(qn)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=e;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=e;break}}if(e){this._clearTimeout();return}const r=t.relatedTarget;this._element===r||this._element.contains(r)||this._maybeScheduleHide()}_setListeners(){T.on(this._element,$h,t=>this._onInteraction(t,!0)),T.on(this._element,Oh,t=>this._onInteraction(t,!1)),T.on(this._element,Lh,t=>this._onInteraction(t,!0)),T.on(this._element,Dh,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const e=Ln.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}hs(Ln);te(Ln);const qs=({value:n,maxValue:t,color:e,labelLeft:r=null,labelCenter:o=null,labelRight:a=null,className:i="",isOverlay:c=!1,trailingStartValue:u=null,trailColor:s="rgba(128, 128, 128, 0.5)"})=>{const h=Math.min(Math.max(n/t*100,0),100);let p=0;u!==null&&(p=Math.min(Math.max(u/t*100,0),100));let m={};return typeof e=="object"&&e.from&&e.to?m.backgroundImage=`linear-gradient(to right, ${e.from}, ${e.to} 100%)`:m.backgroundColor=e,l("div",{class:`progress-bar-pointed-container ${i} ${c?"progress-bar-pointed-container--overlay":""}`,children:[r&&l("span",{class:"progress-bar-pointed__label progress-bar-pointed__label--left",children:r}),u!==null&&l("div",{class:"progress-bar-pointed__trail",style:{width:`${p}%`,backgroundColor:s,"--progress-trail-color":s}}),l("div",{class:"progress-bar-pointed__fill",style:{width:`${h}%`,...m},children:o&&l("span",{class:"progress-bar-pointed__label progress-bar-pointed__label--center",children:o})}),a&&l("span",{class:"progress-bar-pointed__label progress-bar-pointed__label--right",children:a})]})};function Wh(){const{characterStats:n,setCharacterStats:t}=fe(Fe),[e,r]=z(1),[o,a]=z(!1),[i,c]=z(!1),[u,s]=z(!1),[h,p]=z(!1),[m,_]=z(!1),[E,A]=z(null),[C,O]=z(null),[L,B]=z(!1),[M,U]=z(!1),[V,Q]=z(!1),X=Ut(null),P=Ut(null),F=Ut(null),Y=Ut(null),Z=Ut(null),lt=300,Nt=600,[ut,it]=z(!1);_t(()=>{const vt=[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map(bt=>new ye(bt));return()=>{vt.forEach(bt=>{bt&&typeof bt.dispose=="function"&&bt.dispose()})}},[V]),_t(()=>{if(o){const I=setTimeout(()=>a(!1),300);return()=>clearTimeout(I)}},[o]),_t(()=>{if(u){const I=setTimeout(()=>s(!1),300);return()=>clearTimeout(I)}},[u]),_t(()=>{if(i){const I=setTimeout(()=>c(!1),300);return()=>clearTimeout(I)}},[i]),_t(()=>{if(h){const I=setTimeout(()=>p(!1),300);return()=>clearTimeout(I)}},[h]),_t(()=>{if(m){const I=setTimeout(()=>_(!1),300);return()=>clearTimeout(I)}},[m]),_t(()=>{const I=bt=>{bt.key==="Control"&&Q(!0)},vt=bt=>{bt.key==="Control"&&Q(!1)};return window.addEventListener("keydown",I),window.addEventListener("keyup",vt),()=>{window.removeEventListener("keydown",I),window.removeEventListener("keyup",vt)}},[]);const at=I=>{t(vt=>({...vt,...I}))};_t(()=>{(n.currentMp===void 0||n.maxMp===void 0)&&t(I=>({...I,currentMp:I.currentMp||0,maxMp:I.maxMp||10}))},[]);const N=()=>{X.current&&(clearTimeout(X.current),X.current=null),P.current&&(clearTimeout(P.current),P.current=null);const I=n.tempHealth||0;let vt=!1;A(n.currentHealth),I>0?(O(I),vt=!0):O(null);let bt=I,Gt=n.currentHealth,ie=e,Ee=!1,d=!1;if(bt>0){const W=Math.min(ie,bt);W>0&&(bt-=W,ie-=W,s(!0),U(!0),Ee=!0)}if(ie>0&&Gt>0){const W=Math.min(ie,Gt);W>0&&(Gt=Math.max(0,Gt-W),a(!0),B(!0),d=!0)}d&&setTimeout(()=>B(!1),200),Ee&&setTimeout(()=>U(!1),200),setTimeout(()=>{t(Ue=>({...Ue,currentHealth:Gt,tempHealth:bt}));const W=1e3;X.current=setTimeout(()=>{A(Gt)},W),vt&&(P.current=setTimeout(()=>{O(bt)},W))},50),r(1)},x=()=>{c(!0),at({currentHealth:Math.min(n.maxHealth,n.currentHealth+e)}),r(1)},K=()=>{_(!0),at({tempHealth:(n.tempHealth||0)+e}),r(1)},Ct=()=>{r(V?n.maxHealth||0:I=>Math.min(I+1,n.maxHealth||1/0))},St=()=>{r(V?0:I=>Math.max(0,I-1))},Dt=()=>{p(!0),at({currentMp:Math.max(0,n.currentMp-e)}),r(1)},At=()=>{p(!0),at({currentMp:Math.min(n.maxMp,n.currentMp+e)})},Tt=()=>{const I=Math.max(0,Math.min(n.maxHealth,e));at({currentHealth:I}),c(!0),r(1)},Mt=()=>{const I=Math.max(0,Math.min(n.maxMp,e));at({currentMp:I}),p(!0),r(1)},yt=()=>{at({tempHealth:0}),s(!0)},gt=()=>{n.maxHealth!==void 0&&(at({currentHealth:n.maxHealth}),c(!0))},ft=()=>{n.maxMp!==void 0&&(at({currentMp:n.maxMp}),p(!0))},pe=I=>{I.type==="touchstart"&&I.preventDefault(),it(!0),Z.current=setTimeout(()=>{gt(),yt(),A(n.maxHealth||tt),O(0),it(!1),F.current&&(clearTimeout(F.current),F.current=null)},Nt)},Ht=I=>{I.type==="touchstart"&&I.preventDefault(),it(!0),Z.current=setTimeout(()=>{ft(),it(!1),Y.current&&(clearTimeout(Y.current),Y.current=null)},Nt)},Ft=I=>{if(Z.current&&(clearTimeout(Z.current),Z.current=null,ut&&I.type==="touchend")){const vt=I.currentTarget.getAttribute("data-bar-type");vt==="hp"?y():vt==="mp"&&j()}it(!1)},qt=()=>{Z.current&&(clearTimeout(Z.current),Z.current=null),it(!1)},y=()=>{ut||(F.current?(clearTimeout(F.current),F.current=null,gt(),yt(),A(n.maxHealth||tt),O(0)):(Tt(),F.current=setTimeout(()=>{F.current=null},lt)))},j=()=>{ut||(Y.current?(clearTimeout(Y.current),Y.current=null,ft()):(Mt(),Y.current=setTimeout(()=>{Y.current=null},lt)))},$=n.currentHealth||0,tt=Math.max(1,n.maxHealth||0),dt=n.tempHealth||0,ee=n.currentMp||0,kt=Math.max(1,n.maxMp||0);return l("div",{className:"hit-points-component-container container-fluid mb-4",children:[l("div",{className:"row align-items-center mb-3",children:[l(Ve,{title:"HEALTH AND MANA",containerClassName:"mb-3"}),l("div",{className:"d-flex justify-content-center align-items-center gap-1",children:[l("button",{onClick:Dt,className:"btn btn-outline-primary btn-icon-square","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Use MP",children:l("i",{className:"fas fa-bolt-lightning"})}),l("button",{onClick:yt,className:"btn btn-icon-square btn-outline-warning","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Clear Temporary HP","data-bs-original-title":"Clear Temporary HP",children:l("i",{className:"fas fa-times-circle"})}),l("button",{onClick:N,className:"btn btn-icon-square btn-outline-danger","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Damage HP","data-bs-original-title":"Damage HP",children:l("i",{className:"fas fa-heart-circle-minus"})}),l("div",{className:"input-group amount-input-container",style:{width:"auto",alignItems:"center"},children:[l("button",{onClick:St,className:"btn btn-outline-secondary btn-icon-square amount-control-btn",type:"button","data-bs-toggle":"tooltip","data-bs-placement":"top",title:V?"Set to Min (0)":"Decrease Amount","data-bs-original-title":V?"Set to Min (0)":"Decrease Amount",children:l("i",{className:"fas fa-minus"})}),l("input",{type:"number",value:e,onChange:I=>r(Math.max(0,parseInt(I.currentTarget.value)||0)),className:"form-control text-center bg-dark text-light",min:"0",style:{width:"70px",height:"40px"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Enter amount","aria-label":"Amount for HP/MP changes"}),l("button",{onClick:Ct,className:"btn btn-outline-secondary btn-icon-square amount-control-btn",type:"button","data-bs-toggle":"tooltip","data-bs-placement":"top",title:V?`Set to Max (${n.maxHealth||0})`:"Increase Amount","data-bs-original-title":V?`Set to Max (${n.maxHealth||0})`:"Increase Amount",children:l("i",{className:"fas fa-plus"})})]}),l("button",{onClick:x,className:"btn btn-icon-square btn-outline-success","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Heal HP","data-bs-original-title":"Heal HP",children:l("i",{className:"fas fa-heart-circle-plus"})}),l("button",{onClick:K,className:"btn btn-icon-square btn-outline-info","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Heal Temporary HP","data-bs-original-title":"Heal Temporary HP",children:l("i",{className:"fas fa-heart-pulse"})}),l("button",{onClick:At,className:"btn btn-outline-info btn-icon-square","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Restore MP","data-bs-original-title":"Restore MP",children:l("i",{className:"fas fa-droplet"})})]})]}),l("div",{className:"mb-3",children:["                ",l("div",{style:{position:"relative",cursor:"pointer"},className:"mb-2",onClick:I=>{I.type!=="touchend"&&y()},onMouseDown:pe,onMouseUp:Ft,onMouseLeave:qt,onTouchStart:pe,onTouchEnd:Ft,onTouchCancel:qt,onContextMenu:I=>I.preventDefault(),"data-bar-type":"hp","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Click to Set HP to ${e}, Long press/double click to reset HP & Temp HP`,"data-bs-original-title":`Click to Set HP to ${e}, Long press/double click to reset HP & Temp HP`,children:[l(qs,{value:$,maxValue:tt,color:{from:"#ef4444",to:"#e11d48"},labelRight:`${$} / ${tt}`,trailingStartValue:E,trailColor:"rgba(200, 0, 0, 0.7)",className:L?"progress-bar-damage-flash":""}),(dt>0||C!==null)&&l(qs,{value:dt,maxValue:tt,color:{from:"#21d2ec",to:"#14b8a7"},labelCenter:dt>0?`${dt} Temp`:"",isOverlay:!0,className:`health-overlay-bar ${M?"progress-bar-damage-flash":""}`,trailingStartValue:C,trailColor:"rgba(0, 50, 200, 0.7)"})]}),"                ",l("div",{style:{cursor:"pointer"},onClick:I=>{I.type!=="touchend"&&j()},onMouseDown:Ht,onMouseUp:Ft,onMouseLeave:qt,onTouchStart:Ht,onTouchEnd:Ft,onTouchCancel:qt,onContextMenu:I=>I.preventDefault(),"data-bar-type":"mp","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Click to Set MP to ${e}, Long press/double click to Full Restore MP`,"data-bs-original-title":`Click to Set MP to ${e}, Long press/double click to Full Restore MP`,children:l(qs,{value:ee,maxValue:kt,color:{from:"#3c82f6",to:"#6366f1"},labelRight:`${ee} / ${kt}`,className:h?"progress-bar-damage-flash":"",trailingStartValue:ee,trailColor:"rgba(0, 50, 200, 0.7)"})})]})]})}function jh(){const{spells:n}=wn(),{characterStats:t,setCharacterStats:e}=fe(Fe),r=()=>(t.speed||0)+le(n,"speed"),o=c=>{e(u=>({...u,...c}))},a=c=>{const u=c.currentTarget,s=Math.max(1,parseInt(u.value)||1);o({maxHealth:s}),t.currentHealth>s&&o({currentHealth:s})},i=c=>{const u=c.currentTarget,s=Math.max(1,parseInt(u.value)||1);o({maxMp:s}),t.currentMp>s&&o({currentMp:s})};return l("div",{className:"character-sheet container-fluid",children:l("div",{className:"column",children:[l(Wh,{}),l("div",{className:"row justify-content-between mt-4",children:[l("div",{className:"col-md-7",children:l(Ro,{})}),l("div",{className:"col-md-5 p-3",children:[l(Ve,{title:"PLAYER CONDITION"}),l("div",{className:"row align-items-center mb-3",children:[l("div",{className:"col-auto",children:l("div",{className:"d-flex gap-2",children:[l("div",{className:"text-center",children:[l("small",{className:"d-block mb-1 text-secondary",children:"Speed"}),l("input",{type:"number",className:"form-control form-control box-no-input text-center bg-dark text-light",id:"speedInput",value:r()+30,readOnly:!0,"aria-label":"Speed"})]}),l("div",{className:"text-center",children:[l("small",{className:"d-block mb-1 text-secondary",children:"AC"}),l("input",{type:"number",className:"form-control box-no-input text-center bg-dark text-light",id:"acInput",value:t.AC||0,readOnly:!0,"aria-label":"Armor Class"})]})]})}),l("div",{className:"col-auto ms-auto",children:l("div",{className:"d-flex gap-2",children:[l("div",{className:"text-center",children:[l("small",{className:"d-block mb-1 text-secondary",children:"Max HP"}),l("input",{type:"number",className:"form-control form-control hp-input text-center bg-dark text-light",id:"maxHealthInput",value:t.maxHealth||"",onChange:a,min:"1","aria-label":"Maximum Hit Points"})]}),l("div",{className:"text-center",children:[l("small",{className:"d-block mb-1 text-secondary",children:"Max MP"}),l("input",{type:"number",className:"form-control form-control hp-input text-center bg-dark text-light",id:"maxMpInput",value:t.maxMp||"",onChange:i,min:"1","aria-label":"Maximum Mana Points"})]})]})})]}),l("div",{className:"conditions-tracker-placeholder p-3 border rounded bg-dark-subtle",children:[l("h5",{className:"text-secondary-emphasis",children:"CONDITIONS TRACKER"}),l("p",{className:"text-muted",children:"(Placeholder for future implementation)"})]})]})]})]})})}const _s=()=>{const[n,t]=z(null);return _t(()=>{t(document.createElement("div"))},[]),_t(()=>{if(n)return n.className="toast-container position-fixed bottom-0 end-0 p-3",document.body.appendChild(n),()=>{document.body.removeChild(n)}},[n]),{showToast:(r,o="info-circle",a="primary",i="Notification")=>{if(!n)return;const c=document.createElement("div");c.className="toast",c.setAttribute("role","alert"),c.setAttribute("aria-live","assertive"),c.setAttribute("aria-atomic","true"),c.innerHTML=`
            <div class="toast-header">
                <i class="fas fa-${o} me-2 text-${a}"></i>
                <strong class="me-auto">${i}</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body">
                ${r}
            </div>
        `,n.appendChild(c),new Ln(c,{autohide:!0,delay:3e3}).show(),c.addEventListener("hidden.bs.toast",()=>{n.removeChild(c)})}}},Uh=()=>{const{characterStats:n,setCharacterStats:t}=fe(Fe),{spells:e}=wn(),{showToast:r}=_s(),o=(u,s)=>{t(h=>({...h,[u]:parseInt(s,10)||0}))},a=Object.entries(n).filter(([u])=>{var s;return((s=wt[u])==null?void 0:s.category)!==jt.CORE}).reduce((u,[s,h])=>u+(parseInt(h,10)||0),0),i=u=>{const s=prompt("Enter a DC for the roll (leave blank for normal roll):");if(s===null)return;const h=Math.max(0,parseInt(s,10)),p=(n[u]||0)+le(e,u),m=wt[u];let _=`1d20+${p}`;h>1&&(_=`${_}cs>=${h}cf<${h}`);const E=h?`check vs DC ${h}`:"check",A=`&{template:default} {{name=${fr(u)} ${E}}}{{Roll=[[${_}]]}}{{Stat Bonus=[[${p}]] from ${m.shortName}}}`;navigator.clipboard.writeText(A);const C=h?`${m.name} roll vs DC ${h} copied! Paste it into Roll20.`:`${m.name} roll command copied! Paste it into Roll20.`;r(C,"clipboard","success","Copied to clipboard")},c=u=>{const s=Object.entries(wt).filter(([h,p])=>p.category===u);return s.length>0&&l("div",{className:"stat-category",children:[l("h6",{className:"stat-category-title text-secondary mb-2",children:u.toUpperCase()}),l("div",{className:"stat-grid",children:s.map(([h,p])=>l("div",{className:"stat-group mb-2",title:`${p.name} ${p.description}`,"data-bs-toggle":"tooltip","data-bs-placement":"top",children:l("div",{className:"input-group",children:[l("span",{className:`input-group-text gap-1 text-${p.color}`,onClick:()=>i(h),style:{cursor:"pointer"},children:[l("i",{className:`fas ${p.icon}`})," ",l("span",{className:"stat-text",children:p.shortName})]}),l("input",{type:"number",className:"form-control",value:n[h]||0,onChange:m=>o(h,m.currentTarget.value)}),l("span",{className:"input-group-text",children:[l("i",{className:`fas ${le(e,h)?"":"fa-link-slash"} text-muted`}),le(e,h)>0&&l("div",{children:[l("span",{className:"text-secondary ms-1",children:["+",le(e,h)," ="]}),l("span",{className:"text-muted ms-1",children:n[h]+le(e,h)})]})]})]})},h))})]})};return l("div",{className:"character-stats",children:[l(Ve,{title:"STATS",lineMaxWidth:"50px",containerClassName:"mb-1"}),l("h6",{className:"stat-category-title text-danger mb-4",children:["BASE ALLOCATED POINTS: ",a]}),c(jt.PHYSICAL),c(jt.MAGICAL),c(jt.UTILITY)]})},Bh=({spellToDelete:n,confirmDelete:t,setSpellToDelete:e})=>l("div",{className:`modal fade ${n?"show":""}`,style:{display:n?"block":"none"},tabIndex:-1,children:l("div",{className:"modal-dialog",children:l("div",{className:"modal-content",children:[l("div",{className:"modal-header",children:[l("h5",{className:"modal-title",children:"Confirm Deletion"}),l("button",{type:"button",className:"btn-close",onClick:()=>e(null),"aria-label":"Close"})]}),l("div",{className:"modal-body",children:"Are you sure you want to delete this spell?"}),l("div",{className:"modal-footer",children:[l("button",{type:"button",className:"btn btn-secondary",onClick:()=>e(null),children:"No, Keep It"}),l("button",{type:"button",className:"btn btn-danger",onClick:t,children:"Yes, Delete It"})]})]})})}),Yh=({isModalOpen:n,closeModal:t,spellBeingEdited:e,currentSpell:r,setCurrentSpell:o,incrementPower:a,decrementPower:i,getSpellRank:c,getActionLabel:u,validateDiceRoll:s,diceError:h,saveSpell:p,removeSpell:m})=>l("div",{className:`modal ${n?"show":""}`,style:{display:n?"block":"none"},tabIndex:-1,children:l("div",{className:"modal-dialog",children:l("div",{className:"modal-content",children:[l("div",{className:"modal-header",children:[l("h5",{className:"modal-title",children:e?"Edit Spell Entry":"Add Spell"}),l("button",{type:"button",className:"btn-close",onClick:t})]}),l("div",{className:"modal-body",children:[l("div",{className:"mb-2",children:[l("label",{className:"form-label",children:"Spell Name"}),l("input",{type:"text",className:"form-control",placeholder:"Spell Name",value:r.name,onInput:_=>o({...r,name:_.currentTarget.value})})]}),l("div",{className:"mb-2",children:[l("label",{className:"form-label",children:"Spell Level"}),l("div",{className:"input-group",children:[l("button",{className:"btn btn-outline-secondary",type:"button",onClick:i,disabled:r.power<=1,children:l("i",{className:"fas fa-minus"})}),l("input",{type:"number",className:`form-control ${r.power<=0?"is-invalid":""}`,placeholder:"Spell Level",min:"1",value:r.power,onInput:_=>{const E=Math.max(1,parseInt(_.currentTarget.value,10)||1);o({...r,power:E,rank:c(E)})}}),l("button",{className:"btn btn-outline-secondary",type:"button",onClick:a,children:l("i",{className:"fas fa-plus"})}),r.power<=0&&l("div",{className:"invalid-feedback",children:"Spell level must be at least 1"})]})]}),l("div",{className:"alert alert-info py-1 mb-2",children:[l("i",{className:"fas fa-link me-2"}),l("small",{className:"text-muted d-block mt-1",children:["This spell's ",l("a",{href:"https://docs.google.com/document/d/1ZTxCemR8j6GhIMqhvmBd7kOo8wNsOisO_vOutlQBYv0/edit?tab=t.0",target:"_blank",children:"Soul Link Rank"})," will be ",l("b",{children:[c(r.power),"."]})]})]}),l("label",{className:"form-label",children:"Actions to Cast"}),l("div",{className:"input-group mb-2",children:[l("span",{className:"input-group-text",children:u(r.actions)}),l("select",{className:"form-select",value:r.actions,onChange:_=>o({...r,actions:parseInt(_.currentTarget.value)}),children:[l("option",{value:"1",children:"1 Action"}),l("option",{value:"2",children:"2 Actions"}),l("option",{value:"3",children:"3 Actions"}),l("option",{value:"0",children:"Free Action"})]})]}),l("label",{className:"form-label",children:"Element"}),l("div",{className:"input-group mb-2",children:[l("span",{className:"input-group-text",children:se(r.element)}),l("select",{className:"form-select",value:r.element,onChange:_=>o({...r,element:_.currentTarget.value}),children:Object.entries(rt).map(([_,E])=>l("option",{value:E,children:E},_))})]}),l("label",{className:"form-label",children:"Damage Roll(s)"}),l("div",{className:"input-group mb-2",children:[l("span",{className:"input-group-text",children:l("i",{className:"fas fa-dice-d20"})}),l("input",{type:"text",className:`form-control ${h?"is-invalid":""}`,placeholder:"Dice Roll (e.g. 1d4)",value:r.dice,onInput:_=>{const E=_.currentTarget.value;o({...r,dice:E}),s(E)}}),h&&l("div",{className:"invalid-feedback",children:h})]}),l("div",{className:"alert alert-info py-1 mb-2",children:[l("i",{className:"fas fa-info-circle me-2"}),l("small",{children:"Use [stat] to include a stat's value (e.g., [strength] + 1d6)"})]}),l("div",{className:"mb-2",children:[l("label",{className:"form-label",children:"Spell Description"}),l("textarea",{className:"form-control",placeholder:"Spell Description",value:r.description,onInput:_=>o({...r,description:_.currentTarget.value})})]}),l("div",{className:"mb-2",children:[l("label",{className:"form-label",children:["Amount currently stocked ",l("i",{children:'("Spell Charges")'})]}),l("div",{className:"input-group",children:l("input",{type:"number",className:`form-control ${r.quantity<0||r.quantity>Ae?"is-invalid":""}`,placeholder:"Quantity",min:"0",max:Ae.toString(),value:r.quantity,onInput:_=>{const E=parseInt(_.currentTarget.value,10)||0;E>Ae?o({...r,quantity:Ae}):o({...r,quantity:Math.max(0,E)})}})})]})]}),l("div",{className:"modal-footer",children:[l("button",{type:"button",className:"btn btn-secondary",onClick:t,children:[l("i",{className:"fas fa-times me-1"}),"Close"]}),e&&l("button",{type:"button",className:"btn btn-danger",onClick:()=>m(e.id),children:[l("i",{className:"fas fa-trash-alt me-1"}),"Delete"]}),l("button",{type:"button",className:"btn btn-success",onClick:p,children:[l("i",{className:`fas ${e?"fa-save":"fa-plus"} me-1`}),e?"Save Changes":"Add Spell"]})]})]})})}),Kh=({isLinkModalOpen:n,closeLinkModal:t,currentSpell:e,setCurrentSpell:r,saveSpell:o,getLinkedStats:a})=>{var c;if(!e)return null;const{spells:i}=wn();return l("div",{className:`modal fade ${n?"show":""}`,style:{display:n?"block":"none"},tabIndex:-1,children:l("div",{className:"modal-dialog",children:l("div",{className:"modal-content",children:[l("div",{className:"modal-header",children:[l("h5",{className:"modal-title",children:`Link ${e.name} to stat`}),l("button",{type:"button",className:"btn-close",onClick:t,"aria-label":"Close"})]}),l("div",{className:"modal-body",children:l("div",{className:"input-group mb-2",children:[l("span",{className:"input-group-text gap-1",children:l("i",{className:`fas ${e.linkedStat&&e.linkedStat!=="None"&&((c=wt[e.linkedStat])==null?void 0:c.icon)||"fa-link-slash"}`})}),l("select",{className:"form-select",value:e.linkedStat||"None",onChange:u=>r({...e,linkedStat:u.currentTarget.value==="None"?null:u.currentTarget.value,isLinked:u.currentTarget.value!=="None"}),children:[l("option",{value:"None",children:"None"}),Object.entries(wt).map(([u,s])=>(!a().includes(u)||u===e.linkedStat)&&s.type!==$t.CORE?l("option",{value:u,children:s.name},u):null)]}),l("span",{className:"input-group-text",children:["+",rs(e.quantity,e.rank)]})]})}),l("div",{className:"modal-footer",children:[l("button",{type:"button",className:"btn btn-secondary",onClick:t,children:[l("i",{className:"fas fa-times me-1"}),"Close"]}),l("button",{type:"button",className:"btn btn-success",onClick:o,children:[l("i",{className:`fas ${e.id?"fa-save":"fa-plus"} me-1`})," ",e.id?"Save Changes":"Add Spell"]})]})]})})})},qh=()=>{const{characterStats:n,setCharacterStats:t}=fe(Fe),{spells:e,setSpells:r,getLinkedStats:o}=wn(),{showToast:a}=_s(),i={name:"",quantity:1,power:1,dice:"",description:"",actions:1,rank:1,isLinked:!1,linkedStat:"None",element:rt.PHYS},[c,u]=z(i),[s,h]=z(null),[p,m]=z(!1),[_,E]=z(!1),[A,C]=z(null),[O,L]=z(!1);_t(()=>{const y=$=>{$.key==="Control"&&L(!0)},j=$=>{$.key==="Control"&&L(!1)};return window.addEventListener("keydown",y),window.addEventListener("keyup",j),()=>{window.removeEventListener("keydown",y),window.removeEventListener("keyup",j)}},[]);const B=y=>{var j,$;return y&&(($=(j=n.affinities)==null?void 0:j[y.element])==null?void 0:$.mastered)||!1},M=y=>{y&&U(B(y))},U=y=>{const j=n.luck+le(e,"luck")||0,$=Math.min(j,Os);var tt=`🍀 Luck=[[${j}`;j>Os?tt+=`]] (+${Os} max bonus)`:tt+="]]";const ee=`${y?2:1}d6cf1 + ${$}[Luck Bonus]`,kt=y?"Draw Spell (Mastery)":"Draw Spell",I=`&{template:default} {{name=${kt}}} {{Charges Gained=[[${ee}]]}} {{${tt}}} {{Note=If the number is highlighted red, the true amount of Charges Gained is that total MINUS the Luck Bonus.}}`;navigator.clipboard.writeText(I).then(()=>{a(`${kt} command copied! Paste it into Roll20.`,"clipboard","success","Copied to clipboard")}).catch(vt=>{console.error("Failed to copy command: ",vt),a("Failed to copy command.","exclamation-triangle","danger","Copy Error")})},V=y=>{if(y.quantity>0&&y.dice)try{const j=Qe(e,y.dice,n),$=se(y.element),tt=Qe(e,"1d20+[strength]",n);let dt;y.actions===0?dt="Free Action":dt=y.actions===1?"Action":"Actions";const ee=`&{template:default} {{name=${y.name}}}                                 {{Actions=${y.actions} ${dt}}}                                 {{Level=**Spell ${y.power}** (S.Link Rank ${y.rank})}}                                 {{Attack=[[${tt}]]}}                                 {{Damage=[[${j}]] ${$} ${y.element}}}                                 ${y.description?`{{Description=${y.description}}}
                                `:""}`;navigator.clipboard.writeText(ee),a("Spell roll command copied! Paste it into the text chat on Roll20.","clipboard","success","Copied to clipboard"),x(y.id,"quantity",y.quantity-1)}catch(j){alert(j.message||"Invalid dice format!")}else a("No more charges of this spell remaining!","exclamation-triangle","warning","Cannot cast spell")},Q=(y,j,$)=>{const tt=j-$,dt=`${y.name}: ${$} → ${j} (${tt>=0?"+":""}${tt})`;console.log(dt)},X=y=>{C(A===y?null:y)};_t(()=>{localStorage.setItem("spells",JSON.stringify(e))},[e]),_t(()=>{const j=[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map($=>new ye($));return()=>{j.forEach($=>$.dispose())}},[]);const P=(y=null)=>{h(y),u(y||i),m(!0)},F=()=>{h(null),m(!1)},Y=(y=null)=>{h(y),u(y||i),E(!0)},Z=()=>{h(null),E(!1)},[lt,Nt]=z(""),ut=y=>{const j=Jn(y,n);return Nt(j.error||""),j.isValid},it=()=>{const y=Vo(c);if(y.length>0){alert(`Please fix the following:
${y.join(`
`)}`);return}ut(c.dice)&&(r(s?e.map(j=>j.id===s.id?{...c,id:s.id}:j):[...e,{...c,id:Date.now()}]),p&&F(),_&&Z(),console.log("Spell saved:",c))},[at,N]=z(null),x=(y,j,$)=>{const tt=e.find(dt=>dt.id===y);tt&&(tt.quantity!==$&&(N(y),setTimeout(()=>N(null),300),Q(tt,$,tt.quantity)),r(e.map(dt=>dt.id===y?{...dt,[j]:$}:dt)))},[K,Ct]=z(null),St=y=>{Ct(y)},Dt=()=>{K&&(e.find(y=>y.id===K),r(e.filter(y=>y.id!==K)),Ct(null),F())},At=(y,j)=>{const $=[...e],tt=y+j;tt>=0&&tt<e.length&&([$[y],$[tt]]=[$[tt],$[y]],r($))},Tt=()=>{const y=c.power+1;u({...c,power:y,rank:$s(y)})},Mt=()=>{if(c.power>1){const y=c.power-1;u({...c,power:y,rank:$s(y)})}},[yt,gt]=z(1),ft=y=>{const j=e.find(tt=>tt.id===y),$=Math.min(Ae,j.quantity+yt);x(y,"quantity",$),gt(1)},pe=y=>{const j=e.find(tt=>tt.id===y),$=Math.max(0,j.quantity-yt);x(y,"quantity",$),gt(1)},Ht=y=>{let j="",$="";switch(y){case 0:j="[free-action]",$="Free Action";break;case 1:j="[one-action]",$="One Action";break;case 2:j="[two-actions]",$="Two Actions";break;case 3:j="[three-actions]",$="Three Actions";break;default:return""}return l("span",{className:"action","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-original-title":$,title:$,role:"img","aria-label":$,children:j})},Ft=y=>y.isLinked?"Linked to "+wt[y.linkedStat].name:"No linked stat",qt=y=>{y.isLinked?console.log(`Linked stat: ${y.linkedStat}`):console.log("No linked stat"),Y(y)};return l("div",{className:"spell-inventory","data-bs-theme":"dark",children:l("div",{className:"container",children:[l(Ve,{title:"SPELL INVENTORY",lineMaxWidth:"50px"}),l("div",{className:"d-flex align-items-center justify-content-center mb-4",children:[l("button",{className:`dark-btn me-2 ${O?"gold-button":"dark-btn-secondary"}`,onClick:y=>U(y.ctrlKey),style:{width:"160px",height:"60px"},children:l("div",{className:"d-flex flex-column align-items-center",children:[l("div",{children:[l("i",{className:"fas fa-dice me-2"})," ",l("span",{children:"Stock Roll"})]}),l("span",{style:{fontSize:"0.7em"},children:"hold Ctrl for mastery"})]})}),l("button",{className:"dark-btn dark-btn-primary",onClick:()=>P(),style:{width:"160px",height:"60px"},children:[l("i",{className:"fas fa-plus me-2"})," ",l("span",{children:"Add Spell"})]})]}),e.length===0&&l("span",{className:"text-muted text-center d-flex flex-column align-items-center justify-content-center"+(window.innerWidth<=750?" mt-4":""),children:"[ Inventory Empty ]"}),l("ul",{className:"list-group",children:e.map((y,j)=>l("li",{className:`list-group-item spell-item ${at===y.id?"quantity-flash":""}`,children:[l("div",{class:"d-flex justify-content-left",children:[l("div",{className:"d-flex align-items-center overflow-hidden",style:{flex:"1 1 0"},onClick:()=>X(y.id),children:[l("span",{id:`quantity-badge-${y.id}`,className:"text-black badge quantity-badge me-2",style:{width:"2.5rem",flexShrink:0},children:l("small",{children:y.quantity})}),l("div",{class:"text-truncate",children:[se(y.element)," ",l("span",{className:"arsenal me-2",children:y.name}),l("span",{className:"action-label hide-on-small me-2",style:{width:window.innerWidth<=750?"0px":"50px"},children:Ht(y.actions)})]})]}),l("div",{className:"d-flex align-items-center justify-content-right",style:{gap:"0.5rem"},children:[l("i",{className:"fas fa-edit text-primary",onClick:$=>{$.stopPropagation(),P(y)},style:{cursor:"pointer",transition:"opacity 0.3s",opacity:.6,flexShrink:0},onMouseOver:$=>{$.stopPropagation(),$.currentTarget.style.opacity="1"},onMouseOut:$=>{$.stopPropagation(),$.currentTarget.style.opacity="0.6"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Edit Spell"}),l("span",{className:`badge bg-dark border text-${y.isLinked?wt[y.linkedStat].color:"secondary"} ms-2 d-flex justify-content-between align-items-center link-badge-normal`,"data-bs-toggle":"tooltip","data-bs-original-title":Ft(y),title:Ft(y),onClick:$=>{$.stopPropagation(),qt(y)},style:{cursor:"pointer",width:"4rem"},children:[l("i",{className:`fas ${y.isLinked?wt[y.linkedStat].icon:"fa-link-slash"}`}),l("span",{children:y.isLinked?`+${rs(y.quantity,y.rank)}`:""})]}),l("button",{className:"btn btn-outline-danger btn-sm roll-button",style:{width:"120px",whiteSpace:"nowrap",overflow:"hidden"},onClick:$=>{$.stopPropagation(),V(y)},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Click to copy roll command",children:[l("i",{className:"fas fa-dice-d20"}),l("span",{className:"ms-1 text-truncate",children:Qe(e,y.dice,n,!0)})]}),l("button",{className:"btn btn-outline-info btn-sm",onClick:$=>{$.stopPropagation(),M(y)},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Click to copy the Stock roll command for ${y.name} (${y.element} - ${B(y)?"mastery":"normal"})`,style:{flexShrink:0},children:l("i",{className:"fas fa-hand-sparkles"})}),l("div",{className:"input-group input-group-sm",children:[l("button",{className:"btn btn-outline-danger btn-sm",onClick:$=>{$.stopPropagation(),pe(y.id)},children:l("i",{className:"fas fa-minus"})}),l("input",{type:"number",className:"form-control form-control-sm text-center",style:{width:"60px"},value:yt,min:"1",max:Ae,onChange:$=>gt(Math.max(1,Math.min(Ae,parseInt($.currentTarget.value)||1))),onClick:$=>$.stopPropagation()}),l("button",{className:"btn btn-outline-success btn-sm",onClick:$=>{$.stopPropagation(),ft(y.id)},children:l("i",{className:"fas fa-plus"})})]}),l("div",{className:"btn-group hide-on-small",style:{flexShrink:0},children:[l("button",{className:"btn btn-outline-secondary btn-sm",onClick:$=>{$.stopPropagation(),At(j,1)},children:l("i",{className:"fas fa-chevron-down"})}),l("button",{className:"btn btn-outline-secondary btn-sm",onClick:$=>{$.stopPropagation(),At(j,-1)},children:l("i",{className:"fas fa-chevron-up"})})]})]}),l("br",{})]}),A===y.id&&l("div",{className:"mt-3",children:[l("div",{className:"d-flex flex-wrap justify-content-center mb-2",style:{gap:"0.5rem"},children:[l("span",{className:`badge bg-dark border text-${y.isLinked?wt[y.linkedStat].color:"secondary"}
                                                link-badge-responsive`,"data-bs-toggle":"tooltip","data-bs-original-title":Ft(y),title:Ft(y),onClick:$=>{$.stopPropagation(),qt(y)},style:{cursor:"pointer"},children:[l("i",{className:`fas ${y.isLinked?wt[y.linkedStat].icon:"fa-link-slash"}`}),l("span",{children:y.isLinked?l(Xe,{children:[`${wt[y.linkedStat].name}`,l("span",{className:"ms-2",children:`+${rs(y.quantity,y.rank)}`})]}):""})]}),l("span",{className:"badge bg-dark border",children:[Ht(y.actions)," ",y.actions," Actions"]}),l("span",{className:"badge bg-dark border",children:[se(y.element)," ",y.element]}),l("span",{className:"badge bg-dark border",children:["Spell ",y.power," ",l("i",{children:["(SL. Rank: ",y.rank,")"]})]})]}),y.description&&l(Xe,{children:[l("p",{className:"py-1 border-bottom h5 arsenal",children:"Description"}),l("div",{className:"mb-0 spell-description arsenal",style:{display:"-webkit-box",WebkitLineClamp:"5",WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},dangerouslySetInnerHTML:{__html:y.description}})]})]})]},y.id))}),l(Yh,{isModalOpen:p,closeModal:F,spellBeingEdited:s,currentSpell:c,setCurrentSpell:u,incrementPower:Tt,decrementPower:Mt,getSpellRank:$s,getActionLabel:Ht,validateDiceRoll:ut,diceError:lt,saveSpell:it,removeSpell:St}),l(Kh,{isLinkModalOpen:_,closeLinkModal:Z,currentSpell:c,setCurrentSpell:u,saveSpell:it,getLinkedStats:o}),l(Bh,{spellToDelete:K,confirmDelete:Dt,setSpellToDelete:Ct})]})})};function Gh(){return l("div",{className:"spell-inventory container-fluid",children:l("div",{className:"row",children:[l("div",{className:"col-12 col-md-4 order-2 order-md-1",style:{minHeight:"50vh",overflowY:"auto"},children:l(Uh,{})}),l("div",{className:"col-12 col-md-8 order-1 order-md-2",style:{minHeight:"50vh",overflowY:"auto"},children:l(qh,{})})]})})}const zh="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs/%3e%3cg%3e%3cpath%20stroke='none'%20fill='%23FFFFFF'%20d='M16%208%20L48%208%20Q56%208%2056%2016%20L56%2048%20Q56%2056%2048%2056%20L16%2056%20Q8%2056%208%2048%20L8%2016%20Q8%208%2016%208%20M11%2016%20L11%2048%20Q11%2053%2016%2053%20L48%2053%20Q53%2053%2053%2048%20L53%2016%20Q53%2011%2048%2011%20L16%2011%20Q11%2011%2011%2016%20M22%2032%20L30%2024%2032%2024%2032%2028%2042%2028%2042%2036%2032%2036%2032%2040%2030%2040%2022%2032'/%3e%3c/g%3e%3c/svg%3e",Qh="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs/%3e%3cg%3e%3cpath%20stroke='none'%20fill='%23FFFFFF'%20d='M42%2032%20L34%2040%2032%2040%2032%2036%2022%2036%2022%2028%2032%2028%2032%2024%2034%2024%2042%2032%20M53%2048%20L53%2016%20Q53%2011%2048%2011%20L16%2011%20Q11%2011%2011%2016%20L11%2048%20Q11%2053%2016%2053%20L48%2053%20Q53%2053%2053%2048%20M48%2056%20L16%2056%20Q8%2056%208%2048%20L8%2016%20Q8%208%2016%208%20L48%208%20Q56%208%2056%2016%20L56%2048%20Q56%2056%2048%2056'/%3e%3c/g%3e%3c/svg%3e",Xh=[{id:"character",title:"Health"},{id:"spells",title:"Spells and Stats"},{id:"abilities",title:"Abilities"}],ne=Xh.map(n=>({title:n.title,path:n.id==="character"?_n:`${_n.replace(/\/$/,"")}/${n.id}`}));function Jh(){const{url:n,route:t}=hr(),e=ne.findIndex(a=>a.path===n);_t(()=>{const a=i=>{const c=i.target.tagName.toLowerCase(),u=i.target.isContentEditable;c==="input"||c==="textarea"||u||(i.key==="ArrowLeft"?e>0&&t(ne[e-1].path):i.key==="ArrowRight"&&e<ne.length-1&&t(ne[e+1].path))};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}},[n,e]);const r={height:"48px",verticalAlign:"middle",cursor:"pointer"},o=a=>{t(a)};return l("header",{className:"header mb-4",children:l("div",{className:"d-flex justify-content-center align-items-center p-3 border-bottom",children:l("div",{className:"col-md-8 col-lg-6 text-center",children:l("nav",{className:"btn-group gap-2",role:"group","aria-label":"Main navigation",children:[l("img",{src:zh,alt:"Navigate left",onClick:()=>e>0&&o(ne[e-1].path),style:{...r,marginRight:"8px",filter:e>0?"none":"opacity(0.3)",cursor:e>0?"pointer":"default"},"aria-disabled":e<=0}),ne.map((a,i)=>{let c="dark-btn dark-btn-primary";return n===a.path&&(c+="-active"),l("button",{className:c,onClick:()=>o(a.path),children:l("span",{children:a.title})},a.path)}),l("img",{src:Qh,alt:"Navigate right",onClick:()=>e<ne.length-1&&o(ne[e+1].path),style:{...r,marginLeft:"8px",filter:e<ne.length-1?"none":"opacity(0.3)",cursor:e<ne.length-1?"pointer":"default"},"aria-disabled":e>=ne.length-1})]})})})})}const Zh=()=>{const{showToast:n}=_s(),{spells:t}=wn(),e=(a,i)=>{let c="[[1d20+"+le(t,i);a==="Initiative"&&(c+="&{tracker}"),c+="]]";const u=`&{template:default} {{name=${a}}}{{Roll=${c}}}{{Stat Bonus=[[${le(t,i)}]] from ${fr(i)}}}`;navigator.clipboard.writeText(u),n(a+" roll command copied! Paste it into the text chat on Roll20.","clipboard","success","Copied to clipboard")},r=[{name:"Fortitude Save",stat:"vitality"},{name:"Will Save",stat:"spirit"},{name:"Reflex Save",stat:"speed"}],o={name:"Initiative",stat:"speed",icon:"fa-bolt"};return l("div",{className:"save-rolls",children:l("div",{className:"d-flex flex-wrap gap-2 align-items-center justify-content-center",children:[r.map(a=>l("button",{onClick:()=>e(a.name,a.stat),className:"dark-btn dark-btn-secondary d-flex align-items-center justify-content-center flex-grow-1 position-relative",style:{minWidth:"140px",maxWidth:"170px",height:"48px"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Roll ${a.name} (${wt[a.stat].shortName})`,children:[l("i",{className:`fas ${wt[a.stat].icon} me-2`,style:{width:"20px"}}),l("span",{children:a.name})]},a.name)),l("button",{onClick:()=>e(o.name,o.stat),className:"dark-btn dark-btn-primary d-flex align-items-center justify-content-center flex-grow-1 position-relative",style:{minWidth:"140px",maxWidth:"170px",height:"48px"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Roll ${o.name} (${wt[o.stat].shortName})`,children:[l("i",{className:`fas ${o.icon} text-${o.color} me-2`,style:{width:"20px"}}),l("span",{children:o.name})]},o.name)]})})},tf=({buildDate:n})=>{const{url:t}=hr();return l("footer",{className:"footer mt-auto py-3 text-light border-top",children:l("div",{className:"container-fluid",children:l("div",{className:"row",children:[l("div",{className:"col-4 text-start text-truncate d-flex align-items-center",children:[l("span",{className:"me-2",children:["Build Date: ",n]}),l("a",{href:"https://github.com/btarg/requiem-pathfinder-preact",target:"_blank",rel:"noopener noreferrer",className:"text-light",title:"GitHub Repository",children:l("i",{className:"fab fa-github"})})]}),l("div",{className:"col-4 text-center",children:[l(Zh,{}),l(Ve,{title:"QUICK ROLLS",containerClassName:"mt-3"})]}),l("div",{className:"col-4 d-flex align-items-center justify-content-end",children:l("a",{href:"https://btarg.github.io/requiem-vault/",target:"_blank",rel:"noopener noreferrer",className:"dark-btn dark-btn-primary",children:[l("i",{className:"fas fa-book me-2"}),l("span",{className:"me-2",children:"Open Wiki"}),l("i",{className:"fa-solid fa-arrow-up-right-from-square",style:{fontSize:"0.75rem"}})]})})]})})})},lo=An({abilities:[],setAbilities:n=>{},subscribe:n=>{},unsubscribe:n=>{}}),ef=({children:n})=>{const[t,e]=z(()=>{try{const c=localStorage.getItem("abilities");return c?JSON.parse(c):[]}catch(c){return console.error("Error loading abilities from localStorage:",c),[]}}),[r,o]=z([]);_t(()=>{console.log("Saving abilities to localStorage:",t),localStorage.setItem("abilities",JSON.stringify(t)),r.forEach(c=>c(t))},[t,r]);const a=c=>{o(u=>[...u,c])},i=c=>{o(u=>u.filter(s=>s!==c))};return l(lo.Provider,{value:{abilities:t,setAbilities:e,subscribe:a,unsubscribe:i},children:n})},nf=()=>fe(lo),sf=({isModalOpen:n,closeModal:t,abilityBeingEdited:e,currentAbility:r,setCurrentAbility:o,getActionLabel:a,validateDiceRoll:i,diceError:c,saveAbility:u,removeAbility:s})=>l("div",{className:`modal ${n?"show":""}`,style:{display:n?"block":"none"},tabIndex:-1,children:l("div",{className:"modal-dialog",children:l("div",{className:"modal-content",children:[l("div",{className:"modal-header",children:[l("h5",{className:"modal-title",children:e?"Edit Ability":"Add Ability"}),l("button",{type:"button",className:"btn-close",onClick:t})]}),l("div",{className:"modal-body",children:[l("div",{className:"mb-2",children:[l("label",{className:"form-label",children:"Ability Type"}),l("div",{className:"btn-group w-100",children:[l("button",{type:"button",className:`btn ${r.type===Qt.GENERIC?"btn-danger":"btn-outline-danger"}`,onClick:()=>o({...r,type:Qt.GENERIC}),children:"Generic Ability"}),l("button",{type:"button",className:`btn ${r.type===Qt.WEAPON?"btn-danger":"btn-outline-danger"}`,onClick:()=>o({...r,type:Qt.WEAPON}),children:"Attack"})]})]}),l("div",{className:"mb-2",children:[l("label",{className:"form-label",children:"Name"}),l("input",{type:"text",className:"form-control",placeholder:r.type===Qt.WEAPON?"Attack Name":"Ability Name",value:r.name,onInput:h=>o({...r,name:h.currentTarget.value})})]}),l("label",{className:"form-label",children:"Actions to Use"}),l("div",{className:"input-group mb-2",children:[l("span",{className:"input-group-text",children:a(r.actions)}),l("select",{className:"form-select",value:r.actions,onChange:h=>o({...r,actions:parseInt(h.currentTarget.value)}),children:[l("option",{value:"1",children:"1 Action"}),l("option",{value:"2",children:"2 Actions"}),l("option",{value:"3",children:"3 Actions"}),l("option",{value:"4",children:"Reaction"}),l("option",{value:"0",children:"Free Action"})]})]}),l("label",{className:"form-label",children:"Element"}),l("div",{className:"input-group mb-2",children:[l("span",{className:"input-group-text",children:se(r.element)}),l("select",{className:"form-select",value:r.element,onChange:h=>o({...r,element:h.currentTarget.value}),children:Object.values(rt).map(h=>l("option",{value:h,children:h},h))})]}),l("label",{className:"form-label",children:r.type===Qt.WEAPON?"Attack Roll":"Dice Roll"}),l("div",{className:"input-group mb-2",children:[l("span",{className:"input-group-text",children:l("i",{className:"fas fa-dice-d20"})}),l("input",{type:"text",className:`form-control ${c?"is-invalid":""}`,placeholder:"Dice Roll (e.g. 1d4)",value:r.dice,onInput:h=>{const p=h.currentTarget.value;o({...r,dice:p}),i(p)}}),c&&l("div",{className:"invalid-feedback",children:c})]}),l("div",{className:"alert alert-info py-1 mb-2",children:[l("i",{className:"fas fa-info-circle me-2"}),l("small",{children:"Use [stat] to include a stat's value (e.g., [strength] + 1d6)"})]}),r.type===Qt.WEAPON&&l("div",{className:"mb-3",children:[l("label",{className:"form-label",children:"Additional Attacks"}),l("br",{}),r.additionalAttacks&&r.additionalAttacks.map((h,p)=>l("div",{className:"input-group mb-2",children:[l("span",{className:"input-group-text",children:["Attack ",p+2," Modifier"]}),l("input",{type:"number",className:"form-control",value:h.penalty,onChange:m=>{const _=parseInt(m.currentTarget.value)||0,E=[...r.additionalAttacks];E[p]={...h,penalty:_},o({...r,additionalAttacks:E})}}),l("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>{const m=[...r.additionalAttacks];m.splice(p,1),o({...r,additionalAttacks:m})},children:l("i",{className:"fas fa-times"})})]},p)),l("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>{const h=[...r.additionalAttacks||[]];h.push({penalty:-5}),o({...r,additionalAttacks:h})},children:[l("i",{className:"fas fa-plus me-1"})," Add Attack"]})]}),l("div",{className:"mb-2",children:[l("label",{className:"form-label",children:"Description"}),l("textarea",{className:"form-control",placeholder:"Ability Description",value:r.description,onInput:h=>o({...r,description:h.currentTarget.value})})]})]}),l("div",{className:"modal-footer",children:[l("button",{type:"button",className:"btn btn-secondary",onClick:t,children:[l("i",{className:"fas fa-times me-1"}),"Close"]}),e&&l("button",{type:"button",className:"btn btn-danger",onClick:()=>s(e.id),children:[l("i",{className:"fas fa-trash-alt me-1"}),"Delete"]}),l("button",{type:"button",className:"btn btn-success",onClick:u,children:[l("i",{className:`fas ${e?"fa-save":"fa-plus"} me-1`}),e?"Save Changes":"Add Ability"]})]})]})})}),rf=({abilityToDelete:n,confirmDelete:t,setAbilityToDelete:e})=>l("div",{className:`modal fade ${n?"show":""}`,style:{display:n?"block":"none"},tabIndex:-1,children:l("div",{className:"modal-dialog",children:l("div",{className:"modal-content",children:[l("div",{className:"modal-header",children:[l("h5",{className:"modal-title",children:"Confirm Deletion"}),l("button",{type:"button",className:"btn-close",onClick:()=>e(null),"aria-label":"Close"})]}),l("div",{className:"modal-body",children:"Are you sure you want to delete this ability?"}),l("div",{className:"modal-footer",children:[l("button",{type:"button",className:"btn btn-secondary",onClick:()=>e(null),children:"No, Keep It"}),l("button",{type:"button",className:"btn btn-danger",onClick:t,children:"Yes, Delete It"})]})]})})}),af=()=>{const{abilities:n,setAbilities:t}=nf(),{characterStats:e}=fe(Fe),{showToast:r}=_s(),o={id:null,name:"",type:Qt.GENERIC,description:"",dice:"",actions:1,element:"Physical",additionalAttacks:[]},[a,i]=z(null),[c,u]=z(o),[s,h]=z(null),[p,m]=z(!1),[_,E]=z(null),[A,C]=z(""),[O,L]=z(null);_t(()=>{console.log("Saving abilities to localStorage:",n),localStorage.setItem("abilities",JSON.stringify(n))},[n]),_t(()=>{const x=[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map(K=>new ye(K));return()=>{x.forEach(K=>{K&&typeof K.dispose=="function"&&K.dispose()})}},[]);const B=N=>{i(a===N?null:N)},M=(N=null)=>{h(N),u(N||o),m(!0)},U=()=>{h(null),m(!1),C("")},V=N=>{E(N)},Q=()=>{if(_){const N=n.find(x=>x.id===_);t(n.filter(x=>x.id!==_)),E(null),U(),r(`${N.name} deleted successfully`,"trash","danger","Deleted")}},X=N=>{if(!N)return!0;const x=Jn(N,e);return C(x.error||""),x.isValid},P=()=>{var N;if(!c.name.trim()){C("Name is required");return}if(((N=c.type)==null?void 0:N.toString())===Qt.WEAPON.toString()&&!c.dice.trim()){C("Attack roll is required for weapons");return}if(!(c.dice&&!X(c.dice))){if(s)t(n.map(x=>x.id===s.id?{...c,id:s.id}:x)),r(`${c.name} updated successfully`,"check","success","Updated"),L(s.id);else{const x={...c,id:Date.now()};t(K=>[...K,x]),r(`${c.name} added successfully`,"plus","success","Added"),L(x.id)}setTimeout(()=>L(null),1e3),console.log("Ability saved:",c),U()}},F=N=>{let x="",K="";switch(N){case 0:x="[free-action]",K="Free Action";break;case 1:x="[one-action]",K="One Action";break;case 2:x="[two-actions]",K="Two Actions";break;case 3:x="[three-actions]",K="Three Actions";break;case 4:x="[reaction]",K="Reaction";break;default:return""}return l("span",{className:"action","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-original-title":K,title:K,role:"img","aria-label":K,children:x})},Y=N=>{N.type===Qt.WEAPON?Z(N):lt(N)},Z=(N,x=0)=>{const K=N.dice,{isValid:Ct,error:St}=Jn(K,e);if(!Ct){r(St,"exclamation-triangle","danger","Invalid Dice");return}const Dt=Qe([],K,e),At=N.name;let Tt=Dt;if(x>0&&N.additionalAttacks&&N.additionalAttacks[x-1]){const ft=N.additionalAttacks[x-1].penalty||0;ft!==0&&(Tt=`${Dt}${ft<0?ft:`+${ft}`}`)}const Mt=`{{Attack ${x>0?x+1:""}=[[${Tt}]]}}`;let yt="";N.element&&(yt=`{{Element=${se(N.element)} ${N.element}}}`);const gt=`&{template:default} {{name=${At}}} ${Mt} ${yt} {{Description=${N.description||""}}}`;navigator.clipboard.writeText(gt).then(()=>{const ft=x>0?` (Attack #${x+1})`:"";r(`${At}${ft} command copied! Paste it into Roll20.`,"clipboard","success","Copied to clipboard")}).catch(ft=>{console.error("Failed to copy command: ",ft),r("Failed to copy command.","exclamation-triangle","danger","Copy Error")})},lt=N=>{let x="";if(N.dice){const{isValid:Ct,error:St}=Jn(N.dice,e);if(!Ct){r(St,"exclamation-triangle","danger","Invalid Dice");return}x=`{{Roll=[[${Qe([],N.dice,e)}]]}}`}const K=`&{template:default} {{name=${N.name}}} ${x} {{Description=${N.description||""}}}`;navigator.clipboard.writeText(K).then(()=>{r(`${N.name} command copied! Paste it into Roll20.`,"clipboard","success","Copied to clipboard")}).catch(Ct=>{console.error("Failed to copy command: ",Ct),r("Failed to copy command.","exclamation-triangle","danger","Copy Error")})},Nt=n.filter(N=>{var x;return((x=N.type)==null?void 0:x.toString())===Qt.WEAPON.toString()}),ut=n.filter(N=>{var x;return((x=N.type)==null?void 0:x.toString())===Qt.GENERIC.toString()}),it=N=>l("li",{className:`list-group-item ${O===N.id?"quantity-flash":""}`,children:[l("div",{className:"d-flex justify-content-between align-items-center",children:[l("div",{className:"d-flex align-items-center overflow-hidden",style:{flex:"1 1 0"},onClick:()=>B(N.id),children:[l("span",{className:"me-2",children:se(N.element)}),l("div",{className:"text-truncate",children:[l("span",{className:"arsenal me-2",children:N.name}),l("span",{className:"action-label hide-on-small me-2",children:F(N.actions)})]})]}),l("div",{className:"d-flex align-items-center justify-content-center",style:{gap:"0.5rem"},children:["                    ",l("i",{className:"fas fa-edit text-primary",onClick:x=>{x.stopPropagation(),M(N)},style:{cursor:"pointer",transition:"opacity 0.3s",opacity:.6,flexShrink:0},onMouseOver:x=>{x.stopPropagation(),x.currentTarget.style.opacity="1"},onMouseOut:x=>{x.stopPropagation(),x.currentTarget.style.opacity="0.6"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Edit Weapon"}),l("div",{className:"btn-group d-flex justify-content-center",children:[l("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>Z(N,0),"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Roll base attack",children:[l("i",{className:"fas fa-dice-d20 me-1"}),l("span",{className:"ms-1 text-truncate",children:Qe(Nt,N.dice,e,!0)})]}),"                        ",N.additionalAttacks.map((x,K)=>l("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>Z(N,K+1),"data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Roll attack #${K+2} (${x.penalty<0?x.penalty:`+${x.penalty}`})`,children:["#",K+2," (",x.penalty<0?x.penalty:`+${x.penalty}`,")"]},K))]})]})]}),a===N.id&&l("div",{className:"ability-details mt-2",children:["                    ",l("div",{className:"d-flex flex-wrap mb-2 justify-content-center gap-1",children:[N.element&&l("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`${N.element} damage type`,children:[se(N.element)," ",N.element]}),l("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Takes ${N.actions} action${N.actions!==1?"s":""} to use`,children:[F(N.actions)," ",N.actions===4?"Reaction":`${N.actions} Action${N.actions!==1?"s":""}`]}),N.additionalAttacks&&N.additionalAttacks.length>0&&l("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Can make ${N.additionalAttacks.length+1} attacks in total`,children:[l("i",{className:"fas fa-crosshairs"})," ",N.additionalAttacks.length+1," Attacks"]})]}),N.description&&l("div",{children:[l("p",{className:"py-1 border-bottom h6 arsenal text-center",children:"Description"}),l("p",{className:"mb-2",children:N.description})]})]})]},N.id),at=N=>l("li",{className:`list-group-item ${O===N.id?"quantity-flash":""}`,children:[l("div",{className:"d-flex justify-content-between align-items-center",children:[l("div",{className:"d-flex align-items-center overflow-hidden",style:{flex:"1 1 0"},onClick:()=>B(N.id),children:[l("span",{className:"me-2",children:se(N.element)}),l("div",{className:"text-truncate",children:[l("span",{className:"arsenal me-2",children:N.name}),l("span",{className:"action-label hide-on-small me-2",children:F(N.actions)})]})]}),l("div",{className:"d-flex align-items-center",style:{gap:"0.5rem"},children:[l("i",{className:"fas fa-edit text-primary",onClick:x=>{x.stopPropagation(),M(N)},style:{cursor:"pointer",transition:"opacity 0.3s",opacity:.6,flexShrink:0},onMouseOver:x=>{x.stopPropagation(),x.currentTarget.style.opacity="1"},onMouseOut:x=>{x.stopPropagation(),x.currentTarget.style.opacity="0.6"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Edit Ability"}),N.dice&&l("button",{className:"btn btn-sm btn-outline-danger",onClick:x=>{x.stopPropagation(),Y(N)},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Roll this ability",children:[l("i",{className:"fas fa-dice-d20 me-1"}),l("span",{className:"text-truncate",children:N.dice})]})]})]}),a===N.id&&l("div",{className:"ability-details mt-2",children:["                    ",l("div",{className:"d-flex flex-wrap mb-2 justify-content-center gap-1",children:[l("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Takes ${N.actions} action${N.actions!==1?"s":""} to use`,children:[F(N.actions)," ",N.actions===4?"Reaction":`${N.actions} Action${N.actions!==1?"s":""}`]}),N.element&&l("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`${N.element} element type`,children:[se(N.element)," ",N.element]}),N.dice&&l("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Dice formula for this ability",children:[l("i",{className:"fas fa-dice-d20"})," ",N.dice]})]}),N.description&&l("div",{children:[l("p",{className:"py-1 border-bottom h6 arsenal",children:"Description"}),l("p",{className:"mb-0",children:N.description})]})]})]},N.id);return l("div",{className:"abilities-list-container",children:[l(Ve,{title:"ABILITIES & ATTACKS",lineMaxWidth:"50px"}),l("div",{className:"d-flex flex-column justify-content-between align-items-center mb-4",children:l("button",{className:"dark-btn dark-btn-primary mt-2 mt-md-0",onClick:()=>M(),style:{width:"160px",height:"60px"},"data-bs-toggle":"tooltip","data-bs-placement":"bottom",title:"Create a new ability or weapon",children:[l("i",{className:"fas fa-plus me-2"})," ",l("span",{children:"Add Ability"})]})}),l("div",{className:"row",children:[l("div",{className:"col-12 col-md-6 mb-3",children:l("div",{className:"card",children:[l("div",{className:"card-header",children:l("h5",{className:"arsenal m-0",children:"Attacks"})}),l("div",{className:"card-body p-0",children:Nt.length>0?l("ul",{className:"list-group list-group-flush",children:Nt.map(N=>it(N))}):l("div",{className:"text-center p-4",children:l("p",{className:"arsenal mb-0",children:'No weapons found. Click "Add Ability" to create one.'})})})]})}),l("div",{className:"col-12 col-md-6 mb-3",children:l("div",{className:"card",children:[l("div",{className:"card-header",children:l("h5",{className:"arsenal m-0",children:"Generic Abilities"})}),l("div",{className:"card-body p-0",children:ut.length>0?l("ul",{className:"list-group list-group-flush",children:ut.map(N=>at(N))}):l("div",{className:"text-center p-4",children:l("p",{className:"arsenal mb-0",children:'No abilities found. Click "Add Ability" to create one.'})})})]})})]}),l(sf,{isModalOpen:p,closeModal:U,abilityBeingEdited:s,currentAbility:c,setCurrentAbility:u,getActionLabel:F,validateDiceRoll:X,diceError:A,saveAbility:P,removeAbility:V}),l(rf,{abilityToDelete:_,confirmDelete:Q,setAbilityToDelete:E})]})};function of(){return l("div",{className:"abilities-page container-fluid",children:l(af,{})})}function lf(){return l(ko,{children:l(xo,{children:l(ef,{children:l(Cn,{children:l("div",{className:"d-flex flex-column min-vh-100",children:[l(Jh,{}),l("main",{className:"flex-grow-1",children:l(aa,{children:[l(Wn,{path:_n,component:jh}),l(Wn,{path:`${_n}spells`,component:Gh}),l(Wn,{path:`${_n}abilities`,component:of}),l(Wn,{default:!0,component:No})]})}),l(tf,{buildDate:"2025-05-21T19:05:53.589Z"})]})})})})})}yo(l(lf,{}),document.getElementById("app"));
