(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))r(c);new MutationObserver(c=>{for(const o of c)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(c){const o={};return c.integrity&&(o.integrity=c.integrity),c.referrerPolicy&&(o.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?o.credentials="include":c.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(c){if(c.ep)return;c.ep=!0;const o=n(c);fetch(c.href,o)}})();var Tn,te,Qi,Mt,Gr,Xi,Ji,Zi,lr,Xs,Js,ea,En={},ta=[],Eo=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Cn=Array.isArray;function ut(t,e){for(var n in e)t[n]=e[n];return t}function cr(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Dt(t,e,n){var r,c,o,i={};for(o in e)o=="key"?r=e[o]:o=="ref"?c=e[o]:i[o]=e[o];if(arguments.length>2&&(i.children=arguments.length>3?Tn.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)i[o]==null&&(i[o]=t.defaultProps[o]);return gn(t,i,r,c,null)}function gn(t,e,n,r,c){var o={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:c??++Qi,__i:-1,__u:0};return c==null&&te.vnode!=null&&te.vnode(o),o}function Jt(t){return t.children}function Jn(t,e){this.props=t,this.context=e}function Zt(t,e){if(e==null)return t.__?Zt(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?Zt(t):null}function na(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return na(t)}}function Zs(t){(!t.__d&&(t.__d=!0)&&Mt.push(t)&&!is.__r++||Gr!=te.debounceRendering)&&((Gr=te.debounceRendering)||Xi)(is)}function is(){for(var t,e,n,r,c,o,i,l=1;Mt.length;)Mt.length>l&&Mt.sort(Ji),t=Mt.shift(),l=Mt.length,t.__d&&(n=void 0,c=(r=(e=t).__v).__e,o=[],i=[],e.__P&&((n=ut({},r)).__v=r.__v+1,te.vnode&&te.vnode(n),dr(e.__P,n,r,e.__n,e.__P.namespaceURI,32&r.__u?[c]:null,o,c??Zt(r),!!(32&r.__u),i),n.__v=r.__v,n.__.__k[n.__i]=n,aa(o,n,i),n.__e!=c&&na(n)));is.__r=0}function sa(t,e,n,r,c,o,i,l,d,s,u){var f,p,_,y,A,C,$=r&&r.__k||ta,M=e.length;for(d=No(n,e,$,d,M),f=0;f<M;f++)(_=n.__k[f])!=null&&(p=_.__i==-1?En:$[_.__i]||En,_.__i=f,C=dr(t,_,p,c,o,i,l,d,s,u),y=_.__e,_.ref&&p.ref!=_.ref&&(p.ref&&ur(p.ref,null,_),u.push(_.ref,_.__c||y,_)),A==null&&y!=null&&(A=y),4&_.__u||p.__k===_.__k?d=ra(_,d,t):typeof _.type=="function"&&C!==void 0?d=C:y&&(d=y.nextSibling),_.__u&=-7);return n.__e=A,d}function No(t,e,n,r,c){var o,i,l,d,s,u=n.length,f=u,p=0;for(t.__k=new Array(c),o=0;o<c;o++)(i=e[o])!=null&&typeof i!="boolean"&&typeof i!="function"?(d=o+p,(i=t.__k[o]=typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?gn(null,i,null,null,null):Cn(i)?gn(Jt,{children:i},null,null,null):i.constructor==null&&i.__b>0?gn(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=t,i.__b=t.__b+1,l=null,(s=i.__i=Ao(i,n,d,f))!=-1&&(f--,(l=n[s])&&(l.__u|=2)),l==null||l.__v==null?(s==-1&&(c>u?p--:c<u&&p++),typeof i.type!="function"&&(i.__u|=4)):s!=d&&(s==d-1?p--:s==d+1?p++:(s>d?p--:p++,i.__u|=4))):t.__k[o]=null;if(f)for(o=0;o<u;o++)(l=n[o])!=null&&(2&l.__u)==0&&(l.__e==r&&(r=Zt(l)),la(l,l));return r}function ra(t,e,n){var r,c;if(typeof t.type=="function"){for(r=t.__k,c=0;r&&c<r.length;c++)r[c]&&(r[c].__=t,e=ra(r[c],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=Zt(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function ia(t,e){return e=e||[],t==null||typeof t=="boolean"||(Cn(t)?t.some(function(n){ia(n,e)}):e.push(t)),e}function Ao(t,e,n,r){var c,o,i=t.key,l=t.type,d=e[n];if(d===null&&t.key==null||d&&i==d.key&&l==d.type&&(2&d.__u)==0)return n;if(r>(d!=null&&(2&d.__u)==0?1:0))for(c=n-1,o=n+1;c>=0||o<e.length;){if(c>=0){if((d=e[c])&&(2&d.__u)==0&&i==d.key&&l==d.type)return c;c--}if(o<e.length){if((d=e[o])&&(2&d.__u)==0&&i==d.key&&l==d.type)return o;o++}}return-1}function Qr(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Eo.test(e)?n:n+"px"}function Vn(t,e,n,r,c){var o;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||Qr(t.style,e,"");if(n)for(e in n)r&&n[e]==r[e]||Qr(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(Zi,"$1")),e=e.toLowerCase()in t||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=n,n?r?n.u=r.u:(n.u=lr,t.addEventListener(e,o?Js:Xs,o)):t.removeEventListener(e,o?Js:Xs,o);else{if(c=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function Xr(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=lr++;else if(e.t<n.u)return;return n(te.event?te.event(e):e)}}}function dr(t,e,n,r,c,o,i,l,d,s){var u,f,p,_,y,A,C,$,M,B,I,W,Y,Q,X,R,F,U=e.type;if(e.constructor!=null)return null;128&n.__u&&(d=!!(32&n.__u),o=[l=e.__e=n.__e]),(u=te.__b)&&u(e);e:if(typeof U=="function")try{if($=e.props,M="prototype"in U&&U.prototype.render,B=(u=U.contextType)&&r[u.__c],I=u?B?B.props.value:u.__:r,n.__c?C=(f=e.__c=n.__c).__=f.__E:(M?e.__c=f=new U($,I):(e.__c=f=new Jn($,I),f.constructor=U,f.render=Co),B&&B.sub(f),f.props=$,f.state||(f.state={}),f.context=I,f.__n=r,p=f.__d=!0,f.__h=[],f._sb=[]),M&&f.__s==null&&(f.__s=f.state),M&&U.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=ut({},f.__s)),ut(f.__s,U.getDerivedStateFromProps($,f.__s))),_=f.props,y=f.state,f.__v=e,p)M&&U.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),M&&f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(M&&U.getDerivedStateFromProps==null&&$!==_&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps($,I),!f.__e&&f.shouldComponentUpdate!=null&&f.shouldComponentUpdate($,f.__s,I)===!1||e.__v==n.__v){for(e.__v!=n.__v&&(f.props=$,f.state=f.__s,f.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(Z){Z&&(Z.__=e)}),W=0;W<f._sb.length;W++)f.__h.push(f._sb[W]);f._sb=[],f.__h.length&&i.push(f);break e}f.componentWillUpdate!=null&&f.componentWillUpdate($,f.__s,I),M&&f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(_,y,A)})}if(f.context=I,f.props=$,f.__P=t,f.__e=!1,Y=te.__r,Q=0,M){for(f.state=f.__s,f.__d=!1,Y&&Y(e),u=f.render(f.props,f.state,f.context),X=0;X<f._sb.length;X++)f.__h.push(f._sb[X]);f._sb=[]}else do f.__d=!1,Y&&Y(e),u=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++Q<25);f.state=f.__s,f.getChildContext!=null&&(r=ut(ut({},r),f.getChildContext())),M&&!p&&f.getSnapshotBeforeUpdate!=null&&(A=f.getSnapshotBeforeUpdate(_,y)),R=u,u!=null&&u.type===Jt&&u.key==null&&(R=oa(u.props.children)),l=sa(t,Cn(R)?R:[R],e,n,r,c,o,i,l,d,s),f.base=e.__e,e.__u&=-161,f.__h.length&&i.push(f),C&&(f.__E=f.__=null)}catch(Z){if(e.__v=null,d||o!=null)if(Z.then){for(e.__u|=d?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;o[o.indexOf(l)]=null,e.__e=l}else for(F=o.length;F--;)cr(o[F]);else e.__e=n.__e,e.__k=n.__k;te.__e(Z,e,n)}else o==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):l=e.__e=To(n.__e,e,n,r,c,o,i,d,s);return(u=te.diffed)&&u(e),128&e.__u?void 0:l}function aa(t,e,n){for(var r=0;r<n.length;r++)ur(n[r],n[++r],n[++r]);te.__c&&te.__c(e,t),t.some(function(c){try{t=c.__h,c.__h=[],t.some(function(o){o.call(c)})}catch(o){te.__e(o,c.__v)}})}function oa(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:Cn(t)?t.map(oa):ut({},t)}function To(t,e,n,r,c,o,i,l,d){var s,u,f,p,_,y,A,C=n.props,$=e.props,M=e.type;if(M=="svg"?c="http://www.w3.org/2000/svg":M=="math"?c="http://www.w3.org/1998/Math/MathML":c||(c="http://www.w3.org/1999/xhtml"),o!=null){for(s=0;s<o.length;s++)if((_=o[s])&&"setAttribute"in _==!!M&&(M?_.localName==M:_.nodeType==3)){t=_,o[s]=null;break}}if(t==null){if(M==null)return document.createTextNode($);t=document.createElementNS(c,M,$.is&&$),l&&(te.__m&&te.__m(e,o),l=!1),o=null}if(M==null)C===$||l&&t.data==$||(t.data=$);else{if(o=o&&Tn.call(t.childNodes),C=n.props||En,!l&&o!=null)for(C={},s=0;s<t.attributes.length;s++)C[(_=t.attributes[s]).name]=_.value;for(s in C)if(_=C[s],s!="children"){if(s=="dangerouslySetInnerHTML")f=_;else if(!(s in $)){if(s=="value"&&"defaultValue"in $||s=="checked"&&"defaultChecked"in $)continue;Vn(t,s,null,_,c)}}for(s in $)_=$[s],s=="children"?p=_:s=="dangerouslySetInnerHTML"?u=_:s=="value"?y=_:s=="checked"?A=_:l&&typeof _!="function"||C[s]===_||Vn(t,s,_,C[s],c);if(u)l||f&&(u.__html==f.__html||u.__html==t.innerHTML)||(t.innerHTML=u.__html),e.__k=[];else if(f&&(t.innerHTML=""),sa(e.type=="template"?t.content:t,Cn(p)?p:[p],e,n,r,M=="foreignObject"?"http://www.w3.org/1999/xhtml":c,o,i,o?o[0]:n.__k&&Zt(n,0),l,d),o!=null)for(s=o.length;s--;)cr(o[s]);l||(s="value",M=="progress"&&y==null?t.removeAttribute("value"):y!=null&&(y!==t[s]||M=="progress"&&!y||M=="option"&&y!=C[s])&&Vn(t,s,y,C[s],c),s="checked",A!=null&&A!=t[s]&&Vn(t,s,A,C[s],c))}return t}function ur(t,e,n){try{if(typeof t=="function"){var r=typeof t.__u=="function";r&&t.__u(),r&&e==null||(t.__u=t(e))}else t.current=e}catch(c){te.__e(c,n)}}function la(t,e,n){var r,c;if(te.unmount&&te.unmount(t),(r=t.ref)&&(r.current&&r.current!=t.__e||ur(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){te.__e(o,e)}r.base=r.__P=null}if(r=t.__k)for(c=0;c<r.length;c++)r[c]&&la(r[c],e,n||typeof t.type!="function");n||cr(t.__e),t.__c=t.__=t.__e=void 0}function Co(t,e,n){return this.constructor(t,n)}function wo(t,e,n){var r,c,o,i;e==document&&(e=document.documentElement),te.__&&te.__(t,e),c=(r=!1)?null:e.__k,o=[],i=[],dr(e,t=e.__k=Dt(Jt,null,[t]),c||En,En,e.namespaceURI,c?null:e.firstChild?Tn.call(e.childNodes):null,o,c?c.__e:e.firstChild,r,i),aa(o,t,i)}function Jr(t,e,n){var r,c,o,i,l=ut({},t.props);for(o in t.type&&t.type.defaultProps&&(i=t.type.defaultProps),e)o=="key"?r=e[o]:o=="ref"?c=e[o]:l[o]=e[o]==null&&i!=null?i[o]:e[o];return arguments.length>2&&(l.children=arguments.length>3?Tn.call(arguments,2):n),gn(t.type,l,r||t.key,c||t.ref,null)}function wn(t){function e(n){var r,c;return this.getChildContext||(r=new Set,(c={})[e.__c]=this,this.getChildContext=function(){return c},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(o){this.props.value!=o.value&&r.forEach(function(i){i.__e=!0,Zs(i)})},this.sub=function(o){r.add(o);var i=o.componentWillUnmount;o.componentWillUnmount=function(){r&&r.delete(o),i&&i.call(o)}}),n.children}return e.__c="__cC"+ea++,e.__=t,e.Provider=e.__l=(e.Consumer=function(n,r){return n.children(r)}).contextType=e,e}Tn=ta.slice,te={__e:function(t,e,n,r){for(var c,o,i;e=e.__;)if((c=e.__c)&&!c.__)try{if((o=c.constructor)&&o.getDerivedStateFromError!=null&&(c.setState(o.getDerivedStateFromError(t)),i=c.__d),c.componentDidCatch!=null&&(c.componentDidCatch(t,r||{}),i=c.__d),i)return c.__E=c}catch(l){t=l}throw t}},Qi=0,Jn.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=ut({},this.state),typeof t=="function"&&(t=t(ut({},n),this.props)),t&&ut(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),Zs(this))},Jn.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Zs(this))},Jn.prototype.render=Jt,Mt=[],Xi=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ji=function(t,e){return t.__v.__b-e.__v.__b},is.__r=0,Zi=/(PointerCapture)$|Capture$/i,lr=0,Xs=Xr(!1),Js=Xr(!0),ea=0;var So=0;function a(t,e,n,r,c,o){e||(e={});var i,l,d=e;if("ref"in d)for(l in d={},e)l=="ref"?i=e[l]:d[l]=e[l];var s={type:t,props:d,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--So,__i:-1,__u:0,__source:c,__self:o};if(typeof t=="function"&&(i=t.defaultProps))for(l in i)d[l]===void 0&&(d[l]=i[l]);return te.vnode&&te.vnode(s),s}function xo(){return a("section",{children:[a("h1",{children:"404: Not Found"}),a("p",{children:"It's gone :("})]})}var Ht,ce,$s,Zr,as=0,ca=[],_e=te,ei=_e.__b,ti=_e.__r,ni=_e.diffed,si=_e.__c,ri=_e.unmount,ii=_e.__;function Sn(t,e){_e.__h&&_e.__h(ce,t,as||e),as=0;var n=ce.__H||(ce.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function G(t){return as=1,hr(ua,t)}function hr(t,e,n){var r=Sn(Ht++,2);if(r.t=t,!r.__c&&(r.__=[ua(void 0,e),function(l){var d=r.__N?r.__N[0]:r.__[0],s=r.t(d,l);d!==s&&(r.__N=[s,r.__[1]],r.__c.setState({}))}],r.__c=ce,!ce.__f)){var c=function(l,d,s){if(!r.__c.__H)return!0;var u=r.__c.__H.__.filter(function(p){return!!p.__c});if(u.every(function(p){return!p.__N}))return!o||o.call(this,l,d,s);var f=r.__c.props!==l;return u.forEach(function(p){if(p.__N){var _=p.__[0];p.__=p.__N,p.__N=void 0,_!==p.__[0]&&(f=!0)}}),o&&o.call(this,l,d,s)||f};ce.__f=!0;var o=ce.shouldComponentUpdate,i=ce.componentWillUpdate;ce.componentWillUpdate=function(l,d,s){if(this.__e){var u=o;o=void 0,c(l,d,s),o=u}i&&i.call(this,l,d,s)},ce.shouldComponentUpdate=c}return r.__N||r.__}function ge(t,e){var n=Sn(Ht++,3);!_e.__s&&pr(n.__H,e)&&(n.__=t,n.u=e,ce.__H.__h.push(n))}function da(t,e){var n=Sn(Ht++,4);!_e.__s&&pr(n.__H,e)&&(n.__=t,n.u=e,ce.__h.push(n))}function Be(t){return as=5,fr(function(){return{current:t}},[])}function fr(t,e){var n=Sn(Ht++,7);return pr(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function qe(t){var e=ce.context[t.__c],n=Sn(Ht++,9);return n.c=t,e?(n.__==null&&(n.__=!0,e.sub(ce)),e.props.value):t.__}function ko(){for(var t;t=ca.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Zn),t.__H.__h.forEach(er),t.__H.__h=[]}catch(e){t.__H.__h=[],_e.__e(e,t.__v)}}_e.__b=function(t){ce=null,ei&&ei(t)},_e.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),ii&&ii(t,e)},_e.__r=function(t){ti&&ti(t),Ht=0;var e=(ce=t.__c).__H;e&&($s===ce?(e.__h=[],ce.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(Zn),e.__h.forEach(er),e.__h=[],Ht=0)),$s=ce},_e.diffed=function(t){ni&&ni(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(ca.push(e)!==1&&Zr===_e.requestAnimationFrame||((Zr=_e.requestAnimationFrame)||Oo)(ko)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),$s=ce=null},_e.__c=function(t,e){e.some(function(n){try{n.__h.forEach(Zn),n.__h=n.__h.filter(function(r){return!r.__||er(r)})}catch(r){e.some(function(c){c.__h&&(c.__h=[])}),e=[],_e.__e(r,n.__v)}}),si&&si(t,e)},_e.unmount=function(t){ri&&ri(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Zn(r)}catch(c){e=c}}),n.__H=void 0,e&&_e.__e(e,n.__v))};var ai=typeof requestAnimationFrame=="function";function Oo(t){var e,n=function(){clearTimeout(r),ai&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);ai&&(e=requestAnimationFrame(n))}function Zn(t){var e=ce,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),ce=e}function er(t){var e=ce;t.__c=t.__(),ce=e}function pr(t,e){return!t||t.length!==e.length||e.some(function(n,r){return n!==t[r]})}function ua(t,e){return typeof e=="function"?e(t):e}let $t,_n;const $o=(t,e)=>{if($t=void 0,e&&e.type==="click"){if(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button!==0)return t;const n=e.target.closest("a[href]"),r=n&&n.getAttribute("href");if(!n||n.origin!=location.origin||/^#/.test(r)||!/^(_?self)?$/i.test(n.target)||_n&&(typeof _n=="string"?!r.startsWith(_n):!_n.test(r)))return t;$t=!0,e.preventDefault(),e=n.href.replace(location.origin,"")}else typeof e=="string"?$t=!0:e&&e.url?($t=!e.replace,e=e.url):e=location.pathname+location.search;return $t===!0?history.pushState(null,"",e):$t===!1&&history.replaceState(null,"",e),e},Mo=(t,e,n={})=>{t=t.split("/").filter(Boolean),e=(e||"").split("/").filter(Boolean),n.params||(n.params={});for(let r=0,c,o;r<Math.max(t.length,e.length);r++){let[,i,l,d]=(e[r]||"").match(/^(:?)(.*?)([+*?]?)$/);if(c=t[r],!(!i&&l==c)){if(!i&&c&&d=="*"){n.rest="/"+t.slice(r).map(decodeURIComponent).join("/");break}if(!i||!c&&d!="?"&&d!="*")return;if(o=d=="+"||d=="*",o?c=t.slice(r).map(decodeURIComponent).join("/")||void 0:c&&(c=decodeURIComponent(c)),n.params[l]=c,l in n||(n[l]=c),o)break}}return n};function xn(t){const[e,n]=hr($o,t.url||location.pathname+location.search);t.scope&&(_n=t.scope);const r=$t===!0,c=fr(()=>{const o=new URL(e,location.origin),i=o.pathname.replace(/\/+$/g,"")||"/";return{url:e,path:i,query:Object.fromEntries(o.searchParams),route:(l,d)=>n({url:l,replace:d}),wasPush:r}},[e]);return da(()=>(addEventListener("click",n),addEventListener("popstate",n),()=>{removeEventListener("click",n),removeEventListener("popstate",n)}),[]),Dt(xn.ctx.Provider,{value:c},t.children)}const Do=Promise.resolve();function ha(t){const[e,n]=hr(R=>R+1,0),{url:r,query:c,wasPush:o,path:i}=mr(),{rest:l=i,params:d={}}=qe(oi),s=Be(!1),u=Be(i),f=Be(0),p=Be(),_=Be(),y=Be(),A=Be(!1),C=Be();C.current=!1;let $,M,B;ia(t.children).some(R=>{if(Mo(l,R.props.path,B={...R.props,path:l,query:c,params:d,rest:""}))return $=Jr(R,B);R.props.default&&(M=Jr(R,B))});let I=$||M;const W=p.current&&p.current.__u&Wn&&p.current.__u&jn,Y=p.current&&p.current.__h,Q=fr(()=>{_.current=p.current,p.current=Dt(oi.Provider,{value:B},I);const R=_.current&&_.current.props.children;return!R||!I||I.type!==R.type||I.props.component!==R.props.component?(this.__v&&this.__v.__k&&this.__v.__k.reverse(),f.current++,!0):!1},[r,JSON.stringify(B)]);W?(p.current.__u|=Wn,p.current.__u|=jn):Y&&(p.current.__h=!0);const X=_.current;return _.current=null,this.__c=(R,F)=>{C.current=!0,_.current=X,t.onLoadStart&&t.onLoadStart(r),s.current=!0;let U=f.current;R.then(()=>{U===f.current&&(_.current=null,p.current&&(F.__h&&(p.current.__h=F.__h),F.__u&jn&&(p.current.__u|=jn),F.__u&Wn&&(p.current.__u|=Wn)),Do.then(n))})},da(()=>{const R=this.__v&&this.__v.__e;if(C.current){!A.current&&!y.current&&(y.current=R);return}!A.current&&y.current&&(y.current!==R&&y.current.remove(),y.current=null),A.current=!0,u.current!==i&&(o&&scrollTo(0,0),t.onRouteChange&&t.onRouteChange(r),u.current=i),t.onLoadEnd&&s.current&&t.onLoadEnd(r),s.current=!1},[i,o,e]),Q?[Dt(Ms,{r:p}),Dt(Ms,{r:_})]:Dt(Ms,{r:p})}const Wn=32,jn=128,Ms=({r:t})=>t.current;ha.Provider=xn;xn.ctx=wn({});const oi=wn({}),Bn=t=>Dt(t.component,t),mr=()=>qe(xn.ctx),li=te.__b;te.__b=t=>{t.type&&t.type._forwarded&&t.ref&&(t.props.ref=t.ref,t.ref=null),li&&li(t)};const ci=te.__e;te.__e=(t,e,n)=>{if(t&&t.then){let r=e;for(;r=r.__;)if(r.__c&&r.__c.__c)return e.__e==null&&(e.__c.__z=[n.__e],e.__e=n.__e,e.__k=n.__k),e.__k||(e.__k=[]),r.__c.__c(t,e)}ci&&ci(t,e,n)};const je={PHYSICAL:"physical",MAGICAL:"magical",UTILITY:"utility"},De={OFFENSIVE:"offensive",DEFENSIVE:"defensive",UTILITY:"utility",CORE:"core"},Se={currentHealth:{defaultValue:10,label:"Current HP",type:De.CORE},maxHealth:{defaultValue:10,label:"Max HP",type:De.CORE},currentMp:{defaultValue:10,label:"Current MP",type:De.CORE},maxMp:{defaultValue:10,label:"Max MP",type:De.CORE},tempHealth:{defaultValue:0,label:"Temporary HP",type:De.CORE},strength:{name:"Strength",shortName:"STR",icon:"fa-fist-raised",color:"danger",description:"Increases physical attack damage unless resisted/absorbed/immune. Applied as flat bonus to Physical damage rolls.",category:je.PHYSICAL,type:De.OFFENSIVE,defaultValue:0,displayModifier:!0,affectsRolls:!0,damageType:"physical"},vitality:{name:"Vitality",shortName:"VIT",icon:"fa-shield-alt",color:"primary-emphasis",description:"Reduces incoming Physical damage when attack is resisted. Does not affect neutral or absorbed damage.",category:je.PHYSICAL,type:De.DEFENSIVE,defaultValue:0,displayModifier:!0,damageReduction:!0,damageType:"physical"},magic:{name:"Magic",shortName:"MAG",icon:"fa-hand-sparkles",color:"success-emphasis",description:"Increases magical attack damage unless resisted/absorbed/immune. Applied as flat bonus.",category:je.MAGICAL,type:De.OFFENSIVE,defaultValue:0,displayModifier:!0,affectsRolls:!0,damageType:"magical"},spirit:{name:"Spirit",shortName:"SPR",icon:"fa-shield-heart",color:"info",description:"Reduces incoming magical damage when attack is resisted. Does not affect neutral or absorbed damage.",category:je.MAGICAL,type:De.DEFENSIVE,defaultValue:0,displayModifier:!0,damageReduction:!0,damageType:"magical"},speed:{name:"Speed",shortName:"SPD",icon:"fa-running",color:"secondary-emphasis",description:"Bonus to Initiative and movement distance per turn",category:je.PHYSICAL,type:De.UTILITY,defaultValue:0,displayModifier:!0,derived:{initiative:t=>t,movement:t=>t}},luck:{name:"Luck",shortName:"LCK",icon:"fa-clover",color:"success",description:"Affects spell draws and knockdown resistance",category:je.MAGICAL,type:De.UTILITY,defaultValue:0,displayModifier:!0,derived:{maxExtraDrawDice:t=>Math.min(Math.floor(t),4),knockdownBonus:t=>t}},perception:{name:"Perception",shortName:"PER",icon:"fa-eye",color:"danger-emphasis",description:"Used for Scanning for an enemy's Elemental Affinities, for noticing weak points, hidden treasure, hidden enemies etc.",category:je.UTILITY,type:De.UTILITY,defaultValue:0,displayModifier:!0},wisdom:{name:"Wisdom",shortName:"WIS",icon:"fa-book-open",color:"warning-emphasis",description:"Used for Recalling Knowledge of any kind: essentially every Pathfinder 2E lore skill rolled into one. Also useful in social situations.",category:je.UTILITY,type:De.UTILITY,defaultValue:0,displayModifier:!0},influence:{name:"Influence",shortName:"INF",icon:"fa-comments",color:"warning",description:"Used for social rolls, such as Deception, Intimidation, Performance, Diplomacy and Persuasion.",category:je.UTILITY,type:De.UTILITY,defaultValue:0,displayModifier:!0}},fn={CANTRIP_AND_FIRST:1,SECOND_AND_THIRD:2,FOURTH_AND_FIFTH:3,SIXTH_AND_SEVENTH:4,EIGHTH_TO_TENTH:5},Ds=t=>t<=1?fn.CANTRIP_AND_FIRST:t<=3?fn.SECOND_AND_THIRD:t<=5?fn.FOURTH_AND_FIFTH:t<=7?fn.SIXTH_AND_SEVENTH:fn.EIGHTH_TO_TENTH,mt=wn({characterStats:{},setCharacterStats:t=>{}});function Lo({children:t}){const e=()=>{const o=localStorage.getItem("characterStats");if(o)return JSON.parse(o);{const i={speed:15,AC:10,maxHealth:35,maxMp:1,currentHealth:35,currentMp:1,level:1};for(const l in Se)i[l]=Se[l].defaultValue||0;return i}},[n,r]=G(e);ge(()=>{localStorage.setItem("characterStats",JSON.stringify(n))},[n]);const c={characterStats:n,setCharacterStats:r};return a(mt.Provider,{value:c,children:t})}const fa=wn({spells:[],setSpells:t=>{},getLinkedStats:()=>[],subscribe:t=>{},unsubscribe:t=>{}}),Io=({children:t})=>{const[e,n]=G(()=>{const d=localStorage.getItem("spells");return d?JSON.parse(d):[]}),[r,c]=G([]);ge(()=>{localStorage.setItem("spells",JSON.stringify(e)),r.forEach(d=>d(e))},[e]);const o=()=>e.filter(d=>d.isLinked).map(d=>d.linkedStat),i=d=>{c(s=>[...s,d])},l=d=>{c(s=>s.filter(u=>u!==d))};return a(fa.Provider,{value:{spells:e,setSpells:n,getLinkedStats:o,subscribe:i,unsubscribe:l},children:t})},ln=()=>qe(fa),Qe=Object.freeze({WEAPON:"Weapon",GENERIC:"Generic"}),re=Object.freeze({PHYS:"Physical",FIRE:"Fire",ICE:"Cold",ELEC:"Electricity",FORCE:"Force",PSY:"Psychic",CHEM:"Chemical",RAD:"Radiant",VOID:"Void",TRUE:"Almighty"}),me=Object.freeze({WEAK:"Weak",NEUTRAL:"Neutral",RESIST:"Resist",IMMUNE:"Immune",ABSORB:"Drain",REFLECT:"Reflect"}),Po={[re.PHYS]:"âš”ï¸",[re.CHEM]:"ðŸ§ª",[re.ICE]:"â„ï¸",[re.ELEC]:"âš¡",[re.FIRE]:"ðŸ”¥",[re.FORCE]:"ðŸ’¥",[re.RAD]:"âœ¨",[re.VOID]:"ðŸŒŒ",[re.PSY]:"ðŸŒ€"},it=t=>Po[t]||"â˜„ï¸",Ro=t=>({[re.PHYS]:"Phys",[re.CHEM]:"Chem",[re.ICE]:"Ice",[re.ELEC]:"Elec",[re.FIRE]:"Fire",[re.FORCE]:"Force",[re.RAD]:"Rad",[re.VOID]:"Void",[re.PSY]:"Psy",[re.TRUE]:"???"})[t]||"???",Ho=t=>({[me.WEAK]:"WK",[me.NEUTRAL]:"-",[me.RESIST]:"RES",[me.IMMUNE]:"NULL",[me.ABSORB]:"DR",[me.REFLECT]:"RFL"})[t]||"???",Wt=({title:t,titleClassName:e="grey-text",lineColor:n="#8888",lineThickness:r="1px",containerClassName:c="mb-3",lineMaxWidth:o="none"})=>{const i={height:r,maxWidth:o};return a("div",{className:c,children:a("div",{className:"d-flex align-items-center justify-content-center",children:[a("div",{className:"flex-grow-1",style:{...i,backgroundImage:`linear-gradient(to right, transparent, ${n})`}}),a("h5",{className:`${e} mx-3 my-0 arsenal`,children:t}),a("div",{className:"flex-grow-1",style:{...i,backgroundImage:`linear-gradient(to left, transparent, ${n})`}})]})})},Fo="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%20style='height:%20512px;%20width:%20512px;'%3e%3cg%20class=''%20transform='translate(0,0)'%20style=''%3e%3cpath%20d='m19.36%2019.457-.38%2027.84%20267.127%20154.75-58.703%2019.916%2057.602%2019.36L142.12%20383.546l-19.214-19.213-51.47%20114.324%20123.125-43.482-17.492-18.95%20151.868-151.87%2012.433%2043.078%2022.976-68.5%2056.675-16.565-57.475-15.492-22.934-79.828-14.145%2048.266-268.65-155.41-38.454-.446zM370.614%2081.94c-4.53.02-9.035.12-13.51.302-3.275.134-6.528.32-9.76.547l31.25%20108.786%20104.05%2028.045c6.204-39.085%208.902-80.275%209.18-120.075C456.37%2088.82%20415.098%2082.257%20375.15%2081.95a403.83%20403.83%200%200%200-4.537-.01zm-36.87%202.1c-31.99%203.653-61.013%2012.153-83.014%2025.87l64.493%2037.31%2018.52-63.18zm148.18%20139.997L378.958%20254.13l-38.93%20116.054-20.268-70.225-39.07%2039.067c18.814%2035.364%2046.1%2062.287%2086.175%2077.604%2047.473-17.834%2078.566-62.795%2098.014-121.6%207.323-22.14%2012.905-46.11%2017.042-70.993z'%20fill='%23fff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",Vo="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%20style='height:%20512px;%20width:%20512px;'%3e%3cg%20class=''%20transform='translate(0,0)'%20style=''%3e%3cpath%20d='M362.188%2017.998c-12.9%2065.825-49.788%20140.505-98.616%20197.37L352%20224l-89.377%2019.414%2052.197%2075.27-71.111-56.364L224%20336l-8.576-73.182%202.812-2.779c-45.221%2040.71-35.888%2074.86.702%2096.49%206.775%204.005%2016.257%209.046%2027.38%208.7%2058.243-1.813%2093.255%2035.012%20126.575%2076.199%2018.234%2022.54%2048.35%2030.059%2073.529%2044.246%2052.44%2029.548%2067.894-32.667%2014.767-53.445l-70.677-111.036c-11.42-53.08%2052.186-171.824%20103.49-248.37V17.997zM92.454%2023.424v32.17l32.799%2032.79%208.043-24.126zM78.578%2067.352c-.233-.026-.57.037-1.224.199-1.31.323-3.41%201.482-5.075%203.146-1.664%201.664-2.823%203.763-3.146%205.073-.266%201.074-.207%201.3.012%201.61l120.228%20120.208%203.275-6.55%206.545-3.272L78.97%2067.563c-.123-.086-.24-.195-.39-.211zM21.162%2087.029%2062%20127.86l24.13-8.043-30.335-30.33-.397-.396-.343-.442a17.99%2017.99%200%200%201-1.112-1.619zm213.563%20103.098-28.663%2014.326-14.33%2028.654%2038.264%2015.303%2020.096-19.869z'%20fill='%23fff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",Wo="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%20style='height:%20512px;%20width:%20512px;'%3e%3cg%20class=''%20transform='translate(0,0)'%20style=''%3e%3cpath%20d='M372.48%2031.215c-77.65%200-116.48%2065.73-116.48%2065.73s-38.83-65.72-116.48-65.72c-37.14%200-107.77%2033.72-107.77%20125.13%200%20161.24%20224.25%20324.43%20224.25%20324.43s224.25-163.19%20224.25-324.43c0-91.42-70.63-125.13-107.77-125.14zm-145.492%20115.02h60.698v79.415h79.238v60.7h-79.238v79.884h-60.698V286.35h-80.064v-60.7h80.064z'%20fill='%23fff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e";function jo(){const{characterStats:t,setCharacterStats:e}=qe(mt),[n,r]=G(null),[c,o]=G(typeof window<"u"?window.innerWidth:1024);ge(()=>{const p=()=>o(window.innerWidth);return window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[]);let i=c<1080;ge(()=>{let p=!t.affinities;if(t.affinities){const _=Object.keys(re)[0];_&&t.affinities[re[_]]&&typeof t.affinities[re[_]]!="object"&&(p=!0)}if(p){const _={};Object.values(re).forEach(y=>{_[y]={type:me.NEUTRAL,mastered:!1}}),e(y=>({...y,affinities:_}))}},[t.affinities,e]);const l=p=>{r(_=>_===p?null:p)},d=(p,_)=>{e(y=>{var A;return{...y,affinities:{...y.affinities,[p]:{...((A=y.affinities)==null?void 0:A[p])||{type:me.NEUTRAL,mastered:!1},type:_}}}})},s=p=>{e(_=>{var y,A,C;return{..._,affinities:{..._.affinities,[p]:{...((y=_.affinities)==null?void 0:y[p])||{type:me.NEUTRAL,mastered:!1},mastered:!((C=(A=_.affinities)==null?void 0:A[p])!=null&&C.mastered)}}}})},u=p=>{switch(p){case me.WEAK:return"danger";case me.RESIST:return"info";case me.IMMUNE:return"warning";case me.ABSORB:return"success";case me.REFLECT:return"primary";default:return"secondary"}},f=p=>{const _={width:"1.25em",height:"1.25em",color:"white"};switch(p){case me.WEAK:return a("img",{src:Vo,alt:"Weak",style:_});case me.RESIST:return a("i",{className:"fas fa-shield-alt",style:_});case me.IMMUNE:return a("i",{className:"fas fa-ban",style:_});case me.ABSORB:return a("img",{src:Wo,alt:"Absorb",style:_});case me.REFLECT:return a("img",{src:Fo,alt:"Reflect",style:_});default:return a("i",{className:"fas fa-minus",style:_})}};return!t.affinities||typeof t.affinities[Object.values(re)[0]]!="object"?a("div",{className:"p-3",children:"Loading affinities..."}):a("div",{className:"affinity-tracker p-3",children:[a(Wt,{title:"ELEMENTAL AFFINITIES"}),a("div",{className:"element-grid mt-4 gap-1",children:Object.values(re).filter(p=>p!=="Almighty").map(p=>{const _=t.affinities[p]||{type:me.NEUTRAL,mastered:!1};return a("div",{className:`element-item clickable-card mb-3 ${_.mastered?"gold-bg":""} ${n===p?"editing":""}`,onClick:()=>l(p),children:[_.mastered&&a("div",{className:"mastery-watermark",children:"MASTERY"}),a("div",{className:"element-header d-flex align-items-center justify-content-between mb-1",children:[a("div",{className:"d-flex align-items-center element-info",children:[a("span",{className:"element-icon",children:it(p)}),a("span",{className:"arsenal element-name",children:[i?Ro(p):p,":"]}),a("span",{className:`arsenal ms-1 affinity-name text-${u(_.type)}`,children:i?Ho(_.type):_.type})]}),a("button",{className:`mastery-toggle-button ${_.mastered?"mastered":""}`,onClick:y=>{y.stopPropagation(),s(p)},title:_.mastered?"Disable Mastery":"Enable Mastery",children:a("i",{className:`${_.mastered?"fas fa-star":"fa-regular fa-star"}`})})]}),n===p&&a("div",{className:"affinity-buttons btn-group d-flex mt-2",children:Object.values(me).map(y=>a("button",{className:`btn btn-${_.type===y?u(y):"dark inactive-btn"}`,onClick:A=>{A.stopPropagation(),d(p,y)},title:y,children:f(y)},y))})]},p)})})]})}const Nn={Blinded:{maxStack:1,effects:{ac:-2}},Broken:{maxStack:1},Clumsy:{maxStack:4,effects:{ac:-1,statPenalties:{speed:-1},savingThrowPenalties:{"Reflex Save":-1}}},Concealed:{maxStack:1},Confused:{maxStack:1},Controlled:{maxStack:1},Dazzled:{maxStack:1},Deafened:{maxStack:1},Doomed:{maxStack:3,effects:{savingThrow:-1}},Drained:{maxStack:4,effects:{statPenalties:{vitality:-1},savingThrowPenalties:{"Fortitude Save":-1}}},Dying:{maxStack:4},Encumbered:{maxStack:1,effects:{speed:-10,ac:-1,savingThrowPenalties:{"Reflex Save":-1}}},Enfeebled:{maxStack:4,effects:{statPenalties:{strength:-1}}},Fascinated:{maxStack:1},Fatigued:{maxStack:1,effects:{ac:-1,savingThrow:-1}},"Flat-Footed":{maxStack:1,effects:{ac:-2}},Fleeing:{maxStack:1},Frightened:{maxStack:4,effects:{ac:-1,savingThrow:-1}},Grabbed:{maxStack:1,effects:{ac:-2}},Hidden:{maxStack:1},Immobilized:{maxStack:1,effects:{speed:0}},Invisible:{maxStack:1},Observed:{maxStack:1},"Off-Guard":{maxStack:1,effects:{ac:-2}},Paralyzed:{maxStack:1,effects:{ac:-2,speed:0,savingThrowPenalties:{"Reflex Save":-2}}},"Persistent Damage":{maxStack:1},Petrified:{maxStack:1,effects:{ac:0,speed:0}},Prone:{maxStack:1,effects:{ac:-2}},Quickened:{maxStack:1},Restrained:{maxStack:1,effects:{ac:-2,speed:0,savingThrowPenalties:{"Reflex Save":-2}}},Sickened:{maxStack:4,effects:{ac:-1,savingThrow:-1}},Slowed:{maxStack:3},Stunned:{maxStack:4,effects:{}},Stupefied:{maxStack:4,effects:{statPenalties:{intelligence:-1,wisdom:-1,charisma:-1}}},Unconscious:{maxStack:1,effects:{ac:-4,speed:0,savingThrowPenalties:{"Reflex Save":-4}}},Undetected:{maxStack:1},Unnoticed:{maxStack:1},Wounded:{maxStack:3}},we=t=>{if(!t)return{acModifier:0,speedModifier:0,speedOverride:null,savingThrowModifier:0,statPenalties:{},savingThrowPenalties:{}};let e=0,n=0,r=null,c=0,o={},i={};return Object.entries(t).forEach(([l,d])=>{var s;if(d>0&&((s=Nn[l])!=null&&s.effects)){const u=Nn[l].effects,f=d||1;u.ac!==void 0&&(e+=u.ac*f),u.speed!==void 0&&(u.speed===0?r=0:n+=u.speed*f),u.savingThrow!==void 0&&(c+=u.savingThrow*f),u.statPenalties&&Object.entries(u.statPenalties).forEach(([p,_])=>{o[p]||(o[p]=0),o[p]+=_*f}),u.savingThrowPenalties&&Object.entries(u.savingThrowPenalties).forEach(([p,_])=>{i[p]||(i[p]=0),i[p]+=_*f})}}),{acModifier:e,speedModifier:n,speedOverride:r,savingThrowModifier:c,statPenalties:o,savingThrowPenalties:i}},di=(t,e)=>t&&we(t).statPenalties[e]||0,Bo=(t,e)=>{if(!t)return 0;const n=we(t);return(n.savingThrowPenalties[e]||0)+n.savingThrowModifier},Un=(t,e=1)=>!t||!t.Drained?0:(t.Drained||0)*Math.max(1,e),Uo=Object.keys(Nn),Yo=()=>{const{characterStats:t,setCharacterStats:e}=qe(mt),n=t.conditions||{},r=l=>{const s=(n[l]||0)>0?0:1;e(u=>({...u,conditions:{...u.conditions,[l]:s===0?void 0:s}}))},c=(l,d)=>{const s=Nn[l].maxStack,u=n[l]||0,f=Math.max(0,Math.min(s,u+d));e(p=>({...p,conditions:{...p.conditions,[l]:f===0?void 0:f}}))},o=()=>{e(l=>({...l,conditions:{}}))},i=Object.values(n).filter(l=>l>0).length;return a("div",{className:"conditions-tracker",children:[a("div",{className:"d-flex justify-content-between align-items-center mb-3",children:a(Wt,{title:"CONDITIONS",containerClassName:"mb-0 flex-grow-1",lineMaxWidth:"30px"})}),"            ",a("div",{className:"conditions-grid",children:Uo.map(l=>{const d=Nn[l].maxStack,s=n[l]||0,u=s>0,f=d>1;return a("div",{className:`condition-item ${u?"active":""} ${f?"stackable":""}`,children:[a("div",{className:"condition-main",onClick:()=>r(l),children:[a("div",{className:"condition-checkbox",children:u&&a("i",{className:"fas fa-check"})}),a("span",{className:"condition-label",children:l})]}),u&&f&&a("div",{className:"condition-controls",children:[a("button",{className:"btn btn-sm condition-btn decrease",onClick:p=>{p.stopPropagation(),c(l,-1)},title:"Decrease value",children:a("i",{className:"fas fa-minus"})}),a("span",{className:"condition-value",children:[s,"/",d]}),a("button",{className:"btn btn-sm condition-btn increase",onClick:p=>{p.stopPropagation(),c(l,1)},disabled:s>=d,title:"Increase value",children:a("i",{className:"fas fa-plus"})})]})]},l)})}),i>0&&a("div",{className:"active-conditions-summary mt-2",children:[a("small",{className:"text-info",children:[a("i",{className:"fas fa-exclamation-triangle me-1"}),i," active condition",i!==1?"s":""]}),a("button",{className:"btn btn-sm btn-outline-secondary ms-2",onClick:o,"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Clear all conditions",children:a("i",{className:"fas fa-broom"})})]})]})};var es={exports:{}},Ko=es.exports,ui;function qo(){return ui||(ui=1,function(t,e){(function(n,r){t.exports=r()})(Ko,function(){return function(n){var r={};function c(o){if(r[o])return r[o].exports;var i=r[o]={i:o,l:!1,exports:{}};return n[o].call(i.exports,i,i.exports,c),i.l=!0,i.exports}return c.m=n,c.c=r,c.d=function(o,i,l){c.o(o,i)||Object.defineProperty(o,i,{enumerable:!0,get:l})},c.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},c.t=function(o,i){if(1&i&&(o=c(o)),8&i||4&i&&typeof o=="object"&&o&&o.__esModule)return o;var l=Object.create(null);if(c.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:o}),2&i&&typeof o!="string")for(var d in o)c.d(l,d,(function(s){return o[s]}).bind(null,d));return l},c.n=function(o){var i=o&&o.__esModule?function(){return o.default}:function(){return o};return c.d(i,"a",i),i},c.o=function(o,i){return Object.prototype.hasOwnProperty.call(o,i)},c.p="",c(c.s=0)}([function(n,r,c){function o(i){for(var l in i)r.hasOwnProperty(l)||(r[l]=i[l])}Object.defineProperty(r,"__esModule",{value:!0}),o(c(1)),o(c(3))},function(n,r,c){Object.defineProperty(r,"__esModule",{value:!0});const o=c(2);r.DiceRoller=class{constructor(i,l=1e3){this.randFunction=Math.random,this.maxRollCount=1e3,i&&(this.randFunction=i),this.maxRollCount=l}parse(i){return o.parse(i)}roll(i){const l=o.parse(i);return this.rollType(l)}rollValue(i){return this.roll(i).value}rollParsed(i){return this.rollType(i)}rollType(i){let l;switch(i.type){case"diceExpression":l=this.rollDiceExpr(i);break;case"group":l=this.rollGroup(i);break;case"die":l=this.rollDie(i);break;case"expression":l=this.rollExpression(i);break;case"mathfunction":l=this.rollFunction(i);break;case"inline":l=this.rollType(i.expr);break;case"number":l=Object.assign(Object.assign({},i),{success:!1,valid:!0,order:0});break;default:throw new Error(`Unable to render ${i.type}`)}return i.label&&(l.label=i.label),l}rollDiceExpr(i){const l=this.rollType(i.head),d=[l],s=[],u=i.ops.reduce((f,p,_)=>{const y=this.rollType(p.tail);switch(y.order=_,d.push(y),s.push(p.op),p.op){case"+":return f+y.value;case"-":return f-y.value;default:return f}},l.value);return{dice:d,ops:s,success:!1,type:"diceexpressionroll",valid:!0,value:u,order:0}}rollGroup(i){let l=i.rolls.map((d,s)=>Object.assign(Object.assign({},this.rollType(d)),{order:s}));if(i.mods){const d=i.mods,s=u=>{const f=d.some(p=>["failure","success"].includes(p.type));return u=d.reduce((p,_)=>this.applyGroupMod(p,_),u),f&&(u=u.map(p=>(p.success||(p.value=0,p.success=!0),p))),u};if(l.length===1&&["die","diceexpressionroll"].includes(l[0].type)){const u=l[0];let f=u.type==="die"?u.rolls:u.dice.filter(p=>p.type!=="number").reduce((p,_)=>[...p,..._.type==="die"?_.rolls:_.dice],[]);f=s(f),u.value=f.reduce((p,_)=>_.valid?p+_.value:p,0)}else l=s(l)}return{dice:l,success:!1,type:"grouproll",valid:!0,value:l.reduce((d,s)=>s.valid?d+s.value:d,0),order:0}}rollDie(i){const l=this.rollType(i.count);if(l.value>this.maxRollCount)throw new Error("Entered number of dice too large.");let d,s;i.die.type==="fate"?(s={type:"fate",success:!1,valid:!1,value:0,order:0},d=Array.from({length:l.value},(p,_)=>this.generateFateRoll(_))):(s=this.rollType(i.die),d=Array.from({length:l.value},(p,_)=>this.generateDiceRoll(s.value,_))),i.mods&&(d=i.mods.reduce((p,_)=>this.applyMod(p,_),d)),i.targets&&(d=i.targets.reduce((p,_)=>this.applyMod(p,_),d).map(p=>(p.success||(p.value=0,p.success=!0),p)));let u=!1,f=0;if(i.match){const p=i.match,_=d.reduce((A,C)=>A.set(C.roll,(A.get(C.roll)||0)+1),new Map),y=new Set(Array.from(_.entries()).filter(([A,C])=>C>=p.min.value).filter(([A])=>!(p.mod&&p.expr)||this.successTest(p.mod,this.rollType(p.expr).value,A)).map(([A])=>A));d.filter(A=>y.has(A.roll)).forEach(A=>A.matched=!0),p.count&&(u=!0,f=y.size)}return i.sort&&(d=this.applySort(d,i.sort)),{count:l,die:s,rolls:d,success:!1,type:"die",valid:!0,value:u?f:d.reduce((p,_)=>_.valid?p+_.value:p,0),order:0,matched:u}}rollExpression(i){const l=this.rollType(i.head),d=[l],s=[],u=i.ops.reduce((f,p)=>{const _=this.rollType(p.tail);switch(d.push(_),s.push(p.op),p.op){case"+":return f+_.value;case"-":return f-_.value;case"*":return f*_.value;case"/":return f/_.value;case"%":return f%_.value;case"**":return f**_.value;default:return f}},l.value);return{dice:d,ops:s,success:!1,type:"expressionroll",valid:!0,value:u,order:0}}rollFunction(i){const l=this.rollType(i.expr);let d;switch(i.op){case"floor":d=Math.floor(l.value);break;case"ceil":d=Math.ceil(l.value);break;case"round":d=Math.round(l.value);break;case"abs":d=Math.abs(l.value);break;default:d=l.value}return{expr:l,op:i.op,success:!1,type:"mathfunction",valid:!0,value:d,order:0}}applyGroupMod(i,l){return this.getGroupModMethod(l)(i)}getGroupModMethod(i){const l=d=>d.value;switch(i.type){case"success":return this.getSuccessMethod(i,l);case"failure":return this.getFailureMethod(i,l);case"keep":return this.getKeepMethod(i,l);case"drop":return this.getDropMethod(i,l);default:throw new Error(`Mod ${i.type} is not recognised`)}}applyMod(i,l){return this.getModMethod(l)(i)}getModMethod(i){const l=d=>d.roll;switch(i.type){case"success":return this.getSuccessMethod(i,l);case"failure":return this.getFailureMethod(i,l);case"crit":return this.getCritSuccessMethod(i,l);case"critfail":return this.getCritFailureMethod(i,l);case"keep":return d=>this.getKeepMethod(i,l)(d).sort((s,u)=>s.order-u.order);case"drop":return d=>this.getDropMethod(i,l)(d).sort((s,u)=>s.order-u.order);case"explode":return this.getExplodeMethod(i);case"compound":return this.getCompoundMethod(i);case"penetrate":return this.getPenetrateMethod(i);case"reroll":return this.getReRollMethod(i);case"rerollOnce":return this.getReRollOnceMethod(i);default:throw new Error(`Mod ${i.type} is not recognised`)}}applySort(i,l){return i.sort((d,s)=>l.asc?d.roll-s.roll:s.roll-d.roll),i.forEach((d,s)=>d.order=s),i}getCritSuccessMethod(i,l){const d=this.rollType(i.expr);return s=>s.map(u=>{if(!u.valid||u.type!=="roll"||u.success)return u;const f=u;return this.successTest(i.mod,d.value,l(u))?f.critical="success":f.critical==="success"&&(f.critical=null),u})}getCritFailureMethod(i,l){const d=this.rollType(i.expr);return s=>s.map(u=>{if(!u.valid||u.type!=="roll"||u.success)return u;const f=u;return this.successTest(i.mod,d.value,l(u))?f.critical="failure":f.critical==="failure"&&(f.critical=null),u})}getSuccessMethod(i,l){const d=this.rollType(i.expr);return s=>s.map(u=>(u.valid&&this.successTest(i.mod,d.value,l(u))&&(u.success?u.value+=1:(u.value=1,u.success=!0)),u))}getFailureMethod(i,l){const d=this.rollType(i.expr);return s=>s.map(u=>(u.valid&&this.successTest(i.mod,d.value,l(u))&&(u.success?u.value-=1:(u.value=-1,u.success=!0)),u))}getKeepMethod(i,l){const d=this.rollType(i.expr);return s=>{if(s.length===0)return s;s=s.sort((y,A)=>i.highlow==="l"?l(A)-l(y):l(y)-l(A)).sort((y,A)=>(y.valid?1:0)-(A.valid?1:0));const u=Math.max(Math.min(d.value,s.length),0);let f=0,p=0;const _=s.reduce((y,A)=>(A.valid?1:0)+y,0)-u;for(;p<s.length&&f<_;)s[p].valid&&(s[p].valid=!1,f++),p++;return s}}getDropMethod(i,l){const d=this.rollType(i.expr);return s=>{s=s.sort((_,y)=>i.highlow==="h"?l(y)-l(_):l(_)-l(y));const u=Math.max(Math.min(d.value,s.length),0);let f=0,p=0;for(;p<s.length&&f<u;)s[p].valid&&(s[p].valid=!1,f++),p++;return s}}getExplodeMethod(i){const l=i.target?this.rollType(i.target.value):null;return d=>{const s=l?u=>this.successTest(i.target.mod,l.value,u.roll):u=>this.successTest("=",u.type==="fateroll"?1:u.die,u.roll);if(d[0].type==="roll"&&s({roll:1})&&s({roll:d[0].die}))throw new Error("Invalid reroll target");for(let u=0;u<d.length;u++){let f=d[u];f.order=u;let p=0;for(;s(f)&&p++<1e3;){const _=this.reRoll(f,++u);d.splice(u,0,_),f=_}}return d}}getCompoundMethod(i){const l=i.target?this.rollType(i.target.value):null;return d=>{const s=l?u=>this.successTest(i.target.mod,l.value,u.roll):u=>this.successTest("=",u.type==="fateroll"?1:u.die,u.roll);if(d[0].type==="roll"&&s({roll:1})&&s({roll:d[0].die}))throw new Error("Invalid reroll target");for(let u=0;u<d.length;u++){let f=d[u],p=f.roll,_=0;for(;s(f)&&_++<1e3;){const y=this.reRoll(d[u],++u);p+=y.roll,f=y}f.value=p,f.roll=p}return d}}getPenetrateMethod(i){const l=i.target?this.rollType(i.target.value):null;return d=>{const s=l?u=>this.successTest(i.target.mod,l.value,u.roll):u=>this.successTest("=",u.type==="fateroll"?1:u.die,u.roll);if(l&&d[0].type==="roll"&&s(d[0])&&this.successTest(i.target.mod,l.value,1))throw new Error("Invalid reroll target");for(let u=0;u<d.length;u++){let f=d[u];f.order=u;let p=0;for(;s(f)&&p++<1e3;){const _=this.reRoll(f,++u);_.value-=1,_.roll-=1,d.splice(u,0,_),f=_}}return d}}getReRollMethod(i){const l=i.target?this.successTest.bind(null,i.target.mod,this.rollType(i.target.value).value):this.successTest.bind(null,"=",1);return d=>{if(d[0].type==="roll"&&l(1)&&l(d[0].die))throw new Error("Invalid reroll target");for(let s=0;s<d.length;s++)for(;l(d[s].roll);){d[s].valid=!1;const u=this.reRoll(d[s],s+1);d.splice(++s,0,u)}return d}}getReRollOnceMethod(i){const l=i.target?this.successTest.bind(null,i.target.mod,this.rollType(i.target.value).value):this.successTest.bind(null,"=",1);return d=>{if(d[0].type==="roll"&&l(1)&&l(d[0].die))throw new Error("Invalid reroll target");for(let s=0;s<d.length;s++)if(l(d[s].roll)){d[s].valid=!1;const u=this.reRoll(d[s],s+1);d.splice(++s,0,u)}return d}}successTest(i,l,d){switch(i){case">":return d>=l;case"<":return d<=l;case"=":default:return d==l}}reRoll(i,l){switch(i.type){case"roll":return this.generateDiceRoll(i.die,l);case"fateroll":return this.generateFateRoll(l);default:throw new Error(`Cannot do a reroll of a ${i.type}.`)}}generateDiceRoll(i,l){const d=Math.floor(this.randFunction()*i)+1;return{critical:d===i?"success":d===1?"failure":null,die:i,matched:!1,order:l,roll:d,success:!1,type:"roll",valid:!0,value:d}}generateFateRoll(i){const l=Math.floor(3*this.randFunction())-1;return{matched:!1,order:i,roll:l,success:!1,type:"fateroll",valid:!0,value:l}}}},function(n,r,c){function o(i,l,d,s){this.message=i,this.expected=l,this.found=d,this.location=s,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,o)}(function(i,l){function d(){this.constructor=i}d.prototype=l.prototype,i.prototype=new d})(o,Error),o.buildMessage=function(i,l){var d={literal:function(p){return'"'+u(p.text)+'"'},class:function(p){var _,y="";for(_=0;_<p.parts.length;_++)y+=p.parts[_]instanceof Array?f(p.parts[_][0])+"-"+f(p.parts[_][1]):f(p.parts[_]);return"["+(p.inverted?"^":"")+y+"]"},any:function(p){return"any character"},end:function(p){return"end of input"},other:function(p){return p.description}};function s(p){return p.charCodeAt(0).toString(16).toUpperCase()}function u(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(_){return"\\x0"+s(_)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(_){return"\\x"+s(_)})}function f(p){return p.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(_){return"\\x0"+s(_)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(_){return"\\x"+s(_)})}return"Expected "+function(p){var _,y,A,C=new Array(p.length);for(_=0;_<p.length;_++)C[_]=(A=p[_],d[A.type](A));if(C.sort(),C.length>0){for(_=1,y=1;_<C.length;_++)C[_-1]!==C[_]&&(C[y]=C[_],y++);C.length=y}switch(C.length){case 1:return C[0];case 2:return C[0]+" or "+C[1];default:return C.slice(0,-1).join(", ")+", or "+C[C.length-1]}}(i)+" but "+function(p){return p?'"'+u(p)+'"':"end of input"}(l)+" found."},n.exports={SyntaxError:o,parse:function(i,l){l=l!==void 0?l:{};var d,s={},u={start:Hr},f=Hr,p={type:"any"},_=q("[[",!1),y=q("]]",!1),A=function(m,v){return v&&(m.label=v),m},C=q(">",!1),$=q("<",!1),M=q("=",!1),B=q("f",!1),I=q("cs",!1),W=q("cf",!1),Y=q("m",!1),Q=q("t",!1),X=q("k",!1),R=q("l",!1),F=q("h",!1),U=q("d",!1),Z=q("{",!1),le=q(",",!1),Ne=q("}",!1),de=q("+",!1),ie=q("sa",!1),ae=q("sd",!1),N=q("!",!1),k=q("!!",!1),K=q("!p",!1),Ce=q("r",!1),xe=q("ro",!1),Pe=q("F",!1),Ae=q("%",!1),ve=q("(",!1),ke=q(")",!1),Te=q("-",!1),be=function(m,v){return v.length==0?m:{head:m,type:"expression",ops:v.map(g=>({type:"math",op:g[1],tail:g[3]}))}},pe=q("*",!1),tt=q("/",!1),Oe=q("**",!1),nt=q("floor",!1),ot=q("ceil",!1),E=q("round",!1),j=q("abs",!1),O=Ir("integer"),ee=/^[0-9]/,ue=Es([["0","9"]],!1,!1),st=function(){return{type:"number",value:parseInt(i.substring(V,h),10)}},$e=q("[",!1),L=/^[^\]]/,he=Es(["]"],!0,!1),ye=q("]",!1),ze=Ir("whitespace"),lt=/^[ \t\n\r]/,Nt=Es([" ","	",`
`,"\r"],!1,!1),h=0,V=0,Ut=[{line:1,column:1}],ct=0,ys=[],S=0;if("startRule"in l){if(!(l.startRule in u))throw new Error(`Can't start parsing from rule "`+l.startRule+'".');f=u[l.startRule]}function q(m,v){return{type:"literal",text:m,ignoreCase:v}}function Es(m,v,g){return{type:"class",parts:m,inverted:v,ignoreCase:g}}function Ir(m){return{type:"other",description:m}}function Pr(m){var v,g=Ut[m];if(g)return g;for(v=m-1;!Ut[v];)v--;for(g={line:(g=Ut[v]).line,column:g.column};v<m;)i.charCodeAt(v)===10?(g.line++,g.column=1):g.column++,v++;return Ut[m]=g,g}function Rr(m,v){var g=Pr(m),b=Pr(v);return{start:{offset:m,line:g.line,column:g.column},end:{offset:v,line:b.line,column:b.column}}}function x(m){h<ct||(h>ct&&(ct=h,ys=[]),ys.push(m))}function _o(m,v,g){return new o(o.buildMessage(m,v),m,v,g)}function Hr(){var m,v,g,b,P,w;if(m=h,(v=Ts())!==s){for(g=[],i.length>h?(b=i.charAt(h),h++):(b=s,S===0&&x(p));b!==s;)g.push(b),i.length>h?(b=i.charAt(h),h++):(b=s,S===0&&x(p));g!==s?(V=m,w=g,(P=v).root=!0,w&&(P.label=w.join("")),m=v=P):(h=m,m=s)}else h=m,m=s;return m}function go(){var m,v,g;return m=h,(v=function(){var b,P,w,D,z;if(b=h,(P=function(){var ne,Ve,_t,Me,fe,We,He,Ge,Ee;if(ne=h,i.charCodeAt(h)===123?(Ve="{",h++):(Ve=s,S===0&&x(Z)),Ve!==s)if(se()!==s)if((_t=Ns())!==s){for(Me=[],fe=h,(We=se())!==s?(i.charCodeAt(h)===44?(He=",",h++):(He=s,S===0&&x(le)),He!==s&&(Ge=se())!==s&&(Ee=Ns())!==s?fe=We=[We,He,Ge,Ee]:(h=fe,fe=s)):(h=fe,fe=s);fe!==s;)Me.push(fe),fe=h,(We=se())!==s?(i.charCodeAt(h)===44?(He=",",h++):(He=s,S===0&&x(le)),He!==s&&(Ge=se())!==s&&(Ee=Ns())!==s?fe=We=[We,He,Ge,Ee]:(h=fe,fe=s)):(h=fe,fe=s);Me!==s&&(fe=se())!==s?(i.charCodeAt(h)===125?(We="}",h++):(We=s,S===0&&x(Ne)),We!==s?(V=ne,Ve={rolls:[_t,...Me.map(yo=>yo[3])],type:"group"},ne=Ve):(h=ne,ne=s)):(h=ne,ne=s)}else h=ne,ne=s;else h=ne,ne=s;else h=ne,ne=s;return ne}())!==s){for(w=[],(D=Rn())===s&&(D=Hn())===s&&(D=In())===s&&(D=Pn());D!==s;)w.push(D),(D=Rn())===s&&(D=Hn())===s&&(D=In())===s&&(D=Pn());w!==s&&(D=se())!==s?((z=Fn())===s&&(z=null),z!==s?(V=b,J=P,Re=z,(oe=w).length>0&&(J.mods=(J.mods||[]).concat(oe)),Re&&(J.label=Re),b=P=J):(h=b,b=s)):(h=b,b=s)}else h=b,b=s;var J,oe,Re;return b}())===s&&(v=Wr())===s&&(v=Os()),v!==s&&se()!==s?((g=Fn())===s&&(g=null),g!==s?(V=m,m=v=A(v,g)):(h=m,m=s)):(h=m,m=s),m}function In(){var m,v,g;return m=h,i.charCodeAt(h)===62?(v=">",h++):(v=s,S===0&&x(C)),v===s&&(i.charCodeAt(h)===60?(v="<",h++):(v=s,S===0&&x($)),v===s&&(i.charCodeAt(h)===61?(v="=",h++):(v=s,S===0&&x(M)))),v!==s&&(g=dt())!==s?(V=m,m=v={type:"success",mod:v,expr:g}):(h=m,m=s),m}function Pn(){var m,v,g,b;return m=h,i.charCodeAt(h)===102?(v="f",h++):(v=s,S===0&&x(B)),v!==s?(i.charCodeAt(h)===62?(g=">",h++):(g=s,S===0&&x(C)),g===s&&(i.charCodeAt(h)===60?(g="<",h++):(g=s,S===0&&x($)),g===s&&(i.charCodeAt(h)===61?(g="=",h++):(g=s,S===0&&x(M)))),g===s&&(g=null),g!==s&&(b=dt())!==s?(V=m,m=v={type:"failure",mod:g,expr:b}):(h=m,m=s)):(h=m,m=s),m}function Fr(){var m,v,g,b;return m=h,i.substr(h,2)==="cs"?(v="cs",h+=2):(v=s,S===0&&x(I)),v!==s?(i.charCodeAt(h)===62?(g=">",h++):(g=s,S===0&&x(C)),g===s&&(i.charCodeAt(h)===60?(g="<",h++):(g=s,S===0&&x($)),g===s&&(i.charCodeAt(h)===61?(g="=",h++):(g=s,S===0&&x(M)))),g===s&&(g=null),g!==s&&(b=dt())!==s?(V=m,m=v={type:"crit",mod:g,expr:b}):(h=m,m=s)):(h=m,m=s),m}function Vr(){var m,v,g,b;return m=h,i.substr(h,2)==="cf"?(v="cf",h+=2):(v=s,S===0&&x(W)),v!==s?(i.charCodeAt(h)===62?(g=">",h++):(g=s,S===0&&x(C)),g===s&&(i.charCodeAt(h)===60?(g="<",h++):(g=s,S===0&&x($)),g===s&&(i.charCodeAt(h)===61?(g="=",h++):(g=s,S===0&&x(M)))),g===s&&(g=null),g!==s&&(b=dt())!==s?(V=m,m=v={type:"critfail",mod:g,expr:b}):(h=m,m=s)):(h=m,m=s),m}function vo(){var m,v,g,b,P;return m=h,i.charCodeAt(h)===109?(v="m",h++):(v=s,S===0&&x(Y)),v!==s?(i.charCodeAt(h)===116?(g="t",h++):(g=s,S===0&&x(Q)),g===s&&(g=null),g!==s?((b=Os())===s&&(b=null),b!==s?((P=function(){var w,D,z;return w=h,i.charCodeAt(h)===62?(D=">",h++):(D=s,S===0&&x(C)),D===s&&(i.charCodeAt(h)===60?(D="<",h++):(D=s,S===0&&x($)),D===s&&(i.charCodeAt(h)===61?(D="=",h++):(D=s,S===0&&x(M)))),D!==s&&(z=dt())!==s?(V=w,w=D={mod:D,expr:z}):(h=w,w=s),w}())===s&&(P=null),P!==s?(V=m,m=v=function(w,D,z){const J={type:"match",min:D||{type:"number",value:2},count:!!w};return z&&(J.mod=z.mod,J.expr=z.expr),J}(g,b,P)):(h=m,m=s)):(h=m,m=s)):(h=m,m=s)):(h=m,m=s),m}function Rn(){var m,v,g,b;return m=h,i.charCodeAt(h)===107?(v="k",h++):(v=s,S===0&&x(X)),v!==s?(i.charCodeAt(h)===108?(g="l",h++):(g=s,S===0&&x(R)),g===s&&(i.charCodeAt(h)===104?(g="h",h++):(g=s,S===0&&x(F))),g===s&&(g=null),g!==s?((b=dt())===s&&(b=null),b!==s?(V=m,m=v={type:"keep",highlow:g,expr:b||zr}):(h=m,m=s)):(h=m,m=s)):(h=m,m=s),m}function Hn(){var m,v,g,b;return m=h,i.charCodeAt(h)===100?(v="d",h++):(v=s,S===0&&x(U)),v!==s?(i.charCodeAt(h)===108?(g="l",h++):(g=s,S===0&&x(R)),g===s&&(i.charCodeAt(h)===104?(g="h",h++):(g=s,S===0&&x(F))),g===s&&(g=null),g!==s?((b=dt())===s&&(b=null),b!==s?(V=m,m=v={type:"drop",highlow:g,expr:b||zr}):(h=m,m=s)):(h=m,m=s)):(h=m,m=s),m}function Ns(){var m,v,g,b,P,w,D,z;if(m=h,(v=As())!==s){for(g=[],b=h,(P=se())!==s?(i.charCodeAt(h)===43?(w="+",h++):(w=s,S===0&&x(de)),w!==s&&(D=se())!==s&&(z=As())!==s?b=P=[P,w,D,z]:(h=b,b=s)):(h=b,b=s);b!==s;)g.push(b),b=h,(P=se())!==s?(i.charCodeAt(h)===43?(w="+",h++):(w=s,S===0&&x(de)),w!==s&&(D=se())!==s&&(z=As())!==s?b=P=[P,w,D,z]:(h=b,b=s)):(h=b,b=s);g!==s?(V=m,m=v=function(J,oe){return oe.length==0?J:{head:J,type:"diceExpression",ops:oe.map(Re=>({type:"math",op:Re[1],tail:Re[3]}))}}(v,g)):(h=m,m=s)}else h=m,m=s;return m}function As(){var m;return(m=Wr())===s&&(m=Ts()),m}function Wr(){var m,v,g;return m=h,(v=function(){var b,P,w,D,z;if(b=h,(P=function(){var J,oe,Re,ne;if(J=h,(oe=function(){var Me,fe,We,He;return Me=h,(fe=dt())===s&&(fe=null),fe!==s?(i.charCodeAt(h)===100?(We="d",h++):(We=s,S===0&&x(U)),We!==s?((He=function(){var Ge,Ee;return Ge=h,i.charCodeAt(h)===70?(Ee="F",h++):(Ee=s,S===0&&x(Pe)),Ee===s&&(i.charCodeAt(h)===102?(Ee="f",h++):(Ee=s,S===0&&x(B))),Ee!==s&&(V=Ge,Ee={type:"fate"}),Ge=Ee}())===s&&(He=function(){var Ge,Ee;return Ge=h,i.charCodeAt(h)===37?(Ee="%",h++):(Ee=s,S===0&&x(Ae)),Ee!==s&&(V=Ge,Ee={type:"number",value:"100"}),Ge=Ee}())===s&&(He=dt()),He!==s?(V=Me,fe={die:He,count:fe||{type:"number",value:1},type:"die"},Me=fe):(h=Me,Me=s)):(h=Me,Me=s)):(h=Me,Me=s),Me}())!==s){for(Re=[],(ne=Br())===s&&(ne=Ur())===s&&(ne=jr())===s&&(ne=Kr())===s&&(ne=Yr());ne!==s;)Re.push(ne),(ne=Br())===s&&(ne=Ur())===s&&(ne=jr())===s&&(ne=Kr())===s&&(ne=Yr());Re!==s?(V=J,_t=Re,(Ve=oe).mods=(Ve.mods||[]).concat(_t),J=oe=Ve):(h=J,J=s)}else h=J,J=s;var Ve,_t;return J}())!==s){for(w=[],(D=Hn())===s&&(D=Rn())===s&&(D=In())===s&&(D=Pn())===s&&(D=Vr())===s&&(D=Fr());D!==s;)w.push(D),(D=Hn())===s&&(D=Rn())===s&&(D=In())===s&&(D=Pn())===s&&(D=Vr())===s&&(D=Fr());w!==s?((D=vo())===s&&(D=null),D!==s?((z=function(){var J,oe;return J=h,i.substr(h,2)==="sa"?(oe="sa",h+=2):(oe=s,S===0&&x(ie)),oe!==s&&(V=J,oe={type:"sort",asc:!0}),J=oe}())===s&&(z=function(){var J,oe;return J=h,i.substr(h,2)==="sd"?(oe="sd",h+=2):(oe=s,S===0&&x(ae)),oe!==s&&(V=J,oe={type:"sort",asc:!1}),J=oe}()),z===s&&(z=null),z!==s?(V=b,P=function(J,oe,Re,ne){const Ve=oe.filter(_t=>["success","failure"].includes(_t.type));return oe=oe.filter(_t=>!Ve.includes(_t)),J.mods=(J.mods||[]).concat(oe),Ve.length>0&&(J.targets=Ve),Re&&(J.match=Re),ne&&(J.sort=ne),J}(P,w,D,z),b=P):(h=b,b=s)):(h=b,b=s)):(h=b,b=s)}else h=b,b=s;return b}())!==s&&se()!==s?((g=Fn())===s&&(g=null),g!==s?(V=m,m=v=A(v,g)):(h=m,m=s)):(h=m,m=s),m}function jr(){var m,v,g;return m=h,i.charCodeAt(h)===33?(v="!",h++):(v=s,S===0&&x(N)),v!==s?((g=hn())===s&&(g=null),g!==s?(V=m,m=v={type:"explode",target:g}):(h=m,m=s)):(h=m,m=s),m}function Br(){var m,v,g;return m=h,i.substr(h,2)==="!!"?(v="!!",h+=2):(v=s,S===0&&x(k)),v!==s?((g=hn())===s&&(g=null),g!==s?(V=m,m=v={type:"compound",target:g}):(h=m,m=s)):(h=m,m=s),m}function Ur(){var m,v,g;return m=h,i.substr(h,2)==="!p"?(v="!p",h+=2):(v=s,S===0&&x(K)),v!==s?((g=hn())===s&&(g=null),g!==s?(V=m,m=v={type:"penetrate",target:g}):(h=m,m=s)):(h=m,m=s),m}function Yr(){var m,v,g;return m=h,i.charCodeAt(h)===114?(v="r",h++):(v=s,S===0&&x(Ce)),v!==s?((g=hn())===s&&(g=null),g!==s?(V=m,m=v={type:"reroll",target:g||qr}):(h=m,m=s)):(h=m,m=s),m}function Kr(){var m,v,g;return m=h,i.substr(h,2)==="ro"?(v="ro",h+=2):(v=s,S===0&&x(xe)),v!==s?((g=hn())===s&&(g=null),g!==s?(V=m,m=v={type:"rerollOnce",target:g||qr}):(h=m,m=s)):(h=m,m=s),m}function hn(){var m,v,g;return m=h,i.charCodeAt(h)===62?(v=">",h++):(v=s,S===0&&x(C)),v===s&&(i.charCodeAt(h)===60?(v="<",h++):(v=s,S===0&&x($)),v===s&&(i.charCodeAt(h)===61?(v="=",h++):(v=s,S===0&&x(M)))),v===s&&(v=null),v!==s&&(g=dt())!==s?(V=m,m=v={type:"target",mod:v,value:g}):(h=m,m=s),m}function dt(){var m;return(m=Cs())===s&&(m=Os()),m}function Ts(){var m;return(m=function(){var v,g,b,P;return v=h,i.substr(h,2)==="[["?(g="[[",h+=2):(g=s,S===0&&x(_)),g!==s&&(b=Ts())!==s?(i.substr(h,2)==="]]"?(P="]]",h+=2):(P=s,S===0&&x(y)),P!==s?(V=v,v=g={type:"inline",expr:b}):(h=v,v=s)):(h=v,v=s),v}())===s&&(m=ws())===s&&(m=Cs()),m}function Cs(){var m,v,g,b,P,w,D;return m=h,i.charCodeAt(h)===40?(v="(",h++):(v=s,S===0&&x(ve)),v!==s&&(g=ws())!==s?(i.charCodeAt(h)===41?(b=")",h++):(b=s,S===0&&x(ke)),b!==s&&se()!==s?((P=Fn())===s&&(P=null),P!==s?(V=m,w=g,(D=P)&&(w.label=D),m=v=w):(h=m,m=s)):(h=m,m=s)):(h=m,m=s),m}function ws(){var m,v,g,b,P,w,D,z;if(m=h,(v=Ss())!==s){for(g=[],b=h,(P=se())!==s?(i.charCodeAt(h)===43?(w="+",h++):(w=s,S===0&&x(de)),w===s&&(i.charCodeAt(h)===45?(w="-",h++):(w=s,S===0&&x(Te))),w!==s&&(D=se())!==s&&(z=Ss())!==s?b=P=[P,w,D,z]:(h=b,b=s)):(h=b,b=s);b!==s;)g.push(b),b=h,(P=se())!==s?(i.charCodeAt(h)===43?(w="+",h++):(w=s,S===0&&x(de)),w===s&&(i.charCodeAt(h)===45?(w="-",h++):(w=s,S===0&&x(Te))),w!==s&&(D=se())!==s&&(z=Ss())!==s?b=P=[P,w,D,z]:(h=b,b=s)):(h=b,b=s);g!==s?(V=m,m=v=be(v,g)):(h=m,m=s)}else h=m,m=s;return m}function Ss(){var m,v,g,b,P,w,D,z;if(m=h,(v=xs())!==s){for(g=[],b=h,(P=se())!==s?(i.charCodeAt(h)===42?(w="*",h++):(w=s,S===0&&x(pe)),w===s&&(i.charCodeAt(h)===47?(w="/",h++):(w=s,S===0&&x(tt))),w!==s&&(D=se())!==s&&(z=xs())!==s?b=P=[P,w,D,z]:(h=b,b=s)):(h=b,b=s);b!==s;)g.push(b),b=h,(P=se())!==s?(i.charCodeAt(h)===42?(w="*",h++):(w=s,S===0&&x(pe)),w===s&&(i.charCodeAt(h)===47?(w="/",h++):(w=s,S===0&&x(tt))),w!==s&&(D=se())!==s&&(z=xs())!==s?b=P=[P,w,D,z]:(h=b,b=s)):(h=b,b=s);g!==s?(V=m,m=v=be(v,g)):(h=m,m=s)}else h=m,m=s;return m}function xs(){var m,v,g,b,P,w,D,z;if(m=h,(v=ks())!==s){for(g=[],b=h,(P=se())!==s?(i.substr(h,2)==="**"?(w="**",h+=2):(w=s,S===0&&x(Oe)),w===s&&(i.charCodeAt(h)===37?(w="%",h++):(w=s,S===0&&x(Ae))),w!==s&&(D=se())!==s&&(z=ks())!==s?b=P=[P,w,D,z]:(h=b,b=s)):(h=b,b=s);b!==s;)g.push(b),b=h,(P=se())!==s?(i.substr(h,2)==="**"?(w="**",h+=2):(w=s,S===0&&x(Oe)),w===s&&(i.charCodeAt(h)===37?(w="%",h++):(w=s,S===0&&x(Ae))),w!==s&&(D=se())!==s&&(z=ks())!==s?b=P=[P,w,D,z]:(h=b,b=s)):(h=b,b=s);g!==s?(V=m,m=v=be(v,g)):(h=m,m=s)}else h=m,m=s;return m}function bo(){var m,v,g,b,P;return m=h,(v=function(){var w;return i.substr(h,5)==="floor"?(w="floor",h+=5):(w=s,S===0&&x(nt)),w===s&&(i.substr(h,4)==="ceil"?(w="ceil",h+=4):(w=s,S===0&&x(ot)),w===s&&(i.substr(h,5)==="round"?(w="round",h+=5):(w=s,S===0&&x(E)),w===s&&(i.substr(h,3)==="abs"?(w="abs",h+=3):(w=s,S===0&&x(j))))),w}())!==s&&se()!==s?(i.charCodeAt(h)===40?(g="(",h++):(g=s,S===0&&x(ve)),g!==s&&se()!==s&&(b=ws())!==s&&se()!==s?(i.charCodeAt(h)===41?(P=")",h++):(P=s,S===0&&x(ke)),P!==s?(V=m,m=v={type:"mathfunction",op:v,expr:b}):(h=m,m=s)):(h=m,m=s)):(h=m,m=s),m}function ks(){var m;return(m=bo())===s&&(m=go())===s&&(m=Cs()),m}function Os(){var m,v,g,b;if(S++,m=h,i.charCodeAt(h)===45?(v="-",h++):(v=s,S===0&&x(Te)),v===s&&(v=null),v!==s){if(g=[],ee.test(i.charAt(h))?(b=i.charAt(h),h++):(b=s,S===0&&x(ue)),b!==s)for(;b!==s;)g.push(b),ee.test(i.charAt(h))?(b=i.charAt(h),h++):(b=s,S===0&&x(ue));else g=s;g!==s?(V=m,m=v=st()):(h=m,m=s)}else h=m,m=s;return S--,m===s&&(v=s,S===0&&x(O)),m}function Fn(){var m,v,g,b;if(m=h,i.charCodeAt(h)===91?(v="[",h++):(v=s,S===0&&x($e)),v!==s){if(g=[],L.test(i.charAt(h))?(b=i.charAt(h),h++):(b=s,S===0&&x(he)),b!==s)for(;b!==s;)g.push(b),L.test(i.charAt(h))?(b=i.charAt(h),h++):(b=s,S===0&&x(he));else g=s;g!==s?(i.charCodeAt(h)===93?(b="]",h++):(b=s,S===0&&x(ye)),b!==s?(V=m,m=v=g.join("")):(h=m,m=s)):(h=m,m=s)}else h=m,m=s;return m}function se(){var m,v;for(S++,m=[],lt.test(i.charAt(h))?(v=i.charAt(h),h++):(v=s,S===0&&x(Nt));v!==s;)m.push(v),lt.test(i.charAt(h))?(v=i.charAt(h),h++):(v=s,S===0&&x(Nt));return S--,m===s&&(v=s,S===0&&x(ze)),m}const qr={type:"target",mod:"=",value:{type:"number",value:1}},zr={type:"number",value:1};if((d=f())!==s&&h===i.length)return d;throw d!==s&&h<i.length&&x({type:"end"}),_o(ys,ct<i.length?i.charAt(ct):null,ct<i.length?Rr(ct,ct+1):Rr(ct,ct))}}},function(n,r,c){Object.defineProperty(r,"__esModule",{value:!0}),r.DiscordRollRenderer=class{render(o){return this.doRender(o,!0)}doRender(o,i=!1){let l="";switch(o.type){case"diceexpressionroll":l=this.renderGroupExpr(o);break;case"grouproll":l=this.renderGroup(o);break;case"die":l=this.renderDie(o);break;case"expressionroll":l=this.renderExpression(o);break;case"mathfunction":l=this.renderFunction(o);break;case"roll":return this.renderRoll(o);case"fateroll":return this.renderFateRoll(o);case"number":const d=o.label?` (${o.label})`:"";return`${o.value}${d}`;case"fate":return"F";default:throw new Error("Unable to render")}return o.valid||(l="~~"+l.replace(/~~/g,"")+"~~"),i?this.stripBrackets(l):o.label?`(${o.label}: ${l})`:l}renderGroup(o){const i=[];for(const l of o.dice)i.push(this.doRender(l));return i.length>1?`{ ${i.join(" + ")} } = ${o.value}`:`{ ${this.stripBrackets(i[0])} } = ${o.value}`}renderGroupExpr(o){const i=[];for(const l of o.dice)i.push(this.doRender(l));return i.length>1?`(${i.join(" + ")} = ${o.value})`:i[0]}renderDie(o){const i=[];for(const s of o.rolls)i.push(this.doRender(s));let l=`${i.join(", ")}`;["number","fate"].includes(o.die.type)&&o.count.type==="number"||(l+=`[*Rolling: ${this.doRender(o.count)}d${this.doRender(o.die)}*]`);const d=o.matched?` Match${o.value===1?"":"es"}`:"";return l+=` = ${o.value}${d}`,`(${l})`}renderExpression(o){if(o.dice.length>1){const i=[];for(let l=0;l<o.dice.length-1;l++)i.push(this.doRender(o.dice[l])),i.push(o.ops[l]);return i.push(this.doRender(o.dice.slice(-1)[0])),i.push("="),i.push(o.value+""),`(${i.join(" ")})`}return o.dice[0].type==="number"?o.value+"":this.doRender(o.dice[0])}renderFunction(o){const i=this.doRender(o.expr);return`(${o.op}${this.addBrackets(i)} = ${o.value})`}addBrackets(o){return o.startsWith("(")||(o=`(${o}`),o.endsWith(")")||(o=`${o})`),o}stripBrackets(o){return o.startsWith("(")&&(o=o.substring(1)),o.endsWith(")")&&(o=o.substring(0,o.length-1)),o}renderRoll(o){let i=`${o.roll}`;return o.valid?o.success&&o.value===1?i=`**${o.roll}**`:o.success&&o.value===-1?i=`*${o.roll}*`:o.success||o.critical!=="success"?o.success||o.critical!=="failure"||(i=`*${o.roll}*`):i=`**${o.roll}**`:i=`~~${o.roll}~~`,o.matched&&(i=`__${i}__`),i}renderFateRoll(o){const i=o.roll===0?"0":o.roll>0?"+":"-";let l=`${o.roll}`;return o.valid?o.success&&o.value===1?l=`**${i}**`:o.success&&o.value===-1&&(l=`*${i}*`):l=`~~${i}~~`,o.matched&&(l=`__${l}__`),l}}}])})}(es)),es.exports}var zo=qo();function _r(t){return String(t).charAt(0).toUpperCase()+String(t).slice(1)}const vn="/requiem-pathfinder-preact/",Tt=16,Ls=4,Go=35,hi=10,fi=15,os=(t,e)=>Math.floor(Math.floor(t*e)/5),Pt=(t,e)=>{const n=t.find(r=>r.isLinked&&r.linkedStat===e);return n?os(n.quantity,n.rank):0},Xt=(t,e,n,r=!1)=>e.replace(/\[(\w+)\]/g,(c,o)=>{const i=n[o]||0,l=Pt(t,o),d=i+l;return r?_r(d.toString()):`${d}[${o}]`}),Qo=t=>{const e=[];return t.name||e.push("Spell name is required"),t.quantity<0&&e.push("Quantity must be 0 or higher"),t.quantity>Tt&&e.push("Quantity over maximum stack limit"),t.power<=0&&e.push("Spell level must be greater than 0"),t.dice||e.push("Damage roll is required"),e},ts=(t,e)=>{if(!t)return{isValid:!1,error:"A valid dice roll is required."};try{const n=t.replace(/\[\w+\]/g,"0");new zo.DiceRoller().roll(n);const c=(t.match(/\[(\w+)\]/g)||[]).map(o=>o.slice(1,-1)).filter(o=>e[o]===void 0);return c.length>0?{isValid:!1,error:`Unknown stats: ${c.join(", ")}`}:{isValid:!0,error:null}}catch{return{isValid:!1,error:"Invalid dice format. Use format like '1d6+[spellAttackModifier]' or '2d8+3'"}}};var Le="top",Ue="bottom",Ye="right",Ie="left",hs="auto",cn=[Le,Ue,Ye,Ie],Ft="start",en="end",pa="clippingParents",gr="viewport",qt="popper",ma="reference",tr=cn.reduce(function(t,e){return t.concat([e+"-"+Ft,e+"-"+en])},[]),vr=[].concat(cn,[hs]).reduce(function(t,e){return t.concat([e,e+"-"+Ft,e+"-"+en])},[]),_a="beforeRead",ga="read",va="afterRead",ba="beforeMain",ya="main",Ea="afterMain",Na="beforeWrite",Aa="write",Ta="afterWrite",Ca=[_a,ga,va,ba,ya,Ea,Na,Aa,Ta];function pt(t){return t?(t.nodeName||"").toLowerCase():null}function Ke(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Vt(t){var e=Ke(t).Element;return t instanceof e||t instanceof Element}function Xe(t){var e=Ke(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function br(t){if(typeof ShadowRoot>"u")return!1;var e=Ke(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Xo(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},c=e.attributes[n]||{},o=e.elements[n];!Xe(o)||!pt(o)||(Object.assign(o.style,r),Object.keys(c).forEach(function(i){var l=c[i];l===!1?o.removeAttribute(i):o.setAttribute(i,l===!0?"":l)}))})}function Jo(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var c=e.elements[r],o=e.attributes[r]||{},i=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),l=i.reduce(function(d,s){return d[s]="",d},{});!Xe(c)||!pt(c)||(Object.assign(c.style,l),Object.keys(o).forEach(function(d){c.removeAttribute(d)}))})}}const yr={name:"applyStyles",enabled:!0,phase:"write",fn:Xo,effect:Jo,requires:["computeStyles"]};function ht(t){return t.split("-")[0]}var Rt=Math.max,ls=Math.min,tn=Math.round;function nr(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function wa(){return!/^((?!chrome|android).)*safari/i.test(nr())}function nn(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),c=1,o=1;e&&Xe(t)&&(c=t.offsetWidth>0&&tn(r.width)/t.offsetWidth||1,o=t.offsetHeight>0&&tn(r.height)/t.offsetHeight||1);var i=Vt(t)?Ke(t):window,l=i.visualViewport,d=!wa()&&n,s=(r.left+(d&&l?l.offsetLeft:0))/c,u=(r.top+(d&&l?l.offsetTop:0))/o,f=r.width/c,p=r.height/o;return{width:f,height:p,top:u,right:s+f,bottom:u+p,left:s,x:s,y:u}}function Er(t){var e=nn(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function Sa(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&br(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function bt(t){return Ke(t).getComputedStyle(t)}function Zo(t){return["table","td","th"].indexOf(pt(t))>=0}function xt(t){return((Vt(t)?t.ownerDocument:t.document)||window.document).documentElement}function fs(t){return pt(t)==="html"?t:t.assignedSlot||t.parentNode||(br(t)?t.host:null)||xt(t)}function pi(t){return!Xe(t)||bt(t).position==="fixed"?null:t.offsetParent}function el(t){var e=/firefox/i.test(nr()),n=/Trident/i.test(nr());if(n&&Xe(t)){var r=bt(t);if(r.position==="fixed")return null}var c=fs(t);for(br(c)&&(c=c.host);Xe(c)&&["html","body"].indexOf(pt(c))<0;){var o=bt(c);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return c;c=c.parentNode}return null}function kn(t){for(var e=Ke(t),n=pi(t);n&&Zo(n)&&bt(n).position==="static";)n=pi(n);return n&&(pt(n)==="html"||pt(n)==="body"&&bt(n).position==="static")?e:n||el(t)||e}function Nr(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function bn(t,e,n){return Rt(t,ls(e,n))}function tl(t,e,n){var r=bn(t,e,n);return r>n?n:r}function xa(){return{top:0,right:0,bottom:0,left:0}}function ka(t){return Object.assign({},xa(),t)}function Oa(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var nl=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,ka(typeof e!="number"?e:Oa(e,cn))};function sl(t){var e,n=t.state,r=t.name,c=t.options,o=n.elements.arrow,i=n.modifiersData.popperOffsets,l=ht(n.placement),d=Nr(l),s=[Ie,Ye].indexOf(l)>=0,u=s?"height":"width";if(!(!o||!i)){var f=nl(c.padding,n),p=Er(o),_=d==="y"?Le:Ie,y=d==="y"?Ue:Ye,A=n.rects.reference[u]+n.rects.reference[d]-i[d]-n.rects.popper[u],C=i[d]-n.rects.reference[d],$=kn(o),M=$?d==="y"?$.clientHeight||0:$.clientWidth||0:0,B=A/2-C/2,I=f[_],W=M-p[u]-f[y],Y=M/2-p[u]/2+B,Q=bn(I,Y,W),X=d;n.modifiersData[r]=(e={},e[X]=Q,e.centerOffset=Q-Y,e)}}function rl(t){var e=t.state,n=t.options,r=n.element,c=r===void 0?"[data-popper-arrow]":r;c!=null&&(typeof c=="string"&&(c=e.elements.popper.querySelector(c),!c)||Sa(e.elements.popper,c)&&(e.elements.arrow=c))}const $a={name:"arrow",enabled:!0,phase:"main",fn:sl,effect:rl,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function sn(t){return t.split("-")[1]}var il={top:"auto",right:"auto",bottom:"auto",left:"auto"};function al(t,e){var n=t.x,r=t.y,c=e.devicePixelRatio||1;return{x:tn(n*c)/c||0,y:tn(r*c)/c||0}}function mi(t){var e,n=t.popper,r=t.popperRect,c=t.placement,o=t.variation,i=t.offsets,l=t.position,d=t.gpuAcceleration,s=t.adaptive,u=t.roundOffsets,f=t.isFixed,p=i.x,_=p===void 0?0:p,y=i.y,A=y===void 0?0:y,C=typeof u=="function"?u({x:_,y:A}):{x:_,y:A};_=C.x,A=C.y;var $=i.hasOwnProperty("x"),M=i.hasOwnProperty("y"),B=Ie,I=Le,W=window;if(s){var Y=kn(n),Q="clientHeight",X="clientWidth";if(Y===Ke(n)&&(Y=xt(n),bt(Y).position!=="static"&&l==="absolute"&&(Q="scrollHeight",X="scrollWidth")),Y=Y,c===Le||(c===Ie||c===Ye)&&o===en){I=Ue;var R=f&&Y===W&&W.visualViewport?W.visualViewport.height:Y[Q];A-=R-r.height,A*=d?1:-1}if(c===Ie||(c===Le||c===Ue)&&o===en){B=Ye;var F=f&&Y===W&&W.visualViewport?W.visualViewport.width:Y[X];_-=F-r.width,_*=d?1:-1}}var U=Object.assign({position:l},s&&il),Z=u===!0?al({x:_,y:A},Ke(n)):{x:_,y:A};if(_=Z.x,A=Z.y,d){var le;return Object.assign({},U,(le={},le[I]=M?"0":"",le[B]=$?"0":"",le.transform=(W.devicePixelRatio||1)<=1?"translate("+_+"px, "+A+"px)":"translate3d("+_+"px, "+A+"px, 0)",le))}return Object.assign({},U,(e={},e[I]=M?A+"px":"",e[B]=$?_+"px":"",e.transform="",e))}function ol(t){var e=t.state,n=t.options,r=n.gpuAcceleration,c=r===void 0?!0:r,o=n.adaptive,i=o===void 0?!0:o,l=n.roundOffsets,d=l===void 0?!0:l,s={placement:ht(e.placement),variation:sn(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:c,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,mi(Object.assign({},s,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:i,roundOffsets:d})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,mi(Object.assign({},s,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Ar={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:ol,data:{}};var Yn={passive:!0};function ll(t){var e=t.state,n=t.instance,r=t.options,c=r.scroll,o=c===void 0?!0:c,i=r.resize,l=i===void 0?!0:i,d=Ke(e.elements.popper),s=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&s.forEach(function(u){u.addEventListener("scroll",n.update,Yn)}),l&&d.addEventListener("resize",n.update,Yn),function(){o&&s.forEach(function(u){u.removeEventListener("scroll",n.update,Yn)}),l&&d.removeEventListener("resize",n.update,Yn)}}const Tr={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ll,data:{}};var cl={left:"right",right:"left",bottom:"top",top:"bottom"};function ns(t){return t.replace(/left|right|bottom|top/g,function(e){return cl[e]})}var dl={start:"end",end:"start"};function _i(t){return t.replace(/start|end/g,function(e){return dl[e]})}function Cr(t){var e=Ke(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function wr(t){return nn(xt(t)).left+Cr(t).scrollLeft}function ul(t,e){var n=Ke(t),r=xt(t),c=n.visualViewport,o=r.clientWidth,i=r.clientHeight,l=0,d=0;if(c){o=c.width,i=c.height;var s=wa();(s||!s&&e==="fixed")&&(l=c.offsetLeft,d=c.offsetTop)}return{width:o,height:i,x:l+wr(t),y:d}}function hl(t){var e,n=xt(t),r=Cr(t),c=(e=t.ownerDocument)==null?void 0:e.body,o=Rt(n.scrollWidth,n.clientWidth,c?c.scrollWidth:0,c?c.clientWidth:0),i=Rt(n.scrollHeight,n.clientHeight,c?c.scrollHeight:0,c?c.clientHeight:0),l=-r.scrollLeft+wr(t),d=-r.scrollTop;return bt(c||n).direction==="rtl"&&(l+=Rt(n.clientWidth,c?c.clientWidth:0)-o),{width:o,height:i,x:l,y:d}}function Sr(t){var e=bt(t),n=e.overflow,r=e.overflowX,c=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+c+r)}function Ma(t){return["html","body","#document"].indexOf(pt(t))>=0?t.ownerDocument.body:Xe(t)&&Sr(t)?t:Ma(fs(t))}function yn(t,e){var n;e===void 0&&(e=[]);var r=Ma(t),c=r===((n=t.ownerDocument)==null?void 0:n.body),o=Ke(r),i=c?[o].concat(o.visualViewport||[],Sr(r)?r:[]):r,l=e.concat(i);return c?l:l.concat(yn(fs(i)))}function sr(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function fl(t,e){var n=nn(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function gi(t,e,n){return e===gr?sr(ul(t,n)):Vt(e)?fl(e,n):sr(hl(xt(t)))}function pl(t){var e=yn(fs(t)),n=["absolute","fixed"].indexOf(bt(t).position)>=0,r=n&&Xe(t)?kn(t):t;return Vt(r)?e.filter(function(c){return Vt(c)&&Sa(c,r)&&pt(c)!=="body"}):[]}function ml(t,e,n,r){var c=e==="clippingParents"?pl(t):[].concat(e),o=[].concat(c,[n]),i=o[0],l=o.reduce(function(d,s){var u=gi(t,s,r);return d.top=Rt(u.top,d.top),d.right=ls(u.right,d.right),d.bottom=ls(u.bottom,d.bottom),d.left=Rt(u.left,d.left),d},gi(t,i,r));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function Da(t){var e=t.reference,n=t.element,r=t.placement,c=r?ht(r):null,o=r?sn(r):null,i=e.x+e.width/2-n.width/2,l=e.y+e.height/2-n.height/2,d;switch(c){case Le:d={x:i,y:e.y-n.height};break;case Ue:d={x:i,y:e.y+e.height};break;case Ye:d={x:e.x+e.width,y:l};break;case Ie:d={x:e.x-n.width,y:l};break;default:d={x:e.x,y:e.y}}var s=c?Nr(c):null;if(s!=null){var u=s==="y"?"height":"width";switch(o){case Ft:d[s]=d[s]-(e[u]/2-n[u]/2);break;case en:d[s]=d[s]+(e[u]/2-n[u]/2);break}}return d}function rn(t,e){e===void 0&&(e={});var n=e,r=n.placement,c=r===void 0?t.placement:r,o=n.strategy,i=o===void 0?t.strategy:o,l=n.boundary,d=l===void 0?pa:l,s=n.rootBoundary,u=s===void 0?gr:s,f=n.elementContext,p=f===void 0?qt:f,_=n.altBoundary,y=_===void 0?!1:_,A=n.padding,C=A===void 0?0:A,$=ka(typeof C!="number"?C:Oa(C,cn)),M=p===qt?ma:qt,B=t.rects.popper,I=t.elements[y?M:p],W=ml(Vt(I)?I:I.contextElement||xt(t.elements.popper),d,u,i),Y=nn(t.elements.reference),Q=Da({reference:Y,element:B,placement:c}),X=sr(Object.assign({},B,Q)),R=p===qt?X:Y,F={top:W.top-R.top+$.top,bottom:R.bottom-W.bottom+$.bottom,left:W.left-R.left+$.left,right:R.right-W.right+$.right},U=t.modifiersData.offset;if(p===qt&&U){var Z=U[c];Object.keys(F).forEach(function(le){var Ne=[Ye,Ue].indexOf(le)>=0?1:-1,de=[Le,Ue].indexOf(le)>=0?"y":"x";F[le]+=Z[de]*Ne})}return F}function _l(t,e){e===void 0&&(e={});var n=e,r=n.placement,c=n.boundary,o=n.rootBoundary,i=n.padding,l=n.flipVariations,d=n.allowedAutoPlacements,s=d===void 0?vr:d,u=sn(r),f=u?l?tr:tr.filter(function(y){return sn(y)===u}):cn,p=f.filter(function(y){return s.indexOf(y)>=0});p.length===0&&(p=f);var _=p.reduce(function(y,A){return y[A]=rn(t,{placement:A,boundary:c,rootBoundary:o,padding:i})[ht(A)],y},{});return Object.keys(_).sort(function(y,A){return _[y]-_[A]})}function gl(t){if(ht(t)===hs)return[];var e=ns(t);return[_i(t),e,_i(e)]}function vl(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var c=n.mainAxis,o=c===void 0?!0:c,i=n.altAxis,l=i===void 0?!0:i,d=n.fallbackPlacements,s=n.padding,u=n.boundary,f=n.rootBoundary,p=n.altBoundary,_=n.flipVariations,y=_===void 0?!0:_,A=n.allowedAutoPlacements,C=e.options.placement,$=ht(C),M=$===C,B=d||(M||!y?[ns(C)]:gl(C)),I=[C].concat(B).reduce(function(Ae,ve){return Ae.concat(ht(ve)===hs?_l(e,{placement:ve,boundary:u,rootBoundary:f,padding:s,flipVariations:y,allowedAutoPlacements:A}):ve)},[]),W=e.rects.reference,Y=e.rects.popper,Q=new Map,X=!0,R=I[0],F=0;F<I.length;F++){var U=I[F],Z=ht(U),le=sn(U)===Ft,Ne=[Le,Ue].indexOf(Z)>=0,de=Ne?"width":"height",ie=rn(e,{placement:U,boundary:u,rootBoundary:f,altBoundary:p,padding:s}),ae=Ne?le?Ye:Ie:le?Ue:Le;W[de]>Y[de]&&(ae=ns(ae));var N=ns(ae),k=[];if(o&&k.push(ie[Z]<=0),l&&k.push(ie[ae]<=0,ie[N]<=0),k.every(function(Ae){return Ae})){R=U,X=!1;break}Q.set(U,k)}if(X)for(var K=y?3:1,Ce=function(ve){var ke=I.find(function(Te){var be=Q.get(Te);if(be)return be.slice(0,ve).every(function(pe){return pe})});if(ke)return R=ke,"break"},xe=K;xe>0;xe--){var Pe=Ce(xe);if(Pe==="break")break}e.placement!==R&&(e.modifiersData[r]._skip=!0,e.placement=R,e.reset=!0)}}const La={name:"flip",enabled:!0,phase:"main",fn:vl,requiresIfExists:["offset"],data:{_skip:!1}};function vi(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function bi(t){return[Le,Ye,Ue,Ie].some(function(e){return t[e]>=0})}function bl(t){var e=t.state,n=t.name,r=e.rects.reference,c=e.rects.popper,o=e.modifiersData.preventOverflow,i=rn(e,{elementContext:"reference"}),l=rn(e,{altBoundary:!0}),d=vi(i,r),s=vi(l,c,o),u=bi(d),f=bi(s);e.modifiersData[n]={referenceClippingOffsets:d,popperEscapeOffsets:s,isReferenceHidden:u,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":f})}const Ia={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:bl};function yl(t,e,n){var r=ht(t),c=[Ie,Le].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,i=o[0],l=o[1];return i=i||0,l=(l||0)*c,[Ie,Ye].indexOf(r)>=0?{x:l,y:i}:{x:i,y:l}}function El(t){var e=t.state,n=t.options,r=t.name,c=n.offset,o=c===void 0?[0,0]:c,i=vr.reduce(function(u,f){return u[f]=yl(f,e.rects,o),u},{}),l=i[e.placement],d=l.x,s=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=d,e.modifiersData.popperOffsets.y+=s),e.modifiersData[r]=i}const Pa={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:El};function Nl(t){var e=t.state,n=t.name;e.modifiersData[n]=Da({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const xr={name:"popperOffsets",enabled:!0,phase:"read",fn:Nl,data:{}};function Al(t){return t==="x"?"y":"x"}function Tl(t){var e=t.state,n=t.options,r=t.name,c=n.mainAxis,o=c===void 0?!0:c,i=n.altAxis,l=i===void 0?!1:i,d=n.boundary,s=n.rootBoundary,u=n.altBoundary,f=n.padding,p=n.tether,_=p===void 0?!0:p,y=n.tetherOffset,A=y===void 0?0:y,C=rn(e,{boundary:d,rootBoundary:s,padding:f,altBoundary:u}),$=ht(e.placement),M=sn(e.placement),B=!M,I=Nr($),W=Al(I),Y=e.modifiersData.popperOffsets,Q=e.rects.reference,X=e.rects.popper,R=typeof A=="function"?A(Object.assign({},e.rects,{placement:e.placement})):A,F=typeof R=="number"?{mainAxis:R,altAxis:R}:Object.assign({mainAxis:0,altAxis:0},R),U=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,Z={x:0,y:0};if(Y){if(o){var le,Ne=I==="y"?Le:Ie,de=I==="y"?Ue:Ye,ie=I==="y"?"height":"width",ae=Y[I],N=ae+C[Ne],k=ae-C[de],K=_?-X[ie]/2:0,Ce=M===Ft?Q[ie]:X[ie],xe=M===Ft?-X[ie]:-Q[ie],Pe=e.elements.arrow,Ae=_&&Pe?Er(Pe):{width:0,height:0},ve=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:xa(),ke=ve[Ne],Te=ve[de],be=bn(0,Q[ie],Ae[ie]),pe=B?Q[ie]/2-K-be-ke-F.mainAxis:Ce-be-ke-F.mainAxis,tt=B?-Q[ie]/2+K+be+Te+F.mainAxis:xe+be+Te+F.mainAxis,Oe=e.elements.arrow&&kn(e.elements.arrow),nt=Oe?I==="y"?Oe.clientTop||0:Oe.clientLeft||0:0,ot=(le=U==null?void 0:U[I])!=null?le:0,E=ae+pe-ot-nt,j=ae+tt-ot,O=bn(_?ls(N,E):N,ae,_?Rt(k,j):k);Y[I]=O,Z[I]=O-ae}if(l){var ee,ue=I==="x"?Le:Ie,st=I==="x"?Ue:Ye,$e=Y[W],L=W==="y"?"height":"width",he=$e+C[ue],ye=$e-C[st],ze=[Le,Ie].indexOf($)!==-1,lt=(ee=U==null?void 0:U[W])!=null?ee:0,Nt=ze?he:$e-Q[L]-X[L]-lt+F.altAxis,h=ze?$e+Q[L]+X[L]-lt-F.altAxis:ye,V=_&&ze?tl(Nt,$e,h):bn(_?Nt:he,$e,_?h:ye);Y[W]=V,Z[W]=V-$e}e.modifiersData[r]=Z}}const Ra={name:"preventOverflow",enabled:!0,phase:"main",fn:Tl,requiresIfExists:["offset"]};function Cl(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function wl(t){return t===Ke(t)||!Xe(t)?Cr(t):Cl(t)}function Sl(t){var e=t.getBoundingClientRect(),n=tn(e.width)/t.offsetWidth||1,r=tn(e.height)/t.offsetHeight||1;return n!==1||r!==1}function xl(t,e,n){n===void 0&&(n=!1);var r=Xe(e),c=Xe(e)&&Sl(e),o=xt(e),i=nn(t,c,n),l={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(r||!r&&!n)&&((pt(e)!=="body"||Sr(o))&&(l=wl(e)),Xe(e)?(d=nn(e,!0),d.x+=e.clientLeft,d.y+=e.clientTop):o&&(d.x=wr(o))),{x:i.left+l.scrollLeft-d.x,y:i.top+l.scrollTop-d.y,width:i.width,height:i.height}}function kl(t){var e=new Map,n=new Set,r=[];t.forEach(function(o){e.set(o.name,o)});function c(o){n.add(o.name);var i=[].concat(o.requires||[],o.requiresIfExists||[]);i.forEach(function(l){if(!n.has(l)){var d=e.get(l);d&&c(d)}}),r.push(o)}return t.forEach(function(o){n.has(o.name)||c(o)}),r}function Ol(t){var e=kl(t);return Ca.reduce(function(n,r){return n.concat(e.filter(function(c){return c.phase===r}))},[])}function $l(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function Ml(t){var e=t.reduce(function(n,r){var c=n[r.name];return n[r.name]=c?Object.assign({},c,r,{options:Object.assign({},c.options,r.options),data:Object.assign({},c.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var yi={placement:"bottom",modifiers:[],strategy:"absolute"};function Ei(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function ps(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,c=e.defaultOptions,o=c===void 0?yi:c;return function(l,d,s){s===void 0&&(s=o);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},yi,o),modifiersData:{},elements:{reference:l,popper:d},attributes:{},styles:{}},f=[],p=!1,_={state:u,setOptions:function($){var M=typeof $=="function"?$(u.options):$;A(),u.options=Object.assign({},o,u.options,M),u.scrollParents={reference:Vt(l)?yn(l):l.contextElement?yn(l.contextElement):[],popper:yn(d)};var B=Ol(Ml([].concat(r,u.options.modifiers)));return u.orderedModifiers=B.filter(function(I){return I.enabled}),y(),_.update()},forceUpdate:function(){if(!p){var $=u.elements,M=$.reference,B=$.popper;if(Ei(M,B)){u.rects={reference:xl(M,kn(B),u.options.strategy==="fixed"),popper:Er(B)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(F){return u.modifiersData[F.name]=Object.assign({},F.data)});for(var I=0;I<u.orderedModifiers.length;I++){if(u.reset===!0){u.reset=!1,I=-1;continue}var W=u.orderedModifiers[I],Y=W.fn,Q=W.options,X=Q===void 0?{}:Q,R=W.name;typeof Y=="function"&&(u=Y({state:u,options:X,name:R,instance:_})||u)}}}},update:$l(function(){return new Promise(function(C){_.forceUpdate(),C(u)})}),destroy:function(){A(),p=!0}};if(!Ei(l,d))return _;_.setOptions(s).then(function(C){!p&&s.onFirstUpdate&&s.onFirstUpdate(C)});function y(){u.orderedModifiers.forEach(function(C){var $=C.name,M=C.options,B=M===void 0?{}:M,I=C.effect;if(typeof I=="function"){var W=I({state:u,name:$,instance:_,options:B}),Y=function(){};f.push(W||Y)}})}function A(){f.forEach(function(C){return C()}),f=[]}return _}}var Dl=ps(),Ll=[Tr,xr,Ar,yr],Il=ps({defaultModifiers:Ll}),Pl=[Tr,xr,Ar,yr,Pa,La,Ra,$a,Ia],kr=ps({defaultModifiers:Pl});const Ha=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Ea,afterRead:va,afterWrite:Ta,applyStyles:yr,arrow:$a,auto:hs,basePlacements:cn,beforeMain:ba,beforeRead:_a,beforeWrite:Na,bottom:Ue,clippingParents:pa,computeStyles:Ar,createPopper:kr,createPopperBase:Dl,createPopperLite:Il,detectOverflow:rn,end:en,eventListeners:Tr,flip:La,hide:Ia,left:Ie,main:ya,modifierPhases:Ca,offset:Pa,placements:vr,popper:qt,popperGenerator:ps,popperOffsets:xr,preventOverflow:Ra,read:ga,reference:ma,right:Ye,start:Ft,top:Le,variationPlacements:tr,viewport:gr,write:Aa},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.6 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const At=new Map,Is={set(t,e,n){At.has(t)||At.set(t,new Map);const r=At.get(t);if(!r.has(e)&&r.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`);return}r.set(e,n)},get(t,e){return At.has(t)&&At.get(t).get(e)||null},remove(t,e){if(!At.has(t))return;const n=At.get(t);n.delete(e),n.size===0&&At.delete(t)}},Rl=1e6,Hl=1e3,rr="transitionend",Fa=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,(e,n)=>`#${CSS.escape(n)}`)),t),Fl=t=>t==null?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),Vl=t=>{do t+=Math.floor(Math.random()*Rl);while(document.getElementById(t));return t},Wl=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const r=Number.parseFloat(e),c=Number.parseFloat(n);return!r&&!c?0:(e=e.split(",")[0],n=n.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(n))*Hl)},Va=t=>{t.dispatchEvent(new Event(rr))},gt=t=>!t||typeof t!="object"?!1:(typeof t.jquery<"u"&&(t=t[0]),typeof t.nodeType<"u"),Ct=t=>gt(t)?t.jquery?t[0]:t:typeof t=="string"&&t.length>0?document.querySelector(Fa(t)):null,dn=t=>{if(!gt(t)||t.getClientRects().length===0)return!1;const e=getComputedStyle(t).getPropertyValue("visibility")==="visible",n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const r=t.closest("summary");if(r&&r.parentNode!==n||r===null)return!1}return e},wt=t=>!t||t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("disabled")?!0:typeof t.disabled<"u"?t.disabled:t.hasAttribute("disabled")&&t.getAttribute("disabled")!=="false",Wa=t=>{if(!document.documentElement.attachShadow)return null;if(typeof t.getRootNode=="function"){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?Wa(t.parentNode):null},cs=()=>{},On=t=>{t.offsetHeight},ja=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Ps=[],jl=t=>{document.readyState==="loading"?(Ps.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of Ps)e()}),Ps.push(t)):t()},Je=()=>document.documentElement.dir==="rtl",et=t=>{jl(()=>{const e=ja();if(e){const n=t.NAME,r=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=r,t.jQueryInterface)}})},Fe=(t,e=[],n=t)=>typeof t=="function"?t.call(...e):n,Ba=(t,e,n=!0)=>{if(!n){Fe(t);return}const c=Wl(e)+5;let o=!1;const i=({target:l})=>{l===e&&(o=!0,e.removeEventListener(rr,i),Fe(t))};e.addEventListener(rr,i),setTimeout(()=>{o||Va(e)},c)},Or=(t,e,n,r)=>{const c=t.length;let o=t.indexOf(e);return o===-1?!n&&r?t[c-1]:t[0]:(o+=n?1:-1,r&&(o=(o+c)%c),t[Math.max(0,Math.min(o,c-1))])},Bl=/[^.]*(?=\..*)\.|.*/,Ul=/\..*/,Yl=/::\d+$/,Rs={};let Ni=1;const Ua={mouseenter:"mouseover",mouseleave:"mouseout"},Kl=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Ya(t,e){return e&&`${e}::${Ni++}`||t.uidEvent||Ni++}function Ka(t){const e=Ya(t);return t.uidEvent=e,Rs[e]=Rs[e]||{},Rs[e]}function ql(t,e){return function n(r){return $r(r,{delegateTarget:t}),n.oneOff&&T.off(t,r.type,e),e.apply(t,[r])}}function zl(t,e,n){return function r(c){const o=t.querySelectorAll(e);for(let{target:i}=c;i&&i!==this;i=i.parentNode)for(const l of o)if(l===i)return $r(c,{delegateTarget:i}),r.oneOff&&T.off(t,c.type,e,n),n.apply(i,[c])}}function qa(t,e,n=null){return Object.values(t).find(r=>r.callable===e&&r.delegationSelector===n)}function za(t,e,n){const r=typeof e=="string",c=r?n:e||n;let o=Ga(t);return Kl.has(o)||(o=t),[r,c,o]}function Ai(t,e,n,r,c){if(typeof e!="string"||!t)return;let[o,i,l]=za(e,n,r);e in Ua&&(i=(y=>function(A){if(!A.relatedTarget||A.relatedTarget!==A.delegateTarget&&!A.delegateTarget.contains(A.relatedTarget))return y.call(this,A)})(i));const d=Ka(t),s=d[l]||(d[l]={}),u=qa(s,i,o?n:null);if(u){u.oneOff=u.oneOff&&c;return}const f=Ya(i,e.replace(Bl,"")),p=o?zl(t,n,i):ql(t,i);p.delegationSelector=o?n:null,p.callable=i,p.oneOff=c,p.uidEvent=f,s[f]=p,t.addEventListener(l,p,o)}function ir(t,e,n,r,c){const o=qa(e[n],r,c);o&&(t.removeEventListener(n,o,!!c),delete e[n][o.uidEvent])}function Gl(t,e,n,r){const c=e[n]||{};for(const[o,i]of Object.entries(c))o.includes(r)&&ir(t,e,n,i.callable,i.delegationSelector)}function Ga(t){return t=t.replace(Ul,""),Ua[t]||t}const T={on(t,e,n,r){Ai(t,e,n,r,!1)},one(t,e,n,r){Ai(t,e,n,r,!0)},off(t,e,n,r){if(typeof e!="string"||!t)return;const[c,o,i]=za(e,n,r),l=i!==e,d=Ka(t),s=d[i]||{},u=e.startsWith(".");if(typeof o<"u"){if(!Object.keys(s).length)return;ir(t,d,i,o,c?n:null);return}if(u)for(const f of Object.keys(d))Gl(t,d,f,e.slice(1));for(const[f,p]of Object.entries(s)){const _=f.replace(Yl,"");(!l||e.includes(_))&&ir(t,d,i,p.callable,p.delegationSelector)}},trigger(t,e,n){if(typeof e!="string"||!t)return null;const r=ja(),c=Ga(e),o=e!==c;let i=null,l=!0,d=!0,s=!1;o&&r&&(i=r.Event(e,n),r(t).trigger(i),l=!i.isPropagationStopped(),d=!i.isImmediatePropagationStopped(),s=i.isDefaultPrevented());const u=$r(new Event(e,{bubbles:l,cancelable:!0}),n);return s&&u.preventDefault(),d&&t.dispatchEvent(u),u.defaultPrevented&&i&&i.preventDefault(),u}};function $r(t,e={}){for(const[n,r]of Object.entries(e))try{t[n]=r}catch{Object.defineProperty(t,n,{configurable:!0,get(){return r}})}return t}function Ti(t){if(t==="true")return!0;if(t==="false")return!1;if(t===Number(t).toString())return Number(t);if(t===""||t==="null")return null;if(typeof t!="string")return t;try{return JSON.parse(decodeURIComponent(t))}catch{return t}}function Hs(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const vt={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${Hs(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${Hs(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter(r=>r.startsWith("bs")&&!r.startsWith("bsConfig"));for(const r of n){let c=r.replace(/^bs/,"");c=c.charAt(0).toLowerCase()+c.slice(1),e[c]=Ti(t.dataset[r])}return e},getDataAttribute(t,e){return Ti(t.getAttribute(`data-bs-${Hs(e)}`))}};class $n{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,n){const r=gt(n)?vt.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof r=="object"?r:{},...gt(n)?vt.getDataAttributes(n):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,n=this.constructor.DefaultType){for(const[r,c]of Object.entries(n)){const o=e[r],i=gt(o)?"element":Fl(o);if(!new RegExp(c).test(i))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${r}" provided type "${i}" but expected type "${c}".`)}}}const Ql="5.3.6";class at extends $n{constructor(e,n){super(),e=Ct(e),e&&(this._element=e,this._config=this._getConfig(n),Is.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Is.remove(this._element,this.constructor.DATA_KEY),T.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,n,r=!0){Ba(e,n,r)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return Is.get(Ct(e),this.DATA_KEY)}static getOrCreateInstance(e,n={}){return this.getInstance(e)||new this(e,typeof n=="object"?n:null)}static get VERSION(){return Ql}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const Fs=t=>{let e=t.getAttribute("data-bs-target");if(!e||e==="#"){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&n!=="#"?n.trim():null}return e?e.split(",").map(n=>Fa(n)).join(","):null},H={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter(n=>n.matches(e))},parents(t,e){const n=[];let r=t.parentNode.closest(e);for(;r;)n.push(r),r=r.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(e,t).filter(n=>!wt(n)&&dn(n))},getSelectorFromElement(t){const e=Fs(t);return e&&H.findOne(e)?e:null},getElementFromSelector(t){const e=Fs(t);return e?H.findOne(e):null},getMultipleElementsFromSelector(t){const e=Fs(t);return e?H.find(e):[]}},ms=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,r=t.NAME;T.on(document,n,`[data-bs-dismiss="${r}"]`,function(c){if(["A","AREA"].includes(this.tagName)&&c.preventDefault(),wt(this))return;const o=H.getElementFromSelector(this)||this.closest(`.${r}`);t.getOrCreateInstance(o)[e]()})},Xl="alert",Jl="bs.alert",Qa=`.${Jl}`,Zl=`close${Qa}`,ec=`closed${Qa}`,tc="fade",nc="show";class _s extends at{static get NAME(){return Xl}close(){if(T.trigger(this._element,Zl).defaultPrevented)return;this._element.classList.remove(nc);const n=this._element.classList.contains(tc);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),T.trigger(this._element,ec),this.dispose()}static jQueryInterface(e){return this.each(function(){const n=_s.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}ms(_s,"close");et(_s);const sc="button",rc="bs.button",ic=`.${rc}`,ac=".data-api",oc="active",Ci='[data-bs-toggle="button"]',lc=`click${ic}${ac}`;class gs extends at{static get NAME(){return sc}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(oc))}static jQueryInterface(e){return this.each(function(){const n=gs.getOrCreateInstance(this);e==="toggle"&&n[e]()})}}T.on(document,lc,Ci,t=>{t.preventDefault();const e=t.target.closest(Ci);gs.getOrCreateInstance(e).toggle()});et(gs);const cc="swipe",un=".bs.swipe",dc=`touchstart${un}`,uc=`touchmove${un}`,hc=`touchend${un}`,fc=`pointerdown${un}`,pc=`pointerup${un}`,mc="touch",_c="pen",gc="pointer-event",vc=40,bc={endCallback:null,leftCallback:null,rightCallback:null},yc={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class ds extends $n{constructor(e,n){super(),this._element=e,!(!e||!ds.isSupported())&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return bc}static get DefaultType(){return yc}static get NAME(){return cc}dispose(){T.off(this._element,un)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),Fe(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=vc)return;const n=e/this._deltaX;this._deltaX=0,n&&Fe(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(T.on(this._element,fc,e=>this._start(e)),T.on(this._element,pc,e=>this._end(e)),this._element.classList.add(gc)):(T.on(this._element,dc,e=>this._start(e)),T.on(this._element,uc,e=>this._move(e)),T.on(this._element,hc,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===_c||e.pointerType===mc)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Ec="carousel",Nc="bs.carousel",kt=`.${Nc}`,Xa=".data-api",Ac="ArrowLeft",Tc="ArrowRight",Cc=500,pn="next",Yt="prev",zt="left",ss="right",wc=`slide${kt}`,Vs=`slid${kt}`,Sc=`keydown${kt}`,xc=`mouseenter${kt}`,kc=`mouseleave${kt}`,Oc=`dragstart${kt}`,$c=`load${kt}${Xa}`,Mc=`click${kt}${Xa}`,Ja="carousel",Kn="active",Dc="slide",Lc="carousel-item-end",Ic="carousel-item-start",Pc="carousel-item-next",Rc="carousel-item-prev",Za=".active",eo=".carousel-item",Hc=Za+eo,Fc=".carousel-item img",Vc=".carousel-indicators",Wc="[data-bs-slide], [data-bs-slide-to]",jc='[data-bs-ride="carousel"]',Bc={[Ac]:ss,[Tc]:zt},Uc={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Yc={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Mn extends at{constructor(e,n){super(e,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=H.findOne(Vc,this._element),this._addEventListeners(),this._config.ride===Ja&&this.cycle()}static get Default(){return Uc}static get DefaultType(){return Yc}static get NAME(){return Ec}next(){this._slide(pn)}nextWhenVisible(){!document.hidden&&dn(this._element)&&this.next()}prev(){this._slide(Yt)}pause(){this._isSliding&&Va(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){T.one(this._element,Vs,()=>this.cycle());return}this.cycle()}}to(e){const n=this._getItems();if(e>n.length-1||e<0)return;if(this._isSliding){T.one(this._element,Vs,()=>this.to(e));return}const r=this._getItemIndex(this._getActive());if(r===e)return;const c=e>r?pn:Yt;this._slide(c,n[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&T.on(this._element,Sc,e=>this._keydown(e)),this._config.pause==="hover"&&(T.on(this._element,xc,()=>this.pause()),T.on(this._element,kc,()=>this._maybeEnableCycle())),this._config.touch&&ds.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const r of H.find(Fc,this._element))T.on(r,Oc,c=>c.preventDefault());const n={leftCallback:()=>this._slide(this._directionToOrder(zt)),rightCallback:()=>this._slide(this._directionToOrder(ss)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),Cc+this._config.interval))}};this._swipeHelper=new ds(this._element,n)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const n=Bc[e.key];n&&(e.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const n=H.findOne(Za,this._indicatorsElement);n.classList.remove(Kn),n.removeAttribute("aria-current");const r=H.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);r&&(r.classList.add(Kn),r.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const n=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(e,n=null){if(this._isSliding)return;const r=this._getActive(),c=e===pn,o=n||Or(this._getItems(),r,c,this._config.wrap);if(o===r)return;const i=this._getItemIndex(o),l=_=>T.trigger(this._element,_,{relatedTarget:o,direction:this._orderToDirection(e),from:this._getItemIndex(r),to:i});if(l(wc).defaultPrevented||!r||!o)return;const s=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(i),this._activeElement=o;const u=c?Ic:Lc,f=c?Pc:Rc;o.classList.add(f),On(o),r.classList.add(u),o.classList.add(u);const p=()=>{o.classList.remove(u,f),o.classList.add(Kn),r.classList.remove(Kn,f,u),this._isSliding=!1,l(Vs)};this._queueCallback(p,r,this._isAnimated()),s&&this.cycle()}_isAnimated(){return this._element.classList.contains(Dc)}_getActive(){return H.findOne(Hc,this._element)}_getItems(){return H.find(eo,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return Je()?e===zt?Yt:pn:e===zt?pn:Yt}_orderToDirection(e){return Je()?e===Yt?zt:ss:e===Yt?ss:zt}static jQueryInterface(e){return this.each(function(){const n=Mn.getOrCreateInstance(this,e);if(typeof e=="number"){n.to(e);return}if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}T.on(document,Mc,Wc,function(t){const e=H.getElementFromSelector(this);if(!e||!e.classList.contains(Ja))return;t.preventDefault();const n=Mn.getOrCreateInstance(e),r=this.getAttribute("data-bs-slide-to");if(r){n.to(r),n._maybeEnableCycle();return}if(vt.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()});T.on(window,$c,()=>{const t=H.find(jc);for(const e of t)Mn.getOrCreateInstance(e)});et(Mn);const Kc="collapse",qc="bs.collapse",Dn=`.${qc}`,zc=".data-api",Gc=`show${Dn}`,Qc=`shown${Dn}`,Xc=`hide${Dn}`,Jc=`hidden${Dn}`,Zc=`click${Dn}${zc}`,Ws="show",Qt="collapse",qn="collapsing",ed="collapsed",td=`:scope .${Qt} .${Qt}`,nd="collapse-horizontal",sd="width",rd="height",id=".collapse.show, .collapse.collapsing",ar='[data-bs-toggle="collapse"]',ad={parent:null,toggle:!0},od={parent:"(null|element)",toggle:"boolean"};class An extends at{constructor(e,n){super(e,n),this._isTransitioning=!1,this._triggerArray=[];const r=H.find(ar);for(const c of r){const o=H.getSelectorFromElement(c),i=H.find(o).filter(l=>l===this._element);o!==null&&i.length&&this._triggerArray.push(c)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return ad}static get DefaultType(){return od}static get NAME(){return Kc}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(id).filter(l=>l!==this._element).map(l=>An.getOrCreateInstance(l,{toggle:!1}))),e.length&&e[0]._isTransitioning||T.trigger(this._element,Gc).defaultPrevented)return;for(const l of e)l.hide();const r=this._getDimension();this._element.classList.remove(Qt),this._element.classList.add(qn),this._element.style[r]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const c=()=>{this._isTransitioning=!1,this._element.classList.remove(qn),this._element.classList.add(Qt,Ws),this._element.style[r]="",T.trigger(this._element,Qc)},i=`scroll${r[0].toUpperCase()+r.slice(1)}`;this._queueCallback(c,this._element,!0),this._element.style[r]=`${this._element[i]}px`}hide(){if(this._isTransitioning||!this._isShown()||T.trigger(this._element,Xc).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,On(this._element),this._element.classList.add(qn),this._element.classList.remove(Qt,Ws);for(const c of this._triggerArray){const o=H.getElementFromSelector(c);o&&!this._isShown(o)&&this._addAriaAndCollapsedClass([c],!1)}this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(qn),this._element.classList.add(Qt),T.trigger(this._element,Jc)};this._element.style[n]="",this._queueCallback(r,this._element,!0)}_isShown(e=this._element){return e.classList.contains(Ws)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=Ct(e.parent),e}_getDimension(){return this._element.classList.contains(nd)?sd:rd}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(ar);for(const n of e){const r=H.getElementFromSelector(n);r&&this._addAriaAndCollapsedClass([n],this._isShown(r))}}_getFirstLevelChildren(e){const n=H.find(td,this._config.parent);return H.find(e,this._config.parent).filter(r=>!n.includes(r))}_addAriaAndCollapsedClass(e,n){if(e.length)for(const r of e)r.classList.toggle(ed,!n),r.setAttribute("aria-expanded",n)}static jQueryInterface(e){const n={};return typeof e=="string"&&/show|hide/.test(e)&&(n.toggle=!1),this.each(function(){const r=An.getOrCreateInstance(this,n);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e]()}})}}T.on(document,Zc,ar,function(t){(t.target.tagName==="A"||t.delegateTarget&&t.delegateTarget.tagName==="A")&&t.preventDefault();for(const e of H.getMultipleElementsFromSelector(this))An.getOrCreateInstance(e,{toggle:!1}).toggle()});et(An);const wi="dropdown",ld="bs.dropdown",jt=`.${ld}`,Mr=".data-api",cd="Escape",Si="Tab",dd="ArrowUp",xi="ArrowDown",ud=2,hd=`hide${jt}`,fd=`hidden${jt}`,pd=`show${jt}`,md=`shown${jt}`,to=`click${jt}${Mr}`,no=`keydown${jt}${Mr}`,_d=`keyup${jt}${Mr}`,Gt="show",gd="dropup",vd="dropend",bd="dropstart",yd="dropup-center",Ed="dropdown-center",Lt='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Nd=`${Lt}.${Gt}`,rs=".dropdown-menu",Ad=".navbar",Td=".navbar-nav",Cd=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",wd=Je()?"top-end":"top-start",Sd=Je()?"top-start":"top-end",xd=Je()?"bottom-end":"bottom-start",kd=Je()?"bottom-start":"bottom-end",Od=Je()?"left-start":"right-start",$d=Je()?"right-start":"left-start",Md="top",Dd="bottom",Ld={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Id={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class ft extends at{constructor(e,n){super(e,n),this._popper=null,this._parent=this._element.parentNode,this._menu=H.next(this._element,rs)[0]||H.prev(this._element,rs)[0]||H.findOne(rs,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Ld}static get DefaultType(){return Id}static get NAME(){return wi}toggle(){return this._isShown()?this.hide():this.show()}show(){if(wt(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!T.trigger(this._element,pd,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(Td))for(const r of[].concat(...document.body.children))T.on(r,"mouseover",cs);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Gt),this._element.classList.add(Gt),T.trigger(this._element,md,e)}}hide(){if(wt(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!T.trigger(this._element,hd,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))T.off(r,"mouseover",cs);this._popper&&this._popper.destroy(),this._menu.classList.remove(Gt),this._element.classList.remove(Gt),this._element.setAttribute("aria-expanded","false"),vt.removeDataAttribute(this._menu,"popper"),T.trigger(this._element,fd,e),this._element.focus()}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!gt(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${wi.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof Ha>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let e=this._element;this._config.reference==="parent"?e=this._parent:gt(this._config.reference)?e=Ct(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const n=this._getPopperConfig();this._popper=kr(e,this._menu,n)}_isShown(){return this._menu.classList.contains(Gt)}_getPlacement(){const e=this._parent;if(e.classList.contains(vd))return Od;if(e.classList.contains(bd))return $d;if(e.classList.contains(yd))return Md;if(e.classList.contains(Ed))return Dd;const n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(gd)?n?Sd:wd:n?kd:xd}_detectNavbar(){return this._element.closest(Ad)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(vt.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...Fe(this._config.popperConfig,[void 0,e])}}_selectMenuItem({key:e,target:n}){const r=H.find(Cd,this._menu).filter(c=>dn(c));r.length&&Or(r,n,e===xi,!r.includes(n)).focus()}static jQueryInterface(e){return this.each(function(){const n=ft.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}static clearMenus(e){if(e.button===ud||e.type==="keyup"&&e.key!==Si)return;const n=H.find(Nd);for(const r of n){const c=ft.getInstance(r);if(!c||c._config.autoClose===!1)continue;const o=e.composedPath(),i=o.includes(c._menu);if(o.includes(c._element)||c._config.autoClose==="inside"&&!i||c._config.autoClose==="outside"&&i||c._menu.contains(e.target)&&(e.type==="keyup"&&e.key===Si||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const l={relatedTarget:c._element};e.type==="click"&&(l.clickEvent=e),c._completeHide(l)}}static dataApiKeydownHandler(e){const n=/input|textarea/i.test(e.target.tagName),r=e.key===cd,c=[dd,xi].includes(e.key);if(!c&&!r||n&&!r)return;e.preventDefault();const o=this.matches(Lt)?this:H.prev(this,Lt)[0]||H.next(this,Lt)[0]||H.findOne(Lt,e.delegateTarget.parentNode),i=ft.getOrCreateInstance(o);if(c){e.stopPropagation(),i.show(),i._selectMenuItem(e);return}i._isShown()&&(e.stopPropagation(),i.hide(),o.focus())}}T.on(document,no,Lt,ft.dataApiKeydownHandler);T.on(document,no,rs,ft.dataApiKeydownHandler);T.on(document,to,ft.clearMenus);T.on(document,_d,ft.clearMenus);T.on(document,to,Lt,function(t){t.preventDefault(),ft.getOrCreateInstance(this).toggle()});et(ft);const so="backdrop",Pd="fade",ki="show",Oi=`mousedown.bs.${so}`,Rd={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Hd={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class ro extends $n{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Rd}static get DefaultType(){return Hd}static get NAME(){return so}show(e){if(!this._config.isVisible){Fe(e);return}this._append();const n=this._getElement();this._config.isAnimated&&On(n),n.classList.add(ki),this._emulateAnimation(()=>{Fe(e)})}hide(e){if(!this._config.isVisible){Fe(e);return}this._getElement().classList.remove(ki),this._emulateAnimation(()=>{this.dispose(),Fe(e)})}dispose(){this._isAppended&&(T.off(this._element,Oi),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(Pd),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=Ct(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),T.on(e,Oi,()=>{Fe(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){Ba(e,this._getElement(),this._config.isAnimated)}}const Fd="focustrap",Vd="bs.focustrap",us=`.${Vd}`,Wd=`focusin${us}`,jd=`keydown.tab${us}`,Bd="Tab",Ud="forward",$i="backward",Yd={autofocus:!0,trapElement:null},Kd={autofocus:"boolean",trapElement:"element"};class io extends $n{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Yd}static get DefaultType(){return Kd}static get NAME(){return Fd}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),T.off(document,us),T.on(document,Wd,e=>this._handleFocusin(e)),T.on(document,jd,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,T.off(document,us))}_handleFocusin(e){const{trapElement:n}=this._config;if(e.target===document||e.target===n||n.contains(e.target))return;const r=H.focusableChildren(n);r.length===0?n.focus():this._lastTabNavDirection===$i?r[r.length-1].focus():r[0].focus()}_handleKeydown(e){e.key===Bd&&(this._lastTabNavDirection=e.shiftKey?$i:Ud)}}const Mi=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Di=".sticky-top",zn="padding-right",Li="margin-right";class or{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,zn,n=>n+e),this._setElementAttributes(Mi,zn,n=>n+e),this._setElementAttributes(Di,Li,n=>n-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,zn),this._resetElementAttributes(Mi,zn),this._resetElementAttributes(Di,Li)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,n,r){const c=this.getWidth(),o=i=>{if(i!==this._element&&window.innerWidth>i.clientWidth+c)return;this._saveInitialAttribute(i,n);const l=window.getComputedStyle(i).getPropertyValue(n);i.style.setProperty(n,`${r(Number.parseFloat(l))}px`)};this._applyManipulationCallback(e,o)}_saveInitialAttribute(e,n){const r=e.style.getPropertyValue(n);r&&vt.setDataAttribute(e,n,r)}_resetElementAttributes(e,n){const r=c=>{const o=vt.getDataAttribute(c,n);if(o===null){c.style.removeProperty(n);return}vt.removeDataAttribute(c,n),c.style.setProperty(n,o)};this._applyManipulationCallback(e,r)}_applyManipulationCallback(e,n){if(gt(e)){n(e);return}for(const r of H.find(e,this._element))n(r)}}const qd="modal",zd="bs.modal",Ze=`.${zd}`,Gd=".data-api",Qd="Escape",Xd=`hide${Ze}`,Jd=`hidePrevented${Ze}`,ao=`hidden${Ze}`,oo=`show${Ze}`,Zd=`shown${Ze}`,eu=`resize${Ze}`,tu=`click.dismiss${Ze}`,nu=`mousedown.dismiss${Ze}`,su=`keydown.dismiss${Ze}`,ru=`click${Ze}${Gd}`,Ii="modal-open",iu="fade",Pi="show",js="modal-static",au=".modal.show",ou=".modal-dialog",lu=".modal-body",cu='[data-bs-toggle="modal"]',du={backdrop:!0,focus:!0,keyboard:!0},uu={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class an extends at{constructor(e,n){super(e,n),this._dialog=H.findOne(ou,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new or,this._addEventListeners()}static get Default(){return du}static get DefaultType(){return uu}static get NAME(){return qd}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||T.trigger(this._element,oo,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Ii),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||T.trigger(this._element,Xd).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Pi),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){T.off(window,Ze),T.off(this._dialog,Ze),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new ro({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new io({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=H.findOne(lu,this._dialog);n&&(n.scrollTop=0),On(this._element),this._element.classList.add(Pi);const r=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,T.trigger(this._element,Zd,{relatedTarget:e})};this._queueCallback(r,this._dialog,this._isAnimated())}_addEventListeners(){T.on(this._element,su,e=>{if(e.key===Qd){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),T.on(window,eu,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),T.on(this._element,nu,e=>{T.one(this._element,tu,n=>{if(!(this._element!==e.target||this._element!==n.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Ii),this._resetAdjustments(),this._scrollBar.reset(),T.trigger(this._element,ao)})}_isAnimated(){return this._element.classList.contains(iu)}_triggerBackdropTransition(){if(T.trigger(this._element,Jd).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,r=this._element.style.overflowY;r==="hidden"||this._element.classList.contains(js)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(js),this._queueCallback(()=>{this._element.classList.remove(js),this._queueCallback(()=>{this._element.style.overflowY=r},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),r=n>0;if(r&&!e){const c=Je()?"paddingLeft":"paddingRight";this._element.style[c]=`${n}px`}if(!r&&e){const c=Je()?"paddingRight":"paddingLeft";this._element.style[c]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,n){return this.each(function(){const r=an.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e](n)}})}}T.on(document,ru,cu,function(t){const e=H.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),T.one(e,oo,c=>{c.defaultPrevented||T.one(e,ao,()=>{dn(this)&&this.focus()})});const n=H.findOne(au);n&&an.getInstance(n).hide(),an.getOrCreateInstance(e).toggle(this)});ms(an);et(an);const hu="offcanvas",fu="bs.offcanvas",yt=`.${fu}`,lo=".data-api",pu=`load${yt}${lo}`,mu="Escape",Ri="show",Hi="showing",Fi="hiding",_u="offcanvas-backdrop",co=".offcanvas.show",gu=`show${yt}`,vu=`shown${yt}`,bu=`hide${yt}`,Vi=`hidePrevented${yt}`,uo=`hidden${yt}`,yu=`resize${yt}`,Eu=`click${yt}${lo}`,Nu=`keydown.dismiss${yt}`,Au='[data-bs-toggle="offcanvas"]',Tu={backdrop:!0,keyboard:!0,scroll:!1},Cu={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class St extends at{constructor(e,n){super(e,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Tu}static get DefaultType(){return Cu}static get NAME(){return hu}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||T.trigger(this._element,gu,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new or().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Hi);const r=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Ri),this._element.classList.remove(Hi),T.trigger(this._element,vu,{relatedTarget:e})};this._queueCallback(r,this._element,!0)}hide(){if(!this._isShown||T.trigger(this._element,bu).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Fi),this._backdrop.hide();const n=()=>{this._element.classList.remove(Ri,Fi),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new or().reset(),T.trigger(this._element,uo)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){T.trigger(this._element,Vi);return}this.hide()},n=!!this._config.backdrop;return new ro({className:_u,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?e:null})}_initializeFocusTrap(){return new io({trapElement:this._element})}_addEventListeners(){T.on(this._element,Nu,e=>{if(e.key===mu){if(this._config.keyboard){this.hide();return}T.trigger(this._element,Vi)}})}static jQueryInterface(e){return this.each(function(){const n=St.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}T.on(document,Eu,Au,function(t){const e=H.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),wt(this))return;T.one(e,uo,()=>{dn(this)&&this.focus()});const n=H.findOne(co);n&&n!==e&&St.getInstance(n).hide(),St.getOrCreateInstance(e).toggle(this)});T.on(window,pu,()=>{for(const t of H.find(co))St.getOrCreateInstance(t).show()});T.on(window,yu,()=>{for(const t of H.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(t).position!=="fixed"&&St.getOrCreateInstance(t).hide()});ms(St);et(St);const wu=/^aria-[\w-]*$/i,ho={"*":["class","dir","id","lang","role",wu],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Su=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),xu=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,ku=(t,e)=>{const n=t.nodeName.toLowerCase();return e.includes(n)?Su.has(n)?!!xu.test(t.nodeValue):!0:e.filter(r=>r instanceof RegExp).some(r=>r.test(n))};function Ou(t,e,n){if(!t.length)return t;if(n&&typeof n=="function")return n(t);const c=new window.DOMParser().parseFromString(t,"text/html"),o=[].concat(...c.body.querySelectorAll("*"));for(const i of o){const l=i.nodeName.toLowerCase();if(!Object.keys(e).includes(l)){i.remove();continue}const d=[].concat(...i.attributes),s=[].concat(e["*"]||[],e[l]||[]);for(const u of d)ku(u,s)||i.removeAttribute(u.nodeName)}return c.body.innerHTML}const $u="TemplateFactory",Mu={allowList:ho,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Du={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Lu={entry:"(string|element|function|null)",selector:"(string|element)"};class Iu extends $n{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Mu}static get DefaultType(){return Du}static get NAME(){return $u}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[c,o]of Object.entries(this._config.content))this._setContent(e,o,c);const n=e.children[0],r=this._resolvePossibleFunction(this._config.extraClass);return r&&n.classList.add(...r.split(" ")),n}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[n,r]of Object.entries(e))super._typeCheckConfig({selector:n,entry:r},Lu)}_setContent(e,n,r){const c=H.findOne(r,e);if(c){if(n=this._resolvePossibleFunction(n),!n){c.remove();return}if(gt(n)){this._putElementInTemplate(Ct(n),c);return}if(this._config.html){c.innerHTML=this._maybeSanitize(n);return}c.textContent=n}}_maybeSanitize(e){return this._config.sanitize?Ou(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return Fe(e,[void 0,this])}_putElementInTemplate(e,n){if(this._config.html){n.innerHTML="",n.append(e);return}n.textContent=e.textContent}}const Pu="tooltip",Ru=new Set(["sanitize","allowList","sanitizeFn"]),Bs="fade",Hu="modal",Gn="show",Fu=".tooltip-inner",Wi=`.${Hu}`,ji="hide.bs.modal",mn="hover",Us="focus",Vu="click",Wu="manual",ju="hide",Bu="hidden",Uu="show",Yu="shown",Ku="inserted",qu="click",zu="focusin",Gu="focusout",Qu="mouseenter",Xu="mouseleave",Ju={AUTO:"auto",TOP:"top",RIGHT:Je()?"left":"right",BOTTOM:"bottom",LEFT:Je()?"right":"left"},Zu={allowList:ho,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},eh={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Et extends at{constructor(e,n){if(typeof Ha>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(e,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Zu}static get DefaultType(){return eh}static get NAME(){return Pu}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),T.off(this._element.closest(Wi),ji,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=T.trigger(this._element,this.constructor.eventName(Uu)),r=(Wa(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!r)return;this._disposePopper();const c=this._getTipElement();this._element.setAttribute("aria-describedby",c.getAttribute("id"));const{container:o}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(o.append(c),T.trigger(this._element,this.constructor.eventName(Ku))),this._popper=this._createPopper(c),c.classList.add(Gn),"ontouchstart"in document.documentElement)for(const l of[].concat(...document.body.children))T.on(l,"mouseover",cs);const i=()=>{T.trigger(this._element,this.constructor.eventName(Yu)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(i,this.tip,this._isAnimated())}hide(){if(!this._isShown()||T.trigger(this._element,this.constructor.eventName(ju)).defaultPrevented)return;if(this._getTipElement().classList.remove(Gn),"ontouchstart"in document.documentElement)for(const c of[].concat(...document.body.children))T.off(c,"mouseover",cs);this._activeTrigger[Vu]=!1,this._activeTrigger[Us]=!1,this._activeTrigger[mn]=!1,this._isHovered=null;const r=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),T.trigger(this._element,this.constructor.eventName(Bu)))};this._queueCallback(r,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const n=this._getTemplateFactory(e).toHtml();if(!n)return null;n.classList.remove(Bs,Gn),n.classList.add(`bs-${this.constructor.NAME}-auto`);const r=Vl(this.constructor.NAME).toString();return n.setAttribute("id",r),this._isAnimated()&&n.classList.add(Bs),n}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new Iu({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Fu]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Bs)}_isShown(){return this.tip&&this.tip.classList.contains(Gn)}_createPopper(e){const n=Fe(this._config.placement,[this,e,this._element]),r=Ju[n.toUpperCase()];return kr(this._element,e,this._getPopperConfig(r))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_resolvePossibleFunction(e){return Fe(e,[this._element,this._element])}_getPopperConfig(e){const n={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:r=>{this._getTipElement().setAttribute("data-popper-placement",r.state.placement)}}]};return{...n,...Fe(this._config.popperConfig,[void 0,n])}}_setListeners(){const e=this._config.trigger.split(" ");for(const n of e)if(n==="click")T.on(this._element,this.constructor.eventName(qu),this._config.selector,r=>{this._initializeOnDelegatedTarget(r).toggle()});else if(n!==Wu){const r=n===mn?this.constructor.eventName(Qu):this.constructor.eventName(zu),c=n===mn?this.constructor.eventName(Xu):this.constructor.eventName(Gu);T.on(this._element,r,this._config.selector,o=>{const i=this._initializeOnDelegatedTarget(o);i._activeTrigger[o.type==="focusin"?Us:mn]=!0,i._enter()}),T.on(this._element,c,this._config.selector,o=>{const i=this._initializeOnDelegatedTarget(o);i._activeTrigger[o.type==="focusout"?Us:mn]=i._element.contains(o.relatedTarget),i._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},T.on(this._element.closest(Wi),ji,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,n){clearTimeout(this._timeout),this._timeout=setTimeout(e,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const n=vt.getDataAttributes(this._element);for(const r of Object.keys(n))Ru.has(r)&&delete n[r];return e={...n,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:Ct(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[n,r]of Object.entries(this._config))this.constructor.Default[n]!==r&&(e[n]=r);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const n=Et.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}et(Et);const th="popover",nh=".popover-header",sh=".popover-body",rh={...Et.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},ih={...Et.DefaultType,content:"(null|string|element|function)"};class Dr extends Et{static get Default(){return rh}static get DefaultType(){return ih}static get NAME(){return th}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[nh]:this._getTitle(),[sh]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const n=Dr.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}et(Dr);const ah="scrollspy",oh="bs.scrollspy",Lr=`.${oh}`,lh=".data-api",ch=`activate${Lr}`,Bi=`click${Lr}`,dh=`load${Lr}${lh}`,uh="dropdown-item",Kt="active",hh='[data-bs-spy="scroll"]',Ys="[href]",fh=".nav, .list-group",Ui=".nav-link",ph=".nav-item",mh=".list-group-item",_h=`${Ui}, ${ph} > ${Ui}, ${mh}`,gh=".dropdown",vh=".dropdown-toggle",bh={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},yh={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class vs extends at{constructor(e,n){super(e,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return bh}static get DefaultType(){return yh}static get NAME(){return ah}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=Ct(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(n=>Number.parseFloat(n))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(T.off(this._config.target,Bi),T.on(this._config.target,Bi,Ys,e=>{const n=this._observableSections.get(e.target.hash);if(n){e.preventDefault();const r=this._rootElement||window,c=n.offsetTop-this._element.offsetTop;if(r.scrollTo){r.scrollTo({top:c,behavior:"smooth"});return}r.scrollTop=c}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(n=>this._observerCallback(n),e)}_observerCallback(e){const n=i=>this._targetLinks.get(`#${i.target.id}`),r=i=>{this._previousScrollData.visibleEntryTop=i.target.offsetTop,this._process(n(i))},c=(this._rootElement||document.documentElement).scrollTop,o=c>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=c;for(const i of e){if(!i.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(i));continue}const l=i.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(o&&l){if(r(i),!c)return;continue}!o&&!l&&r(i)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=H.find(Ys,this._config.target);for(const n of e){if(!n.hash||wt(n))continue;const r=H.findOne(decodeURI(n.hash),this._element);dn(r)&&(this._targetLinks.set(decodeURI(n.hash),n),this._observableSections.set(n.hash,r))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(Kt),this._activateParents(e),T.trigger(this._element,ch,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(uh)){H.findOne(vh,e.closest(gh)).classList.add(Kt);return}for(const n of H.parents(e,fh))for(const r of H.prev(n,_h))r.classList.add(Kt)}_clearActiveClass(e){e.classList.remove(Kt);const n=H.find(`${Ys}.${Kt}`,e);for(const r of n)r.classList.remove(Kt)}static jQueryInterface(e){return this.each(function(){const n=vs.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}T.on(window,dh,()=>{for(const t of H.find(hh))vs.getOrCreateInstance(t)});et(vs);const Eh="tab",Nh="bs.tab",Bt=`.${Nh}`,Ah=`hide${Bt}`,Th=`hidden${Bt}`,Ch=`show${Bt}`,wh=`shown${Bt}`,Sh=`click${Bt}`,xh=`keydown${Bt}`,kh=`load${Bt}`,Oh="ArrowLeft",Yi="ArrowRight",$h="ArrowUp",Ki="ArrowDown",Ks="Home",qi="End",It="active",zi="fade",qs="show",Mh="dropdown",fo=".dropdown-toggle",Dh=".dropdown-menu",zs=`:not(${fo})`,Lh='.list-group, .nav, [role="tablist"]',Ih=".nav-item, .list-group-item",Ph=`.nav-link${zs}, .list-group-item${zs}, [role="tab"]${zs}`,po='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Gs=`${Ph}, ${po}`,Rh=`.${It}[data-bs-toggle="tab"], .${It}[data-bs-toggle="pill"], .${It}[data-bs-toggle="list"]`;class on extends at{constructor(e){super(e),this._parent=this._element.closest(Lh),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),T.on(this._element,xh,n=>this._keydown(n)))}static get NAME(){return Eh}show(){const e=this._element;if(this._elemIsActive(e))return;const n=this._getActiveElem(),r=n?T.trigger(n,Ah,{relatedTarget:e}):null;T.trigger(e,Ch,{relatedTarget:n}).defaultPrevented||r&&r.defaultPrevented||(this._deactivate(n,e),this._activate(e,n))}_activate(e,n){if(!e)return;e.classList.add(It),this._activate(H.getElementFromSelector(e));const r=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(qs);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),T.trigger(e,wh,{relatedTarget:n})};this._queueCallback(r,e,e.classList.contains(zi))}_deactivate(e,n){if(!e)return;e.classList.remove(It),e.blur(),this._deactivate(H.getElementFromSelector(e));const r=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(qs);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),T.trigger(e,Th,{relatedTarget:n})};this._queueCallback(r,e,e.classList.contains(zi))}_keydown(e){if(![Oh,Yi,$h,Ki,Ks,qi].includes(e.key))return;e.stopPropagation(),e.preventDefault();const n=this._getChildren().filter(c=>!wt(c));let r;if([Ks,qi].includes(e.key))r=n[e.key===Ks?0:n.length-1];else{const c=[Yi,Ki].includes(e.key);r=Or(n,e.target,c,!0)}r&&(r.focus({preventScroll:!0}),on.getOrCreateInstance(r).show())}_getChildren(){return H.find(Gs,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,n){this._setAttributeIfNotExists(e,"role","tablist");for(const r of n)this._setInitialAttributesOnChild(r)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const n=this._elemIsActive(e),r=this._getOuterElement(e);e.setAttribute("aria-selected",n),r!==e&&this._setAttributeIfNotExists(r,"role","presentation"),n||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const n=H.getElementFromSelector(e);n&&(this._setAttributeIfNotExists(n,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,n){const r=this._getOuterElement(e);if(!r.classList.contains(Mh))return;const c=(o,i)=>{const l=H.findOne(o,r);l&&l.classList.toggle(i,n)};c(fo,It),c(Dh,qs),r.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(e,n,r){e.hasAttribute(n)||e.setAttribute(n,r)}_elemIsActive(e){return e.classList.contains(It)}_getInnerElement(e){return e.matches(Gs)?e:H.findOne(Gs,e)}_getOuterElement(e){return e.closest(Ih)||e}static jQueryInterface(e){return this.each(function(){const n=on.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}T.on(document,Sh,po,function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),!wt(this)&&on.getOrCreateInstance(this).show()});T.on(window,kh,()=>{for(const t of H.find(Rh))on.getOrCreateInstance(t)});et(on);const Hh="toast",Fh="bs.toast",Ot=`.${Fh}`,Vh=`mouseover${Ot}`,Wh=`mouseout${Ot}`,jh=`focusin${Ot}`,Bh=`focusout${Ot}`,Uh=`hide${Ot}`,Yh=`hidden${Ot}`,Kh=`show${Ot}`,qh=`shown${Ot}`,zh="fade",Gi="hide",Qn="show",Xn="showing",Gh={animation:"boolean",autohide:"boolean",delay:"number"},Qh={animation:!0,autohide:!0,delay:5e3};class Ln extends at{constructor(e,n){super(e,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Qh}static get DefaultType(){return Gh}static get NAME(){return Hh}show(){if(T.trigger(this._element,Kh).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(zh);const n=()=>{this._element.classList.remove(Xn),T.trigger(this._element,qh),this._maybeScheduleHide()};this._element.classList.remove(Gi),On(this._element),this._element.classList.add(Qn,Xn),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown()||T.trigger(this._element,Uh).defaultPrevented)return;const n=()=>{this._element.classList.add(Gi),this._element.classList.remove(Xn,Qn),T.trigger(this._element,Yh)};this._element.classList.add(Xn),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Qn),super.dispose()}isShown(){return this._element.classList.contains(Qn)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,n){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=n;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=n;break}}if(n){this._clearTimeout();return}const r=e.relatedTarget;this._element===r||this._element.contains(r)||this._maybeScheduleHide()}_setListeners(){T.on(this._element,Vh,e=>this._onInteraction(e,!0)),T.on(this._element,Wh,e=>this._onInteraction(e,!1)),T.on(this._element,jh,e=>this._onInteraction(e,!0)),T.on(this._element,Bh,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const n=Ln.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}ms(Ln);et(Ln);const Qs=({value:t,maxValue:e,color:n,labelLeft:r=null,labelCenter:c=null,labelRight:o=null,className:i="",isOverlay:l=!1,trailingStartValue:d=null,trailColor:s="rgba(128, 128, 128, 0.5)"})=>{const u=Math.min(Math.max(t/e*100,0),100);let f=0;d!==null&&(f=Math.min(Math.max(d/e*100,0),100));let p={};return typeof n=="object"&&n.from&&n.to?p.backgroundImage=`linear-gradient(to right, ${n.from}, ${n.to} 100%)`:p.backgroundColor=n,a("div",{class:`progress-bar-pointed-container ${i} ${l?"progress-bar-pointed-container--overlay":""}`,children:[r&&a("span",{class:"progress-bar-pointed__label progress-bar-pointed__label--left",children:r}),d!==null&&a("div",{class:"progress-bar-pointed__trail",style:{width:`${f}%`,backgroundColor:s,"--progress-trail-color":s}}),a("div",{class:"progress-bar-pointed__fill",style:{width:`${u}%`,...p},children:c&&a("span",{class:"progress-bar-pointed__label progress-bar-pointed__label--center",children:c})}),o&&a("span",{class:"progress-bar-pointed__label progress-bar-pointed__label--right",children:o})]})};function Xh(){const{characterStats:t,setCharacterStats:e}=qe(mt),[n,r]=G(1),[c,o]=G(!1),[i,l]=G(!1),[d,s]=G(!1),[u,f]=G(!1),[p,_]=G(!1),[y,A]=G(null),[C,$]=G(null),[M,B]=G(!1),[I,W]=G(!1),[Y,Q]=G(!1),X=Be(null),R=Be(null),F=Be(null),U=Be(null),Z=Be(null),le=300,Ne=600,[de,ie]=G(!1);ge(()=>{const he=[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map(ye=>new Et(ye));return()=>{he.forEach(ye=>{ye&&typeof ye.dispose=="function"&&ye.dispose()})}},[Y]),ge(()=>{if(c){const L=setTimeout(()=>o(!1),300);return()=>clearTimeout(L)}},[c]),ge(()=>{if(d){const L=setTimeout(()=>s(!1),300);return()=>clearTimeout(L)}},[d]),ge(()=>{if(i){const L=setTimeout(()=>l(!1),300);return()=>clearTimeout(L)}},[i]),ge(()=>{if(u){const L=setTimeout(()=>f(!1),300);return()=>clearTimeout(L)}},[u]),ge(()=>{if(p){const L=setTimeout(()=>_(!1),300);return()=>clearTimeout(L)}},[p]),ge(()=>{const L=ye=>{ye.key==="Control"&&Q(!0)},he=ye=>{ye.key==="Control"&&Q(!1)};return window.addEventListener("keydown",L),window.addEventListener("keyup",he),()=>{window.removeEventListener("keydown",L),window.removeEventListener("keyup",he)}},[]);const ae=L=>{e(he=>({...he,...L}))};ge(()=>{(t.currentMp===void 0||t.maxMp===void 0)&&e(L=>({...L,currentMp:L.currentMp||0,maxMp:L.maxMp||10}))},[]);const N=()=>{X.current&&(clearTimeout(X.current),X.current=null),R.current&&(clearTimeout(R.current),R.current=null);const L=t.tempHealth||0;let he=!1;A(t.currentHealth),L>0?($(L),he=!0):$(null);let ye=L,ze=t.currentHealth,lt=n,Nt=!1,h=!1;if(ye>0){const V=Math.min(lt,ye);V>0&&(ye-=V,lt-=V,s(!0),W(!0),Nt=!0)}if(lt>0&&ze>0){const V=Math.min(lt,ze);V>0&&(ze=Math.max(0,ze-V),o(!0),B(!0),h=!0)}h&&setTimeout(()=>B(!1),200),Nt&&setTimeout(()=>W(!1),200),setTimeout(()=>{e(Ut=>({...Ut,currentHealth:ze,tempHealth:ye}));const V=1e3;X.current=setTimeout(()=>{A(ze)},V),he&&(R.current=setTimeout(()=>{$(ye)},V))},50),r(1)},k=()=>{l(!0);const L=Math.max(1,(t.maxHealth||0)-Un(t.conditions,t.level||1));ae({currentHealth:Math.min(L,t.currentHealth+n)}),r(1)},K=()=>{_(!0),ae({tempHealth:(t.tempHealth||0)+n}),r(1)},Ce=()=>{f(!0),ae({currentMp:Math.max(0,t.currentMp-n)}),r(1)},xe=()=>{f(!0),ae({currentMp:Math.min(t.maxMp,t.currentMp+n)})},Pe=()=>{const L=Math.max(1,(t.maxHealth||0)-Un(t.conditions,t.level||1)),he=Math.max(0,Math.min(L,n));ae({currentHealth:he}),l(!0),r(1)},Ae=()=>{const L=Math.max(0,Math.min(t.maxMp,n));ae({currentMp:L}),f(!0),r(1)},ve=()=>{ae({tempHealth:0}),s(!0)},ke=()=>{if(t.maxHealth===void 0)return;const L=Math.max(1,(t.maxHealth||0)-Un(t.conditions,t.level||1));ae({currentHealth:L}),l(!0)},Te=()=>{t.maxMp!==void 0&&(ae({currentMp:t.maxMp}),f(!0))},be=L=>{L.type==="touchstart"&&L.preventDefault(),ie(!0),Z.current=setTimeout(()=>{ke(),ve(),A(t.maxHealth||ee),$(0),ie(!1),F.current&&(clearTimeout(F.current),F.current=null)},Ne)},pe=L=>{L.type==="touchstart"&&L.preventDefault(),ie(!0),Z.current=setTimeout(()=>{Te(),ie(!1),U.current&&(clearTimeout(U.current),U.current=null)},Ne)},tt=L=>{if(Z.current&&(clearTimeout(Z.current),Z.current=null,de&&L.type==="touchend")){const he=L.currentTarget.getAttribute("data-bar-type");he==="hp"?nt():he==="mp"&&ot()}ie(!1)},Oe=()=>{Z.current&&(clearTimeout(Z.current),Z.current=null),ie(!1)},nt=()=>{de||(F.current?(clearTimeout(F.current),F.current=null,ke(),ve(),A(t.maxHealth||ee),$(0)):(Pe(),F.current=setTimeout(()=>{F.current=null},le)))},ot=()=>{de||(U.current?(clearTimeout(U.current),U.current=null,Te()):(Ae(),U.current=setTimeout(()=>{U.current=null},le)))},E=t.currentHealth||0,j=t.maxHealth||0,O=Un(t.conditions,t.level||1),ee=Math.max(1,j-O),ue=t.tempHealth||0,st=t.currentMp||0,$e=Math.max(1,t.maxMp||0);return a("div",{className:"hit-points-component-container container-fluid mb-4",children:[a("div",{className:"row align-items-center mb-3",children:[a(Wt,{title:"VITALS",containerClassName:"mb-3"}),a("div",{className:"d-flex flex-column flex-sm-row justify-content-between align-items-center gap-3",children:[a("div",{className:"input-group amount-input-container d-flex",style:{width:"auto",alignItems:"center",flexWrap:"nowrap"},children:[a("button",{onClick:Ce,className:"btn btn-outline-primary btn-icon-square d-flex flex-column align-items-center justify-content-center","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Use MP",style:{width:"50px",height:"50px"},children:[a("i",{className:"fas fa-bolt-lightning"}),a("span",{style:{fontSize:"0.5em"},children:"MP"})]}),a("button",{onClick:N,className:"btn btn-icon-square btn-outline-danger","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Damage HP","data-bs-original-title":"Damage HP",style:{width:"50px",height:"50px"},children:a("i",{className:"fas fa-heart-circle-minus"})}),a("input",{type:"number",value:n,onChange:L=>r(Math.max(0,parseInt(L.currentTarget.value)||0)),className:"form-control text-center bg-dark text-light",min:"0",style:{width:"75px",height:"50px"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Enter amount to heal or damage","aria-label":"Amount for HP/MP changes"}),a("button",{onClick:k,className:"btn btn-icon-square btn-outline-success","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Heal HP","data-bs-original-title":"Heal HP",style:{width:"50px",height:"50px"},children:a("i",{className:"fas fa-heart-circle-plus"})}),a("button",{onClick:xe,className:"btn btn-outline-info btn-icon-square d-flex flex-column align-items-center justify-content-center","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Restore MP","data-bs-original-title":"Restore MP",style:{width:"50px",height:"50px"},children:[a("i",{className:"fas fa-droplet"}),a("span",{style:{fontSize:"0.5em"},children:"MP"})]})]}),a("div",{className:"d-flex gap-2 align-items-center",children:[a("button",{onClick:ve,className:"dark-btn dark-btn-secondary d-flex align-items-center gap-2","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Clear Temporary HP","data-bs-original-title":"Clear Temporary HP",children:[a("span",{children:"Clear Temp"}),a("i",{className:"fas fa-times-circle"})]}),a("button",{onClick:K,className:"dark-btn dark-btn-primary d-flex align-items-center gap-2","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Heal Temporary HP","data-bs-original-title":"Heal Temporary HP",children:[a("span",{children:"Heal Temp"}),a("i",{className:"fas fa-heart-pulse"})]})]})]})]}),a("div",{className:"mb-3",children:[a("div",{style:{position:"relative",cursor:"pointer"},className:"mb-2",onClick:L=>{L.type!=="touchend"&&nt()},onMouseDown:be,onMouseUp:tt,onMouseLeave:Oe,onTouchStart:be,onTouchEnd:tt,onTouchCancel:Oe,onContextMenu:L=>L.preventDefault(),"data-bar-type":"hp","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Click to Set HP to ${n}, Long press/double click to reset HP & Temp HP`,"data-bs-original-title":`Click to Set HP to ${n}, Long press/double click to reset HP & Temp HP`,children:[a(Qs,{value:E,maxValue:ee,color:{from:"#ef4444",to:"#e11d48"},labelRight:(()=>{const L=t.maxHealth||0;return O>0?`${E} / ${ee} (${L} - ${O})`:`${E} / ${ee}`})(),trailingStartValue:y,trailColor:"rgba(200, 0, 0, 0.7)",className:M?"progress-bar-damage-flash":""}),(ue>0||C!==null)&&a(Qs,{value:ue,maxValue:ee,color:{from:"#21d2ec",to:"#14b8a7"},labelCenter:ue>0?`${ue} Temp`:"",isOverlay:!0,className:`health-overlay-bar ${I?"progress-bar-damage-flash":""}`,trailingStartValue:C,trailColor:"rgba(0, 50, 200, 0.7)"})]}),"                ",a("div",{style:{cursor:"pointer"},onClick:L=>{L.type!=="touchend"&&ot()},onMouseDown:pe,onMouseUp:tt,onMouseLeave:Oe,onTouchStart:pe,onTouchEnd:tt,onTouchCancel:Oe,onContextMenu:L=>L.preventDefault(),"data-bar-type":"mp","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Click to Set MP to ${n}, Long press/double click to Full Restore MP`,"data-bs-original-title":`Click to Set MP to ${n}, Long press/double click to Full Restore MP`,children:a(Qs,{value:st,maxValue:$e,color:{from:"#3c82f6",to:"#6366f1"},labelRight:`${st} / ${$e}`,className:u?"progress-bar-damage-flash":"",trailingStartValue:st,trailColor:"rgba(0, 50, 200, 0.7)"})})]})]})}function Jh(){const{spells:t}=ln(),{characterStats:e,setCharacterStats:n}=qe(mt),r=()=>{const f=(e.speed||fi)+Pt(t,"speed"),p=we(e.conditions);return p.speedOverride===0?0:Math.max(0,f+p.speedModifier)},c=()=>{const f=e.AC||hi,p=we(e.conditions);return f+p.acModifier},o=f=>{n(p=>({...p,...f}))},i=f=>{const p=f.currentTarget,_=Math.max(1,parseInt(p.value)||Go);o({maxHealth:_}),e.currentHealth>_&&o({currentHealth:_})},l=f=>{const p=f.currentTarget,_=Math.max(1,parseInt(p.value)||1);o({maxMp:_}),e.currentMp>_&&o({currentMp:_})},d=f=>{const p=f.currentTarget,_=Math.max(0,parseInt(p.value)||hi);n(y=>({...y,AC:_}))},s=f=>{const p=f.currentTarget,_=Math.max(0,parseInt(p.value)||fi);n(y=>({...y,speed:_}))},u=f=>{const p=f.currentTarget,_=Math.max(1,parseInt(p.value)||1);o({level:_})};return a("div",{className:"character-overview-component container-fluid mb-4",children:[a("div",{className:"row align-items-center mb-3 d-none d-md-flex",children:[a("div",{className:"col-auto",children:a("div",{className:"d-flex gap-2",children:[a("div",{className:"text-center",children:[a("small",{className:"d-block mb-1 text-secondary",children:"Speed"}),a("input",{type:"number",className:`form-control form-control box-no-input text-center bg-dark ${we(e.conditions).speedModifier!==0||we(e.conditions).speedOverride===0?"text-warning":"text-light"}`,id:"speedInput",value:r(),readOnly:!0,"aria-label":"Speed",title:we(e.conditions).speedModifier!==0||we(e.conditions).speedOverride===0?"Speed modified by conditions":"Speed"})]}),a("div",{className:"text-center",children:[a("small",{className:"d-block mb-1 text-secondary",children:"AC"}),a("input",{type:"number",className:`form-control box-no-input text-center bg-dark ${we(e.conditions).acModifier!==0?"text-warning":"text-light"}`,id:"acInput",value:c(),readOnly:!0,"aria-label":"Armor Class",title:we(e.conditions).acModifier!==0?"AC modified by conditions":"Armor Class"})]})]})}),a("div",{className:"col-auto ms-auto",children:a("div",{className:"d-flex gap-2",children:[a("div",{className:"text-center",children:[a("small",{className:"d-block mb-1 text-secondary",children:"Base AC"}),a("input",{type:"number",className:"form-control form-control hp-input text-center bg-dark text-light",id:"baseACInput",value:e.AC||10,onChange:d,min:"0","aria-label":"Base Armor Class"})]}),a("div",{className:"text-center",children:[a("small",{className:"d-block mb-1 text-secondary",children:"Base Speed"}),a("input",{type:"number",className:"form-control form-control hp-input text-center bg-dark text-light",id:"baseSpeedInput",value:e.speed||15,onChange:s,min:"0","aria-label":"Base Speed"})]}),a("div",{className:"text-center",children:[a("small",{className:"d-block mb-1 text-secondary",children:"Level"}),a("input",{type:"number",className:"form-control form-control hp-input text-center bg-dark text-light",id:"levelInput",value:e.level||1,onChange:u,min:"1","aria-label":"Character Level"})]}),a("div",{className:"text-center",children:[a("small",{className:"d-block mb-1 text-secondary",children:"Max HP"}),a("input",{type:"number",className:"form-control form-control hp-input text-center bg-dark text-light",id:"maxHealthInput",value:e.maxHealth||35,onChange:i,min:"1","aria-label":"Maximum Hit Points"})]}),a("div",{className:"text-center",children:[a("small",{className:"d-block mb-1 text-secondary",children:"Max MP"}),a("input",{type:"number",className:"form-control form-control hp-input text-center bg-dark text-light",id:"maxMpInput",value:e.maxMp||1,onChange:l,min:"1","aria-label":"Maximum Mana Points"})]})]})})]}),a("div",{className:"d-md-none",children:[a("div",{className:"row mb-3",children:[a("div",{className:"col-6",children:a("div",{className:"text-center p-2 border rounded bg-dark",children:[a("small",{className:"d-block mb-2 text-secondary fw-bold",children:"SPEED"}),a("div",{className:`fs-4 fw-bold ${we(e.conditions).speedModifier!==0||we(e.conditions).speedOverride===0?"text-warning":"text-light"}`,title:we(e.conditions).speedModifier!==0||we(e.conditions).speedOverride===0?"Speed modified by conditions":"Speed",children:r()})]})}),a("div",{className:"col-6",children:a("div",{className:"text-center p-2 border rounded bg-dark",children:[a("small",{className:"d-block mb-2 text-secondary fw-bold",children:"AC"}),a("div",{className:`fs-4 fw-bold ${we(e.conditions).acModifier!==0?"text-warning":"text-light"}`,title:we(e.conditions).acModifier!==0?"AC modified by conditions":"Armor Class",children:c()})]})})]}),a("div",{className:"row mb-2",children:[a("div",{className:"col-6",children:a("div",{className:"text-center",children:[a("small",{className:"d-block mb-1 text-secondary",children:"Base Speed"}),a("input",{type:"number",className:"form-control text-center bg-dark text-light",value:e.speed||15,onChange:s,min:"0","aria-label":"Base Speed",style:{fontSize:"1.1rem",padding:"0.75rem"}})]})}),a("div",{className:"col-6",children:a("div",{className:"text-center",children:[a("small",{className:"d-block mb-1 text-secondary",children:"Base AC"}),a("input",{type:"number",className:"form-control text-center bg-dark text-light",value:e.AC||10,onChange:d,min:"0","aria-label":"Base Armor Class",style:{fontSize:"1.1rem",padding:"0.75rem"}})]})})]}),a("div",{className:"row",children:[a("div",{className:"col-4",children:a("div",{className:"text-center",children:[a("small",{className:"d-block mb-1 text-secondary",children:"Level"}),a("input",{type:"number",className:"form-control text-center bg-dark text-light",value:e.level||1,onChange:u,min:"1","aria-label":"Character Level",style:{fontSize:"1.1rem",padding:"0.75rem"}})]})}),a("div",{className:"col-4",children:a("div",{className:"text-center",children:[a("small",{className:"d-block mb-1 text-secondary",children:"Max HP"}),a("input",{type:"number",className:"form-control text-center bg-dark text-light",value:e.maxHealth||35,onChange:i,min:"1","aria-label":"Maximum Hit Points",style:{fontSize:"1.1rem",padding:"0.75rem"}})]})}),a("div",{className:"col-4",children:a("div",{className:"text-center",children:[a("small",{className:"d-block mb-1 text-secondary",children:"Max MP"}),a("input",{type:"number",className:"form-control text-center bg-dark text-light",value:e.maxMp||1,onChange:l,min:"1","aria-label":"Maximum Mana Points",style:{fontSize:"1.1rem",padding:"0.75rem"}})]})})]})]})]})}function Zh(){const{spells:t}=ln(),{characterStats:e,setCharacterStats:n}=qe(mt);return a("div",{className:"character-sheet container-fluid",children:a("div",{className:"column",children:[a(Jh,{}),a("div",{className:"row justify-content-between mb-4",children:[a("div",{className:"col-md-6",children:a(Xh,{})}),a("div",{className:"col-md-6",children:a(Yo,{})})]}),a("div",{className:"row justify-content-center mt-4",children:a("div",{className:"col-12",children:a(jo,{})})})]})})}const bs=()=>{const[t,e]=G(null);return ge(()=>{e(document.createElement("div"))},[]),ge(()=>{if(t)return t.className="toast-container position-fixed bottom-0 end-0 p-3",document.body.appendChild(t),()=>{document.body.removeChild(t)}},[t]),{showToast:(r,c="info-circle",o="primary",i="Notification")=>{if(!t)return;const l=document.createElement("div");l.className="toast",l.setAttribute("role","alert"),l.setAttribute("aria-live","assertive"),l.setAttribute("aria-atomic","true"),l.innerHTML=`
            <div class="toast-header">
                <i class="fas fa-${c} me-2 text-${o}"></i>
                <strong class="me-auto">${i}</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body">
                ${r}
            </div>
        `,t.appendChild(l),new Ln(l,{autohide:!0,delay:3e3}).show(),l.addEventListener("hidden.bs.toast",()=>{t.removeChild(l)})}}},ef=()=>{const{characterStats:t,setCharacterStats:e}=qe(mt),{spells:n}=ln(),{showToast:r}=bs(),c=(d,s)=>{e(u=>({...u,[d]:parseInt(s,10)||0}))},o=Object.entries(t).filter(([d])=>{var s;return((s=Se[d])==null?void 0:s.category)!==je.CORE}).reduce((d,[s,u])=>d+(parseInt(u,10)||0),0),i=d=>{const s=prompt("Enter a DC for the roll (leave blank for normal roll):");if(s===null)return;const u=Math.max(0,parseInt(s,10)),f=(t[d]||0)+Pt(n,d),p=di(t.conditions,d),_=f+p,y=Se[d];let A=`1d20+${_}`;u>1&&(A=`${A}cs>=${u}cf<${u}`);const C=u?`check vs DC ${u}`:"check",$=`&{template:default} {{name=${_r(d)} ${C}}}{{Roll=[[${A}]]}}{{Stat Bonus=[[${f}]] from ${y.shortName}}}`+(p!==0?`{{Condition Modifier=[[${p}]]}}`:"");navigator.clipboard.writeText($);const M=u?`${y.name} roll vs DC ${u} copied! Paste it into Roll20.`:`${y.name} roll command copied! Paste it into Roll20.`;r(M,"clipboard","success","Copied to clipboard")},l=d=>{const s=Object.entries(Se).filter(([u,f])=>f.category===d);return s.length>0&&a("div",{className:"stat-category",children:[a("h6",{className:"stat-category-title text-secondary mb-2",children:d.toUpperCase()}),a("div",{className:"stat-grid",children:s.map(([u,f])=>a("div",{className:"stat-group mb-2",title:`${f.name} ${f.description}`,"data-bs-toggle":"tooltip","data-bs-placement":"top",children:a("div",{className:"input-group",children:[a("span",{className:`input-group-text gap-1 text-${f.color}`,onClick:()=>i(u),style:{cursor:"pointer"},children:[a("i",{className:`fas ${f.icon}`})," ",a("span",{className:"stat-text",children:f.shortName})]}),a("input",{type:"number",className:"form-control",value:t[u]||0,onChange:p=>c(u,p.currentTarget.value)}),a("span",{className:"input-group-text",children:[a("i",{className:`fas ${Pt(n,u)?"":"fa-link-slash"} text-muted`}),(()=>{const p=Pt(n,u),_=di(t.conditions,u),y=p+_;return y>0?a("div",{children:[a("span",{className:"text-secondary ms-1",children:["+",y," ="]}),a("span",{className:"text-muted ms-1",children:t[u]+y})]}):y<0?a("div",{children:[a("span",{className:"text-danger ms-1",children:[y," ="]}),a("span",{className:"text-muted ms-1",children:t[u]+y})]}):null})()]})]})},u))})]})};return a("div",{className:"character-stats",children:[a(Wt,{title:"STATS",lineMaxWidth:"50px",containerClassName:"mb-1"}),a("h6",{className:"stat-category-title text-danger mb-4",children:["BASE ALLOCATED POINTS: ",o]}),l(je.PHYSICAL),l(je.MAGICAL),l(je.UTILITY)]})},tf=({spellToDelete:t,confirmDelete:e,setSpellToDelete:n})=>a("div",{className:`modal fade ${t?"show":""}`,style:{display:t?"block":"none"},tabIndex:-1,children:a("div",{className:"modal-dialog",children:a("div",{className:"modal-content",children:[a("div",{className:"modal-header",children:[a("h5",{className:"modal-title",children:"Confirm Deletion"}),a("button",{type:"button",className:"btn-close",onClick:()=>n(null),"aria-label":"Close"})]}),a("div",{className:"modal-body",children:"Are you sure you want to delete this spell?"}),a("div",{className:"modal-footer",children:[a("button",{type:"button",className:"btn btn-secondary",onClick:()=>n(null),children:"No, Keep It"}),a("button",{type:"button",className:"btn btn-danger",onClick:e,children:"Yes, Delete It"})]})]})})}),nf=({isModalOpen:t,closeModal:e,spellBeingEdited:n,currentSpell:r,setCurrentSpell:c,incrementPower:o,decrementPower:i,getSpellRank:l,getActionLabel:d,validateDiceRoll:s,diceError:u,saveSpell:f,removeSpell:p})=>a("div",{className:`modal ${t?"show":""}`,style:{display:t?"block":"none"},tabIndex:-1,children:a("div",{className:"modal-dialog",children:a("div",{className:"modal-content",children:[a("div",{className:"modal-header",children:[a("h5",{className:"modal-title",children:n?"Edit Spell Entry":"Add Spell"}),a("button",{type:"button",className:"btn-close",onClick:e})]}),a("div",{className:"modal-body",children:[a("div",{className:"mb-2",children:[a("label",{className:"form-label",children:"Spell Name"}),a("input",{type:"text",className:"form-control",placeholder:"Spell Name",value:r.name,onInput:_=>c({...r,name:_.currentTarget.value})})]}),a("div",{className:"mb-2",children:[a("label",{className:"form-label",children:"Spell Level"}),a("div",{className:"input-group",children:[a("button",{className:"btn btn-outline-secondary",type:"button",onClick:i,disabled:r.power<=1,children:a("i",{className:"fas fa-minus"})}),a("input",{type:"number",className:`form-control ${r.power<=0?"is-invalid":""}`,placeholder:"Spell Level",min:"1",value:r.power,onInput:_=>{const y=Math.max(1,parseInt(_.currentTarget.value,10)||1);c({...r,power:y,rank:l(y)})}}),a("button",{className:"btn btn-outline-secondary",type:"button",onClick:o,children:a("i",{className:"fas fa-plus"})}),r.power<=0&&a("div",{className:"invalid-feedback",children:"Spell level must be at least 1"})]})]}),a("div",{className:"alert alert-info py-1 mb-2",children:[a("i",{className:"fas fa-link me-2"}),a("small",{className:"text-muted d-block mt-1",children:["This spell's ",a("a",{href:"https://docs.google.com/document/d/1ZTxCemR8j6GhIMqhvmBd7kOo8wNsOisO_vOutlQBYv0/edit?tab=t.0",target:"_blank",children:"Soul Link Rank"})," will be ",a("b",{children:[l(r.power),"."]})]})]}),a("label",{className:"form-label",children:"Actions to Cast"}),a("div",{className:"input-group mb-2",children:[a("span",{className:"input-group-text",children:d(r.actions)}),a("select",{className:"form-select",value:r.actions,onChange:_=>c({...r,actions:parseInt(_.currentTarget.value)}),children:[a("option",{value:"1",children:"1 Action"}),a("option",{value:"2",children:"2 Actions"}),a("option",{value:"3",children:"3 Actions"}),a("option",{value:"0",children:"Free Action"})]})]}),a("label",{className:"form-label",children:"Element"}),a("div",{className:"input-group mb-2",children:[a("span",{className:"input-group-text",children:it(r.element)}),a("select",{className:"form-select",value:r.element,onChange:_=>c({...r,element:_.currentTarget.value}),children:Object.entries(re).map(([_,y])=>a("option",{value:y,children:y},_))})]}),a("label",{className:"form-label",children:"Damage Roll(s)"}),a("div",{className:"input-group mb-2",children:[a("span",{className:"input-group-text",children:a("i",{className:"fas fa-dice-d20"})}),a("input",{type:"text",className:`form-control ${u?"is-invalid":""}`,placeholder:"Dice Roll (e.g. 1d4)",value:r.dice,onInput:_=>{const y=_.currentTarget.value;c({...r,dice:y}),s(y)}}),u&&a("div",{className:"invalid-feedback",children:u})]}),a("div",{className:"alert alert-info py-1 mb-2",children:[a("i",{className:"fas fa-info-circle me-2"}),a("small",{children:"Use [stat] to include a stat's value (e.g., [strength] + 1d6)"})]}),a("div",{className:"mb-2",children:[a("label",{className:"form-label",children:"Spell Description"}),a("textarea",{className:"form-control",placeholder:"Spell Description",value:r.description,onInput:_=>c({...r,description:_.currentTarget.value})})]}),a("div",{className:"mb-2",children:[a("label",{className:"form-label",children:["Amount currently stocked ",a("i",{children:'("Spell Charges")'})]}),a("div",{className:"input-group",children:a("input",{type:"number",className:`form-control ${r.quantity<0||r.quantity>Tt?"is-invalid":""}`,placeholder:"Quantity",min:"0",max:Tt.toString(),value:r.quantity,onInput:_=>{const y=parseInt(_.currentTarget.value,10)||0;y>Tt?c({...r,quantity:Tt}):c({...r,quantity:Math.max(0,y)})}})})]})]}),a("div",{className:"modal-footer",children:[a("button",{type:"button",className:"btn btn-secondary",onClick:e,children:[a("i",{className:"fas fa-times me-1"}),"Close"]}),n&&a("button",{type:"button",className:"btn btn-danger",onClick:()=>p(n.id),children:[a("i",{className:"fas fa-trash-alt me-1"}),"Delete"]}),a("button",{type:"button",className:"btn btn-success",onClick:f,children:[a("i",{className:`fas ${n?"fa-save":"fa-plus"} me-1`}),n?"Save Changes":"Add Spell"]})]})]})})}),sf=({isLinkModalOpen:t,closeLinkModal:e,currentSpell:n,setCurrentSpell:r,saveSpell:c,getLinkedStats:o})=>{var l;if(!n)return null;const{spells:i}=ln();return a("div",{className:`modal fade ${t?"show":""}`,style:{display:t?"block":"none"},tabIndex:-1,children:a("div",{className:"modal-dialog",children:a("div",{className:"modal-content",children:[a("div",{className:"modal-header",children:[a("h5",{className:"modal-title",children:`Link ${n.name} to stat`}),a("button",{type:"button",className:"btn-close",onClick:e,"aria-label":"Close"})]}),a("div",{className:"modal-body",children:a("div",{className:"input-group mb-2",children:[a("span",{className:"input-group-text gap-1",children:a("i",{className:`fas ${n.linkedStat&&n.linkedStat!=="None"&&((l=Se[n.linkedStat])==null?void 0:l.icon)||"fa-link-slash"}`})}),a("select",{className:"form-select",value:n.linkedStat||"None",onChange:d=>r({...n,linkedStat:d.currentTarget.value==="None"?null:d.currentTarget.value,isLinked:d.currentTarget.value!=="None"}),children:[a("option",{value:"None",children:"None"}),Object.entries(Se).map(([d,s])=>(!o().includes(d)||d===n.linkedStat)&&s.type!==De.CORE?a("option",{value:d,children:s.name},d):null)]}),a("span",{className:"input-group-text",children:["+",os(n.quantity,n.rank)]})]})}),a("div",{className:"modal-footer",children:[a("button",{type:"button",className:"btn btn-secondary",onClick:e,children:[a("i",{className:"fas fa-times me-1"}),"Close"]}),a("button",{type:"button",className:"btn btn-success",onClick:c,children:[a("i",{className:`fas ${n.id?"fa-save":"fa-plus"} me-1`})," ",n.id?"Save Changes":"Add Spell"]})]})]})})})},rf=()=>{const{characterStats:t,setCharacterStats:e}=qe(mt),{spells:n,setSpells:r,getLinkedStats:c}=ln(),{showToast:o}=bs(),i={name:"",quantity:1,power:1,dice:"",description:"",actions:1,rank:1,isLinked:!1,linkedStat:"None",element:re.PHYS},[l,d]=G(i),[s,u]=G(null),[f,p]=G(!1),[_,y]=G(!1),[A,C]=G(null),[$,M]=G(!1);ge(()=>{const E=O=>{O.key==="Control"&&M(!0)},j=O=>{O.key==="Control"&&M(!1)};return window.addEventListener("keydown",E),window.addEventListener("keyup",j),()=>{window.removeEventListener("keydown",E),window.removeEventListener("keyup",j)}},[]);const B=E=>{var j,O;return E&&((O=(j=t.affinities)==null?void 0:j[E.element])==null?void 0:O.mastered)||!1},I=E=>{E&&W(B(E))},W=E=>{const j=t.luck+Pt(n,"luck")||0,O=Math.min(j,Ls);var ee=`ðŸ€ Luck=[[${j}`;j>Ls?ee+=`]] (+${Ls} max bonus)`:ee+="]]";const st=`${E?2:1}d6cf1 + ${O}[Luck Bonus]`,$e=E?"Draw Spell (Mastery)":"Draw Spell",L=`&{template:default} {{name=${$e}}} {{Charges Gained=[[${st}]]}} {{${ee}}} {{Note=If the number is highlighted red, the true amount of Charges Gained is that total MINUS the Luck Bonus.}}`;navigator.clipboard.writeText(L).then(()=>{o(`${$e} command copied! Paste it into Roll20.`,"clipboard","success","Copied to clipboard")}).catch(he=>{console.error("Failed to copy command: ",he),o("Failed to copy command.","exclamation-triangle","danger","Copy Error")})},Y=E=>{if(E.quantity>0&&E.dice)try{const j=Xt(n,E.dice,t),O=it(E.element),ee=Xt(n,"1d20+[strength]",t);let ue;E.actions===0?ue="Free Action":ue=E.actions===1?"Action":"Actions";const st=`&{template:default} {{name=${E.name}}}                                 {{Actions=${E.actions} ${ue}}}                                 {{Level=**Spell ${E.power}** (S.Link Rank ${E.rank})}}                                 {{Attack=[[${ee}]]}}                                 {{Damage=[[${j}]] ${O} ${E.element}}}                                 ${E.description?`{{Description=${E.description}}}
                                `:""}`;navigator.clipboard.writeText(st),o("Spell roll command copied! Paste it into the text chat on Roll20.","clipboard","success","Copied to clipboard"),k(E.id,"quantity",E.quantity-1)}catch(j){alert(j.message||"Invalid dice format!")}else o("No more charges of this spell remaining!","exclamation-triangle","warning","Cannot cast spell")},Q=(E,j,O)=>{const ee=j-O,ue=`${E.name}: ${O} â†’ ${j} (${ee>=0?"+":""}${ee})`;console.log(ue)},X=E=>{C(A===E?null:E)};ge(()=>{localStorage.setItem("spells",JSON.stringify(n))},[n]),ge(()=>{const j=[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map(O=>new Et(O));return()=>{j.forEach(O=>O.dispose())}},[]);const R=(E=null)=>{u(E),d(E||i),p(!0)},F=()=>{u(null),p(!1)},U=(E=null)=>{u(E),d(E||i),y(!0)},Z=()=>{u(null),y(!1)},[le,Ne]=G(""),de=E=>{const j=ts(E,t);return Ne(j.error||""),j.isValid},ie=()=>{const E=Qo(l);if(E.length>0){alert(`Please fix the following:
${E.join(`
`)}`);return}de(l.dice)&&(r(s?n.map(j=>j.id===s.id?{...l,id:s.id}:j):[...n,{...l,id:Date.now()}]),f&&F(),_&&Z(),console.log("Spell saved:",l))},[ae,N]=G(null),k=(E,j,O)=>{const ee=n.find(ue=>ue.id===E);ee&&(ee.quantity!==O&&(N(E),setTimeout(()=>N(null),300),Q(ee,O,ee.quantity)),r(n.map(ue=>ue.id===E?{...ue,[j]:O}:ue)))},[K,Ce]=G(null),xe=E=>{Ce(E)},Pe=()=>{K&&(n.find(E=>E.id===K),r(n.filter(E=>E.id!==K)),Ce(null),F())},Ae=(E,j)=>{const O=[...n],ee=E+j;ee>=0&&ee<n.length&&([O[E],O[ee]]=[O[ee],O[E]],r(O))},ve=()=>{const E=l.power+1;d({...l,power:E,rank:Ds(E)})},ke=()=>{if(l.power>1){const E=l.power-1;d({...l,power:E,rank:Ds(E)})}},[Te,be]=G(1),pe=E=>{const j=n.find(ee=>ee.id===E),O=Math.min(Tt,j.quantity+Te);k(E,"quantity",O),be(1)},tt=E=>{const j=n.find(ee=>ee.id===E),O=Math.max(0,j.quantity-Te);k(E,"quantity",O),be(1)},Oe=E=>{let j="",O="";switch(E){case 0:j="[free-action]",O="Free Action";break;case 1:j="[one-action]",O="One Action";break;case 2:j="[two-actions]",O="Two Actions";break;case 3:j="[three-actions]",O="Three Actions";break;default:return""}return a("span",{className:"action","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-original-title":O,title:O,role:"img","aria-label":O,children:j})},nt=E=>E.isLinked?"Linked to "+Se[E.linkedStat].name:"No linked stat",ot=E=>{E.isLinked?console.log(`Linked stat: ${E.linkedStat}`):console.log("No linked stat"),U(E)};return a("div",{className:"spell-inventory","data-bs-theme":"dark",children:a("div",{className:"container",children:[a(Wt,{title:"SPELL INVENTORY",lineMaxWidth:"50px"}),a("div",{className:"d-flex align-items-center justify-content-center mb-4",children:[a("button",{className:`dark-btn me-2 ${$?"gold-button":"dark-btn-secondary"}`,onClick:E=>W(E.ctrlKey),style:{width:"160px",height:"60px"},children:a("div",{className:"d-flex flex-column align-items-center",children:[a("div",{children:[a("i",{className:"fas fa-dice me-2"})," ",a("span",{children:"Stock Roll"})]}),a("span",{style:{fontSize:"0.7em"},children:"hold Ctrl for mastery"})]})}),a("button",{className:"dark-btn dark-btn-primary",onClick:()=>R(),style:{width:"160px",height:"60px"},children:[a("i",{className:"fas fa-plus me-2"})," ",a("span",{children:"Add Spell"})]})]}),n.length===0&&a("span",{className:"text-muted text-center d-flex flex-column align-items-center justify-content-center"+(window.innerWidth<=750?" mt-4":""),children:"[ Inventory Empty ]"}),a("ul",{className:"list-group",children:n.map((E,j)=>a("li",{className:`list-group-item spell-item ${ae===E.id?"quantity-flash":""}`,children:[a("div",{class:"d-flex justify-content-left",children:[a("div",{className:"d-flex align-items-center overflow-hidden",style:{flex:"1 1 0"},onClick:()=>X(E.id),children:[a("span",{id:`quantity-badge-${E.id}`,className:"text-black badge quantity-badge me-2",style:{width:"2.5rem",flexShrink:0},children:a("small",{children:E.quantity})}),a("div",{class:"text-truncate",children:[it(E.element)," ",a("span",{className:"arsenal me-2",children:E.name}),a("span",{className:"action-label hide-on-small me-2",style:{width:window.innerWidth<=750?"0px":"50px"},children:Oe(E.actions)})]})]}),a("div",{className:"d-flex align-items-center justify-content-right",style:{gap:"0.5rem"},children:[a("i",{className:"fas fa-edit text-primary",onClick:O=>{O.stopPropagation(),R(E)},style:{cursor:"pointer",transition:"opacity 0.3s",opacity:.6,flexShrink:0},onMouseOver:O=>{O.stopPropagation(),O.currentTarget.style.opacity="1"},onMouseOut:O=>{O.stopPropagation(),O.currentTarget.style.opacity="0.6"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Edit Spell"}),a("span",{className:`badge bg-dark border text-${E.isLinked?Se[E.linkedStat].color:"secondary"} ms-2 d-flex justify-content-between align-items-center link-badge-normal`,"data-bs-toggle":"tooltip","data-bs-original-title":nt(E),title:nt(E),onClick:O=>{O.stopPropagation(),ot(E)},style:{cursor:"pointer",width:"4rem"},children:[a("i",{className:`fas ${E.isLinked?Se[E.linkedStat].icon:"fa-link-slash"}`}),a("span",{children:E.isLinked?`+${os(E.quantity,E.rank)}`:""})]}),a("button",{className:"btn btn-outline-danger btn-sm roll-button",style:{width:"120px",whiteSpace:"nowrap",overflow:"hidden"},onClick:O=>{O.stopPropagation(),Y(E)},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Click to copy roll command",children:[a("i",{className:"fas fa-dice-d20"}),a("span",{className:"ms-1 text-truncate",children:Xt(n,E.dice,t,!0)})]}),a("button",{className:"btn btn-outline-info btn-sm",onClick:O=>{O.stopPropagation(),I(E)},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Click to copy the Stock roll command for ${E.name} (${E.element} - ${B(E)?"mastery":"normal"})`,style:{flexShrink:0},children:a("i",{className:"fas fa-hand-sparkles"})}),a("div",{className:"input-group input-group-sm",children:[a("button",{className:"btn btn-outline-danger btn-sm",onClick:O=>{O.stopPropagation(),tt(E.id)},children:a("i",{className:"fas fa-minus"})}),a("input",{type:"number",className:"form-control form-control-sm text-center",style:{width:"60px"},value:Te,min:"1",max:Tt,onChange:O=>be(Math.max(1,Math.min(Tt,parseInt(O.currentTarget.value)||1))),onClick:O=>O.stopPropagation()}),a("button",{className:"btn btn-outline-success btn-sm",onClick:O=>{O.stopPropagation(),pe(E.id)},children:a("i",{className:"fas fa-plus"})})]}),a("div",{className:"btn-group hide-on-small",style:{flexShrink:0},children:[a("button",{className:"btn btn-outline-secondary btn-sm",onClick:O=>{O.stopPropagation(),Ae(j,1)},children:a("i",{className:"fas fa-chevron-down"})}),a("button",{className:"btn btn-outline-secondary btn-sm",onClick:O=>{O.stopPropagation(),Ae(j,-1)},children:a("i",{className:"fas fa-chevron-up"})})]})]}),a("br",{})]}),A===E.id&&a("div",{className:"mt-3",children:[a("div",{className:"d-flex flex-wrap justify-content-center mb-2",style:{gap:"0.5rem"},children:[a("span",{className:`badge bg-dark border text-${E.isLinked?Se[E.linkedStat].color:"secondary"}
                                                link-badge-responsive`,"data-bs-toggle":"tooltip","data-bs-original-title":nt(E),title:nt(E),onClick:O=>{O.stopPropagation(),ot(E)},style:{cursor:"pointer"},children:[a("i",{className:`fas ${E.isLinked?Se[E.linkedStat].icon:"fa-link-slash"}`}),a("span",{children:E.isLinked?a(Jt,{children:[`${Se[E.linkedStat].name}`,a("span",{className:"ms-2",children:`+${os(E.quantity,E.rank)}`})]}):""})]}),a("span",{className:"badge bg-dark border",children:[Oe(E.actions)," ",E.actions," Actions"]}),a("span",{className:"badge bg-dark border",children:[it(E.element)," ",E.element]}),a("span",{className:"badge bg-dark border",children:["Spell ",E.power," ",a("i",{children:["(SL. Rank: ",E.rank,")"]})]})]}),E.description&&a(Jt,{children:[a("p",{className:"py-1 border-bottom h5 arsenal",children:"Description"}),a("div",{className:"mb-0 spell-description arsenal",style:{display:"-webkit-box",WebkitLineClamp:"5",WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},dangerouslySetInnerHTML:{__html:E.description}})]})]})]},E.id))}),a(nf,{isModalOpen:f,closeModal:F,spellBeingEdited:s,currentSpell:l,setCurrentSpell:d,incrementPower:ve,decrementPower:ke,getSpellRank:Ds,getActionLabel:Oe,validateDiceRoll:de,diceError:le,saveSpell:ie,removeSpell:xe}),a(sf,{isLinkModalOpen:_,closeLinkModal:Z,currentSpell:l,setCurrentSpell:d,saveSpell:ie,getLinkedStats:c}),a(tf,{spellToDelete:K,confirmDelete:Pe,setSpellToDelete:Ce})]})})};function af(){return a("div",{className:"spell-inventory container-fluid",children:a("div",{className:"row",children:[a("div",{className:"col-12 col-md-4 order-2 order-md-1",style:{minHeight:"50vh",overflowY:"auto"},children:a(ef,{})}),a("div",{className:"col-12 col-md-8 order-1 order-md-2",style:{minHeight:"50vh",overflowY:"auto"},children:a(rf,{})})]})})}const of="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs/%3e%3cg%3e%3cpath%20stroke='none'%20fill='%23FFFFFF'%20d='M16%208%20L48%208%20Q56%208%2056%2016%20L56%2048%20Q56%2056%2048%2056%20L16%2056%20Q8%2056%208%2048%20L8%2016%20Q8%208%2016%208%20M11%2016%20L11%2048%20Q11%2053%2016%2053%20L48%2053%20Q53%2053%2053%2048%20L53%2016%20Q53%2011%2048%2011%20L16%2011%20Q11%2011%2011%2016%20M22%2032%20L30%2024%2032%2024%2032%2028%2042%2028%2042%2036%2032%2036%2032%2040%2030%2040%2022%2032'/%3e%3c/g%3e%3c/svg%3e",lf="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs/%3e%3cg%3e%3cpath%20stroke='none'%20fill='%23FFFFFF'%20d='M42%2032%20L34%2040%2032%2040%2032%2036%2022%2036%2022%2028%2032%2028%2032%2024%2034%2024%2042%2032%20M53%2048%20L53%2016%20Q53%2011%2048%2011%20L16%2011%20Q11%2011%2011%2016%20L11%2048%20Q11%2053%2016%2053%20L48%2053%20Q53%2053%2053%2048%20M48%2056%20L16%2056%20Q8%2056%208%2048%20L8%2016%20Q8%208%2016%208%20L48%208%20Q56%208%2056%2016%20L56%2048%20Q56%2056%2048%2056'/%3e%3c/g%3e%3c/svg%3e",cf=[{id:"character",title:"Health"},{id:"spells",title:"Spells and Stats"},{id:"abilities",title:"Abilities"}],rt=cf.map(t=>({title:t.title,path:t.id==="character"?vn:`${vn.replace(/\/$/,"")}/${t.id}`}));function df(){const{url:t,route:e}=mr(),n=rt.findIndex(o=>o.path===t);ge(()=>{const o=i=>{const l=i.target.tagName.toLowerCase(),d=i.target.isContentEditable;l==="input"||l==="textarea"||d||(i.key==="ArrowLeft"?n>0&&e(rt[n-1].path):i.key==="ArrowRight"&&n<rt.length-1&&e(rt[n+1].path))};return window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)}},[t,n]);const r={height:"48px",verticalAlign:"middle",cursor:"pointer"},c=o=>{e(o)};return a("header",{className:"header mb-4",children:a("div",{className:"d-flex justify-content-center align-items-center p-3 border-bottom",children:a("div",{className:"col-md-8 col-lg-6 text-center",children:a("nav",{className:"btn-group gap-2",role:"group","aria-label":"Main navigation",children:[a("img",{src:of,alt:"Navigate left",onClick:()=>n>0&&c(rt[n-1].path),style:{...r,marginRight:"8px",filter:n>0?"opacity(0.75)":"opacity(0.3)",cursor:n>0?"pointer":""},"aria-disabled":n<=0}),"                        ",rt.map((o,i)=>{let l="dark-btn dark-btn-secondary";return t===o.path&&(l+=" dark-btn--active"),a("button",{className:l,onClick:()=>c(o.path),children:a("span",{children:o.title})},o.path)}),a("img",{src:lf,alt:"Navigate right",onClick:()=>n<rt.length-1&&c(rt[n+1].path),style:{...r,marginLeft:"8px",filter:n<rt.length-1?"opacity(0.75)":"opacity(0.3)",cursor:n<rt.length-1?"pointer":""},"aria-disabled":n>=rt.length-1})]})})})})}const uf=()=>{const{showToast:t}=bs(),{spells:e}=ln(),{characterStats:n}=qe(mt),r=(i,l)=>{const d=Pt(e,l),s=Bo(n.conditions,i);let f="[[1d20+"+(d+s);i==="Initiative"&&(f+="&{tracker}"),f+="]]",f=f.replace("+-","-");let p=`&{template:default} {{name=${i}}}{{Roll=${f}}}{{Stat Bonus=[[${d}]] from ${_r(l)}}}`;s!==0&&(p+=`{{Condition Modifier=[[${s}]]}}`),navigator.clipboard.writeText(p),t(i+" roll command copied! Paste it into the text chat on Roll20.","clipboard","success","Copied to clipboard")},c=[{name:"Fortitude Save",stat:"vitality"},{name:"Will Save",stat:"spirit"},{name:"Reflex Save",stat:"speed"}],o={name:"Initiative",stat:"speed",icon:"fa-bolt"};return a("div",{className:"save-rolls",children:a("div",{className:"d-flex flex-wrap gap-2 align-items-center justify-content-center",children:[c.map(i=>a("button",{onClick:()=>r(i.name,i.stat),className:"dark-btn dark-btn-secondary d-flex align-items-center justify-content-center flex-grow-1 position-relative",style:{minWidth:"140px",maxWidth:"170px",height:"48px"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Roll ${i.name} (${Se[i.stat].shortName})`,children:[a("i",{className:`fas ${Se[i.stat].icon} me-2`,style:{width:"20px"}}),a("span",{children:i.name})]},i.name)),a("button",{onClick:()=>r(o.name,o.stat),className:"dark-btn dark-btn-primary d-flex align-items-center justify-content-center flex-grow-1 position-relative",style:{minWidth:"140px",maxWidth:"170px",height:"48px"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Roll ${o.name} (${Se[o.stat].shortName})`,children:[a("i",{className:`fas ${o.icon} text-${o.color} me-2`,style:{width:"20px"}}),a("span",{children:o.name})]},o.name)]})})},hf=({buildDate:t})=>{const{url:e}=mr();return a("footer",{className:"footer mt-auto py-3 text-light border-top",children:a("div",{className:"container-fluid",children:a("div",{className:"row",children:[a("div",{className:"col-4 text-start text-truncate d-flex align-items-center",children:[a("span",{className:"me-2",children:["Build Date: ",t]}),a("a",{href:"https://github.com/btarg/requiem-pathfinder-preact",target:"_blank",rel:"noopener noreferrer",className:"text-light",title:"GitHub Repository",children:a("i",{className:"fab fa-github"})})]}),a("div",{className:"col-4 text-center",children:[a(Wt,{title:"QUICK ROLLS",containerClassName:"mb-3"}),a(uf,{})]}),a("div",{className:"col-4 d-flex align-items-center justify-content-end",children:a("a",{href:"https://btarg.github.io/requiem-vault/",target:"_blank",rel:"noopener noreferrer",className:"dark-btn dark-btn-secondary",children:[a("i",{className:"fas fa-book me-2"}),a("span",{className:"me-2",children:"Open Wiki"}),a("i",{className:"fa-solid fa-arrow-up-right-from-square",style:{fontSize:"0.75rem"}})]})})]})})})},mo=wn({abilities:[],setAbilities:t=>{},subscribe:t=>{},unsubscribe:t=>{}}),ff=({children:t})=>{const[e,n]=G(()=>{try{const l=localStorage.getItem("abilities");return l?JSON.parse(l):[]}catch(l){return console.error("Error loading abilities from localStorage:",l),[]}}),[r,c]=G([]);ge(()=>{console.log("Saving abilities to localStorage:",e),localStorage.setItem("abilities",JSON.stringify(e)),r.forEach(l=>l(e))},[e,r]);const o=l=>{c(d=>[...d,l])},i=l=>{c(d=>d.filter(s=>s!==l))};return a(mo.Provider,{value:{abilities:e,setAbilities:n,subscribe:o,unsubscribe:i},children:t})},pf=()=>qe(mo),mf=({isModalOpen:t,closeModal:e,abilityBeingEdited:n,currentAbility:r,setCurrentAbility:c,getActionLabel:o,validateDiceRoll:i,diceError:l,saveAbility:d,removeAbility:s})=>a("div",{className:`modal ${t?"show":""}`,style:{display:t?"block":"none"},tabIndex:-1,children:a("div",{className:"modal-dialog",children:a("div",{className:"modal-content",children:[a("div",{className:"modal-header",children:[a("h5",{className:"modal-title",children:n?"Edit Ability":"Add Ability"}),a("button",{type:"button",className:"btn-close",onClick:e})]}),a("div",{className:"modal-body",children:[a("div",{className:"mb-2",children:[a("label",{className:"form-label",children:"Ability Type"}),a("div",{className:"btn-group w-100",children:[a("button",{type:"button",className:`btn ${r.type===Qe.GENERIC?"btn-danger":"btn-outline-danger"}`,onClick:()=>c({...r,type:Qe.GENERIC}),children:"Generic Ability"}),a("button",{type:"button",className:`btn ${r.type===Qe.WEAPON?"btn-danger":"btn-outline-danger"}`,onClick:()=>c({...r,type:Qe.WEAPON}),children:"Attack"})]})]}),a("div",{className:"mb-2",children:[a("label",{className:"form-label",children:"Name"}),a("input",{type:"text",className:"form-control",placeholder:r.type===Qe.WEAPON?"Attack Name":"Ability Name",value:r.name,onInput:u=>c({...r,name:u.currentTarget.value})})]}),a("label",{className:"form-label",children:"Actions to Use"}),a("div",{className:"input-group mb-2",children:[a("span",{className:"input-group-text",children:o(r.actions)}),a("select",{className:"form-select",value:r.actions,onChange:u=>c({...r,actions:parseInt(u.currentTarget.value)}),children:[a("option",{value:"1",children:"1 Action"}),a("option",{value:"2",children:"2 Actions"}),a("option",{value:"3",children:"3 Actions"}),a("option",{value:"4",children:"Reaction"}),a("option",{value:"0",children:"Free Action"})]})]}),"                        ",a("label",{className:"form-label",children:"Element"}),a("div",{className:"input-group mb-2",children:[a("span",{className:"input-group-text",children:it(r.element)}),a("select",{className:"form-select",value:r.element,onChange:u=>c({...r,element:u.currentTarget.value}),children:Object.values(re).map(u=>a("option",{value:u,children:u},u))})]}),a("label",{className:"form-label",children:"Range"}),a("div",{className:"input-group mb-2",children:[a("span",{className:"input-group-text",children:a("i",{className:"fas fa-crosshairs"})}),a("input",{type:"number",className:"form-control",placeholder:"Range in metres (0 = infinite)",value:r.range||0,min:"0",onInput:u=>c({...r,range:parseInt(u.currentTarget.value)||0})}),a("span",{className:"input-group-text",children:(r.range||0)===0?"Infinite":"m"})]}),a("label",{className:"form-label",children:r.type===Qe.WEAPON?"Attack Roll":"Dice Roll"}),a("div",{className:"input-group mb-2",children:[a("span",{className:"input-group-text",children:a("i",{className:"fas fa-dice-d20"})}),a("input",{type:"text",className:`form-control ${l?"is-invalid":""}`,placeholder:"Dice Roll (e.g. 1d4)",value:r.dice,onInput:u=>{const f=u.currentTarget.value;c({...r,dice:f}),i(f)}}),l&&a("div",{className:"invalid-feedback",children:l})]}),a("div",{className:"alert alert-info py-1 mb-2",children:[a("i",{className:"fas fa-info-circle me-2"}),a("small",{children:"Use [stat] to include a stat's value (e.g., [strength] + 1d6)"})]}),r.type===Qe.WEAPON&&a("div",{className:"mb-3",children:[a("label",{className:"form-label",children:"Additional Attacks"}),a("br",{}),r.additionalAttacks&&r.additionalAttacks.map((u,f)=>a("div",{className:"input-group mb-2",children:[a("span",{className:"input-group-text",children:["Attack ",f+2," Modifier"]}),a("input",{type:"number",className:"form-control",value:u.penalty,onChange:p=>{const _=parseInt(p.currentTarget.value)||0,y=[...r.additionalAttacks];y[f]={...u,penalty:_},c({...r,additionalAttacks:y})}}),a("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>{const p=[...r.additionalAttacks];p.splice(f,1),c({...r,additionalAttacks:p})},children:a("i",{className:"fas fa-times"})})]},f)),a("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>{const u=[...r.additionalAttacks||[]];u.push({penalty:-5}),c({...r,additionalAttacks:u})},children:[a("i",{className:"fas fa-plus me-1"})," Add Attack"]})]}),a("div",{className:"mb-2",children:[a("label",{className:"form-label",children:"Description"}),a("textarea",{className:"form-control",placeholder:"Ability Description",value:r.description,onInput:u=>c({...r,description:u.currentTarget.value})})]})]}),a("div",{className:"modal-footer",children:[a("button",{type:"button",className:"btn btn-secondary",onClick:e,children:[a("i",{className:"fas fa-times me-1"}),"Close"]}),n&&a("button",{type:"button",className:"btn btn-danger",onClick:()=>s(n.id),children:[a("i",{className:"fas fa-trash-alt me-1"}),"Delete"]}),a("button",{type:"button",className:"btn btn-success",onClick:d,children:[a("i",{className:`fas ${n?"fa-save":"fa-plus"} me-1`}),n?"Save Changes":"Add Ability"]})]})]})})}),_f=({abilityToDelete:t,confirmDelete:e,setAbilityToDelete:n})=>a("div",{className:`modal fade ${t?"show":""}`,style:{display:t?"block":"none"},tabIndex:-1,children:a("div",{className:"modal-dialog",children:a("div",{className:"modal-content",children:[a("div",{className:"modal-header",children:[a("h5",{className:"modal-title",children:"Confirm Deletion"}),a("button",{type:"button",className:"btn-close",onClick:()=>n(null),"aria-label":"Close"})]}),a("div",{className:"modal-body",children:"Are you sure you want to delete this ability?"}),a("div",{className:"modal-footer",children:[a("button",{type:"button",className:"btn btn-secondary",onClick:()=>n(null),children:"No, Keep It"}),a("button",{type:"button",className:"btn btn-danger",onClick:e,children:"Yes, Delete It"})]})]})})}),gf=()=>{const{abilities:t,setAbilities:e}=pf(),{characterStats:n}=qe(mt),{showToast:r}=bs(),c={id:null,name:"",type:Qe.GENERIC,description:"",dice:"",actions:1,element:"Physical",additionalAttacks:[],range:0},[o,i]=G(null),[l,d]=G(c),[s,u]=G(null),[f,p]=G(!1),[_,y]=G(null),[A,C]=G(""),[$,M]=G(null);ge(()=>{console.log("Saving abilities to localStorage:",t),localStorage.setItem("abilities",JSON.stringify(t))},[t]),ge(()=>{const k=[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map(K=>new Et(K));return()=>{k.forEach(K=>{K&&typeof K.dispose=="function"&&K.dispose()})}},[]);const B=N=>{i(o===N?null:N)},I=(N=null)=>{u(N),d(N||c),p(!0)},W=()=>{u(null),p(!1),C("")},Y=N=>{y(N)},Q=()=>{if(_){const N=t.find(k=>k.id===_);e(t.filter(k=>k.id!==_)),y(null),W(),r(`${N.name} deleted successfully`,"trash","danger","Deleted")}},X=N=>{if(!N)return!0;const k=ts(N,n);return C(k.error||""),k.isValid},R=()=>{var N;if(!l.name.trim()){C("Name is required");return}if(((N=l.type)==null?void 0:N.toString())===Qe.WEAPON.toString()&&!l.dice.trim()){C("Attack roll is required for weapons");return}if(!(l.dice&&!X(l.dice))){if(s)e(t.map(k=>k.id===s.id?{...l,id:s.id}:k)),r(`${l.name} updated successfully`,"check","success","Updated"),M(s.id);else{const k={...l,id:Date.now()};e(K=>[...K,k]),r(`${l.name} added successfully`,"plus","success","Added"),M(k.id)}setTimeout(()=>M(null),1e3),console.log("Ability saved:",l),W()}},F=N=>{let k="",K="";switch(N){case 0:k="[free-action]",K="Free Action";break;case 1:k="[one-action]",K="One Action";break;case 2:k="[two-actions]",K="Two Actions";break;case 3:k="[three-actions]",K="Three Actions";break;case 4:k="[reaction]",K="Reaction";break;default:return""}return a("span",{className:"action","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-original-title":K,title:K,role:"img","aria-label":K,children:k})},U=N=>{N.type===Qe.WEAPON?Z(N):le(N)},Z=(N,k=0)=>{const K=N.dice,{isValid:Ce,error:xe}=ts(K,n);if(!Ce){r(xe,"exclamation-triangle","danger","Invalid Dice");return}const Pe=Xt([],K,n),Ae=N.name;let ve=Pe;if(k>0&&N.additionalAttacks&&N.additionalAttacks[k-1]){const pe=N.additionalAttacks[k-1].penalty||0;pe!==0&&(ve=`${Pe}${pe<0?pe:`+${pe}`}`)}const ke=`{{Attack ${k>0?k+1:""}=[[${ve}]]}}`;let Te="";N.element&&(Te=`{{Element=${it(N.element)} ${N.element}}}`);const be=`&{template:default} {{name=${Ae}}} ${ke} ${Te} {{Description=${N.description||""}}}`;navigator.clipboard.writeText(be).then(()=>{const pe=k>0?` (Attack #${k+1})`:"";r(`${Ae}${pe} command copied! Paste it into Roll20.`,"clipboard","success","Copied to clipboard")}).catch(pe=>{console.error("Failed to copy command: ",pe),r("Failed to copy command.","exclamation-triangle","danger","Copy Error")})},le=N=>{let k="";if(N.dice){const{isValid:Ce,error:xe}=ts(N.dice,n);if(!Ce){r(xe,"exclamation-triangle","danger","Invalid Dice");return}k=`{{Roll=[[${Xt([],N.dice,n)}]]}}`}const K=`&{template:default} {{name=${N.name}}} ${k} {{Description=${N.description||""}}}`;navigator.clipboard.writeText(K).then(()=>{r(`${N.name} command copied! Paste it into Roll20.`,"clipboard","success","Copied to clipboard")}).catch(Ce=>{console.error("Failed to copy command: ",Ce),r("Failed to copy command.","exclamation-triangle","danger","Copy Error")})},Ne=t.filter(N=>{var k;return((k=N.type)==null?void 0:k.toString())===Qe.WEAPON.toString()}),de=t.filter(N=>{var k;return((k=N.type)==null?void 0:k.toString())===Qe.GENERIC.toString()}),ie=N=>a("li",{className:`list-group-item ${$===N.id?"quantity-flash":""}`,children:[a("div",{className:"d-flex justify-content-between align-items-center",children:[a("div",{className:"d-flex align-items-center overflow-hidden",style:{flex:"1 1 0"},onClick:()=>B(N.id),children:[a("span",{className:"me-2",children:it(N.element)}),a("div",{className:"text-truncate",children:[a("span",{className:"arsenal me-2",children:N.name}),a("span",{className:"action-label hide-on-small me-2",children:F(N.actions)})]})]}),a("div",{className:"d-flex align-items-center justify-content-center",style:{gap:"0.5rem"},children:["                    ",a("i",{className:"fas fa-edit text-primary",onClick:k=>{k.stopPropagation(),I(N)},style:{cursor:"pointer",transition:"opacity 0.3s",opacity:.6,flexShrink:0},onMouseOver:k=>{k.stopPropagation(),k.currentTarget.style.opacity="1"},onMouseOut:k=>{k.stopPropagation(),k.currentTarget.style.opacity="0.6"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Edit Weapon"}),a("div",{className:"btn-group d-flex justify-content-center",children:[a("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>Z(N,0),"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Roll base attack",children:[a("i",{className:"fas fa-dice-d20 me-1"}),a("span",{className:"ms-1 text-truncate",children:Xt(Ne,N.dice,n,!0)})]}),"                        ",N.additionalAttacks.map((k,K)=>a("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>Z(N,K+1),"data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Roll attack #${K+2} (${k.penalty<0?k.penalty:`+${k.penalty}`})`,children:["#",K+2," (",k.penalty<0?k.penalty:`+${k.penalty}`,")"]},K))]})]})]}),o===N.id&&a("div",{className:"ability-details mt-2",children:["                    ",a("div",{className:"d-flex flex-wrap mb-2 justify-content-center gap-1",children:[N.element&&a("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`${N.element} damage type`,children:[it(N.element)," ",N.element]}),a("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Takes ${N.actions} action${N.actions!==1?"s":""} to use`,children:[F(N.actions)," ",N.actions===4?"Reaction":`${N.actions} Action${N.actions!==1?"s":""}`]}),N.additionalAttacks&&N.additionalAttacks.length>0&&a("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Can make ${N.additionalAttacks.length+1} attacks in total`,children:[a("i",{className:"fas fa-hand-fist"})," ",N.additionalAttacks.length+1," Attacks"]}),"                        ",N.range>0&&a("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Can be used up to ${N.range||0} metres away`,children:[a("i",{className:"fas fa-crosshairs"})," ",N.range||0," m"]})]}),N.description&&a("div",{children:[a("p",{className:"py-1 border-bottom h6 arsenal text-center",children:"Description"}),a("p",{className:"mb-2",children:N.description})]})]})]},N.id),ae=N=>a("li",{className:`list-group-item ${$===N.id?"quantity-flash":""}`,children:[a("div",{className:"d-flex justify-content-between align-items-center",children:[a("div",{className:"d-flex align-items-center overflow-hidden",style:{flex:"1 1 0"},onClick:()=>B(N.id),children:[a("span",{className:"me-2",children:it(N.element)}),a("div",{className:"text-truncate",children:[a("span",{className:"arsenal me-2",children:N.name}),a("span",{className:"action-label hide-on-small me-2",children:F(N.actions)})]})]}),a("div",{className:"d-flex align-items-center",style:{gap:"0.5rem"},children:[a("i",{className:"fas fa-edit text-primary",onClick:k=>{k.stopPropagation(),I(N)},style:{cursor:"pointer",transition:"opacity 0.3s",opacity:.6,flexShrink:0},onMouseOver:k=>{k.stopPropagation(),k.currentTarget.style.opacity="1"},onMouseOut:k=>{k.stopPropagation(),k.currentTarget.style.opacity="0.6"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Edit Ability"}),N.dice&&a("button",{className:"btn btn-sm btn-outline-danger",onClick:k=>{k.stopPropagation(),U(N)},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Roll this ability",children:[a("i",{className:"fas fa-dice-d20 me-1"}),a("span",{className:"text-truncate",children:N.dice})]})]})]}),o===N.id&&a("div",{className:"ability-details mt-2",children:["                    ",a("div",{className:"d-flex flex-wrap mb-2 justify-content-center gap-1",children:[a("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Takes ${N.actions} action${N.actions!==1?"s":""} to use`,children:[F(N.actions)," ",N.actions===4?"Reaction":`${N.actions} Action${N.actions!==1?"s":""}`]}),N.element&&a("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`${N.element} element type`,children:[it(N.element)," ",N.element]}),N.dice&&a("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Dice formula for this ability",children:[a("i",{className:"fas fa-dice-d20"})," ",N.dice]}),N.range>0&&a("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Can be cast up to ${N.range||0} metres away`,children:[a("i",{className:"fas fa-crosshairs"})," ",N.range||0," m"]})]}),N.description&&a("div",{children:[a("p",{className:"py-1 border-bottom h6 arsenal",children:"Description"}),a("p",{className:"mb-0",children:N.description})]})]})]},N.id);return a("div",{className:"abilities-list-container",children:[a(Wt,{title:"ABILITIES & ATTACKS"}),a("div",{className:"d-flex flex-column justify-content-between align-items-center mb-4",children:a("button",{className:"dark-btn dark-btn-primary mt-2 mt-md-0",onClick:()=>I(),style:{width:"160px",height:"60px"},"data-bs-toggle":"tooltip","data-bs-placement":"bottom",title:"Create a new ability or weapon",children:[a("i",{className:"fas fa-plus me-2"})," ",a("span",{children:"Add Ability"})]})}),a("div",{className:"row",children:[a("div",{className:"col-12 col-md-6 mb-3",children:a("div",{className:"card",children:[a("div",{className:"card-header",children:a("h5",{className:"arsenal m-0",children:"Attacks"})}),a("div",{className:"card-body p-0",children:Ne.length>0?a("ul",{className:"list-group list-group-flush",children:Ne.map(N=>ie(N))}):a("div",{className:"text-center p-4",children:a("p",{className:"arsenal mb-0",children:'No weapons found. Click "Add Ability" to create one.'})})})]})}),a("div",{className:"col-12 col-md-6 mb-3",children:a("div",{className:"card",children:[a("div",{className:"card-header",children:a("h5",{className:"arsenal m-0",children:"Generic Abilities"})}),a("div",{className:"card-body p-0",children:de.length>0?a("ul",{className:"list-group list-group-flush",children:de.map(N=>ae(N))}):a("div",{className:"text-center p-4",children:a("p",{className:"arsenal mb-0",children:'No abilities found. Click "Add Ability" to create one.'})})})]})})]}),a(mf,{isModalOpen:f,closeModal:W,abilityBeingEdited:s,currentAbility:l,setCurrentAbility:d,getActionLabel:F,validateDiceRoll:X,diceError:A,saveAbility:R,removeAbility:Y}),a(_f,{abilityToDelete:_,confirmDelete:Q,setAbilityToDelete:y})]})};function vf(){return a("div",{className:"abilities-page container-fluid",children:a(gf,{})})}function bf(){return a(Lo,{children:a(Io,{children:a(ff,{children:a(xn,{children:a("div",{className:"d-flex flex-column min-vh-100",children:[a(df,{}),a("main",{className:"flex-grow-1",children:a(ha,{children:[a(Bn,{path:vn,component:Zh}),a(Bn,{path:`${vn}spells`,component:af}),a(Bn,{path:`${vn}abilities`,component:vf}),a(Bn,{default:!0,component:xo})]})}),a(hf,{buildDate:"2025-07-19T14:00:29.779Z"})]})})})})})}wo(a(bf,{}),document.getElementById("app"));
