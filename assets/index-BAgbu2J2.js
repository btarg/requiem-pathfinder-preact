(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();var bn,X,ji,ke,Us,Bi,Ui,Yi,ns,Yr,Kr,Ki,gn={},qi=[],ha=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,En=Array.isArray;function ce(e,t){for(var n in t)e[n]=t[n];return e}function rs(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function $e(e,t,n){var i,a,o,s={};for(o in t)o=="key"?i=t[o]:o=="ref"?a=t[o]:s[o]=t[o];if(arguments.length>2&&(s.children=arguments.length>3?bn.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)s[o]==null&&(s[o]=e.defaultProps[o]);return fn(e,s,i,a,null)}function fn(e,t,n,i,a){var o={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:a??++ji,__i:-1,__u:0};return a==null&&X.vnode!=null&&X.vnode(o),o}function Ke(e){return e.children}function Un(e,t){this.props=e,this.context=t}function qe(e,t){if(t==null)return e.__?qe(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?qe(e):null}function Gi(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Gi(e)}}function qr(e){(!e.__d&&(e.__d=!0)&&ke.push(e)&&!Qn.__r++||Us!=X.debounceRendering)&&((Us=X.debounceRendering)||Bi)(Qn)}function Qn(){for(var e,t,n,i,a,o,s,l=1;ke.length;)ke.length>l&&ke.sort(Ui),e=ke.shift(),l=ke.length,e.__d&&(n=void 0,a=(i=(t=e).__v).__e,o=[],s=[],t.__P&&((n=ce({},i)).__v=i.__v+1,X.vnode&&X.vnode(n),ss(t.__P,n,i,t.__n,t.__P.namespaceURI,32&i.__u?[a]:null,o,a??qe(i),!!(32&i.__u),s),n.__v=i.__v,n.__.__k[n.__i]=n,Ji(o,n,s),n.__e!=a&&Gi(n)));Qn.__r=0}function zi(e,t,n,i,a,o,s,l,c,r,h){var p,m,_,y,C,A,O=i&&i.__k||qi,k=t.length;for(c=fa(n,t,O,c,k),p=0;p<k;p++)(_=n.__k[p])!=null&&(m=_.__i==-1?gn:O[_.__i]||gn,_.__i=p,A=ss(e,_,m,a,o,s,l,c,r,h),y=_.__e,_.ref&&m.ref!=_.ref&&(m.ref&&is(m.ref,null,_),h.push(_.ref,_.__c||y,_)),C==null&&y!=null&&(C=y),4&_.__u||m.__k===_.__k?c=Qi(_,c,e):typeof _.type=="function"&&A!==void 0?c=A:y&&(c=y.nextSibling),_.__u&=-7);return n.__e=C,c}function fa(e,t,n,i,a){var o,s,l,c,r,h=n.length,p=h,m=0;for(e.__k=new Array(a),o=0;o<a;o++)(s=t[o])!=null&&typeof s!="boolean"&&typeof s!="function"?(c=o+m,(s=e.__k[o]=typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?fn(null,s,null,null,null):En(s)?fn(Ke,{children:s},null,null,null):s.constructor==null&&s.__b>0?fn(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=e,s.__b=e.__b+1,l=null,(r=s.__i=pa(s,n,c,p))!=-1&&(p--,(l=n[r])&&(l.__u|=2)),l==null||l.__v==null?(r==-1&&(a>h?m--:a<h&&m++),typeof s.type!="function"&&(s.__u|=4)):r!=c&&(r==c-1?m--:r==c+1?m++:(r>c?m--:m++,s.__u|=4))):e.__k[o]=null;if(p)for(o=0;o<h;o++)(l=n[o])!=null&&(2&l.__u)==0&&(l.__e==i&&(i=qe(l)),to(l,l));return i}function Qi(e,t,n){var i,a;if(typeof e.type=="function"){for(i=e.__k,a=0;i&&a<i.length;a++)i[a]&&(i[a].__=e,t=Qi(i[a],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=qe(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function Xi(e,t){return t=t||[],e==null||typeof e=="boolean"||(En(e)?e.some(function(n){Xi(n,t)}):t.push(e)),t}function pa(e,t,n,i){var a,o,s=e.key,l=e.type,c=t[n];if(c===null&&e.key==null||c&&s==c.key&&l==c.type&&(2&c.__u)==0)return n;if(i>(c!=null&&(2&c.__u)==0?1:0))for(a=n-1,o=n+1;a>=0||o<t.length;){if(a>=0){if((c=t[a])&&(2&c.__u)==0&&s==c.key&&l==c.type)return a;a--}if(o<t.length){if((c=t[o])&&(2&c.__u)==0&&s==c.key&&l==c.type)return o;o++}}return-1}function Ys(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||ha.test(t)?n:n+"px"}function Dn(e,t,n,i,a){var o;t:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||Ys(e.style,t,"");if(n)for(t in n)i&&n[t]==i[t]||Ys(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")o=t!=(t=t.replace(Yi,"$1")),t=t.toLowerCase()in e||t=="onFocusOut"||t=="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?i?n.u=i.u:(n.u=ns,e.addEventListener(t,o?Kr:Yr,o)):e.removeEventListener(t,o?Kr:Yr,o);else{if(a=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break t}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function Ks(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=ns++;else if(t.t<n.u)return;return n(X.event?X.event(t):t)}}}function ss(e,t,n,i,a,o,s,l,c,r){var h,p,m,_,y,C,A,O,k,j,D,V,H,U,G,R,B,F=t.type;if(t.constructor!=null)return null;128&n.__u&&(c=!!(32&n.__u),o=[l=t.__e=n.__e]),(h=X.__b)&&h(t);t:if(typeof F=="function")try{if(O=t.props,k="prototype"in F&&F.prototype.render,j=(h=F.contextType)&&i[h.__c],D=h?j?j.props.value:h.__:i,n.__c?A=(p=t.__c=n.__c).__=p.__E:(k?t.__c=p=new F(O,D):(t.__c=p=new Un(O,D),p.constructor=F,p.render=_a),j&&j.sub(p),p.props=O,p.state||(p.state={}),p.context=D,p.__n=i,m=p.__d=!0,p.__h=[],p._sb=[]),k&&p.__s==null&&(p.__s=p.state),k&&F.getDerivedStateFromProps!=null&&(p.__s==p.state&&(p.__s=ce({},p.__s)),ce(p.__s,F.getDerivedStateFromProps(O,p.__s))),_=p.props,y=p.state,p.__v=t,m)k&&F.getDerivedStateFromProps==null&&p.componentWillMount!=null&&p.componentWillMount(),k&&p.componentDidMount!=null&&p.__h.push(p.componentDidMount);else{if(k&&F.getDerivedStateFromProps==null&&O!==_&&p.componentWillReceiveProps!=null&&p.componentWillReceiveProps(O,D),!p.__e&&p.shouldComponentUpdate!=null&&p.shouldComponentUpdate(O,p.__s,D)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(p.props=O,p.state=p.__s,p.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(z){z&&(z.__=t)}),V=0;V<p._sb.length;V++)p.__h.push(p._sb[V]);p._sb=[],p.__h.length&&s.push(p);break t}p.componentWillUpdate!=null&&p.componentWillUpdate(O,p.__s,D),k&&p.componentDidUpdate!=null&&p.__h.push(function(){p.componentDidUpdate(_,y,C)})}if(p.context=D,p.props=O,p.__P=e,p.__e=!1,H=X.__r,U=0,k){for(p.state=p.__s,p.__d=!1,H&&H(t),h=p.render(p.props,p.state,p.context),G=0;G<p._sb.length;G++)p.__h.push(p._sb[G]);p._sb=[]}else do p.__d=!1,H&&H(t),h=p.render(p.props,p.state,p.context),p.state=p.__s;while(p.__d&&++U<25);p.state=p.__s,p.getChildContext!=null&&(i=ce(ce({},i),p.getChildContext())),k&&!m&&p.getSnapshotBeforeUpdate!=null&&(C=p.getSnapshotBeforeUpdate(_,y)),R=h,h!=null&&h.type===Ke&&h.key==null&&(R=Zi(h.props.children)),l=zi(e,En(R)?R:[R],t,n,i,a,o,s,l,c,r),p.base=t.__e,t.__u&=-161,p.__h.length&&s.push(p),A&&(p.__E=p.__=null)}catch(z){if(t.__v=null,c||o!=null)if(z.then){for(t.__u|=c?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;o[o.indexOf(l)]=null,t.__e=l}else for(B=o.length;B--;)rs(o[B]);else t.__e=n.__e,t.__k=n.__k;X.__e(z,t,n)}else o==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):l=t.__e=ma(n.__e,t,n,i,a,o,s,c,r);return(h=X.diffed)&&h(t),128&t.__u?void 0:l}function Ji(e,t,n){for(var i=0;i<n.length;i++)is(n[i],n[++i],n[++i]);X.__c&&X.__c(t,e),e.some(function(a){try{e=a.__h,a.__h=[],e.some(function(o){o.call(a)})}catch(o){X.__e(o,a.__v)}})}function Zi(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:En(e)?e.map(Zi):ce({},e)}function ma(e,t,n,i,a,o,s,l,c){var r,h,p,m,_,y,C,A=n.props,O=t.props,k=t.type;if(k=="svg"?a="http://www.w3.org/2000/svg":k=="math"?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),o!=null){for(r=0;r<o.length;r++)if((_=o[r])&&"setAttribute"in _==!!k&&(k?_.localName==k:_.nodeType==3)){e=_,o[r]=null;break}}if(e==null){if(k==null)return document.createTextNode(O);e=document.createElementNS(a,k,O.is&&O),l&&(X.__m&&X.__m(t,o),l=!1),o=null}if(k==null)A===O||l&&e.data==O||(e.data=O);else{if(o=o&&bn.call(e.childNodes),A=n.props||gn,!l&&o!=null)for(A={},r=0;r<e.attributes.length;r++)A[(_=e.attributes[r]).name]=_.value;for(r in A)if(_=A[r],r!="children"){if(r=="dangerouslySetInnerHTML")p=_;else if(!(r in O)){if(r=="value"&&"defaultValue"in O||r=="checked"&&"defaultChecked"in O)continue;Dn(e,r,null,_,a)}}for(r in O)_=O[r],r=="children"?m=_:r=="dangerouslySetInnerHTML"?h=_:r=="value"?y=_:r=="checked"?C=_:l&&typeof _!="function"||A[r]===_||Dn(e,r,_,A[r],a);if(h)l||p&&(h.__html==p.__html||h.__html==e.innerHTML)||(e.innerHTML=h.__html),t.__k=[];else if(p&&(e.innerHTML=""),zi(t.type=="template"?e.content:e,En(m)?m:[m],t,n,i,k=="foreignObject"?"http://www.w3.org/1999/xhtml":a,o,s,o?o[0]:n.__k&&qe(n,0),l,c),o!=null)for(r=o.length;r--;)rs(o[r]);l||(r="value",k=="progress"&&y==null?e.removeAttribute("value"):y!=null&&(y!==e[r]||k=="progress"&&!y||k=="option"&&y!=A[r])&&Dn(e,r,y,A[r],a),r="checked",C!=null&&C!=e[r]&&Dn(e,r,C,A[r],a))}return e}function is(e,t,n){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&t==null||(e.__u=e(t))}else e.current=t}catch(a){X.__e(a,n)}}function to(e,t,n){var i,a;if(X.unmount&&X.unmount(e),(i=e.ref)&&(i.current&&i.current!=e.__e||is(i,null,t)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){X.__e(o,t)}i.base=i.__P=null}if(i=e.__k)for(a=0;a<i.length;a++)i[a]&&to(i[a],t,n||typeof e.type!="function");n||rs(e.__e),e.__c=e.__=e.__e=void 0}function _a(e,t,n){return this.constructor(e,n)}function ga(e,t,n){var i,a,o,s;t==document&&(t=document.documentElement),X.__&&X.__(e,t),a=(i=!1)?null:t.__k,o=[],s=[],ss(t,e=t.__k=$e(Ke,null,[e]),a||gn,gn,t.namespaceURI,a?null:t.firstChild?bn.call(t.childNodes):null,o,a?a.__e:t.firstChild,i,s),Ji(o,e,s)}function qs(e,t,n){var i,a,o,s,l=ce({},e.props);for(o in e.type&&e.type.defaultProps&&(s=e.type.defaultProps),t)o=="key"?i=t[o]:o=="ref"?a=t[o]:l[o]=t[o]==null&&s!=null?s[o]:t[o];return arguments.length>2&&(l.children=arguments.length>3?bn.call(arguments,2):n),fn(e.type,l,i||e.key,a||e.ref,null)}function sr(e){function t(n){var i,a;return this.getChildContext||(i=new Set,(a={})[t.__c]=this,this.getChildContext=function(){return a},this.componentWillUnmount=function(){i=null},this.shouldComponentUpdate=function(o){this.props.value!=o.value&&i.forEach(function(s){s.__e=!0,qr(s)})},this.sub=function(o){i.add(o);var s=o.componentWillUnmount;o.componentWillUnmount=function(){i&&i.delete(o),s&&s.call(o)}}),n.children}return t.__c="__cC"+Ki++,t.__=e,t.Provider=t.__l=(t.Consumer=function(n,i){return n.children(i)}).contextType=t,t}bn=qi.slice,X={__e:function(e,t,n,i){for(var a,o,s;t=t.__;)if((a=t.__c)&&!a.__)try{if((o=a.constructor)&&o.getDerivedStateFromError!=null&&(a.setState(o.getDerivedStateFromError(e)),s=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(e,i||{}),s=a.__d),s)return a.__E=a}catch(l){e=l}throw e}},ji=0,Un.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=ce({},this.state),typeof e=="function"&&(e=e(ce({},n),this.props)),e&&ce(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),qr(this))},Un.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),qr(this))},Un.prototype.render=Ke,ke=[],Bi=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ui=function(e,t){return e.__v.__b-t.__v.__b},Qn.__r=0,Yi=/(PointerCapture)$|Capture$/i,ns=0,Yr=Ks(!1),Kr=Ks(!0),Ki=0;var va=0;function u(e,t,n,i,a,o){t||(t={});var s,l,c=t;if("ref"in c)for(l in c={},t)l=="ref"?s=t[l]:c[l]=t[l];var r={type:e,props:c,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--va,__i:-1,__u:0,__source:a,__self:o};if(typeof e=="function"&&(s=e.defaultProps))for(l in s)c[l]===void 0&&(c[l]=s[l]);return X.vnode&&X.vnode(r),r}function ba(){return u("section",{children:[u("h1",{children:"404: Not Found"}),u("p",{children:"It's gone :("})]})}var Ie,st,Ar,Gs,Xn=0,eo=[],dt=X,zs=dt.__b,Qs=dt.__r,Xs=dt.diffed,Js=dt.__c,Zs=dt.unmount,ti=dt.__;function yn(e,t){dt.__h&&dt.__h(st,e,Xn||t),Xn=0;var n=st.__H||(st.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function et(e){return Xn=1,os(ro,e)}function os(e,t,n){var i=yn(Ie++,2);if(i.t=e,!i.__c&&(i.__=[ro(void 0,t),function(l){var c=i.__N?i.__N[0]:i.__[0],r=i.t(c,l);c!==r&&(i.__N=[r,i.__[1]],i.__c.setState({}))}],i.__c=st,!st.__f)){var a=function(l,c,r){if(!i.__c.__H)return!0;var h=i.__c.__H.__.filter(function(m){return!!m.__c});if(h.every(function(m){return!m.__N}))return!o||o.call(this,l,c,r);var p=i.__c.props!==l;return h.forEach(function(m){if(m.__N){var _=m.__[0];m.__=m.__N,m.__N=void 0,_!==m.__[0]&&(p=!0)}}),o&&o.call(this,l,c,r)||p};st.__f=!0;var o=st.shouldComponentUpdate,s=st.componentWillUpdate;st.componentWillUpdate=function(l,c,r){if(this.__e){var h=o;o=void 0,a(l,c,r),o=h}s&&s.call(this,l,c,r)},st.shouldComponentUpdate=a}return i.__N||i.__}function gt(e,t){var n=yn(Ie++,3);!dt.__s&&ls(n.__H,t)&&(n.__=e,n.u=t,st.__H.__h.push(n))}function no(e,t){var n=yn(Ie++,4);!dt.__s&&ls(n.__H,t)&&(n.__=e,n.u=t,st.__h.push(n))}function Ft(e){return Xn=5,as(function(){return{current:e}},[])}function as(e,t){var n=yn(Ie++,7);return ls(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function Ne(e){var t=st.context[e.__c],n=yn(Ie++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(st)),t.props.value):e.__}function Ea(){for(var e;e=eo.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Yn),e.__H.__h.forEach(Gr),e.__H.__h=[]}catch(t){e.__H.__h=[],dt.__e(t,e.__v)}}dt.__b=function(e){st=null,zs&&zs(e)},dt.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),ti&&ti(e,t)},dt.__r=function(e){Qs&&Qs(e),Ie=0;var t=(st=e.__c).__H;t&&(Ar===st?(t.__h=[],st.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(Yn),t.__h.forEach(Gr),t.__h=[],Ie=0)),Ar=st},dt.diffed=function(e){Xs&&Xs(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(eo.push(t)!==1&&Gs===dt.requestAnimationFrame||((Gs=dt.requestAnimationFrame)||ya)(Ea)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),Ar=st=null},dt.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Yn),n.__h=n.__h.filter(function(i){return!i.__||Gr(i)})}catch(i){t.some(function(a){a.__h&&(a.__h=[])}),t=[],dt.__e(i,n.__v)}}),Js&&Js(e,t)},dt.unmount=function(e){Zs&&Zs(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{Yn(i)}catch(a){t=a}}),n.__H=void 0,t&&dt.__e(t,n.__v))};var ei=typeof requestAnimationFrame=="function";function ya(e){var t,n=function(){clearTimeout(i),ei&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,100);ei&&(t=requestAnimationFrame(n))}function Yn(e){var t=st,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),st=t}function Gr(e){var t=st;e.__c=e.__(),st=t}function ls(e,t){return!e||e.length!==t.length||t.some(function(n,i){return n!==e[i]})}function ro(e,t){return typeof t=="function"?t(e):t}let Oe,hn;const Ta=(e,t)=>{if(Oe=void 0,t&&t.type==="click"){if(t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||t.button!==0)return e;const n=t.target.closest("a[href]"),i=n&&n.getAttribute("href");if(!n||n.origin!=location.origin||/^#/.test(i)||!/^(_?self)?$/i.test(n.target)||hn&&(typeof hn=="string"?!i.startsWith(hn):!hn.test(i)))return e;Oe=!0,t.preventDefault(),t=n.href.replace(location.origin,"")}else typeof t=="string"?Oe=!0:t&&t.url?(Oe=!t.replace,t=t.url):t=location.pathname+location.search;return Oe===!0?history.pushState(null,"",t):Oe===!1&&history.replaceState(null,"",t),t},Aa=(e,t,n={})=>{e=e.split("/").filter(Boolean),t=(t||"").split("/").filter(Boolean),n.params||(n.params={});for(let i=0,a,o;i<Math.max(e.length,t.length);i++){let[,s,l,c]=(t[i]||"").match(/^(:?)(.*?)([+*?]?)$/);if(a=e[i],!(!s&&l==a)){if(!s&&a&&c=="*"){n.rest="/"+e.slice(i).map(decodeURIComponent).join("/");break}if(!s||!a&&c!="?"&&c!="*")return;if(o=c=="+"||c=="*",o?a=e.slice(i).map(decodeURIComponent).join("/")||void 0:a&&(a=decodeURIComponent(a)),n.params[l]=a,l in n||(n[l]=a),o)break}}return n};function Tn(e){const[t,n]=os(Ta,e.url||location.pathname+location.search);e.scope&&(hn=e.scope);const i=Oe===!0,a=as(()=>{const o=new URL(t,location.origin),s=o.pathname.replace(/\/+$/g,"")||"/";return{url:t,path:s,query:Object.fromEntries(o.searchParams),route:(l,c)=>n({url:l,replace:c}),wasPush:i}},[t]);return no(()=>(addEventListener("click",n),addEventListener("popstate",n),()=>{removeEventListener("click",n),removeEventListener("popstate",n)}),[]),$e(Tn.ctx.Provider,{value:a},e.children)}const Na=Promise.resolve();function so(e){const[t,n]=os(R=>R+1,0),{url:i,query:a,wasPush:o,path:s}=cs(),{rest:l=s,params:c={}}=Ne(ni),r=Ft(!1),h=Ft(s),p=Ft(0),m=Ft(),_=Ft(),y=Ft(),C=Ft(!1),A=Ft();A.current=!1;let O,k,j;Xi(e.children).some(R=>{if(Aa(l,R.props.path,j={...R.props,path:l,query:a,params:c,rest:""}))return O=qs(R,j);R.props.default&&(k=qs(R,j))});let D=O||k;const V=m.current&&m.current.__u&In&&m.current.__u&Rn,H=m.current&&m.current.__h,U=as(()=>{_.current=m.current,m.current=$e(ni.Provider,{value:j},D);const R=_.current&&_.current.props.children;return!R||!D||D.type!==R.type||D.props.component!==R.props.component?(this.__v&&this.__v.__k&&this.__v.__k.reverse(),p.current++,!0):!1},[i,JSON.stringify(j)]);V?(m.current.__u|=In,m.current.__u|=Rn):H&&(m.current.__h=!0);const G=_.current;return _.current=null,this.__c=(R,B)=>{A.current=!0,_.current=G,e.onLoadStart&&e.onLoadStart(i),r.current=!0;let F=p.current;R.then(()=>{F===p.current&&(_.current=null,m.current&&(B.__h&&(m.current.__h=B.__h),B.__u&Rn&&(m.current.__u|=Rn),B.__u&In&&(m.current.__u|=In)),Na.then(n))})},no(()=>{const R=this.__v&&this.__v.__e;if(A.current){!C.current&&!y.current&&(y.current=R);return}!C.current&&y.current&&(y.current!==R&&y.current.remove(),y.current=null),C.current=!0,h.current!==s&&(o&&scrollTo(0,0),e.onRouteChange&&e.onRouteChange(i),h.current=s),e.onLoadEnd&&r.current&&e.onLoadEnd(i),r.current=!1},[s,o,t]),U?[$e(Nr,{r:m}),$e(Nr,{r:_})]:$e(Nr,{r:m})}const In=32,Rn=128,Nr=({r:e})=>e.current;so.Provider=Tn;Tn.ctx=sr({});const ni=sr({}),Cr=e=>$e(e.component,e),cs=()=>Ne(Tn.ctx),ri=X.__b;X.__b=e=>{e.type&&e.type._forwarded&&e.ref&&(e.props.ref=e.ref,e.ref=null),ri&&ri(e)};const si=X.__e;X.__e=(e,t,n)=>{if(e&&e.then){let i=t;for(;i=i.__;)if(i.__c&&i.__c.__c)return t.__e==null&&(t.__c.__z=[n.__e],t.__e=n.__e,t.__k=n.__k),t.__k||(t.__k=[]),i.__c.__c(e,t)}si&&si(e,t,n)};const Ht={PHYSICAL:"physical",MAGICAL:"magical",UTILITY:"utility"},Nt={OFFENSIVE:"offensive",DEFENSIVE:"defensive",UTILITY:"utility",CORE:"core"},bt={currentHealth:{defaultValue:10,label:"Current HP",type:Nt.CORE},maxHealth:{defaultValue:10,label:"Max HP",type:Nt.CORE},currentMp:{defaultValue:10,label:"Current MP",type:Nt.CORE},maxMp:{defaultValue:10,label:"Max MP",type:Nt.CORE},tempHealth:{defaultValue:0,label:"Temporary HP",type:Nt.CORE},strength:{name:"Strength",shortName:"STR",icon:"fa-fist-raised",color:"danger",description:"Increases physical attack damage unless resisted/absorbed/immune. Applied as flat bonus to Physical damage rolls.",category:Ht.PHYSICAL,type:Nt.OFFENSIVE,defaultValue:0,displayModifier:!0,affectsRolls:!0,damageType:"physical"},vitality:{name:"Vitality",shortName:"VIT",icon:"fa-shield-alt",color:"primary-emphasis",description:"Reduces incoming Physical damage when attack is resisted. Does not affect neutral or absorbed damage.",category:Ht.PHYSICAL,type:Nt.DEFENSIVE,defaultValue:0,displayModifier:!0,damageReduction:!0,damageType:"physical"},magic:{name:"Magic",shortName:"MAG",icon:"fa-hand-sparkles",color:"success-emphasis",description:"Increases magical attack damage unless resisted/absorbed/immune. Applied as flat bonus.",category:Ht.MAGICAL,type:Nt.OFFENSIVE,defaultValue:0,displayModifier:!0,affectsRolls:!0,damageType:"magical"},spirit:{name:"Spirit",shortName:"SPR",icon:"fa-shield-heart",color:"info",description:"Reduces incoming magical damage when attack is resisted. Does not affect neutral or absorbed damage.",category:Ht.MAGICAL,type:Nt.DEFENSIVE,defaultValue:0,displayModifier:!0,damageReduction:!0,damageType:"magical"},speed:{name:"Speed",shortName:"SPD",icon:"fa-running",color:"secondary-emphasis",description:"Bonus to Initiative and movement distance per turn",category:Ht.PHYSICAL,type:Nt.UTILITY,defaultValue:0,displayModifier:!0,derived:{initiative:e=>e,movement:e=>e}},luck:{name:"Luck",shortName:"LCK",icon:"fa-clover",color:"success",description:"Affects spell draws and knockdown resistance",category:Ht.MAGICAL,type:Nt.UTILITY,defaultValue:0,displayModifier:!0,derived:{maxExtraDrawDice:e=>Math.min(Math.floor(e),4),knockdownBonus:e=>e}},perception:{name:"Perception",shortName:"PER",icon:"fa-eye",color:"danger-emphasis",description:"Used for Scanning for an enemy's Elemental Affinities, for noticing weak points, hidden treasure, hidden enemies etc.",category:Ht.UTILITY,type:Nt.UTILITY,defaultValue:0,displayModifier:!0},wisdom:{name:"Wisdom",shortName:"WIS",icon:"fa-book-open",color:"warning-emphasis",description:"Used for Recalling Knowledge of any kind: essentially every Pathfinder 2E lore skill rolled into one. Also useful in social situations.",category:Ht.UTILITY,type:Nt.UTILITY,defaultValue:0,displayModifier:!0},influence:{name:"Influence",shortName:"INF",icon:"fa-comments",color:"warning",description:"Used for social rolls, such as Deception, Intimidation, Performance, Diplomacy and Persuasion.",category:Ht.UTILITY,type:Nt.UTILITY,defaultValue:0,displayModifier:!0}},cn={CANTRIP_AND_FIRST:1,SECOND_AND_THIRD:2,FOURTH_AND_FIFTH:3,SIXTH_AND_SEVENTH:4,EIGHTH_TO_TENTH:5},wr=e=>e<=1?cn.CANTRIP_AND_FIRST:e<=3?cn.SECOND_AND_THIRD:e<=5?cn.FOURTH_AND_FIFTH:e<=7?cn.SIXTH_AND_SEVENTH:cn.EIGHTH_TO_TENTH,en=sr({characterStats:{},setCharacterStats:e=>{}});function Ca({children:e}){const t=()=>{const o=localStorage.getItem("characterStats");if(o)return JSON.parse(o);{const s={};for(const l in bt)s[l]=bt[l].defaultValue||0;return s}},[n,i]=et(t);gt(()=>{localStorage.setItem("characterStats",JSON.stringify(n))},[n]);const a={characterStats:n,setCharacterStats:i};return u(en.Provider,{value:a,children:e})}const io=sr({spells:[],setSpells:e=>{},getLinkedStats:()=>[],subscribe:e=>{},unsubscribe:e=>{}}),wa=({children:e})=>{const[t,n]=et(()=>{const c=localStorage.getItem("spells");return c?JSON.parse(c):[]}),[i,a]=et([]);gt(()=>{localStorage.setItem("spells",JSON.stringify(t)),i.forEach(c=>c(t))},[t]);const o=()=>t.filter(c=>c.isLinked).map(c=>c.linkedStat),s=c=>{a(r=>[...r,c])},l=c=>{a(r=>r.filter(h=>h!==c))};return u(io.Provider,{value:{spells:t,setSpells:n,getLinkedStats:o,subscribe:s,unsubscribe:l},children:e})},nn=()=>Ne(io);var Ct="top",Vt="bottom",Wt="right",wt="left",ir="auto",rn=[Ct,Vt,Wt,wt],Re="start",Ge="end",oo="clippingParents",us="viewport",je="popper",ao="reference",zr=rn.reduce(function(e,t){return e.concat([t+"-"+Re,t+"-"+Ge])},[]),ds=[].concat(rn,[ir]).reduce(function(e,t){return e.concat([t,t+"-"+Re,t+"-"+Ge])},[]),lo="beforeRead",co="read",uo="afterRead",ho="beforeMain",fo="main",po="afterMain",mo="beforeWrite",_o="write",go="afterWrite",vo=[lo,co,uo,ho,fo,po,mo,_o,go];function he(e){return e?(e.nodeName||"").toLowerCase():null}function jt(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Pe(e){var t=jt(e).Element;return e instanceof t||e instanceof Element}function Qt(e){var t=jt(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function hs(e){if(typeof ShadowRoot>"u")return!1;var t=jt(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Sa(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var i=t.styles[n]||{},a=t.attributes[n]||{},o=t.elements[n];!Qt(o)||!he(o)||(Object.assign(o.style,i),Object.keys(a).forEach(function(s){var l=a[s];l===!1?o.removeAttribute(s):o.setAttribute(s,l===!0?"":l)}))})}function xa(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(i){var a=t.elements[i],o=t.attributes[i]||{},s=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:n[i]),l=s.reduce(function(c,r){return c[r]="",c},{});!Qt(a)||!he(a)||(Object.assign(a.style,l),Object.keys(o).forEach(function(c){a.removeAttribute(c)}))})}}const fs={name:"applyStyles",enabled:!0,phase:"write",fn:Sa,effect:xa,requires:["computeStyles"]};function ue(e){return e.split("-")[0]}var De=Math.max,Jn=Math.min,ze=Math.round;function Qr(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function bo(){return!/^((?!chrome|android).)*safari/i.test(Qr())}function Qe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var i=e.getBoundingClientRect(),a=1,o=1;t&&Qt(e)&&(a=e.offsetWidth>0&&ze(i.width)/e.offsetWidth||1,o=e.offsetHeight>0&&ze(i.height)/e.offsetHeight||1);var s=Pe(e)?jt(e):window,l=s.visualViewport,c=!bo()&&n,r=(i.left+(c&&l?l.offsetLeft:0))/a,h=(i.top+(c&&l?l.offsetTop:0))/o,p=i.width/a,m=i.height/o;return{width:p,height:m,top:h,right:r+p,bottom:h+m,left:r,x:r,y:h}}function ps(e){var t=Qe(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function Eo(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&hs(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function ge(e){return jt(e).getComputedStyle(e)}function Oa(e){return["table","td","th"].indexOf(he(e))>=0}function Ce(e){return((Pe(e)?e.ownerDocument:e.document)||window.document).documentElement}function or(e){return he(e)==="html"?e:e.assignedSlot||e.parentNode||(hs(e)?e.host:null)||Ce(e)}function ii(e){return!Qt(e)||ge(e).position==="fixed"?null:e.offsetParent}function ka(e){var t=/firefox/i.test(Qr()),n=/Trident/i.test(Qr());if(n&&Qt(e)){var i=ge(e);if(i.position==="fixed")return null}var a=or(e);for(hs(a)&&(a=a.host);Qt(a)&&["html","body"].indexOf(he(a))<0;){var o=ge(a);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return a;a=a.parentNode}return null}function An(e){for(var t=jt(e),n=ii(e);n&&Oa(n)&&ge(n).position==="static";)n=ii(n);return n&&(he(n)==="html"||he(n)==="body"&&ge(n).position==="static")?t:n||ka(e)||t}function ms(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function pn(e,t,n){return De(e,Jn(t,n))}function $a(e,t,n){var i=pn(e,t,n);return i>n?n:i}function yo(){return{top:0,right:0,bottom:0,left:0}}function To(e){return Object.assign({},yo(),e)}function Ao(e,t){return t.reduce(function(n,i){return n[i]=e,n},{})}var La=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,To(typeof t!="number"?t:Ao(t,rn))};function Ma(e){var t,n=e.state,i=e.name,a=e.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,l=ue(n.placement),c=ms(l),r=[wt,Wt].indexOf(l)>=0,h=r?"height":"width";if(!(!o||!s)){var p=La(a.padding,n),m=ps(o),_=c==="y"?Ct:wt,y=c==="y"?Vt:Wt,C=n.rects.reference[h]+n.rects.reference[c]-s[c]-n.rects.popper[h],A=s[c]-n.rects.reference[c],O=An(o),k=O?c==="y"?O.clientHeight||0:O.clientWidth||0:0,j=C/2-A/2,D=p[_],V=k-m[h]-p[y],H=k/2-m[h]/2+j,U=pn(D,H,V),G=c;n.modifiersData[i]=(t={},t[G]=U,t.centerOffset=U-H,t)}}function Da(e){var t=e.state,n=e.options,i=n.element,a=i===void 0?"[data-popper-arrow]":i;a!=null&&(typeof a=="string"&&(a=t.elements.popper.querySelector(a),!a)||Eo(t.elements.popper,a)&&(t.elements.arrow=a))}const No={name:"arrow",enabled:!0,phase:"main",fn:Ma,effect:Da,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Xe(e){return e.split("-")[1]}var Ia={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ra(e,t){var n=e.x,i=e.y,a=t.devicePixelRatio||1;return{x:ze(n*a)/a||0,y:ze(i*a)/a||0}}function oi(e){var t,n=e.popper,i=e.popperRect,a=e.placement,o=e.variation,s=e.offsets,l=e.position,c=e.gpuAcceleration,r=e.adaptive,h=e.roundOffsets,p=e.isFixed,m=s.x,_=m===void 0?0:m,y=s.y,C=y===void 0?0:y,A=typeof h=="function"?h({x:_,y:C}):{x:_,y:C};_=A.x,C=A.y;var O=s.hasOwnProperty("x"),k=s.hasOwnProperty("y"),j=wt,D=Ct,V=window;if(r){var H=An(n),U="clientHeight",G="clientWidth";if(H===jt(n)&&(H=Ce(n),ge(H).position!=="static"&&l==="absolute"&&(U="scrollHeight",G="scrollWidth")),H=H,a===Ct||(a===wt||a===Wt)&&o===Ge){D=Vt;var R=p&&H===V&&V.visualViewport?V.visualViewport.height:H[U];C-=R-i.height,C*=c?1:-1}if(a===wt||(a===Ct||a===Vt)&&o===Ge){j=Wt;var B=p&&H===V&&V.visualViewport?V.visualViewport.width:H[G];_-=B-i.width,_*=c?1:-1}}var F=Object.assign({position:l},r&&Ia),z=h===!0?Ra({x:_,y:C},jt(n)):{x:_,y:C};if(_=z.x,C=z.y,c){var Z;return Object.assign({},F,(Z={},Z[D]=k?"0":"",Z[j]=O?"0":"",Z.transform=(V.devicePixelRatio||1)<=1?"translate("+_+"px, "+C+"px)":"translate3d("+_+"px, "+C+"px, 0)",Z))}return Object.assign({},F,(t={},t[D]=k?C+"px":"",t[j]=O?_+"px":"",t.transform="",t))}function Pa(e){var t=e.state,n=e.options,i=n.gpuAcceleration,a=i===void 0?!0:i,o=n.adaptive,s=o===void 0?!0:o,l=n.roundOffsets,c=l===void 0?!0:l,r={placement:ue(t.placement),variation:Xe(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,oi(Object.assign({},r,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,oi(Object.assign({},r,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const _s={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Pa,data:{}};var Pn={passive:!0};function Ha(e){var t=e.state,n=e.instance,i=e.options,a=i.scroll,o=a===void 0?!0:a,s=i.resize,l=s===void 0?!0:s,c=jt(t.elements.popper),r=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&r.forEach(function(h){h.addEventListener("scroll",n.update,Pn)}),l&&c.addEventListener("resize",n.update,Pn),function(){o&&r.forEach(function(h){h.removeEventListener("scroll",n.update,Pn)}),l&&c.removeEventListener("resize",n.update,Pn)}}const gs={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Ha,data:{}};var Fa={left:"right",right:"left",bottom:"top",top:"bottom"};function Kn(e){return e.replace(/left|right|bottom|top/g,function(t){return Fa[t]})}var Va={start:"end",end:"start"};function ai(e){return e.replace(/start|end/g,function(t){return Va[t]})}function vs(e){var t=jt(e),n=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:n,scrollTop:i}}function bs(e){return Qe(Ce(e)).left+vs(e).scrollLeft}function Wa(e,t){var n=jt(e),i=Ce(e),a=n.visualViewport,o=i.clientWidth,s=i.clientHeight,l=0,c=0;if(a){o=a.width,s=a.height;var r=bo();(r||!r&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:o,height:s,x:l+bs(e),y:c}}function ja(e){var t,n=Ce(e),i=vs(e),a=(t=e.ownerDocument)==null?void 0:t.body,o=De(n.scrollWidth,n.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),s=De(n.scrollHeight,n.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),l=-i.scrollLeft+bs(e),c=-i.scrollTop;return ge(a||n).direction==="rtl"&&(l+=De(n.clientWidth,a?a.clientWidth:0)-o),{width:o,height:s,x:l,y:c}}function Es(e){var t=ge(e),n=t.overflow,i=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+a+i)}function Co(e){return["html","body","#document"].indexOf(he(e))>=0?e.ownerDocument.body:Qt(e)&&Es(e)?e:Co(or(e))}function mn(e,t){var n;t===void 0&&(t=[]);var i=Co(e),a=i===((n=e.ownerDocument)==null?void 0:n.body),o=jt(i),s=a?[o].concat(o.visualViewport||[],Es(i)?i:[]):i,l=t.concat(s);return a?l:l.concat(mn(or(s)))}function Xr(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Ba(e,t){var n=Qe(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function li(e,t,n){return t===us?Xr(Wa(e,n)):Pe(t)?Ba(t,n):Xr(ja(Ce(e)))}function Ua(e){var t=mn(or(e)),n=["absolute","fixed"].indexOf(ge(e).position)>=0,i=n&&Qt(e)?An(e):e;return Pe(i)?t.filter(function(a){return Pe(a)&&Eo(a,i)&&he(a)!=="body"}):[]}function Ya(e,t,n,i){var a=t==="clippingParents"?Ua(e):[].concat(t),o=[].concat(a,[n]),s=o[0],l=o.reduce(function(c,r){var h=li(e,r,i);return c.top=De(h.top,c.top),c.right=Jn(h.right,c.right),c.bottom=Jn(h.bottom,c.bottom),c.left=De(h.left,c.left),c},li(e,s,i));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function wo(e){var t=e.reference,n=e.element,i=e.placement,a=i?ue(i):null,o=i?Xe(i):null,s=t.x+t.width/2-n.width/2,l=t.y+t.height/2-n.height/2,c;switch(a){case Ct:c={x:s,y:t.y-n.height};break;case Vt:c={x:s,y:t.y+t.height};break;case Wt:c={x:t.x+t.width,y:l};break;case wt:c={x:t.x-n.width,y:l};break;default:c={x:t.x,y:t.y}}var r=a?ms(a):null;if(r!=null){var h=r==="y"?"height":"width";switch(o){case Re:c[r]=c[r]-(t[h]/2-n[h]/2);break;case Ge:c[r]=c[r]+(t[h]/2-n[h]/2);break}}return c}function Je(e,t){t===void 0&&(t={});var n=t,i=n.placement,a=i===void 0?e.placement:i,o=n.strategy,s=o===void 0?e.strategy:o,l=n.boundary,c=l===void 0?oo:l,r=n.rootBoundary,h=r===void 0?us:r,p=n.elementContext,m=p===void 0?je:p,_=n.altBoundary,y=_===void 0?!1:_,C=n.padding,A=C===void 0?0:C,O=To(typeof A!="number"?A:Ao(A,rn)),k=m===je?ao:je,j=e.rects.popper,D=e.elements[y?k:m],V=Ya(Pe(D)?D:D.contextElement||Ce(e.elements.popper),c,h,s),H=Qe(e.elements.reference),U=wo({reference:H,element:j,placement:a}),G=Xr(Object.assign({},j,U)),R=m===je?G:H,B={top:V.top-R.top+O.top,bottom:R.bottom-V.bottom+O.bottom,left:V.left-R.left+O.left,right:R.right-V.right+O.right},F=e.modifiersData.offset;if(m===je&&F){var z=F[a];Object.keys(B).forEach(function(Z){var St=[Wt,Vt].indexOf(Z)>=0?1:-1,mt=[Ct,Vt].indexOf(Z)>=0?"y":"x";B[Z]+=z[mt]*St})}return B}function Ka(e,t){t===void 0&&(t={});var n=t,i=n.placement,a=n.boundary,o=n.rootBoundary,s=n.padding,l=n.flipVariations,c=n.allowedAutoPlacements,r=c===void 0?ds:c,h=Xe(i),p=h?l?zr:zr.filter(function(y){return Xe(y)===h}):rn,m=p.filter(function(y){return r.indexOf(y)>=0});m.length===0&&(m=p);var _=m.reduce(function(y,C){return y[C]=Je(e,{placement:C,boundary:a,rootBoundary:o,padding:s})[ue(C)],y},{});return Object.keys(_).sort(function(y,C){return _[y]-_[C]})}function qa(e){if(ue(e)===ir)return[];var t=Kn(e);return[ai(e),t,ai(t)]}function Ga(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var a=n.mainAxis,o=a===void 0?!0:a,s=n.altAxis,l=s===void 0?!0:s,c=n.fallbackPlacements,r=n.padding,h=n.boundary,p=n.rootBoundary,m=n.altBoundary,_=n.flipVariations,y=_===void 0?!0:_,C=n.allowedAutoPlacements,A=t.options.placement,O=ue(A),k=O===A,j=c||(k||!y?[Kn(A)]:qa(A)),D=[A].concat(j).reduce(function(yt,Tt){return yt.concat(ue(Tt)===ir?Ka(t,{placement:Tt,boundary:h,rootBoundary:p,padding:r,flipVariations:y,allowedAutoPlacements:C}):Tt)},[]),V=t.rects.reference,H=t.rects.popper,U=new Map,G=!0,R=D[0],B=0;B<D.length;B++){var F=D[B],z=ue(F),Z=Xe(F)===Re,St=[Ct,Vt].indexOf(z)>=0,mt=St?"width":"height",ot=Je(t,{placement:F,boundary:h,rootBoundary:p,altBoundary:m,padding:r}),at=St?Z?Wt:wt:Z?Vt:Ct;V[mt]>H[mt]&&(at=Kn(at));var ht=Kn(at),Et=[];if(o&&Et.push(ot[z]<=0),l&&Et.push(ot[at]<=0,ot[ht]<=0),Et.every(function(yt){return yt})){R=F,G=!1;break}U.set(F,Et)}if(G)for(var Mt=y?3:1,te=function(Tt){var Bt=D.find(function(xt){var ft=U.get(xt);if(ft)return ft.slice(0,Tt).every(function(ne){return ne})});if(Bt)return R=Bt,"break"},ee=Mt;ee>0;ee--){var ie=te(ee);if(ie==="break")break}t.placement!==R&&(t.modifiersData[i]._skip=!0,t.placement=R,t.reset=!0)}}const So={name:"flip",enabled:!0,phase:"main",fn:Ga,requiresIfExists:["offset"],data:{_skip:!1}};function ci(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function ui(e){return[Ct,Wt,Vt,wt].some(function(t){return e[t]>=0})}function za(e){var t=e.state,n=e.name,i=t.rects.reference,a=t.rects.popper,o=t.modifiersData.preventOverflow,s=Je(t,{elementContext:"reference"}),l=Je(t,{altBoundary:!0}),c=ci(s,i),r=ci(l,a,o),h=ui(c),p=ui(r);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:r,isReferenceHidden:h,hasPopperEscaped:p},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":p})}const xo={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:za};function Qa(e,t,n){var i=ue(e),a=[wt,Ct].indexOf(i)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,s=o[0],l=o[1];return s=s||0,l=(l||0)*a,[wt,Wt].indexOf(i)>=0?{x:l,y:s}:{x:s,y:l}}function Xa(e){var t=e.state,n=e.options,i=e.name,a=n.offset,o=a===void 0?[0,0]:a,s=ds.reduce(function(h,p){return h[p]=Qa(p,t.rects,o),h},{}),l=s[t.placement],c=l.x,r=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=r),t.modifiersData[i]=s}const Oo={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Xa};function Ja(e){var t=e.state,n=e.name;t.modifiersData[n]=wo({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const ys={name:"popperOffsets",enabled:!0,phase:"read",fn:Ja,data:{}};function Za(e){return e==="x"?"y":"x"}function tl(e){var t=e.state,n=e.options,i=e.name,a=n.mainAxis,o=a===void 0?!0:a,s=n.altAxis,l=s===void 0?!1:s,c=n.boundary,r=n.rootBoundary,h=n.altBoundary,p=n.padding,m=n.tether,_=m===void 0?!0:m,y=n.tetherOffset,C=y===void 0?0:y,A=Je(t,{boundary:c,rootBoundary:r,padding:p,altBoundary:h}),O=ue(t.placement),k=Xe(t.placement),j=!k,D=ms(O),V=Za(D),H=t.modifiersData.popperOffsets,U=t.rects.reference,G=t.rects.popper,R=typeof C=="function"?C(Object.assign({},t.rects,{placement:t.placement})):C,B=typeof R=="number"?{mainAxis:R,altAxis:R}:Object.assign({mainAxis:0,altAxis:0},R),F=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,z={x:0,y:0};if(H){if(o){var Z,St=D==="y"?Ct:wt,mt=D==="y"?Vt:Wt,ot=D==="y"?"height":"width",at=H[D],ht=at+A[St],Et=at-A[mt],Mt=_?-G[ot]/2:0,te=k===Re?U[ot]:G[ot],ee=k===Re?-G[ot]:-U[ot],ie=t.elements.arrow,yt=_&&ie?ps(ie):{width:0,height:0},Tt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:yo(),Bt=Tt[St],xt=Tt[mt],ft=pn(0,U[ot],yt[ot]),ne=j?U[ot]/2-Mt-ft-Bt-B.mainAxis:te-ft-Bt-B.mainAxis,fe=j?-U[ot]/2+Mt+ft+xt+B.mainAxis:ee+ft+xt+B.mainAxis,Dt=t.elements.arrow&&An(t.elements.arrow),re=Dt?D==="y"?Dt.clientTop||0:Dt.clientLeft||0:0,Ut=(Z=F==null?void 0:F[D])!=null?Z:0,E=at+ne-Ut-re,P=at+fe-Ut,x=pn(_?Jn(ht,E):ht,at,_?De(Et,P):Et);H[D]=x,z[D]=x-at}if(l){var Q,it=D==="x"?Ct:wt,Yt=D==="x"?Vt:Wt,vt=H[V],Kt=V==="y"?"height":"width",L=vt+A[it],_t=vt-A[Yt],ct=[Ct,wt].indexOf(O)!==-1,qt=(Q=F==null?void 0:F[V])!=null?Q:0,oe=ct?L:vt-U[Kt]-G[Kt]-qt+B.altAxis,d=ct?vt+U[Kt]+G[Kt]-qt-B.altAxis:_t,W=_&&ct?$a(oe,vt,d):pn(_?oe:L,vt,_?d:_t);H[V]=W,z[V]=W-vt}t.modifiersData[i]=z}}const ko={name:"preventOverflow",enabled:!0,phase:"main",fn:tl,requiresIfExists:["offset"]};function el(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function nl(e){return e===jt(e)||!Qt(e)?vs(e):el(e)}function rl(e){var t=e.getBoundingClientRect(),n=ze(t.width)/e.offsetWidth||1,i=ze(t.height)/e.offsetHeight||1;return n!==1||i!==1}function sl(e,t,n){n===void 0&&(n=!1);var i=Qt(t),a=Qt(t)&&rl(t),o=Ce(t),s=Qe(e,a,n),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(i||!i&&!n)&&((he(t)!=="body"||Es(o))&&(l=nl(t)),Qt(t)?(c=Qe(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):o&&(c.x=bs(o))),{x:s.left+l.scrollLeft-c.x,y:s.top+l.scrollTop-c.y,width:s.width,height:s.height}}function il(e){var t=new Map,n=new Set,i=[];e.forEach(function(o){t.set(o.name,o)});function a(o){n.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(l){if(!n.has(l)){var c=t.get(l);c&&a(c)}}),i.push(o)}return e.forEach(function(o){n.has(o.name)||a(o)}),i}function ol(e){var t=il(e);return vo.reduce(function(n,i){return n.concat(t.filter(function(a){return a.phase===i}))},[])}function al(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function ll(e){var t=e.reduce(function(n,i){var a=n[i.name];return n[i.name]=a?Object.assign({},a,i,{options:Object.assign({},a.options,i.options),data:Object.assign({},a.data,i.data)}):i,n},{});return Object.keys(t).map(function(n){return t[n]})}var di={placement:"bottom",modifiers:[],strategy:"absolute"};function hi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function ar(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,i=n===void 0?[]:n,a=t.defaultOptions,o=a===void 0?di:a;return function(l,c,r){r===void 0&&(r=o);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},di,o),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},p=[],m=!1,_={state:h,setOptions:function(O){var k=typeof O=="function"?O(h.options):O;C(),h.options=Object.assign({},o,h.options,k),h.scrollParents={reference:Pe(l)?mn(l):l.contextElement?mn(l.contextElement):[],popper:mn(c)};var j=ol(ll([].concat(i,h.options.modifiers)));return h.orderedModifiers=j.filter(function(D){return D.enabled}),y(),_.update()},forceUpdate:function(){if(!m){var O=h.elements,k=O.reference,j=O.popper;if(hi(k,j)){h.rects={reference:sl(k,An(j),h.options.strategy==="fixed"),popper:ps(j)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(B){return h.modifiersData[B.name]=Object.assign({},B.data)});for(var D=0;D<h.orderedModifiers.length;D++){if(h.reset===!0){h.reset=!1,D=-1;continue}var V=h.orderedModifiers[D],H=V.fn,U=V.options,G=U===void 0?{}:U,R=V.name;typeof H=="function"&&(h=H({state:h,options:G,name:R,instance:_})||h)}}}},update:al(function(){return new Promise(function(A){_.forceUpdate(),A(h)})}),destroy:function(){C(),m=!0}};if(!hi(l,c))return _;_.setOptions(r).then(function(A){!m&&r.onFirstUpdate&&r.onFirstUpdate(A)});function y(){h.orderedModifiers.forEach(function(A){var O=A.name,k=A.options,j=k===void 0?{}:k,D=A.effect;if(typeof D=="function"){var V=D({state:h,name:O,instance:_,options:j}),H=function(){};p.push(V||H)}})}function C(){p.forEach(function(A){return A()}),p=[]}return _}}var cl=ar(),ul=[gs,ys,_s,fs],dl=ar({defaultModifiers:ul}),hl=[gs,ys,_s,fs,Oo,So,ko,No,xo],Ts=ar({defaultModifiers:hl});const $o=Object.freeze(Object.defineProperty({__proto__:null,afterMain:po,afterRead:uo,afterWrite:go,applyStyles:fs,arrow:No,auto:ir,basePlacements:rn,beforeMain:ho,beforeRead:lo,beforeWrite:mo,bottom:Vt,clippingParents:oo,computeStyles:_s,createPopper:Ts,createPopperBase:cl,createPopperLite:dl,detectOverflow:Je,end:Ge,eventListeners:gs,flip:So,hide:xo,left:wt,main:fo,modifierPhases:vo,offset:Oo,placements:ds,popper:je,popperGenerator:ar,popperOffsets:ys,preventOverflow:ko,read:co,reference:ao,right:Wt,start:Re,top:Ct,variationPlacements:zr,viewport:us,write:_o},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.6 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const be=new Map,Sr={set(e,t,n){be.has(e)||be.set(e,new Map);const i=be.get(e);if(!i.has(t)&&i.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`);return}i.set(t,n)},get(e,t){return be.has(e)&&be.get(e).get(t)||null},remove(e,t){if(!be.has(e))return;const n=be.get(e);n.delete(t),n.size===0&&be.delete(e)}},fl=1e6,pl=1e3,Jr="transitionend",Lo=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,(t,n)=>`#${CSS.escape(n)}`)),e),ml=e=>e==null?`${e}`:Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase(),_l=e=>{do e+=Math.floor(Math.random()*fl);while(document.getElementById(e));return e},gl=e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:n}=window.getComputedStyle(e);const i=Number.parseFloat(t),a=Number.parseFloat(n);return!i&&!a?0:(t=t.split(",")[0],n=n.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(n))*pl)},Mo=e=>{e.dispatchEvent(new Event(Jr))},me=e=>!e||typeof e!="object"?!1:(typeof e.jquery<"u"&&(e=e[0]),typeof e.nodeType<"u"),ye=e=>me(e)?e.jquery?e[0]:e:typeof e=="string"&&e.length>0?document.querySelector(Lo(e)):null,sn=e=>{if(!me(e)||e.getClientRects().length===0)return!1;const t=getComputedStyle(e).getPropertyValue("visibility")==="visible",n=e.closest("details:not([open])");if(!n)return t;if(n!==e){const i=e.closest("summary");if(i&&i.parentNode!==n||i===null)return!1}return t},Te=e=>!e||e.nodeType!==Node.ELEMENT_NODE||e.classList.contains("disabled")?!0:typeof e.disabled<"u"?e.disabled:e.hasAttribute("disabled")&&e.getAttribute("disabled")!=="false",Do=e=>{if(!document.documentElement.attachShadow)return null;if(typeof e.getRootNode=="function"){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?Do(e.parentNode):null},Zn=()=>{},Nn=e=>{e.offsetHeight},Io=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,xr=[],vl=e=>{document.readyState==="loading"?(xr.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of xr)t()}),xr.push(e)):e()},Xt=()=>document.documentElement.dir==="rtl",Zt=e=>{vl(()=>{const t=Io();if(t){const n=e.NAME,i=t.fn[n];t.fn[n]=e.jQueryInterface,t.fn[n].Constructor=e,t.fn[n].noConflict=()=>(t.fn[n]=i,e.jQueryInterface)}})},Lt=(e,t=[],n=e)=>typeof e=="function"?e.call(...t):n,Ro=(e,t,n=!0)=>{if(!n){Lt(e);return}const a=gl(t)+5;let o=!1;const s=({target:l})=>{l===t&&(o=!0,t.removeEventListener(Jr,s),Lt(e))};t.addEventListener(Jr,s),setTimeout(()=>{o||Mo(t)},a)},As=(e,t,n,i)=>{const a=e.length;let o=e.indexOf(t);return o===-1?!n&&i?e[a-1]:e[0]:(o+=n?1:-1,i&&(o=(o+a)%a),e[Math.max(0,Math.min(o,a-1))])},bl=/[^.]*(?=\..*)\.|.*/,El=/\..*/,yl=/::\d+$/,Or={};let fi=1;const Po={mouseenter:"mouseover",mouseleave:"mouseout"},Tl=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Ho(e,t){return t&&`${t}::${fi++}`||e.uidEvent||fi++}function Fo(e){const t=Ho(e);return e.uidEvent=t,Or[t]=Or[t]||{},Or[t]}function Al(e,t){return function n(i){return Ns(i,{delegateTarget:e}),n.oneOff&&T.off(e,i.type,t),t.apply(e,[i])}}function Nl(e,t,n){return function i(a){const o=e.querySelectorAll(t);for(let{target:s}=a;s&&s!==this;s=s.parentNode)for(const l of o)if(l===s)return Ns(a,{delegateTarget:s}),i.oneOff&&T.off(e,a.type,t,n),n.apply(s,[a])}}function Vo(e,t,n=null){return Object.values(e).find(i=>i.callable===t&&i.delegationSelector===n)}function Wo(e,t,n){const i=typeof t=="string",a=i?n:t||n;let o=jo(e);return Tl.has(o)||(o=e),[i,a,o]}function pi(e,t,n,i,a){if(typeof t!="string"||!e)return;let[o,s,l]=Wo(t,n,i);t in Po&&(s=(y=>function(C){if(!C.relatedTarget||C.relatedTarget!==C.delegateTarget&&!C.delegateTarget.contains(C.relatedTarget))return y.call(this,C)})(s));const c=Fo(e),r=c[l]||(c[l]={}),h=Vo(r,s,o?n:null);if(h){h.oneOff=h.oneOff&&a;return}const p=Ho(s,t.replace(bl,"")),m=o?Nl(e,n,s):Al(e,s);m.delegationSelector=o?n:null,m.callable=s,m.oneOff=a,m.uidEvent=p,r[p]=m,e.addEventListener(l,m,o)}function Zr(e,t,n,i,a){const o=Vo(t[n],i,a);o&&(e.removeEventListener(n,o,!!a),delete t[n][o.uidEvent])}function Cl(e,t,n,i){const a=t[n]||{};for(const[o,s]of Object.entries(a))o.includes(i)&&Zr(e,t,n,s.callable,s.delegationSelector)}function jo(e){return e=e.replace(El,""),Po[e]||e}const T={on(e,t,n,i){pi(e,t,n,i,!1)},one(e,t,n,i){pi(e,t,n,i,!0)},off(e,t,n,i){if(typeof t!="string"||!e)return;const[a,o,s]=Wo(t,n,i),l=s!==t,c=Fo(e),r=c[s]||{},h=t.startsWith(".");if(typeof o<"u"){if(!Object.keys(r).length)return;Zr(e,c,s,o,a?n:null);return}if(h)for(const p of Object.keys(c))Cl(e,c,p,t.slice(1));for(const[p,m]of Object.entries(r)){const _=p.replace(yl,"");(!l||t.includes(_))&&Zr(e,c,s,m.callable,m.delegationSelector)}},trigger(e,t,n){if(typeof t!="string"||!e)return null;const i=Io(),a=jo(t),o=t!==a;let s=null,l=!0,c=!0,r=!1;o&&i&&(s=i.Event(t,n),i(e).trigger(s),l=!s.isPropagationStopped(),c=!s.isImmediatePropagationStopped(),r=s.isDefaultPrevented());const h=Ns(new Event(t,{bubbles:l,cancelable:!0}),n);return r&&h.preventDefault(),c&&e.dispatchEvent(h),h.defaultPrevented&&s&&s.preventDefault(),h}};function Ns(e,t={}){for(const[n,i]of Object.entries(t))try{e[n]=i}catch{Object.defineProperty(e,n,{configurable:!0,get(){return i}})}return e}function mi(e){if(e==="true")return!0;if(e==="false")return!1;if(e===Number(e).toString())return Number(e);if(e===""||e==="null")return null;if(typeof e!="string")return e;try{return JSON.parse(decodeURIComponent(e))}catch{return e}}function kr(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const _e={setDataAttribute(e,t,n){e.setAttribute(`data-bs-${kr(t)}`,n)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${kr(t)}`)},getDataAttributes(e){if(!e)return{};const t={},n=Object.keys(e.dataset).filter(i=>i.startsWith("bs")&&!i.startsWith("bsConfig"));for(const i of n){let a=i.replace(/^bs/,"");a=a.charAt(0).toLowerCase()+a.slice(1),t[a]=mi(e.dataset[i])}return t},getDataAttribute(e,t){return mi(e.getAttribute(`data-bs-${kr(t)}`))}};class Cn{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,n){const i=me(n)?_e.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof i=="object"?i:{},...me(n)?_e.getDataAttributes(n):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,n=this.constructor.DefaultType){for(const[i,a]of Object.entries(n)){const o=t[i],s=me(o)?"element":ml(o);if(!new RegExp(a).test(s))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${s}" but expected type "${a}".`)}}}const wl="5.3.6";class se extends Cn{constructor(t,n){super(),t=ye(t),t&&(this._element=t,this._config=this._getConfig(n),Sr.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Sr.remove(this._element,this.constructor.DATA_KEY),T.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,n,i=!0){Ro(t,n,i)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return Sr.get(ye(t),this.DATA_KEY)}static getOrCreateInstance(t,n={}){return this.getInstance(t)||new this(t,typeof n=="object"?n:null)}static get VERSION(){return wl}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const $r=e=>{let t=e.getAttribute("data-bs-target");if(!t||t==="#"){let n=e.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),t=n&&n!=="#"?n.trim():null}return t?t.split(",").map(n=>Lo(n)).join(","):null},I={find(e,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,e))},findOne(e,t=document.documentElement){return Element.prototype.querySelector.call(t,e)},children(e,t){return[].concat(...e.children).filter(n=>n.matches(t))},parents(e,t){const n=[];let i=e.parentNode.closest(t);for(;i;)n.push(i),i=i.parentNode.closest(t);return n},prev(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return[n];n=n.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(t,e).filter(n=>!Te(n)&&sn(n))},getSelectorFromElement(e){const t=$r(e);return t&&I.findOne(t)?t:null},getElementFromSelector(e){const t=$r(e);return t?I.findOne(t):null},getMultipleElementsFromSelector(e){const t=$r(e);return t?I.find(t):[]}},lr=(e,t="hide")=>{const n=`click.dismiss${e.EVENT_KEY}`,i=e.NAME;T.on(document,n,`[data-bs-dismiss="${i}"]`,function(a){if(["A","AREA"].includes(this.tagName)&&a.preventDefault(),Te(this))return;const o=I.getElementFromSelector(this)||this.closest(`.${i}`);e.getOrCreateInstance(o)[t]()})},Sl="alert",xl="bs.alert",Bo=`.${xl}`,Ol=`close${Bo}`,kl=`closed${Bo}`,$l="fade",Ll="show";class cr extends se{static get NAME(){return Sl}close(){if(T.trigger(this._element,Ol).defaultPrevented)return;this._element.classList.remove(Ll);const n=this._element.classList.contains($l);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),T.trigger(this._element,kl),this.dispose()}static jQueryInterface(t){return this.each(function(){const n=cr.getOrCreateInstance(this);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}lr(cr,"close");Zt(cr);const Ml="button",Dl="bs.button",Il=`.${Dl}`,Rl=".data-api",Pl="active",_i='[data-bs-toggle="button"]',Hl=`click${Il}${Rl}`;class ur extends se{static get NAME(){return Ml}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Pl))}static jQueryInterface(t){return this.each(function(){const n=ur.getOrCreateInstance(this);t==="toggle"&&n[t]()})}}T.on(document,Hl,_i,e=>{e.preventDefault();const t=e.target.closest(_i);ur.getOrCreateInstance(t).toggle()});Zt(ur);const Fl="swipe",on=".bs.swipe",Vl=`touchstart${on}`,Wl=`touchmove${on}`,jl=`touchend${on}`,Bl=`pointerdown${on}`,Ul=`pointerup${on}`,Yl="touch",Kl="pen",ql="pointer-event",Gl=40,zl={endCallback:null,leftCallback:null,rightCallback:null},Ql={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class tr extends Cn{constructor(t,n){super(),this._element=t,!(!t||!tr.isSupported())&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return zl}static get DefaultType(){return Ql}static get NAME(){return Fl}dispose(){T.off(this._element,on)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),Lt(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=Gl)return;const n=t/this._deltaX;this._deltaX=0,n&&Lt(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(T.on(this._element,Bl,t=>this._start(t)),T.on(this._element,Ul,t=>this._end(t)),this._element.classList.add(ql)):(T.on(this._element,Vl,t=>this._start(t)),T.on(this._element,Wl,t=>this._move(t)),T.on(this._element,jl,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===Kl||t.pointerType===Yl)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Xl="carousel",Jl="bs.carousel",we=`.${Jl}`,Uo=".data-api",Zl="ArrowLeft",tc="ArrowRight",ec=500,un="next",Ve="prev",Be="left",qn="right",nc=`slide${we}`,Lr=`slid${we}`,rc=`keydown${we}`,sc=`mouseenter${we}`,ic=`mouseleave${we}`,oc=`dragstart${we}`,ac=`load${we}${Uo}`,lc=`click${we}${Uo}`,Yo="carousel",Hn="active",cc="slide",uc="carousel-item-end",dc="carousel-item-start",hc="carousel-item-next",fc="carousel-item-prev",Ko=".active",qo=".carousel-item",pc=Ko+qo,mc=".carousel-item img",_c=".carousel-indicators",gc="[data-bs-slide], [data-bs-slide-to]",vc='[data-bs-ride="carousel"]',bc={[Zl]:qn,[tc]:Be},Ec={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},yc={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class wn extends se{constructor(t,n){super(t,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=I.findOne(_c,this._element),this._addEventListeners(),this._config.ride===Yo&&this.cycle()}static get Default(){return Ec}static get DefaultType(){return yc}static get NAME(){return Xl}next(){this._slide(un)}nextWhenVisible(){!document.hidden&&sn(this._element)&&this.next()}prev(){this._slide(Ve)}pause(){this._isSliding&&Mo(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){T.one(this._element,Lr,()=>this.cycle());return}this.cycle()}}to(t){const n=this._getItems();if(t>n.length-1||t<0)return;if(this._isSliding){T.one(this._element,Lr,()=>this.to(t));return}const i=this._getItemIndex(this._getActive());if(i===t)return;const a=t>i?un:Ve;this._slide(a,n[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&T.on(this._element,rc,t=>this._keydown(t)),this._config.pause==="hover"&&(T.on(this._element,sc,()=>this.pause()),T.on(this._element,ic,()=>this._maybeEnableCycle())),this._config.touch&&tr.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const i of I.find(mc,this._element))T.on(i,oc,a=>a.preventDefault());const n={leftCallback:()=>this._slide(this._directionToOrder(Be)),rightCallback:()=>this._slide(this._directionToOrder(qn)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),ec+this._config.interval))}};this._swipeHelper=new tr(this._element,n)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const n=bc[t.key];n&&(t.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const n=I.findOne(Ko,this._indicatorsElement);n.classList.remove(Hn),n.removeAttribute("aria-current");const i=I.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);i&&(i.classList.add(Hn),i.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const n=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(t,n=null){if(this._isSliding)return;const i=this._getActive(),a=t===un,o=n||As(this._getItems(),i,a,this._config.wrap);if(o===i)return;const s=this._getItemIndex(o),l=_=>T.trigger(this._element,_,{relatedTarget:o,direction:this._orderToDirection(t),from:this._getItemIndex(i),to:s});if(l(nc).defaultPrevented||!i||!o)return;const r=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(s),this._activeElement=o;const h=a?dc:uc,p=a?hc:fc;o.classList.add(p),Nn(o),i.classList.add(h),o.classList.add(h);const m=()=>{o.classList.remove(h,p),o.classList.add(Hn),i.classList.remove(Hn,p,h),this._isSliding=!1,l(Lr)};this._queueCallback(m,i,this._isAnimated()),r&&this.cycle()}_isAnimated(){return this._element.classList.contains(cc)}_getActive(){return I.findOne(pc,this._element)}_getItems(){return I.find(qo,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return Xt()?t===Be?Ve:un:t===Be?un:Ve}_orderToDirection(t){return Xt()?t===Ve?Be:qn:t===Ve?qn:Be}static jQueryInterface(t){return this.each(function(){const n=wn.getOrCreateInstance(this,t);if(typeof t=="number"){n.to(t);return}if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}T.on(document,lc,gc,function(e){const t=I.getElementFromSelector(this);if(!t||!t.classList.contains(Yo))return;e.preventDefault();const n=wn.getOrCreateInstance(t),i=this.getAttribute("data-bs-slide-to");if(i){n.to(i),n._maybeEnableCycle();return}if(_e.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()});T.on(window,ac,()=>{const e=I.find(vc);for(const t of e)wn.getOrCreateInstance(t)});Zt(wn);const Tc="collapse",Ac="bs.collapse",Sn=`.${Ac}`,Nc=".data-api",Cc=`show${Sn}`,wc=`shown${Sn}`,Sc=`hide${Sn}`,xc=`hidden${Sn}`,Oc=`click${Sn}${Nc}`,Mr="show",Ye="collapse",Fn="collapsing",kc="collapsed",$c=`:scope .${Ye} .${Ye}`,Lc="collapse-horizontal",Mc="width",Dc="height",Ic=".collapse.show, .collapse.collapsing",ts='[data-bs-toggle="collapse"]',Rc={parent:null,toggle:!0},Pc={parent:"(null|element)",toggle:"boolean"};class vn extends se{constructor(t,n){super(t,n),this._isTransitioning=!1,this._triggerArray=[];const i=I.find(ts);for(const a of i){const o=I.getSelectorFromElement(a),s=I.find(o).filter(l=>l===this._element);o!==null&&s.length&&this._triggerArray.push(a)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Rc}static get DefaultType(){return Pc}static get NAME(){return Tc}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(Ic).filter(l=>l!==this._element).map(l=>vn.getOrCreateInstance(l,{toggle:!1}))),t.length&&t[0]._isTransitioning||T.trigger(this._element,Cc).defaultPrevented)return;for(const l of t)l.hide();const i=this._getDimension();this._element.classList.remove(Ye),this._element.classList.add(Fn),this._element.style[i]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const a=()=>{this._isTransitioning=!1,this._element.classList.remove(Fn),this._element.classList.add(Ye,Mr),this._element.style[i]="",T.trigger(this._element,wc)},s=`scroll${i[0].toUpperCase()+i.slice(1)}`;this._queueCallback(a,this._element,!0),this._element.style[i]=`${this._element[s]}px`}hide(){if(this._isTransitioning||!this._isShown()||T.trigger(this._element,Sc).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,Nn(this._element),this._element.classList.add(Fn),this._element.classList.remove(Ye,Mr);for(const a of this._triggerArray){const o=I.getElementFromSelector(a);o&&!this._isShown(o)&&this._addAriaAndCollapsedClass([a],!1)}this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(Fn),this._element.classList.add(Ye),T.trigger(this._element,xc)};this._element.style[n]="",this._queueCallback(i,this._element,!0)}_isShown(t=this._element){return t.classList.contains(Mr)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=ye(t.parent),t}_getDimension(){return this._element.classList.contains(Lc)?Mc:Dc}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(ts);for(const n of t){const i=I.getElementFromSelector(n);i&&this._addAriaAndCollapsedClass([n],this._isShown(i))}}_getFirstLevelChildren(t){const n=I.find($c,this._config.parent);return I.find(t,this._config.parent).filter(i=>!n.includes(i))}_addAriaAndCollapsedClass(t,n){if(t.length)for(const i of t)i.classList.toggle(kc,!n),i.setAttribute("aria-expanded",n)}static jQueryInterface(t){const n={};return typeof t=="string"&&/show|hide/.test(t)&&(n.toggle=!1),this.each(function(){const i=vn.getOrCreateInstance(this,n);if(typeof t=="string"){if(typeof i[t]>"u")throw new TypeError(`No method named "${t}"`);i[t]()}})}}T.on(document,Oc,ts,function(e){(e.target.tagName==="A"||e.delegateTarget&&e.delegateTarget.tagName==="A")&&e.preventDefault();for(const t of I.getMultipleElementsFromSelector(this))vn.getOrCreateInstance(t,{toggle:!1}).toggle()});Zt(vn);const gi="dropdown",Hc="bs.dropdown",He=`.${Hc}`,Cs=".data-api",Fc="Escape",vi="Tab",Vc="ArrowUp",bi="ArrowDown",Wc=2,jc=`hide${He}`,Bc=`hidden${He}`,Uc=`show${He}`,Yc=`shown${He}`,Go=`click${He}${Cs}`,zo=`keydown${He}${Cs}`,Kc=`keyup${He}${Cs}`,Ue="show",qc="dropup",Gc="dropend",zc="dropstart",Qc="dropup-center",Xc="dropdown-center",Le='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Jc=`${Le}.${Ue}`,Gn=".dropdown-menu",Zc=".navbar",tu=".navbar-nav",eu=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",nu=Xt()?"top-end":"top-start",ru=Xt()?"top-start":"top-end",su=Xt()?"bottom-end":"bottom-start",iu=Xt()?"bottom-start":"bottom-end",ou=Xt()?"left-start":"right-start",au=Xt()?"right-start":"left-start",lu="top",cu="bottom",uu={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},du={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class de extends se{constructor(t,n){super(t,n),this._popper=null,this._parent=this._element.parentNode,this._menu=I.next(this._element,Gn)[0]||I.prev(this._element,Gn)[0]||I.findOne(Gn,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return uu}static get DefaultType(){return du}static get NAME(){return gi}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Te(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!T.trigger(this._element,Uc,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(tu))for(const i of[].concat(...document.body.children))T.on(i,"mouseover",Zn);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Ue),this._element.classList.add(Ue),T.trigger(this._element,Yc,t)}}hide(){if(Te(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!T.trigger(this._element,jc,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))T.off(i,"mouseover",Zn);this._popper&&this._popper.destroy(),this._menu.classList.remove(Ue),this._element.classList.remove(Ue),this._element.setAttribute("aria-expanded","false"),_e.removeDataAttribute(this._menu,"popper"),T.trigger(this._element,Bc,t),this._element.focus()}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!me(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${gi.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof $o>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let t=this._element;this._config.reference==="parent"?t=this._parent:me(this._config.reference)?t=ye(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const n=this._getPopperConfig();this._popper=Ts(t,this._menu,n)}_isShown(){return this._menu.classList.contains(Ue)}_getPlacement(){const t=this._parent;if(t.classList.contains(Gc))return ou;if(t.classList.contains(zc))return au;if(t.classList.contains(Qc))return lu;if(t.classList.contains(Xc))return cu;const n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(qc)?n?ru:nu:n?iu:su}_detectNavbar(){return this._element.closest(Zc)!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(n=>Number.parseInt(n,10)):typeof t=="function"?n=>t(n,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(_e.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...Lt(this._config.popperConfig,[void 0,t])}}_selectMenuItem({key:t,target:n}){const i=I.find(eu,this._menu).filter(a=>sn(a));i.length&&As(i,n,t===bi,!i.includes(n)).focus()}static jQueryInterface(t){return this.each(function(){const n=de.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}static clearMenus(t){if(t.button===Wc||t.type==="keyup"&&t.key!==vi)return;const n=I.find(Jc);for(const i of n){const a=de.getInstance(i);if(!a||a._config.autoClose===!1)continue;const o=t.composedPath(),s=o.includes(a._menu);if(o.includes(a._element)||a._config.autoClose==="inside"&&!s||a._config.autoClose==="outside"&&s||a._menu.contains(t.target)&&(t.type==="keyup"&&t.key===vi||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const l={relatedTarget:a._element};t.type==="click"&&(l.clickEvent=t),a._completeHide(l)}}static dataApiKeydownHandler(t){const n=/input|textarea/i.test(t.target.tagName),i=t.key===Fc,a=[Vc,bi].includes(t.key);if(!a&&!i||n&&!i)return;t.preventDefault();const o=this.matches(Le)?this:I.prev(this,Le)[0]||I.next(this,Le)[0]||I.findOne(Le,t.delegateTarget.parentNode),s=de.getOrCreateInstance(o);if(a){t.stopPropagation(),s.show(),s._selectMenuItem(t);return}s._isShown()&&(t.stopPropagation(),s.hide(),o.focus())}}T.on(document,zo,Le,de.dataApiKeydownHandler);T.on(document,zo,Gn,de.dataApiKeydownHandler);T.on(document,Go,de.clearMenus);T.on(document,Kc,de.clearMenus);T.on(document,Go,Le,function(e){e.preventDefault(),de.getOrCreateInstance(this).toggle()});Zt(de);const Qo="backdrop",hu="fade",Ei="show",yi=`mousedown.bs.${Qo}`,fu={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},pu={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Xo extends Cn{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return fu}static get DefaultType(){return pu}static get NAME(){return Qo}show(t){if(!this._config.isVisible){Lt(t);return}this._append();const n=this._getElement();this._config.isAnimated&&Nn(n),n.classList.add(Ei),this._emulateAnimation(()=>{Lt(t)})}hide(t){if(!this._config.isVisible){Lt(t);return}this._getElement().classList.remove(Ei),this._emulateAnimation(()=>{this.dispose(),Lt(t)})}dispose(){this._isAppended&&(T.off(this._element,yi),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(hu),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=ye(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),T.on(t,yi,()=>{Lt(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){Ro(t,this._getElement(),this._config.isAnimated)}}const mu="focustrap",_u="bs.focustrap",er=`.${_u}`,gu=`focusin${er}`,vu=`keydown.tab${er}`,bu="Tab",Eu="forward",Ti="backward",yu={autofocus:!0,trapElement:null},Tu={autofocus:"boolean",trapElement:"element"};class Jo extends Cn{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return yu}static get DefaultType(){return Tu}static get NAME(){return mu}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),T.off(document,er),T.on(document,gu,t=>this._handleFocusin(t)),T.on(document,vu,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,T.off(document,er))}_handleFocusin(t){const{trapElement:n}=this._config;if(t.target===document||t.target===n||n.contains(t.target))return;const i=I.focusableChildren(n);i.length===0?n.focus():this._lastTabNavDirection===Ti?i[i.length-1].focus():i[0].focus()}_handleKeydown(t){t.key===bu&&(this._lastTabNavDirection=t.shiftKey?Ti:Eu)}}const Ai=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Ni=".sticky-top",Vn="padding-right",Ci="margin-right";class es{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Vn,n=>n+t),this._setElementAttributes(Ai,Vn,n=>n+t),this._setElementAttributes(Ni,Ci,n=>n-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Vn),this._resetElementAttributes(Ai,Vn),this._resetElementAttributes(Ni,Ci)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,n,i){const a=this.getWidth(),o=s=>{if(s!==this._element&&window.innerWidth>s.clientWidth+a)return;this._saveInitialAttribute(s,n);const l=window.getComputedStyle(s).getPropertyValue(n);s.style.setProperty(n,`${i(Number.parseFloat(l))}px`)};this._applyManipulationCallback(t,o)}_saveInitialAttribute(t,n){const i=t.style.getPropertyValue(n);i&&_e.setDataAttribute(t,n,i)}_resetElementAttributes(t,n){const i=a=>{const o=_e.getDataAttribute(a,n);if(o===null){a.style.removeProperty(n);return}_e.removeDataAttribute(a,n),a.style.setProperty(n,o)};this._applyManipulationCallback(t,i)}_applyManipulationCallback(t,n){if(me(t)){n(t);return}for(const i of I.find(t,this._element))n(i)}}const Au="modal",Nu="bs.modal",Jt=`.${Nu}`,Cu=".data-api",wu="Escape",Su=`hide${Jt}`,xu=`hidePrevented${Jt}`,Zo=`hidden${Jt}`,ta=`show${Jt}`,Ou=`shown${Jt}`,ku=`resize${Jt}`,$u=`click.dismiss${Jt}`,Lu=`mousedown.dismiss${Jt}`,Mu=`keydown.dismiss${Jt}`,Du=`click${Jt}${Cu}`,wi="modal-open",Iu="fade",Si="show",Dr="modal-static",Ru=".modal.show",Pu=".modal-dialog",Hu=".modal-body",Fu='[data-bs-toggle="modal"]',Vu={backdrop:!0,focus:!0,keyboard:!0},Wu={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Ze extends se{constructor(t,n){super(t,n),this._dialog=I.findOne(Pu,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new es,this._addEventListeners()}static get Default(){return Vu}static get DefaultType(){return Wu}static get NAME(){return Au}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||T.trigger(this._element,ta,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(wi),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||T.trigger(this._element,Su).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Si),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){T.off(window,Jt),T.off(this._dialog,Jt),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Xo({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Jo({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=I.findOne(Hu,this._dialog);n&&(n.scrollTop=0),Nn(this._element),this._element.classList.add(Si);const i=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,T.trigger(this._element,Ou,{relatedTarget:t})};this._queueCallback(i,this._dialog,this._isAnimated())}_addEventListeners(){T.on(this._element,Mu,t=>{if(t.key===wu){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),T.on(window,ku,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),T.on(this._element,Lu,t=>{T.one(this._element,$u,n=>{if(!(this._element!==t.target||this._element!==n.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(wi),this._resetAdjustments(),this._scrollBar.reset(),T.trigger(this._element,Zo)})}_isAnimated(){return this._element.classList.contains(Iu)}_triggerBackdropTransition(){if(T.trigger(this._element,xu).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,i=this._element.style.overflowY;i==="hidden"||this._element.classList.contains(Dr)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(Dr),this._queueCallback(()=>{this._element.classList.remove(Dr),this._queueCallback(()=>{this._element.style.overflowY=i},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),i=n>0;if(i&&!t){const a=Xt()?"paddingLeft":"paddingRight";this._element.style[a]=`${n}px`}if(!i&&t){const a=Xt()?"paddingRight":"paddingLeft";this._element.style[a]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,n){return this.each(function(){const i=Ze.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof i[t]>"u")throw new TypeError(`No method named "${t}"`);i[t](n)}})}}T.on(document,Du,Fu,function(e){const t=I.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),T.one(t,ta,a=>{a.defaultPrevented||T.one(t,Zo,()=>{sn(this)&&this.focus()})});const n=I.findOne(Ru);n&&Ze.getInstance(n).hide(),Ze.getOrCreateInstance(t).toggle(this)});lr(Ze);Zt(Ze);const ju="offcanvas",Bu="bs.offcanvas",ve=`.${Bu}`,ea=".data-api",Uu=`load${ve}${ea}`,Yu="Escape",xi="show",Oi="showing",ki="hiding",Ku="offcanvas-backdrop",na=".offcanvas.show",qu=`show${ve}`,Gu=`shown${ve}`,zu=`hide${ve}`,$i=`hidePrevented${ve}`,ra=`hidden${ve}`,Qu=`resize${ve}`,Xu=`click${ve}${ea}`,Ju=`keydown.dismiss${ve}`,Zu='[data-bs-toggle="offcanvas"]',td={backdrop:!0,keyboard:!0,scroll:!1},ed={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ae extends se{constructor(t,n){super(t,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return td}static get DefaultType(){return ed}static get NAME(){return ju}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||T.trigger(this._element,qu,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new es().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Oi);const i=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(xi),this._element.classList.remove(Oi),T.trigger(this._element,Gu,{relatedTarget:t})};this._queueCallback(i,this._element,!0)}hide(){if(!this._isShown||T.trigger(this._element,zu).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(ki),this._backdrop.hide();const n=()=>{this._element.classList.remove(xi,ki),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new es().reset(),T.trigger(this._element,ra)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{if(this._config.backdrop==="static"){T.trigger(this._element,$i);return}this.hide()},n=!!this._config.backdrop;return new Xo({className:Ku,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?t:null})}_initializeFocusTrap(){return new Jo({trapElement:this._element})}_addEventListeners(){T.on(this._element,Ju,t=>{if(t.key===Yu){if(this._config.keyboard){this.hide();return}T.trigger(this._element,$i)}})}static jQueryInterface(t){return this.each(function(){const n=Ae.getOrCreateInstance(this,t);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}T.on(document,Xu,Zu,function(e){const t=I.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),Te(this))return;T.one(t,ra,()=>{sn(this)&&this.focus()});const n=I.findOne(na);n&&n!==t&&Ae.getInstance(n).hide(),Ae.getOrCreateInstance(t).toggle(this)});T.on(window,Uu,()=>{for(const e of I.find(na))Ae.getOrCreateInstance(e).show()});T.on(window,Qu,()=>{for(const e of I.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(e).position!=="fixed"&&Ae.getOrCreateInstance(e).hide()});lr(Ae);Zt(Ae);const nd=/^aria-[\w-]*$/i,sa={"*":["class","dir","id","lang","role",nd],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},rd=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),sd=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,id=(e,t)=>{const n=e.nodeName.toLowerCase();return t.includes(n)?rd.has(n)?!!sd.test(e.nodeValue):!0:t.filter(i=>i instanceof RegExp).some(i=>i.test(n))};function od(e,t,n){if(!e.length)return e;if(n&&typeof n=="function")return n(e);const a=new window.DOMParser().parseFromString(e,"text/html"),o=[].concat(...a.body.querySelectorAll("*"));for(const s of o){const l=s.nodeName.toLowerCase();if(!Object.keys(t).includes(l)){s.remove();continue}const c=[].concat(...s.attributes),r=[].concat(t["*"]||[],t[l]||[]);for(const h of c)id(h,r)||s.removeAttribute(h.nodeName)}return a.body.innerHTML}const ad="TemplateFactory",ld={allowList:sa,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},cd={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},ud={entry:"(string|element|function|null)",selector:"(string|element)"};class dd extends Cn{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return ld}static get DefaultType(){return cd}static get NAME(){return ad}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[a,o]of Object.entries(this._config.content))this._setContent(t,o,a);const n=t.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&n.classList.add(...i.split(" ")),n}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[n,i]of Object.entries(t))super._typeCheckConfig({selector:n,entry:i},ud)}_setContent(t,n,i){const a=I.findOne(i,t);if(a){if(n=this._resolvePossibleFunction(n),!n){a.remove();return}if(me(n)){this._putElementInTemplate(ye(n),a);return}if(this._config.html){a.innerHTML=this._maybeSanitize(n);return}a.textContent=n}}_maybeSanitize(t){return this._config.sanitize?od(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return Lt(t,[void 0,this])}_putElementInTemplate(t,n){if(this._config.html){n.innerHTML="",n.append(t);return}n.textContent=t.textContent}}const hd="tooltip",fd=new Set(["sanitize","allowList","sanitizeFn"]),Ir="fade",pd="modal",Wn="show",md=".tooltip-inner",Li=`.${pd}`,Mi="hide.bs.modal",dn="hover",Rr="focus",_d="click",gd="manual",vd="hide",bd="hidden",Ed="show",yd="shown",Td="inserted",Ad="click",Nd="focusin",Cd="focusout",wd="mouseenter",Sd="mouseleave",xd={AUTO:"auto",TOP:"top",RIGHT:Xt()?"left":"right",BOTTOM:"bottom",LEFT:Xt()?"right":"left"},Od={allowList:sa,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},kd={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Se extends se{constructor(t,n){if(typeof $o>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(t,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Od}static get DefaultType(){return kd}static get NAME(){return hd}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),T.off(this._element.closest(Li),Mi,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const t=T.trigger(this._element,this.constructor.eventName(Ed)),i=(Do(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!i)return;this._disposePopper();const a=this._getTipElement();this._element.setAttribute("aria-describedby",a.getAttribute("id"));const{container:o}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(o.append(a),T.trigger(this._element,this.constructor.eventName(Td))),this._popper=this._createPopper(a),a.classList.add(Wn),"ontouchstart"in document.documentElement)for(const l of[].concat(...document.body.children))T.on(l,"mouseover",Zn);const s=()=>{T.trigger(this._element,this.constructor.eventName(yd)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(s,this.tip,this._isAnimated())}hide(){if(!this._isShown()||T.trigger(this._element,this.constructor.eventName(vd)).defaultPrevented)return;if(this._getTipElement().classList.remove(Wn),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))T.off(a,"mouseover",Zn);this._activeTrigger[_d]=!1,this._activeTrigger[Rr]=!1,this._activeTrigger[dn]=!1,this._isHovered=null;const i=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),T.trigger(this._element,this.constructor.eventName(bd)))};this._queueCallback(i,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const n=this._getTemplateFactory(t).toHtml();if(!n)return null;n.classList.remove(Ir,Wn),n.classList.add(`bs-${this.constructor.NAME}-auto`);const i=_l(this.constructor.NAME).toString();return n.setAttribute("id",i),this._isAnimated()&&n.classList.add(Ir),n}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new dd({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[md]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Ir)}_isShown(){return this.tip&&this.tip.classList.contains(Wn)}_createPopper(t){const n=Lt(this._config.placement,[this,t,this._element]),i=xd[n.toUpperCase()];return Ts(this._element,t,this._getPopperConfig(i))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(n=>Number.parseInt(n,10)):typeof t=="function"?n=>t(n,this._element):t}_resolvePossibleFunction(t){return Lt(t,[this._element,this._element])}_getPopperConfig(t){const n={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:i=>{this._getTipElement().setAttribute("data-popper-placement",i.state.placement)}}]};return{...n,...Lt(this._config.popperConfig,[void 0,n])}}_setListeners(){const t=this._config.trigger.split(" ");for(const n of t)if(n==="click")T.on(this._element,this.constructor.eventName(Ad),this._config.selector,i=>{this._initializeOnDelegatedTarget(i).toggle()});else if(n!==gd){const i=n===dn?this.constructor.eventName(wd):this.constructor.eventName(Nd),a=n===dn?this.constructor.eventName(Sd):this.constructor.eventName(Cd);T.on(this._element,i,this._config.selector,o=>{const s=this._initializeOnDelegatedTarget(o);s._activeTrigger[o.type==="focusin"?Rr:dn]=!0,s._enter()}),T.on(this._element,a,this._config.selector,o=>{const s=this._initializeOnDelegatedTarget(o);s._activeTrigger[o.type==="focusout"?Rr:dn]=s._element.contains(o.relatedTarget),s._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},T.on(this._element.closest(Li),Mi,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,n){clearTimeout(this._timeout),this._timeout=setTimeout(t,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const n=_e.getDataAttributes(this._element);for(const i of Object.keys(n))fd.has(i)&&delete n[i];return t={...n,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:ye(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[n,i]of Object.entries(this._config))this.constructor.Default[n]!==i&&(t[n]=i);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const n=Se.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}}Zt(Se);const $d="popover",Ld=".popover-header",Md=".popover-body",Dd={...Se.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Id={...Se.DefaultType,content:"(null|string|element|function)"};class ws extends Se{static get Default(){return Dd}static get DefaultType(){return Id}static get NAME(){return $d}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Ld]:this._getTitle(),[Md]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const n=ws.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}}Zt(ws);const Rd="scrollspy",Pd="bs.scrollspy",Ss=`.${Pd}`,Hd=".data-api",Fd=`activate${Ss}`,Di=`click${Ss}`,Vd=`load${Ss}${Hd}`,Wd="dropdown-item",We="active",jd='[data-bs-spy="scroll"]',Pr="[href]",Bd=".nav, .list-group",Ii=".nav-link",Ud=".nav-item",Yd=".list-group-item",Kd=`${Ii}, ${Ud} > ${Ii}, ${Yd}`,qd=".dropdown",Gd=".dropdown-toggle",zd={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Qd={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class dr extends se{constructor(t,n){super(t,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return zd}static get DefaultType(){return Qd}static get NAME(){return Rd}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=ye(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(n=>Number.parseFloat(n))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(T.off(this._config.target,Di),T.on(this._config.target,Di,Pr,t=>{const n=this._observableSections.get(t.target.hash);if(n){t.preventDefault();const i=this._rootElement||window,a=n.offsetTop-this._element.offsetTop;if(i.scrollTo){i.scrollTo({top:a,behavior:"smooth"});return}i.scrollTop=a}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(n=>this._observerCallback(n),t)}_observerCallback(t){const n=s=>this._targetLinks.get(`#${s.target.id}`),i=s=>{this._previousScrollData.visibleEntryTop=s.target.offsetTop,this._process(n(s))},a=(this._rootElement||document.documentElement).scrollTop,o=a>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=a;for(const s of t){if(!s.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(s));continue}const l=s.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(o&&l){if(i(s),!a)return;continue}!o&&!l&&i(s)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=I.find(Pr,this._config.target);for(const n of t){if(!n.hash||Te(n))continue;const i=I.findOne(decodeURI(n.hash),this._element);sn(i)&&(this._targetLinks.set(decodeURI(n.hash),n),this._observableSections.set(n.hash,i))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(We),this._activateParents(t),T.trigger(this._element,Fd,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(Wd)){I.findOne(Gd,t.closest(qd)).classList.add(We);return}for(const n of I.parents(t,Bd))for(const i of I.prev(n,Kd))i.classList.add(We)}_clearActiveClass(t){t.classList.remove(We);const n=I.find(`${Pr}.${We}`,t);for(const i of n)i.classList.remove(We)}static jQueryInterface(t){return this.each(function(){const n=dr.getOrCreateInstance(this,t);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}T.on(window,Vd,()=>{for(const e of I.find(jd))dr.getOrCreateInstance(e)});Zt(dr);const Xd="tab",Jd="bs.tab",Fe=`.${Jd}`,Zd=`hide${Fe}`,th=`hidden${Fe}`,eh=`show${Fe}`,nh=`shown${Fe}`,rh=`click${Fe}`,sh=`keydown${Fe}`,ih=`load${Fe}`,oh="ArrowLeft",Ri="ArrowRight",ah="ArrowUp",Pi="ArrowDown",Hr="Home",Hi="End",Me="active",Fi="fade",Fr="show",lh="dropdown",ia=".dropdown-toggle",ch=".dropdown-menu",Vr=`:not(${ia})`,uh='.list-group, .nav, [role="tablist"]',dh=".nav-item, .list-group-item",hh=`.nav-link${Vr}, .list-group-item${Vr}, [role="tab"]${Vr}`,oa='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Wr=`${hh}, ${oa}`,fh=`.${Me}[data-bs-toggle="tab"], .${Me}[data-bs-toggle="pill"], .${Me}[data-bs-toggle="list"]`;class tn extends se{constructor(t){super(t),this._parent=this._element.closest(uh),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),T.on(this._element,sh,n=>this._keydown(n)))}static get NAME(){return Xd}show(){const t=this._element;if(this._elemIsActive(t))return;const n=this._getActiveElem(),i=n?T.trigger(n,Zd,{relatedTarget:t}):null;T.trigger(t,eh,{relatedTarget:n}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(n,t),this._activate(t,n))}_activate(t,n){if(!t)return;t.classList.add(Me),this._activate(I.getElementFromSelector(t));const i=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(Fr);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),T.trigger(t,nh,{relatedTarget:n})};this._queueCallback(i,t,t.classList.contains(Fi))}_deactivate(t,n){if(!t)return;t.classList.remove(Me),t.blur(),this._deactivate(I.getElementFromSelector(t));const i=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(Fr);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),T.trigger(t,th,{relatedTarget:n})};this._queueCallback(i,t,t.classList.contains(Fi))}_keydown(t){if(![oh,Ri,ah,Pi,Hr,Hi].includes(t.key))return;t.stopPropagation(),t.preventDefault();const n=this._getChildren().filter(a=>!Te(a));let i;if([Hr,Hi].includes(t.key))i=n[t.key===Hr?0:n.length-1];else{const a=[Ri,Pi].includes(t.key);i=As(n,t.target,a,!0)}i&&(i.focus({preventScroll:!0}),tn.getOrCreateInstance(i).show())}_getChildren(){return I.find(Wr,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,n){this._setAttributeIfNotExists(t,"role","tablist");for(const i of n)this._setInitialAttributesOnChild(i)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const n=this._elemIsActive(t),i=this._getOuterElement(t);t.setAttribute("aria-selected",n),i!==t&&this._setAttributeIfNotExists(i,"role","presentation"),n||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const n=I.getElementFromSelector(t);n&&(this._setAttributeIfNotExists(n,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,n){const i=this._getOuterElement(t);if(!i.classList.contains(lh))return;const a=(o,s)=>{const l=I.findOne(o,i);l&&l.classList.toggle(s,n)};a(ia,Me),a(ch,Fr),i.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(t,n,i){t.hasAttribute(n)||t.setAttribute(n,i)}_elemIsActive(t){return t.classList.contains(Me)}_getInnerElement(t){return t.matches(Wr)?t:I.findOne(Wr,t)}_getOuterElement(t){return t.closest(dh)||t}static jQueryInterface(t){return this.each(function(){const n=tn.getOrCreateInstance(this);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}T.on(document,rh,oa,function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),!Te(this)&&tn.getOrCreateInstance(this).show()});T.on(window,ih,()=>{for(const e of I.find(fh))tn.getOrCreateInstance(e)});Zt(tn);const ph="toast",mh="bs.toast",xe=`.${mh}`,_h=`mouseover${xe}`,gh=`mouseout${xe}`,vh=`focusin${xe}`,bh=`focusout${xe}`,Eh=`hide${xe}`,yh=`hidden${xe}`,Th=`show${xe}`,Ah=`shown${xe}`,Nh="fade",Vi="hide",jn="show",Bn="showing",Ch={animation:"boolean",autohide:"boolean",delay:"number"},wh={animation:!0,autohide:!0,delay:5e3};class xn extends se{constructor(t,n){super(t,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return wh}static get DefaultType(){return Ch}static get NAME(){return ph}show(){if(T.trigger(this._element,Th).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Nh);const n=()=>{this._element.classList.remove(Bn),T.trigger(this._element,Ah),this._maybeScheduleHide()};this._element.classList.remove(Vi),Nn(this._element),this._element.classList.add(jn,Bn),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown()||T.trigger(this._element,Eh).defaultPrevented)return;const n=()=>{this._element.classList.add(Vi),this._element.classList.remove(Bn,jn),T.trigger(this._element,yh)};this._element.classList.add(Bn),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(jn),super.dispose()}isShown(){return this._element.classList.contains(jn)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,n){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=n;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=n;break}}if(n){this._clearTimeout();return}const i=t.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){T.on(this._element,_h,t=>this._onInteraction(t,!0)),T.on(this._element,gh,t=>this._onInteraction(t,!1)),T.on(this._element,vh,t=>this._onInteraction(t,!0)),T.on(this._element,bh,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const n=xn.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}lr(xn);Zt(xn);const an=({title:e,titleClassName:t="text-danger",lineColor:n="var(--bs-danger)",lineThickness:i="1px",containerClassName:a="mb-3",lineMaxWidth:o="none"})=>{const s={height:i,maxWidth:o};return u("div",{className:a,children:u("div",{className:"d-flex align-items-center justify-content-center",children:[u("div",{className:"flex-grow-1",style:{...s,backgroundImage:`linear-gradient(to right, transparent, ${n})`}}),u("h5",{className:`${t} mx-3 my-0 arsenal`,children:e}),u("div",{className:"flex-grow-1",style:{...s,backgroundImage:`linear-gradient(to left, transparent, ${n})`}})]})})},jr=({value:e,maxValue:t,color:n,labelLeft:i=null,labelCenter:a=null,labelRight:o=null,className:s="",isOverlay:l=!1,trailingStartValue:c=null,trailColor:r="rgba(128, 128, 128, 0.5)"})=>{const h=Math.min(Math.max(e/t*100,0),100);let p=0;c!==null&&(p=Math.min(Math.max(c/t*100,0),100));let m={};return typeof n=="object"&&n.from&&n.to?m.backgroundImage=`linear-gradient(to right, ${n.from}, ${n.to} 100%)`:m.backgroundColor=n,u("div",{class:`progress-bar-pointed-container ${s} ${l?"progress-bar-pointed-container--overlay":""}`,children:[i&&u("span",{class:"progress-bar-pointed__label progress-bar-pointed__label--left",children:i}),c!==null&&u("div",{class:"progress-bar-pointed__trail",style:{width:`${p}%`,backgroundColor:r,"--progress-trail-color":r}}),u("div",{class:"progress-bar-pointed__fill",style:{width:`${h}%`,...m},children:a&&u("span",{class:"progress-bar-pointed__label progress-bar-pointed__label--center",children:a})}),o&&u("span",{class:"progress-bar-pointed__label progress-bar-pointed__label--right",children:o})]})};var zn={exports:{}},Sh=zn.exports,Wi;function xh(){return Wi||(Wi=1,function(e,t){(function(n,i){e.exports=i()})(Sh,function(){return function(n){var i={};function a(o){if(i[o])return i[o].exports;var s=i[o]={i:o,l:!1,exports:{}};return n[o].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=n,a.c=i,a.d=function(o,s,l){a.o(o,s)||Object.defineProperty(o,s,{enumerable:!0,get:l})},a.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},a.t=function(o,s){if(1&s&&(o=a(o)),8&s||4&s&&typeof o=="object"&&o&&o.__esModule)return o;var l=Object.create(null);if(a.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:o}),2&s&&typeof o!="string")for(var c in o)a.d(l,c,(function(r){return o[r]}).bind(null,c));return l},a.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(s,"a",s),s},a.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},a.p="",a(a.s=0)}([function(n,i,a){function o(s){for(var l in s)i.hasOwnProperty(l)||(i[l]=s[l])}Object.defineProperty(i,"__esModule",{value:!0}),o(a(1)),o(a(3))},function(n,i,a){Object.defineProperty(i,"__esModule",{value:!0});const o=a(2);i.DiceRoller=class{constructor(s,l=1e3){this.randFunction=Math.random,this.maxRollCount=1e3,s&&(this.randFunction=s),this.maxRollCount=l}parse(s){return o.parse(s)}roll(s){const l=o.parse(s);return this.rollType(l)}rollValue(s){return this.roll(s).value}rollParsed(s){return this.rollType(s)}rollType(s){let l;switch(s.type){case"diceExpression":l=this.rollDiceExpr(s);break;case"group":l=this.rollGroup(s);break;case"die":l=this.rollDie(s);break;case"expression":l=this.rollExpression(s);break;case"mathfunction":l=this.rollFunction(s);break;case"inline":l=this.rollType(s.expr);break;case"number":l=Object.assign(Object.assign({},s),{success:!1,valid:!0,order:0});break;default:throw new Error(`Unable to render ${s.type}`)}return s.label&&(l.label=s.label),l}rollDiceExpr(s){const l=this.rollType(s.head),c=[l],r=[],h=s.ops.reduce((p,m,_)=>{const y=this.rollType(m.tail);switch(y.order=_,c.push(y),r.push(m.op),m.op){case"+":return p+y.value;case"-":return p-y.value;default:return p}},l.value);return{dice:c,ops:r,success:!1,type:"diceexpressionroll",valid:!0,value:h,order:0}}rollGroup(s){let l=s.rolls.map((c,r)=>Object.assign(Object.assign({},this.rollType(c)),{order:r}));if(s.mods){const c=s.mods,r=h=>{const p=c.some(m=>["failure","success"].includes(m.type));return h=c.reduce((m,_)=>this.applyGroupMod(m,_),h),p&&(h=h.map(m=>(m.success||(m.value=0,m.success=!0),m))),h};if(l.length===1&&["die","diceexpressionroll"].includes(l[0].type)){const h=l[0];let p=h.type==="die"?h.rolls:h.dice.filter(m=>m.type!=="number").reduce((m,_)=>[...m,..._.type==="die"?_.rolls:_.dice],[]);p=r(p),h.value=p.reduce((m,_)=>_.valid?m+_.value:m,0)}else l=r(l)}return{dice:l,success:!1,type:"grouproll",valid:!0,value:l.reduce((c,r)=>r.valid?c+r.value:c,0),order:0}}rollDie(s){const l=this.rollType(s.count);if(l.value>this.maxRollCount)throw new Error("Entered number of dice too large.");let c,r;s.die.type==="fate"?(r={type:"fate",success:!1,valid:!1,value:0,order:0},c=Array.from({length:l.value},(m,_)=>this.generateFateRoll(_))):(r=this.rollType(s.die),c=Array.from({length:l.value},(m,_)=>this.generateDiceRoll(r.value,_))),s.mods&&(c=s.mods.reduce((m,_)=>this.applyMod(m,_),c)),s.targets&&(c=s.targets.reduce((m,_)=>this.applyMod(m,_),c).map(m=>(m.success||(m.value=0,m.success=!0),m)));let h=!1,p=0;if(s.match){const m=s.match,_=c.reduce((C,A)=>C.set(A.roll,(C.get(A.roll)||0)+1),new Map),y=new Set(Array.from(_.entries()).filter(([C,A])=>A>=m.min.value).filter(([C])=>!(m.mod&&m.expr)||this.successTest(m.mod,this.rollType(m.expr).value,C)).map(([C])=>C));c.filter(C=>y.has(C.roll)).forEach(C=>C.matched=!0),m.count&&(h=!0,p=y.size)}return s.sort&&(c=this.applySort(c,s.sort)),{count:l,die:r,rolls:c,success:!1,type:"die",valid:!0,value:h?p:c.reduce((m,_)=>_.valid?m+_.value:m,0),order:0,matched:h}}rollExpression(s){const l=this.rollType(s.head),c=[l],r=[],h=s.ops.reduce((p,m)=>{const _=this.rollType(m.tail);switch(c.push(_),r.push(m.op),m.op){case"+":return p+_.value;case"-":return p-_.value;case"*":return p*_.value;case"/":return p/_.value;case"%":return p%_.value;case"**":return p**_.value;default:return p}},l.value);return{dice:c,ops:r,success:!1,type:"expressionroll",valid:!0,value:h,order:0}}rollFunction(s){const l=this.rollType(s.expr);let c;switch(s.op){case"floor":c=Math.floor(l.value);break;case"ceil":c=Math.ceil(l.value);break;case"round":c=Math.round(l.value);break;case"abs":c=Math.abs(l.value);break;default:c=l.value}return{expr:l,op:s.op,success:!1,type:"mathfunction",valid:!0,value:c,order:0}}applyGroupMod(s,l){return this.getGroupModMethod(l)(s)}getGroupModMethod(s){const l=c=>c.value;switch(s.type){case"success":return this.getSuccessMethod(s,l);case"failure":return this.getFailureMethod(s,l);case"keep":return this.getKeepMethod(s,l);case"drop":return this.getDropMethod(s,l);default:throw new Error(`Mod ${s.type} is not recognised`)}}applyMod(s,l){return this.getModMethod(l)(s)}getModMethod(s){const l=c=>c.roll;switch(s.type){case"success":return this.getSuccessMethod(s,l);case"failure":return this.getFailureMethod(s,l);case"crit":return this.getCritSuccessMethod(s,l);case"critfail":return this.getCritFailureMethod(s,l);case"keep":return c=>this.getKeepMethod(s,l)(c).sort((r,h)=>r.order-h.order);case"drop":return c=>this.getDropMethod(s,l)(c).sort((r,h)=>r.order-h.order);case"explode":return this.getExplodeMethod(s);case"compound":return this.getCompoundMethod(s);case"penetrate":return this.getPenetrateMethod(s);case"reroll":return this.getReRollMethod(s);case"rerollOnce":return this.getReRollOnceMethod(s);default:throw new Error(`Mod ${s.type} is not recognised`)}}applySort(s,l){return s.sort((c,r)=>l.asc?c.roll-r.roll:r.roll-c.roll),s.forEach((c,r)=>c.order=r),s}getCritSuccessMethod(s,l){const c=this.rollType(s.expr);return r=>r.map(h=>{if(!h.valid||h.type!=="roll"||h.success)return h;const p=h;return this.successTest(s.mod,c.value,l(h))?p.critical="success":p.critical==="success"&&(p.critical=null),h})}getCritFailureMethod(s,l){const c=this.rollType(s.expr);return r=>r.map(h=>{if(!h.valid||h.type!=="roll"||h.success)return h;const p=h;return this.successTest(s.mod,c.value,l(h))?p.critical="failure":p.critical==="failure"&&(p.critical=null),h})}getSuccessMethod(s,l){const c=this.rollType(s.expr);return r=>r.map(h=>(h.valid&&this.successTest(s.mod,c.value,l(h))&&(h.success?h.value+=1:(h.value=1,h.success=!0)),h))}getFailureMethod(s,l){const c=this.rollType(s.expr);return r=>r.map(h=>(h.valid&&this.successTest(s.mod,c.value,l(h))&&(h.success?h.value-=1:(h.value=-1,h.success=!0)),h))}getKeepMethod(s,l){const c=this.rollType(s.expr);return r=>{if(r.length===0)return r;r=r.sort((y,C)=>s.highlow==="l"?l(C)-l(y):l(y)-l(C)).sort((y,C)=>(y.valid?1:0)-(C.valid?1:0));const h=Math.max(Math.min(c.value,r.length),0);let p=0,m=0;const _=r.reduce((y,C)=>(C.valid?1:0)+y,0)-h;for(;m<r.length&&p<_;)r[m].valid&&(r[m].valid=!1,p++),m++;return r}}getDropMethod(s,l){const c=this.rollType(s.expr);return r=>{r=r.sort((_,y)=>s.highlow==="h"?l(y)-l(_):l(_)-l(y));const h=Math.max(Math.min(c.value,r.length),0);let p=0,m=0;for(;m<r.length&&p<h;)r[m].valid&&(r[m].valid=!1,p++),m++;return r}}getExplodeMethod(s){const l=s.target?this.rollType(s.target.value):null;return c=>{const r=l?h=>this.successTest(s.target.mod,l.value,h.roll):h=>this.successTest("=",h.type==="fateroll"?1:h.die,h.roll);if(c[0].type==="roll"&&r({roll:1})&&r({roll:c[0].die}))throw new Error("Invalid reroll target");for(let h=0;h<c.length;h++){let p=c[h];p.order=h;let m=0;for(;r(p)&&m++<1e3;){const _=this.reRoll(p,++h);c.splice(h,0,_),p=_}}return c}}getCompoundMethod(s){const l=s.target?this.rollType(s.target.value):null;return c=>{const r=l?h=>this.successTest(s.target.mod,l.value,h.roll):h=>this.successTest("=",h.type==="fateroll"?1:h.die,h.roll);if(c[0].type==="roll"&&r({roll:1})&&r({roll:c[0].die}))throw new Error("Invalid reroll target");for(let h=0;h<c.length;h++){let p=c[h],m=p.roll,_=0;for(;r(p)&&_++<1e3;){const y=this.reRoll(c[h],++h);m+=y.roll,p=y}p.value=m,p.roll=m}return c}}getPenetrateMethod(s){const l=s.target?this.rollType(s.target.value):null;return c=>{const r=l?h=>this.successTest(s.target.mod,l.value,h.roll):h=>this.successTest("=",h.type==="fateroll"?1:h.die,h.roll);if(l&&c[0].type==="roll"&&r(c[0])&&this.successTest(s.target.mod,l.value,1))throw new Error("Invalid reroll target");for(let h=0;h<c.length;h++){let p=c[h];p.order=h;let m=0;for(;r(p)&&m++<1e3;){const _=this.reRoll(p,++h);_.value-=1,_.roll-=1,c.splice(h,0,_),p=_}}return c}}getReRollMethod(s){const l=s.target?this.successTest.bind(null,s.target.mod,this.rollType(s.target.value).value):this.successTest.bind(null,"=",1);return c=>{if(c[0].type==="roll"&&l(1)&&l(c[0].die))throw new Error("Invalid reroll target");for(let r=0;r<c.length;r++)for(;l(c[r].roll);){c[r].valid=!1;const h=this.reRoll(c[r],r+1);c.splice(++r,0,h)}return c}}getReRollOnceMethod(s){const l=s.target?this.successTest.bind(null,s.target.mod,this.rollType(s.target.value).value):this.successTest.bind(null,"=",1);return c=>{if(c[0].type==="roll"&&l(1)&&l(c[0].die))throw new Error("Invalid reroll target");for(let r=0;r<c.length;r++)if(l(c[r].roll)){c[r].valid=!1;const h=this.reRoll(c[r],r+1);c.splice(++r,0,h)}return c}}successTest(s,l,c){switch(s){case">":return c>=l;case"<":return c<=l;case"=":default:return c==l}}reRoll(s,l){switch(s.type){case"roll":return this.generateDiceRoll(s.die,l);case"fateroll":return this.generateFateRoll(l);default:throw new Error(`Cannot do a reroll of a ${s.type}.`)}}generateDiceRoll(s,l){const c=Math.floor(this.randFunction()*s)+1;return{critical:c===s?"success":c===1?"failure":null,die:s,matched:!1,order:l,roll:c,success:!1,type:"roll",valid:!0,value:c}}generateFateRoll(s){const l=Math.floor(3*this.randFunction())-1;return{matched:!1,order:s,roll:l,success:!1,type:"fateroll",valid:!0,value:l}}}},function(n,i,a){function o(s,l,c,r){this.message=s,this.expected=l,this.found=c,this.location=r,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,o)}(function(s,l){function c(){this.constructor=s}c.prototype=l.prototype,s.prototype=new c})(o,Error),o.buildMessage=function(s,l){var c={literal:function(m){return'"'+h(m.text)+'"'},class:function(m){var _,y="";for(_=0;_<m.parts.length;_++)y+=m.parts[_]instanceof Array?p(m.parts[_][0])+"-"+p(m.parts[_][1]):p(m.parts[_]);return"["+(m.inverted?"^":"")+y+"]"},any:function(m){return"any character"},end:function(m){return"end of input"},other:function(m){return m.description}};function r(m){return m.charCodeAt(0).toString(16).toUpperCase()}function h(m){return m.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(_){return"\\x0"+r(_)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(_){return"\\x"+r(_)})}function p(m){return m.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(_){return"\\x0"+r(_)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(_){return"\\x"+r(_)})}return"Expected "+function(m){var _,y,C,A=new Array(m.length);for(_=0;_<m.length;_++)A[_]=(C=m[_],c[C.type](C));if(A.sort(),A.length>0){for(_=1,y=1;_<A.length;_++)A[_-1]!==A[_]&&(A[y]=A[_],y++);A.length=y}switch(A.length){case 1:return A[0];case 2:return A[0]+" or "+A[1];default:return A.slice(0,-1).join(", ")+", or "+A[A.length-1]}}(s)+" but "+function(m){return m?'"'+h(m)+'"':"end of input"}(l)+" found."},n.exports={SyntaxError:o,parse:function(s,l){l=l!==void 0?l:{};var c,r={},h={start:Ms},p=Ms,m={type:"any"},_=Y("[[",!1),y=Y("]]",!1),C=function(f,v){return v&&(f.label=v),f},A=Y(">",!1),O=Y("<",!1),k=Y("=",!1),j=Y("f",!1),D=Y("cs",!1),V=Y("cf",!1),H=Y("m",!1),U=Y("t",!1),G=Y("k",!1),R=Y("l",!1),B=Y("h",!1),F=Y("d",!1),z=Y("{",!1),Z=Y(",",!1),St=Y("}",!1),mt=Y("+",!1),ot=Y("sa",!1),at=Y("sd",!1),ht=Y("!",!1),Et=Y("!!",!1),Mt=Y("!p",!1),te=Y("r",!1),ee=Y("ro",!1),ie=Y("F",!1),yt=Y("%",!1),Tt=Y("(",!1),Bt=Y(")",!1),xt=Y("-",!1),ft=function(f,v){return v.length==0?f:{head:f,type:"expression",ops:v.map(g=>({type:"math",op:g[1],tail:g[3]}))}},ne=Y("*",!1),fe=Y("/",!1),Dt=Y("**",!1),re=Y("floor",!1),Ut=Y("ceil",!1),E=Y("round",!1),P=Y("abs",!1),x=ks("integer"),Q=/^[0-9]/,it=fr([["0","9"]],!1,!1),Yt=function(){return{type:"number",value:parseInt(s.substring(W,d),10)}},vt=Y("[",!1),Kt=/^[^\]]/,L=fr(["]"],!0,!1),_t=Y("]",!1),ct=ks("whitespace"),qt=/^[ \t\n\r]/,oe=fr([" ","	",`
`,"\r"],!1,!1),d=0,W=0,Ot=[{line:1,column:1}],Gt=0,hr=[],w=0;if("startRule"in l){if(!(l.startRule in h))throw new Error(`Can't start parsing from rule "`+l.startRule+'".');p=h[l.startRule]}function Y(f,v){return{type:"literal",text:f,ignoreCase:v}}function fr(f,v,g){return{type:"class",parts:f,inverted:v,ignoreCase:g}}function ks(f){return{type:"other",description:f}}function $s(f){var v,g=Ot[f];if(g)return g;for(v=f-1;!Ot[v];)v--;for(g={line:(g=Ot[v]).line,column:g.column};v<f;)s.charCodeAt(v)===10?(g.line++,g.column=1):g.column++,v++;return Ot[f]=g,g}function Ls(f,v){var g=$s(f),b=$s(v);return{start:{offset:f,line:g.line,column:g.column},end:{offset:v,line:b.line,column:b.column}}}function S(f){d<Gt||(d>Gt&&(Gt=d,hr=[]),hr.push(f))}function aa(f,v,g){return new o(o.buildMessage(f,v),f,v,g)}function Ms(){var f,v,g,b,M,N;if(f=d,(v=_r())!==r){for(g=[],s.length>d?(b=s.charAt(d),d++):(b=r,w===0&&S(m));b!==r;)g.push(b),s.length>d?(b=s.charAt(d),d++):(b=r,w===0&&S(m));g!==r?(W=f,N=g,(M=v).root=!0,N&&(M.label=N.join("")),f=v=M):(d=f,f=r)}else d=f,f=r;return f}function la(){var f,v,g;return f=d,(v=function(){var b,M,N,$,K;if(b=d,(M=function(){var J,It,pe,At,lt,Rt,$t,zt,pt;if(J=d,s.charCodeAt(d)===123?(It="{",d++):(It=r,w===0&&S(z)),It!==r)if(tt()!==r)if((pe=pr())!==r){for(At=[],lt=d,(Rt=tt())!==r?(s.charCodeAt(d)===44?($t=",",d++):($t=r,w===0&&S(Z)),$t!==r&&(zt=tt())!==r&&(pt=pr())!==r?lt=Rt=[Rt,$t,zt,pt]:(d=lt,lt=r)):(d=lt,lt=r);lt!==r;)At.push(lt),lt=d,(Rt=tt())!==r?(s.charCodeAt(d)===44?($t=",",d++):($t=r,w===0&&S(Z)),$t!==r&&(zt=tt())!==r&&(pt=pr())!==r?lt=Rt=[Rt,$t,zt,pt]:(d=lt,lt=r)):(d=lt,lt=r);At!==r&&(lt=tt())!==r?(s.charCodeAt(d)===125?(Rt="}",d++):(Rt=r,w===0&&S(St)),Rt!==r?(W=J,It={rolls:[pe,...At.map(da=>da[3])],type:"group"},J=It):(d=J,J=r)):(d=J,J=r)}else d=J,J=r;else d=J,J=r;else d=J,J=r;return J}())!==r){for(N=[],($=$n())===r&&($=Ln())===r&&($=On())===r&&($=kn());$!==r;)N.push($),($=$n())===r&&($=Ln())===r&&($=On())===r&&($=kn());N!==r&&($=tt())!==r?((K=Mn())===r&&(K=null),K!==r?(W=b,q=M,kt=K,(rt=N).length>0&&(q.mods=(q.mods||[]).concat(rt)),kt&&(q.label=kt),b=M=q):(d=b,b=r)):(d=b,b=r)}else d=b,b=r;var q,rt,kt;return b}())===r&&(v=Rs())===r&&(v=Tr()),v!==r&&tt()!==r?((g=Mn())===r&&(g=null),g!==r?(W=f,f=v=C(v,g)):(d=f,f=r)):(d=f,f=r),f}function On(){var f,v,g;return f=d,s.charCodeAt(d)===62?(v=">",d++):(v=r,w===0&&S(A)),v===r&&(s.charCodeAt(d)===60?(v="<",d++):(v=r,w===0&&S(O)),v===r&&(s.charCodeAt(d)===61?(v="=",d++):(v=r,w===0&&S(k)))),v!==r&&(g=ae())!==r?(W=f,f=v={type:"success",mod:v,expr:g}):(d=f,f=r),f}function kn(){var f,v,g,b;return f=d,s.charCodeAt(d)===102?(v="f",d++):(v=r,w===0&&S(j)),v!==r?(s.charCodeAt(d)===62?(g=">",d++):(g=r,w===0&&S(A)),g===r&&(s.charCodeAt(d)===60?(g="<",d++):(g=r,w===0&&S(O)),g===r&&(s.charCodeAt(d)===61?(g="=",d++):(g=r,w===0&&S(k)))),g===r&&(g=null),g!==r&&(b=ae())!==r?(W=f,f=v={type:"failure",mod:g,expr:b}):(d=f,f=r)):(d=f,f=r),f}function Ds(){var f,v,g,b;return f=d,s.substr(d,2)==="cs"?(v="cs",d+=2):(v=r,w===0&&S(D)),v!==r?(s.charCodeAt(d)===62?(g=">",d++):(g=r,w===0&&S(A)),g===r&&(s.charCodeAt(d)===60?(g="<",d++):(g=r,w===0&&S(O)),g===r&&(s.charCodeAt(d)===61?(g="=",d++):(g=r,w===0&&S(k)))),g===r&&(g=null),g!==r&&(b=ae())!==r?(W=f,f=v={type:"crit",mod:g,expr:b}):(d=f,f=r)):(d=f,f=r),f}function Is(){var f,v,g,b;return f=d,s.substr(d,2)==="cf"?(v="cf",d+=2):(v=r,w===0&&S(V)),v!==r?(s.charCodeAt(d)===62?(g=">",d++):(g=r,w===0&&S(A)),g===r&&(s.charCodeAt(d)===60?(g="<",d++):(g=r,w===0&&S(O)),g===r&&(s.charCodeAt(d)===61?(g="=",d++):(g=r,w===0&&S(k)))),g===r&&(g=null),g!==r&&(b=ae())!==r?(W=f,f=v={type:"critfail",mod:g,expr:b}):(d=f,f=r)):(d=f,f=r),f}function ca(){var f,v,g,b,M;return f=d,s.charCodeAt(d)===109?(v="m",d++):(v=r,w===0&&S(H)),v!==r?(s.charCodeAt(d)===116?(g="t",d++):(g=r,w===0&&S(U)),g===r&&(g=null),g!==r?((b=Tr())===r&&(b=null),b!==r?((M=function(){var N,$,K;return N=d,s.charCodeAt(d)===62?($=">",d++):($=r,w===0&&S(A)),$===r&&(s.charCodeAt(d)===60?($="<",d++):($=r,w===0&&S(O)),$===r&&(s.charCodeAt(d)===61?($="=",d++):($=r,w===0&&S(k)))),$!==r&&(K=ae())!==r?(W=N,N=$={mod:$,expr:K}):(d=N,N=r),N}())===r&&(M=null),M!==r?(W=f,f=v=function(N,$,K){const q={type:"match",min:$||{type:"number",value:2},count:!!N};return K&&(q.mod=K.mod,q.expr=K.expr),q}(g,b,M)):(d=f,f=r)):(d=f,f=r)):(d=f,f=r)):(d=f,f=r),f}function $n(){var f,v,g,b;return f=d,s.charCodeAt(d)===107?(v="k",d++):(v=r,w===0&&S(G)),v!==r?(s.charCodeAt(d)===108?(g="l",d++):(g=r,w===0&&S(R)),g===r&&(s.charCodeAt(d)===104?(g="h",d++):(g=r,w===0&&S(B))),g===r&&(g=null),g!==r?((b=ae())===r&&(b=null),b!==r?(W=f,f=v={type:"keep",highlow:g,expr:b||Bs}):(d=f,f=r)):(d=f,f=r)):(d=f,f=r),f}function Ln(){var f,v,g,b;return f=d,s.charCodeAt(d)===100?(v="d",d++):(v=r,w===0&&S(F)),v!==r?(s.charCodeAt(d)===108?(g="l",d++):(g=r,w===0&&S(R)),g===r&&(s.charCodeAt(d)===104?(g="h",d++):(g=r,w===0&&S(B))),g===r&&(g=null),g!==r?((b=ae())===r&&(b=null),b!==r?(W=f,f=v={type:"drop",highlow:g,expr:b||Bs}):(d=f,f=r)):(d=f,f=r)):(d=f,f=r),f}function pr(){var f,v,g,b,M,N,$,K;if(f=d,(v=mr())!==r){for(g=[],b=d,(M=tt())!==r?(s.charCodeAt(d)===43?(N="+",d++):(N=r,w===0&&S(mt)),N!==r&&($=tt())!==r&&(K=mr())!==r?b=M=[M,N,$,K]:(d=b,b=r)):(d=b,b=r);b!==r;)g.push(b),b=d,(M=tt())!==r?(s.charCodeAt(d)===43?(N="+",d++):(N=r,w===0&&S(mt)),N!==r&&($=tt())!==r&&(K=mr())!==r?b=M=[M,N,$,K]:(d=b,b=r)):(d=b,b=r);g!==r?(W=f,f=v=function(q,rt){return rt.length==0?q:{head:q,type:"diceExpression",ops:rt.map(kt=>({type:"math",op:kt[1],tail:kt[3]}))}}(v,g)):(d=f,f=r)}else d=f,f=r;return f}function mr(){var f;return(f=Rs())===r&&(f=_r()),f}function Rs(){var f,v,g;return f=d,(v=function(){var b,M,N,$,K;if(b=d,(M=function(){var q,rt,kt,J;if(q=d,(rt=function(){var At,lt,Rt,$t;return At=d,(lt=ae())===r&&(lt=null),lt!==r?(s.charCodeAt(d)===100?(Rt="d",d++):(Rt=r,w===0&&S(F)),Rt!==r?(($t=function(){var zt,pt;return zt=d,s.charCodeAt(d)===70?(pt="F",d++):(pt=r,w===0&&S(ie)),pt===r&&(s.charCodeAt(d)===102?(pt="f",d++):(pt=r,w===0&&S(j))),pt!==r&&(W=zt,pt={type:"fate"}),zt=pt}())===r&&($t=function(){var zt,pt;return zt=d,s.charCodeAt(d)===37?(pt="%",d++):(pt=r,w===0&&S(yt)),pt!==r&&(W=zt,pt={type:"number",value:"100"}),zt=pt}())===r&&($t=ae()),$t!==r?(W=At,lt={die:$t,count:lt||{type:"number",value:1},type:"die"},At=lt):(d=At,At=r)):(d=At,At=r)):(d=At,At=r),At}())!==r){for(kt=[],(J=Hs())===r&&(J=Fs())===r&&(J=Ps())===r&&(J=Ws())===r&&(J=Vs());J!==r;)kt.push(J),(J=Hs())===r&&(J=Fs())===r&&(J=Ps())===r&&(J=Ws())===r&&(J=Vs());kt!==r?(W=q,pe=kt,(It=rt).mods=(It.mods||[]).concat(pe),q=rt=It):(d=q,q=r)}else d=q,q=r;var It,pe;return q}())!==r){for(N=[],($=Ln())===r&&($=$n())===r&&($=On())===r&&($=kn())===r&&($=Is())===r&&($=Ds());$!==r;)N.push($),($=Ln())===r&&($=$n())===r&&($=On())===r&&($=kn())===r&&($=Is())===r&&($=Ds());N!==r?(($=ca())===r&&($=null),$!==r?((K=function(){var q,rt;return q=d,s.substr(d,2)==="sa"?(rt="sa",d+=2):(rt=r,w===0&&S(ot)),rt!==r&&(W=q,rt={type:"sort",asc:!0}),q=rt}())===r&&(K=function(){var q,rt;return q=d,s.substr(d,2)==="sd"?(rt="sd",d+=2):(rt=r,w===0&&S(at)),rt!==r&&(W=q,rt={type:"sort",asc:!1}),q=rt}()),K===r&&(K=null),K!==r?(W=b,M=function(q,rt,kt,J){const It=rt.filter(pe=>["success","failure"].includes(pe.type));return rt=rt.filter(pe=>!It.includes(pe)),q.mods=(q.mods||[]).concat(rt),It.length>0&&(q.targets=It),kt&&(q.match=kt),J&&(q.sort=J),q}(M,N,$,K),b=M):(d=b,b=r)):(d=b,b=r)):(d=b,b=r)}else d=b,b=r;return b}())!==r&&tt()!==r?((g=Mn())===r&&(g=null),g!==r?(W=f,f=v=C(v,g)):(d=f,f=r)):(d=f,f=r),f}function Ps(){var f,v,g;return f=d,s.charCodeAt(d)===33?(v="!",d++):(v=r,w===0&&S(ht)),v!==r?((g=ln())===r&&(g=null),g!==r?(W=f,f=v={type:"explode",target:g}):(d=f,f=r)):(d=f,f=r),f}function Hs(){var f,v,g;return f=d,s.substr(d,2)==="!!"?(v="!!",d+=2):(v=r,w===0&&S(Et)),v!==r?((g=ln())===r&&(g=null),g!==r?(W=f,f=v={type:"compound",target:g}):(d=f,f=r)):(d=f,f=r),f}function Fs(){var f,v,g;return f=d,s.substr(d,2)==="!p"?(v="!p",d+=2):(v=r,w===0&&S(Mt)),v!==r?((g=ln())===r&&(g=null),g!==r?(W=f,f=v={type:"penetrate",target:g}):(d=f,f=r)):(d=f,f=r),f}function Vs(){var f,v,g;return f=d,s.charCodeAt(d)===114?(v="r",d++):(v=r,w===0&&S(te)),v!==r?((g=ln())===r&&(g=null),g!==r?(W=f,f=v={type:"reroll",target:g||js}):(d=f,f=r)):(d=f,f=r),f}function Ws(){var f,v,g;return f=d,s.substr(d,2)==="ro"?(v="ro",d+=2):(v=r,w===0&&S(ee)),v!==r?((g=ln())===r&&(g=null),g!==r?(W=f,f=v={type:"rerollOnce",target:g||js}):(d=f,f=r)):(d=f,f=r),f}function ln(){var f,v,g;return f=d,s.charCodeAt(d)===62?(v=">",d++):(v=r,w===0&&S(A)),v===r&&(s.charCodeAt(d)===60?(v="<",d++):(v=r,w===0&&S(O)),v===r&&(s.charCodeAt(d)===61?(v="=",d++):(v=r,w===0&&S(k)))),v===r&&(v=null),v!==r&&(g=ae())!==r?(W=f,f=v={type:"target",mod:v,value:g}):(d=f,f=r),f}function ae(){var f;return(f=gr())===r&&(f=Tr()),f}function _r(){var f;return(f=function(){var v,g,b,M;return v=d,s.substr(d,2)==="[["?(g="[[",d+=2):(g=r,w===0&&S(_)),g!==r&&(b=_r())!==r?(s.substr(d,2)==="]]"?(M="]]",d+=2):(M=r,w===0&&S(y)),M!==r?(W=v,v=g={type:"inline",expr:b}):(d=v,v=r)):(d=v,v=r),v}())===r&&(f=vr())===r&&(f=gr()),f}function gr(){var f,v,g,b,M,N,$;return f=d,s.charCodeAt(d)===40?(v="(",d++):(v=r,w===0&&S(Tt)),v!==r&&(g=vr())!==r?(s.charCodeAt(d)===41?(b=")",d++):(b=r,w===0&&S(Bt)),b!==r&&tt()!==r?((M=Mn())===r&&(M=null),M!==r?(W=f,N=g,($=M)&&(N.label=$),f=v=N):(d=f,f=r)):(d=f,f=r)):(d=f,f=r),f}function vr(){var f,v,g,b,M,N,$,K;if(f=d,(v=br())!==r){for(g=[],b=d,(M=tt())!==r?(s.charCodeAt(d)===43?(N="+",d++):(N=r,w===0&&S(mt)),N===r&&(s.charCodeAt(d)===45?(N="-",d++):(N=r,w===0&&S(xt))),N!==r&&($=tt())!==r&&(K=br())!==r?b=M=[M,N,$,K]:(d=b,b=r)):(d=b,b=r);b!==r;)g.push(b),b=d,(M=tt())!==r?(s.charCodeAt(d)===43?(N="+",d++):(N=r,w===0&&S(mt)),N===r&&(s.charCodeAt(d)===45?(N="-",d++):(N=r,w===0&&S(xt))),N!==r&&($=tt())!==r&&(K=br())!==r?b=M=[M,N,$,K]:(d=b,b=r)):(d=b,b=r);g!==r?(W=f,f=v=ft(v,g)):(d=f,f=r)}else d=f,f=r;return f}function br(){var f,v,g,b,M,N,$,K;if(f=d,(v=Er())!==r){for(g=[],b=d,(M=tt())!==r?(s.charCodeAt(d)===42?(N="*",d++):(N=r,w===0&&S(ne)),N===r&&(s.charCodeAt(d)===47?(N="/",d++):(N=r,w===0&&S(fe))),N!==r&&($=tt())!==r&&(K=Er())!==r?b=M=[M,N,$,K]:(d=b,b=r)):(d=b,b=r);b!==r;)g.push(b),b=d,(M=tt())!==r?(s.charCodeAt(d)===42?(N="*",d++):(N=r,w===0&&S(ne)),N===r&&(s.charCodeAt(d)===47?(N="/",d++):(N=r,w===0&&S(fe))),N!==r&&($=tt())!==r&&(K=Er())!==r?b=M=[M,N,$,K]:(d=b,b=r)):(d=b,b=r);g!==r?(W=f,f=v=ft(v,g)):(d=f,f=r)}else d=f,f=r;return f}function Er(){var f,v,g,b,M,N,$,K;if(f=d,(v=yr())!==r){for(g=[],b=d,(M=tt())!==r?(s.substr(d,2)==="**"?(N="**",d+=2):(N=r,w===0&&S(Dt)),N===r&&(s.charCodeAt(d)===37?(N="%",d++):(N=r,w===0&&S(yt))),N!==r&&($=tt())!==r&&(K=yr())!==r?b=M=[M,N,$,K]:(d=b,b=r)):(d=b,b=r);b!==r;)g.push(b),b=d,(M=tt())!==r?(s.substr(d,2)==="**"?(N="**",d+=2):(N=r,w===0&&S(Dt)),N===r&&(s.charCodeAt(d)===37?(N="%",d++):(N=r,w===0&&S(yt))),N!==r&&($=tt())!==r&&(K=yr())!==r?b=M=[M,N,$,K]:(d=b,b=r)):(d=b,b=r);g!==r?(W=f,f=v=ft(v,g)):(d=f,f=r)}else d=f,f=r;return f}function ua(){var f,v,g,b,M;return f=d,(v=function(){var N;return s.substr(d,5)==="floor"?(N="floor",d+=5):(N=r,w===0&&S(re)),N===r&&(s.substr(d,4)==="ceil"?(N="ceil",d+=4):(N=r,w===0&&S(Ut)),N===r&&(s.substr(d,5)==="round"?(N="round",d+=5):(N=r,w===0&&S(E)),N===r&&(s.substr(d,3)==="abs"?(N="abs",d+=3):(N=r,w===0&&S(P))))),N}())!==r&&tt()!==r?(s.charCodeAt(d)===40?(g="(",d++):(g=r,w===0&&S(Tt)),g!==r&&tt()!==r&&(b=vr())!==r&&tt()!==r?(s.charCodeAt(d)===41?(M=")",d++):(M=r,w===0&&S(Bt)),M!==r?(W=f,f=v={type:"mathfunction",op:v,expr:b}):(d=f,f=r)):(d=f,f=r)):(d=f,f=r),f}function yr(){var f;return(f=ua())===r&&(f=la())===r&&(f=gr()),f}function Tr(){var f,v,g,b;if(w++,f=d,s.charCodeAt(d)===45?(v="-",d++):(v=r,w===0&&S(xt)),v===r&&(v=null),v!==r){if(g=[],Q.test(s.charAt(d))?(b=s.charAt(d),d++):(b=r,w===0&&S(it)),b!==r)for(;b!==r;)g.push(b),Q.test(s.charAt(d))?(b=s.charAt(d),d++):(b=r,w===0&&S(it));else g=r;g!==r?(W=f,f=v=Yt()):(d=f,f=r)}else d=f,f=r;return w--,f===r&&(v=r,w===0&&S(x)),f}function Mn(){var f,v,g,b;if(f=d,s.charCodeAt(d)===91?(v="[",d++):(v=r,w===0&&S(vt)),v!==r){if(g=[],Kt.test(s.charAt(d))?(b=s.charAt(d),d++):(b=r,w===0&&S(L)),b!==r)for(;b!==r;)g.push(b),Kt.test(s.charAt(d))?(b=s.charAt(d),d++):(b=r,w===0&&S(L));else g=r;g!==r?(s.charCodeAt(d)===93?(b="]",d++):(b=r,w===0&&S(_t)),b!==r?(W=f,f=v=g.join("")):(d=f,f=r)):(d=f,f=r)}else d=f,f=r;return f}function tt(){var f,v;for(w++,f=[],qt.test(s.charAt(d))?(v=s.charAt(d),d++):(v=r,w===0&&S(oe));v!==r;)f.push(v),qt.test(s.charAt(d))?(v=s.charAt(d),d++):(v=r,w===0&&S(oe));return w--,f===r&&(v=r,w===0&&S(ct)),f}const js={type:"target",mod:"=",value:{type:"number",value:1}},Bs={type:"number",value:1};if((c=p())!==r&&d===s.length)return c;throw c!==r&&d<s.length&&S({type:"end"}),aa(hr,Gt<s.length?s.charAt(Gt):null,Gt<s.length?Ls(Gt,Gt+1):Ls(Gt,Gt))}}},function(n,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.DiscordRollRenderer=class{render(o){return this.doRender(o,!0)}doRender(o,s=!1){let l="";switch(o.type){case"diceexpressionroll":l=this.renderGroupExpr(o);break;case"grouproll":l=this.renderGroup(o);break;case"die":l=this.renderDie(o);break;case"expressionroll":l=this.renderExpression(o);break;case"mathfunction":l=this.renderFunction(o);break;case"roll":return this.renderRoll(o);case"fateroll":return this.renderFateRoll(o);case"number":const c=o.label?` (${o.label})`:"";return`${o.value}${c}`;case"fate":return"F";default:throw new Error("Unable to render")}return o.valid||(l="~~"+l.replace(/~~/g,"")+"~~"),s?this.stripBrackets(l):o.label?`(${o.label}: ${l})`:l}renderGroup(o){const s=[];for(const l of o.dice)s.push(this.doRender(l));return s.length>1?`{ ${s.join(" + ")} } = ${o.value}`:`{ ${this.stripBrackets(s[0])} } = ${o.value}`}renderGroupExpr(o){const s=[];for(const l of o.dice)s.push(this.doRender(l));return s.length>1?`(${s.join(" + ")} = ${o.value})`:s[0]}renderDie(o){const s=[];for(const r of o.rolls)s.push(this.doRender(r));let l=`${s.join(", ")}`;["number","fate"].includes(o.die.type)&&o.count.type==="number"||(l+=`[*Rolling: ${this.doRender(o.count)}d${this.doRender(o.die)}*]`);const c=o.matched?` Match${o.value===1?"":"es"}`:"";return l+=` = ${o.value}${c}`,`(${l})`}renderExpression(o){if(o.dice.length>1){const s=[];for(let l=0;l<o.dice.length-1;l++)s.push(this.doRender(o.dice[l])),s.push(o.ops[l]);return s.push(this.doRender(o.dice.slice(-1)[0])),s.push("="),s.push(o.value+""),`(${s.join(" ")})`}return o.dice[0].type==="number"?o.value+"":this.doRender(o.dice[0])}renderFunction(o){const s=this.doRender(o.expr);return`(${o.op}${this.addBrackets(s)} = ${o.value})`}addBrackets(o){return o.startsWith("(")||(o=`(${o}`),o.endsWith(")")||(o=`${o})`),o}stripBrackets(o){return o.startsWith("(")&&(o=o.substring(1)),o.endsWith(")")&&(o=o.substring(0,o.length-1)),o}renderRoll(o){let s=`${o.roll}`;return o.valid?o.success&&o.value===1?s=`**${o.roll}**`:o.success&&o.value===-1?s=`*${o.roll}*`:o.success||o.critical!=="success"?o.success||o.critical!=="failure"||(s=`*${o.roll}*`):s=`**${o.roll}**`:s=`~~${o.roll}~~`,o.matched&&(s=`__${s}__`),s}renderFateRoll(o){const s=o.roll===0?"0":o.roll>0?"+":"-";let l=`${o.roll}`;return o.valid?o.success&&o.value===1?l=`**${s}**`:o.success&&o.value===-1&&(l=`*${s}*`):l=`~~${s}~~`,o.matched&&(l=`__${l}__`),l}}}])})}(zn)),zn.exports}var Oh=xh();function xs(e){return String(e).charAt(0).toUpperCase()+String(e).slice(1)}const nr="/requiem-pathfinder-preact/",Ee=16,Br=4,rr=(e,t)=>Math.floor(Math.floor(e*t)/5),le=(e,t)=>{const n=e.find(i=>i.isLinked&&i.linkedStat===t);return n?rr(n.quantity,n.rank):0},Ur=(e,t,n,i=!1)=>t.replace(/\[(\w+)\]/g,(a,o)=>{const s=n[o]||0,l=le(e,o),c=s+l;return i?xs(c.toString()):`${c}[${o}]`}),kh=e=>{const t=[];return e.name||t.push("Spell name is required"),e.quantity<0&&t.push("Quantity must be 0 or higher"),e.quantity>Ee&&t.push("Quantity over maximum stack limit"),e.power<=0&&t.push("Spell level must be greater than 0"),e.dice||t.push("Damage roll is required"),t},$h=(e,t)=>{if(!e)return{isValid:!1,error:"A valid dice roll is required."};try{const n=e.replace(/\[\w+\]/g,"0");new Oh.DiceRoller().roll(n);const a=(e.match(/\[(\w+)\]/g)||[]).map(o=>o.slice(1,-1)).filter(o=>t[o]===void 0);return a.length>0?{isValid:!1,error:`Unknown stats: ${a.join(", ")}`}:{isValid:!0,error:null}}catch{return{isValid:!1,error:"Invalid dice format. Use format like '1d6+[spellAttackModifier]' or '2d8+3'"}}};function Lh(){const{characterStats:e,setCharacterStats:t}=Ne(en),{spells:n}=nn(),[i,a]=et(1),[o,s]=et(!1),[l,c]=et(!1),[r,h]=et(!1),[p,m]=et(!1),[_,y]=et(!1),[C,A]=et(null),[O,k]=et(null),[j,D]=et(!1),[V,H]=et(!1),[U,G]=et(!1),R=Ft(null),B=Ft(null),F=Ft(null),z=Ft(null),Z=Ft(null),St=300,mt=600,[ot,at]=et(!1);gt(()=>{const _t=[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map(ct=>new Se(ct));return()=>{_t.forEach(ct=>{ct&&typeof ct.dispose=="function"&&ct.dispose()})}},[U]),gt(()=>{if(o){const L=setTimeout(()=>s(!1),300);return()=>clearTimeout(L)}},[o]),gt(()=>{if(r){const L=setTimeout(()=>h(!1),300);return()=>clearTimeout(L)}},[r]),gt(()=>{if(l){const L=setTimeout(()=>c(!1),300);return()=>clearTimeout(L)}},[l]),gt(()=>{if(p){const L=setTimeout(()=>m(!1),300);return()=>clearTimeout(L)}},[p]),gt(()=>{if(_){const L=setTimeout(()=>y(!1),300);return()=>clearTimeout(L)}},[_]),gt(()=>{const L=ct=>{ct.key==="Control"&&G(!0)},_t=ct=>{ct.key==="Control"&&G(!1)};return window.addEventListener("keydown",L),window.addEventListener("keyup",_t),()=>{window.removeEventListener("keydown",L),window.removeEventListener("keyup",_t)}},[]);const ht=L=>{t(_t=>({..._t,...L}))};gt(()=>{(e.currentMp===void 0||e.maxMp===void 0)&&t(L=>({...L,currentMp:L.currentMp||0,maxMp:L.maxMp||10}))},[]);const Et=()=>{R.current&&(clearTimeout(R.current),R.current=null),B.current&&(clearTimeout(B.current),B.current=null);const L=e.tempHealth||0;let _t=!1;A(e.currentHealth),L>0?(k(L),_t=!0):k(null);let ct=L,qt=e.currentHealth,oe=i,d=!1,W=!1;if(ct>0){const Ot=Math.min(oe,ct);Ot>0&&(ct-=Ot,oe-=Ot,h(!0),H(!0),d=!0)}if(oe>0&&qt>0){const Ot=Math.min(oe,qt);Ot>0&&(qt=Math.max(0,qt-Ot),s(!0),D(!0),W=!0)}W&&setTimeout(()=>D(!1),200),d&&setTimeout(()=>H(!1),200),setTimeout(()=>{t(Gt=>({...Gt,currentHealth:qt,tempHealth:ct}));const Ot=1e3;R.current=setTimeout(()=>{A(qt)},Ot),_t&&(B.current=setTimeout(()=>{k(ct)},Ot))},50),a(1)},Mt=()=>{c(!0),ht({currentHealth:Math.min(e.maxHealth,e.currentHealth+i)}),a(1)},te=()=>{y(!0),ht({tempHealth:(e.tempHealth||0)+i}),a(1)},ee=()=>{a(U?e.maxHealth||0:L=>Math.min(L+1,e.maxHealth||1/0))},ie=()=>{a(U?0:L=>Math.max(0,L-1))},yt=()=>{m(!0),ht({currentMp:Math.max(0,e.currentMp-i)}),a(1)},Tt=()=>{m(!0),ht({currentMp:Math.min(e.maxMp,e.currentMp+i)})},Bt=()=>{const L=Math.max(0,Math.min(e.maxHealth,i));ht({currentHealth:L}),c(!0),a(1)},xt=()=>{const L=Math.max(0,Math.min(e.maxMp,i));ht({currentMp:L}),m(!0),a(1)},ft=()=>{ht({tempHealth:0}),h(!0)},ne=()=>{e.maxHealth!==void 0&&(ht({currentHealth:e.maxHealth}),c(!0))},fe=()=>{e.maxMp!==void 0&&(ht({currentMp:e.maxMp}),m(!0))},Dt=L=>{L.type==="touchstart"&&L.preventDefault(),at(!0),Z.current=setTimeout(()=>{ne(),ft(),A(e.maxHealth||it),k(0),at(!1),F.current&&(clearTimeout(F.current),F.current=null)},mt)},re=L=>{L.type==="touchstart"&&L.preventDefault(),at(!0),Z.current=setTimeout(()=>{fe(),at(!1),z.current&&(clearTimeout(z.current),z.current=null)},mt)},Ut=L=>{if(Z.current&&(clearTimeout(Z.current),Z.current=null,ot&&L.type==="touchend")){const _t=L.currentTarget.getAttribute("data-bar-type");_t==="hp"?P():_t==="mp"&&x()}at(!1)},E=()=>{Z.current&&(clearTimeout(Z.current),Z.current=null),at(!1)},P=()=>{ot||(F.current?(clearTimeout(F.current),F.current=null,ne(),ft(),A(e.maxHealth||it),k(0)):(Bt(),F.current=setTimeout(()=>{F.current=null},St)))},x=()=>{ot||(z.current?(clearTimeout(z.current),z.current=null,fe()):(xt(),z.current=setTimeout(()=>{z.current=null},St)))},Q=e.currentHealth||0,it=Math.max(1,e.maxHealth||0),Yt=e.tempHealth||0,vt=e.currentMp||0,Kt=Math.max(1,e.maxMp||0);return u("div",{className:"hit-points-component-container container-fluid mb-4",children:[u("div",{className:"row align-items-center mb-3",children:u("div",{className:"d-flex justify-content-center align-items-center gap-1",children:[u("button",{onClick:yt,className:"btn btn-outline-primary btn-icon-square","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Use MP",children:u("i",{className:"fas fa-bolt-lightning"})}),u("button",{onClick:ft,className:"btn btn-icon-square btn-outline-warning","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Clear Temporary HP","data-bs-original-title":"Clear Temporary HP",children:u("i",{className:"fas fa-times-circle"})}),u("button",{onClick:Et,className:"btn btn-icon-square btn-outline-danger","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Damage HP","data-bs-original-title":"Damage HP",children:u("i",{className:"fas fa-heart-circle-minus"})}),u("div",{className:"input-group amount-input-container",style:{width:"auto",alignItems:"center"},children:[u("button",{onClick:ie,className:"btn btn-outline-secondary btn-icon-square amount-control-btn",type:"button","data-bs-toggle":"tooltip","data-bs-placement":"top",title:U?"Set to Min (0)":"Decrease Amount","data-bs-original-title":U?"Set to Min (0)":"Decrease Amount",children:u("i",{className:"fas fa-minus"})}),u("input",{type:"number",value:i,onChange:L=>a(Math.max(0,parseInt(L.currentTarget.value)||0)),className:"form-control text-center bg-dark text-light",min:"0",style:{width:"70px",height:"40px"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Enter amount","aria-label":"Amount for HP/MP changes"}),u("button",{onClick:ee,className:"btn btn-outline-secondary btn-icon-square amount-control-btn",type:"button","data-bs-toggle":"tooltip","data-bs-placement":"top",title:U?`Set to Max (${e.maxHealth||0})`:"Increase Amount","data-bs-original-title":U?`Set to Max (${e.maxHealth||0})`:"Increase Amount",children:u("i",{className:"fas fa-plus"})})]}),u("button",{onClick:Mt,className:"btn btn-icon-square btn-outline-success","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Heal HP","data-bs-original-title":"Heal HP",children:u("i",{className:"fas fa-heart-circle-plus"})}),u("button",{onClick:te,className:"btn btn-icon-square btn-outline-info","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Heal Temporary HP","data-bs-original-title":"Heal Temporary HP",children:u("i",{className:"fas fa-heart-pulse"})}),u("button",{onClick:Tt,className:"btn btn-outline-info btn-icon-square","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Restore MP","data-bs-original-title":"Restore MP",children:u("i",{className:"fas fa-droplet"})})]})}),u("div",{className:"mb-3",children:["                ",u("div",{style:{position:"relative",cursor:"pointer"},className:"mb-2",onClick:L=>{L.type!=="touchend"&&P()},onMouseDown:Dt,onMouseUp:Ut,onMouseLeave:E,onTouchStart:Dt,onTouchEnd:Ut,onTouchCancel:E,onContextMenu:L=>L.preventDefault(),"data-bar-type":"hp","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Click to Set HP to ${i}, Long press/double click to reset HP & Temp HP`,"data-bs-original-title":`Click to Set HP to ${i}, Long press/double click to reset HP & Temp HP`,children:[u(jr,{value:Q,maxValue:it,color:{from:"#ef4444",to:"#e11d48"},labelRight:`${Q} / ${it}`,trailingStartValue:C,trailColor:"rgba(200, 0, 0, 0.7)",className:j?"progress-bar-damage-flash":""}),(Yt>0||O!==null)&&u(jr,{value:Yt,maxValue:it,color:{from:"#21d2ec",to:"#14b8a7"},labelCenter:Yt>0?`${Yt} Temp`:"",isOverlay:!0,className:`health-overlay-bar ${V?"progress-bar-damage-flash":""}`,trailingStartValue:O,trailColor:"rgba(0, 50, 200, 0.7)"})]}),"                ",u("div",{style:{cursor:"pointer"},onClick:L=>{L.type!=="touchend"&&x()},onMouseDown:re,onMouseUp:Ut,onMouseLeave:E,onTouchStart:re,onTouchEnd:Ut,onTouchCancel:E,onContextMenu:L=>L.preventDefault(),"data-bar-type":"mp","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Click to Set MP to ${i}, Long press/double click to Full Restore MP`,"data-bs-original-title":`Click to Set MP to ${i}, Long press/double click to Full Restore MP`,children:u(jr,{value:vt,maxValue:Kt,color:{from:"#3c82f6",to:"#6366f1"},labelRight:`${vt} / ${Kt}`,className:p?"progress-bar-damage-flash":"",trailingStartValue:vt,trailColor:"rgba(0, 50, 200, 0.7)"})})]})]})}const nt=Object.freeze({PHYS:"Physical",FIRE:"Fire",ICE:"Cold",ELEC:"Electricity",FORCE:"Force",PSY:"Psychic",CHEM:"Chemical",RAD:"Radiant",VOID:"Void",TRUE:"Almighty"}),ut=Object.freeze({WEAK:"Weak",NEUTRAL:"Neutral",RESIST:"Resist",IMMUNE:"Immune",ABSORB:"Drain",REFLECT:"Reflect"}),Mh={[nt.PHYS]:"",[nt.CHEM]:"",[nt.ICE]:"",[nt.ELEC]:"",[nt.FIRE]:"",[nt.FORCE]:"",[nt.RAD]:"",[nt.VOID]:"",[nt.PSY]:""},_n=e=>Mh[e]||"",Dh=e=>({[nt.PHYS]:"Phys",[nt.CHEM]:"Chem",[nt.ICE]:"Ice",[nt.ELEC]:"Elec",[nt.FIRE]:"Fire",[nt.FORCE]:"Force",[nt.RAD]:"Rad",[nt.VOID]:"Void",[nt.PSY]:"Psy",[nt.TRUE]:"???"})[e]||"???",Ih=e=>({[ut.WEAK]:"WK",[ut.NEUTRAL]:"-",[ut.RESIST]:"RES",[ut.IMMUNE]:"NULL",[ut.ABSORB]:"DR",[ut.REFLECT]:"RFL"})[e]||"???",Rh="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%20style='height:%20512px;%20width:%20512px;'%3e%3cg%20class=''%20transform='translate(0,0)'%20style=''%3e%3cpath%20d='m19.36%2019.457-.38%2027.84%20267.127%20154.75-58.703%2019.916%2057.602%2019.36L142.12%20383.546l-19.214-19.213-51.47%20114.324%20123.125-43.482-17.492-18.95%20151.868-151.87%2012.433%2043.078%2022.976-68.5%2056.675-16.565-57.475-15.492-22.934-79.828-14.145%2048.266-268.65-155.41-38.454-.446zM370.614%2081.94c-4.53.02-9.035.12-13.51.302-3.275.134-6.528.32-9.76.547l31.25%20108.786%20104.05%2028.045c6.204-39.085%208.902-80.275%209.18-120.075C456.37%2088.82%20415.098%2082.257%20375.15%2081.95a403.83%20403.83%200%200%200-4.537-.01zm-36.87%202.1c-31.99%203.653-61.013%2012.153-83.014%2025.87l64.493%2037.31%2018.52-63.18zm148.18%20139.997L378.958%20254.13l-38.93%20116.054-20.268-70.225-39.07%2039.067c18.814%2035.364%2046.1%2062.287%2086.175%2077.604%2047.473-17.834%2078.566-62.795%2098.014-121.6%207.323-22.14%2012.905-46.11%2017.042-70.993z'%20fill='%23fff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",Ph="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%20style='height:%20512px;%20width:%20512px;'%3e%3cg%20class=''%20transform='translate(0,0)'%20style=''%3e%3cpath%20d='M362.188%2017.998c-12.9%2065.825-49.788%20140.505-98.616%20197.37L352%20224l-89.377%2019.414%2052.197%2075.27-71.111-56.364L224%20336l-8.576-73.182%202.812-2.779c-45.221%2040.71-35.888%2074.86.702%2096.49%206.775%204.005%2016.257%209.046%2027.38%208.7%2058.243-1.813%2093.255%2035.012%20126.575%2076.199%2018.234%2022.54%2048.35%2030.059%2073.529%2044.246%2052.44%2029.548%2067.894-32.667%2014.767-53.445l-70.677-111.036c-11.42-53.08%2052.186-171.824%20103.49-248.37V17.997zM92.454%2023.424v32.17l32.799%2032.79%208.043-24.126zM78.578%2067.352c-.233-.026-.57.037-1.224.199-1.31.323-3.41%201.482-5.075%203.146-1.664%201.664-2.823%203.763-3.146%205.073-.266%201.074-.207%201.3.012%201.61l120.228%20120.208%203.275-6.55%206.545-3.272L78.97%2067.563c-.123-.086-.24-.195-.39-.211zM21.162%2087.029%2062%20127.86l24.13-8.043-30.335-30.33-.397-.396-.343-.442a17.99%2017.99%200%200%201-1.112-1.619zm213.563%20103.098-28.663%2014.326-14.33%2028.654%2038.264%2015.303%2020.096-19.869z'%20fill='%23fff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",Hh="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%20style='height:%20512px;%20width:%20512px;'%3e%3cg%20class=''%20transform='translate(0,0)'%20style=''%3e%3cpath%20d='M372.48%2031.215c-77.65%200-116.48%2065.73-116.48%2065.73s-38.83-65.72-116.48-65.72c-37.14%200-107.77%2033.72-107.77%20125.13%200%20161.24%20224.25%20324.43%20224.25%20324.43s224.25-163.19%20224.25-324.43c0-91.42-70.63-125.13-107.77-125.14zm-145.492%20115.02h60.698v79.415h79.238v60.7h-79.238v79.884h-60.698V286.35h-80.064v-60.7h80.064z'%20fill='%23fff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",Fh=()=>{const{characterStats:e,setCharacterStats:t}=Ne(en),[n,i]=et(null);gt(()=>{let r=!e.affinities;if(e.affinities){const h=Object.keys(nt)[0];h&&e.affinities[nt[h]]&&typeof e.affinities[nt[h]]!="object"&&(r=!0)}if(r){const h={};Object.values(nt).forEach(p=>{h[p]={type:ut.NEUTRAL,mastered:!1}}),t(p=>({...p,affinities:h}))}},[e.affinities,t]);const a=r=>{i(h=>h===r?null:r)},o=(r,h)=>{t(p=>{var m;return{...p,affinities:{...p.affinities,[r]:{...((m=p.affinities)==null?void 0:m[r])||{type:ut.NEUTRAL,mastered:!1},type:h}}}})},s=r=>{t(h=>{var p,m,_;return{...h,affinities:{...h.affinities,[r]:{...((p=h.affinities)==null?void 0:p[r])||{type:ut.NEUTRAL,mastered:!1},mastered:!((_=(m=h.affinities)==null?void 0:m[r])!=null&&_.mastered)}}}})},l=r=>{switch(r){case ut.WEAK:return"danger";case ut.RESIST:return"info";case ut.IMMUNE:return"warning";case ut.ABSORB:return"success";case ut.REFLECT:return"primary";default:return"secondary"}},c=r=>{const h={width:"1.25em",height:"1.25em",color:"white"};switch(r){case ut.WEAK:return u("img",{src:Ph,alt:"Weak",style:h});case ut.RESIST:return u("i",{className:"fas fa-shield-alt",style:h});case ut.IMMUNE:return u("i",{className:"fas fa-ban",style:h});case ut.ABSORB:return u("img",{src:Hh,alt:"Absorb",style:h});case ut.REFLECT:return u("img",{src:Rh,alt:"Reflect",style:h});default:return u("i",{className:"fas fa-minus",style:h})}};return!e.affinities||typeof e.affinities[Object.values(nt)[0]]!="object"?u("div",{className:"p-3",children:"Loading affinities..."}):u("div",{className:"affinity-tracker p-3",children:[u(an,{title:"ELEMENTAL AFFINITIES"}),u("div",{className:"element-grid mt-4 gap-1",children:Object.values(nt).filter(r=>r!=="Almighty").map(r=>{const h=e.affinities[r]||{type:ut.NEUTRAL,mastered:!1};return u("div",{className:`element-item clickable-card mb-3 ${h.mastered?"gold-bg":""} ${n===r?"editing":""}`,onClick:()=>a(r),children:[h.mastered&&u("div",{className:"mastery-watermark",children:"MASTERY"}),"                            ",u("div",{className:"element-header d-flex align-items-center justify-content-between mb-1",children:[u("div",{className:"d-flex align-items-center element-info",children:[u("span",{className:"element-icon",children:_n(r)}),u("div",{className:"element-names",children:[u("span",{className:"arsenal element-fullname",children:[r,":"]}),u("span",{className:"arsenal element-shortname",children:[Dh(r),":"]})]}),u("div",{className:`arsenal ms-1 affinity-names text-${l(h.type)}`,children:[u("span",{className:"affinity-fullname",children:h.type}),u("span",{className:"affinity-shortname",children:Ih(h.type)})]})]}),u("button",{className:`mastery-toggle-button ${h.mastered?"mastered":""}`,onClick:p=>{p.stopPropagation(),s(r)},title:h.mastered?"Disable Mastery":"Enable Mastery",children:u("i",{className:`${h.mastered?"fas fa-star":"fa-regular fa-star"}`})})]}),n===r&&u("div",{className:"affinity-buttons btn-group d-flex mt-2",children:Object.values(ut).map(p=>u("button",{className:`btn btn-${h.type===p?l(p):"dark inactive-btn"}`,onClick:m=>{m.stopPropagation(),o(r,p)},title:p,children:c(p)},p))})]},r)})})]})};function Vh(){const{spells:e}=nn(),{characterStats:t,setCharacterStats:n}=Ne(en),i=()=>(t.speed||0)+le(e,"speed"),a=l=>{n(c=>({...c,...l}))},o=l=>{const c=l.currentTarget,r=Math.max(1,parseInt(c.value)||1);a({maxHealth:r}),t.currentHealth>r&&a({currentHealth:r})},s=l=>{const c=l.currentTarget,r=Math.max(1,parseInt(c.value)||1);a({maxMp:r}),t.currentMp>r&&a({currentMp:r})};return u("div",{className:"character-sheet container-fluid",children:u("div",{className:"column",children:[u(Lh,{}),u("div",{className:"row justify-content-between mt-4",children:[u("div",{className:"col-md-7",children:u(Fh,{})}),u("div",{className:"col-md-5 p-3",children:[u(an,{title:"PLAYER CONDITION"}),u("div",{className:"row align-items-center mb-3",children:[u("div",{className:"col-auto",children:u("div",{className:"d-flex gap-2",children:[u("div",{className:"text-center",children:[u("small",{className:"d-block mb-1 text-secondary",children:"Speed"}),u("input",{type:"number",className:"form-control form-control box-no-input text-center bg-dark text-light",id:"speedInput",value:i()+30,readOnly:!0,"aria-label":"Speed"})]}),u("div",{className:"text-center",children:[u("small",{className:"d-block mb-1 text-secondary",children:"AC"}),u("input",{type:"number",className:"form-control box-no-input text-center bg-dark text-light",id:"acInput",value:t.AC||0,readOnly:!0,"aria-label":"Armor Class"})]})]})}),u("div",{className:"col-auto ms-auto",children:u("div",{className:"d-flex gap-2",children:[u("div",{className:"text-center",children:[u("small",{className:"d-block mb-1 text-secondary",children:"Max HP"}),u("input",{type:"number",className:"form-control form-control hp-input text-center bg-dark text-light",id:"maxHealthInput",value:t.maxHealth||"",onChange:o,min:"1","aria-label":"Maximum Hit Points"})]}),u("div",{className:"text-center",children:[u("small",{className:"d-block mb-1 text-secondary",children:"Max MP"}),u("input",{type:"number",className:"form-control form-control hp-input text-center bg-dark text-light",id:"maxMpInput",value:t.maxMp||"",onChange:s,min:"1","aria-label":"Maximum Mana Points"})]})]})})]}),u("div",{className:"conditions-tracker-placeholder p-3 border rounded bg-dark-subtle",children:[u("h5",{className:"text-secondary-emphasis",children:"CONDITIONS TRACKER"}),u("p",{className:"text-muted",children:"(Placeholder for future implementation)"})]})]})]})]})})}const Wh=({spellToDelete:e,confirmDelete:t,setSpellToDelete:n})=>u("div",{className:`modal fade ${e?"show":""}`,style:{display:e?"block":"none"},tabIndex:-1,children:u("div",{className:"modal-dialog",children:u("div",{className:"modal-content",children:[u("div",{className:"modal-header",children:[u("h5",{className:"modal-title",children:"Confirm Deletion"}),u("button",{type:"button",className:"btn-close",onClick:()=>n(null),"aria-label":"Close"})]}),u("div",{className:"modal-body",children:"Are you sure you want to delete this spell?"}),u("div",{className:"modal-footer",children:[u("button",{type:"button",className:"btn btn-secondary",onClick:()=>n(null),children:"No, Keep It"}),u("button",{type:"button",className:"btn btn-danger",onClick:t,children:"Yes, Delete It"})]})]})})}),jh=({isModalOpen:e,closeModal:t,spellBeingEdited:n,currentSpell:i,setCurrentSpell:a,incrementPower:o,decrementPower:s,getSpellRank:l,getActionLabel:c,validateDiceRoll:r,diceError:h,saveSpell:p,removeSpell:m})=>u("div",{className:`modal ${e?"show":""}`,style:{display:e?"block":"none"},tabIndex:-1,children:u("div",{className:"modal-dialog",children:u("div",{className:"modal-content",children:[u("div",{className:"modal-header",children:[u("h5",{className:"modal-title",children:n?"Edit Spell Entry":"Add Spell"}),u("button",{type:"button",className:"btn-close",onClick:t})]}),u("div",{className:"modal-body",children:[u("div",{className:"mb-2",children:[u("label",{className:"form-label",children:"Spell Name"}),u("input",{type:"text",className:"form-control",placeholder:"Spell Name",value:i.name,onInput:_=>a({...i,name:_.currentTarget.value})})]}),u("div",{className:"mb-2",children:[u("label",{className:"form-label",children:"Spell Level"}),u("div",{className:"input-group",children:[u("button",{className:"btn btn-outline-secondary",type:"button",onClick:s,disabled:i.power<=1,children:u("i",{className:"fas fa-minus"})}),u("input",{type:"number",className:`form-control ${i.power<=0?"is-invalid":""}`,placeholder:"Spell Level",min:"1",value:i.power,onInput:_=>{const y=Math.max(1,parseInt(_.currentTarget.value,10)||1);a({...i,power:y,rank:l(y)})}}),u("button",{className:"btn btn-outline-secondary",type:"button",onClick:o,children:u("i",{className:"fas fa-plus"})}),i.power<=0&&u("div",{className:"invalid-feedback",children:"Spell level must be at least 1"})]})]}),u("div",{className:"alert alert-info py-1 mb-2",children:[u("i",{className:"fas fa-link me-2"}),u("small",{className:"text-muted d-block mt-1",children:["This spell's ",u("a",{href:"https://docs.google.com/document/d/1ZTxCemR8j6GhIMqhvmBd7kOo8wNsOisO_vOutlQBYv0/edit?tab=t.0",target:"_blank",children:"Soul Link Rank"})," will be ",u("b",{children:[l(i.power),"."]})]})]}),u("label",{className:"form-label",children:"Actions to Cast"}),u("div",{className:"input-group mb-2",children:[u("span",{className:"input-group-text",children:c(i.actions)}),u("select",{className:"form-select",value:i.actions,onChange:_=>a({...i,actions:parseInt(_.currentTarget.value)}),children:[u("option",{value:"1",children:"1 Action"}),u("option",{value:"2",children:"2 Actions"}),u("option",{value:"3",children:"3 Actions"}),u("option",{value:"0",children:"Free Action"})]})]}),u("label",{className:"form-label",children:"Element"}),u("div",{className:"input-group mb-2",children:[u("span",{className:"input-group-text",children:_n(i.element)}),u("select",{className:"form-select",value:i.element,onChange:_=>a({...i,element:_.currentTarget.value}),children:Object.entries(nt).map(([_,y])=>u("option",{value:y,children:y},_))})]}),u("label",{className:"form-label",children:"Damage Roll(s)"}),u("div",{className:"input-group mb-2",children:[u("span",{className:"input-group-text",children:u("i",{className:"fas fa-dice-d20"})}),u("input",{type:"text",className:`form-control ${h?"is-invalid":""}`,placeholder:"Dice Roll (e.g. 1d4)",value:i.dice,onInput:_=>{const y=_.currentTarget.value;a({...i,dice:y}),r(y)}}),h&&u("div",{className:"invalid-feedback",children:h})]}),u("div",{className:"alert alert-info py-1 mb-2",children:[u("i",{className:"fas fa-info-circle me-2"}),u("small",{children:"Use [stat] to include a stat's value (e.g., [strength] + 1d6)"})]}),u("div",{className:"mb-2",children:[u("label",{className:"form-label",children:"Spell Description"}),u("textarea",{className:"form-control",placeholder:"Spell Description",value:i.description,onInput:_=>a({...i,description:_.currentTarget.value})})]}),u("div",{className:"mb-2",children:[u("label",{className:"form-label",children:["Amount currently stocked ",u("i",{children:'("Spell Charges")'})]}),u("div",{className:"input-group",children:u("input",{type:"number",className:`form-control ${i.quantity<0||i.quantity>Ee?"is-invalid":""}`,placeholder:"Quantity",min:"0",max:Ee.toString(),value:i.quantity,onInput:_=>{const y=parseInt(_.currentTarget.value,10)||0;y>Ee?a({...i,quantity:Ee}):a({...i,quantity:Math.max(0,y)})}})})]})]}),u("div",{className:"modal-footer",children:[u("button",{type:"button",className:"btn btn-secondary",onClick:t,children:[u("i",{className:"fas fa-times me-1"}),"Close"]}),n&&u("button",{type:"button",className:"btn btn-danger",onClick:()=>m(n.id),children:[u("i",{className:"fas fa-trash-alt me-1"}),"Delete"]}),u("button",{type:"button",className:"btn btn-success",onClick:p,children:[u("i",{className:`fas ${n?"fa-save":"fa-plus"} me-1`}),n?"Save Changes":"Add Spell"]})]})]})})}),Bh=({isLinkModalOpen:e,closeLinkModal:t,currentSpell:n,setCurrentSpell:i,saveSpell:a,getLinkedStats:o})=>{var l;if(!n)return null;const{spells:s}=nn();return u("div",{className:`modal fade ${e?"show":""}`,style:{display:e?"block":"none"},tabIndex:-1,children:u("div",{className:"modal-dialog",children:u("div",{className:"modal-content",children:[u("div",{className:"modal-header",children:[u("h5",{className:"modal-title",children:`Link ${n.name} to stat`}),u("button",{type:"button",className:"btn-close",onClick:t,"aria-label":"Close"})]}),u("div",{className:"modal-body",children:u("div",{className:"input-group mb-2",children:[u("span",{className:"input-group-text gap-1",children:u("i",{className:`fas ${n.linkedStat&&n.linkedStat!=="None"&&((l=bt[n.linkedStat])==null?void 0:l.icon)||"fa-link-slash"}`})}),u("select",{className:"form-select",value:n.linkedStat||"None",onChange:c=>i({...n,linkedStat:c.currentTarget.value==="None"?null:c.currentTarget.value,isLinked:c.currentTarget.value!=="None"}),children:[u("option",{value:"None",children:"None"}),Object.entries(bt).map(([c,r])=>(!o().includes(c)||c===n.linkedStat)&&r.type!==Nt.CORE?u("option",{value:c,children:r.name},c):null)]}),u("span",{className:"input-group-text",children:["+",rr(n.quantity,n.rank)]})]})}),u("div",{className:"modal-footer",children:[u("button",{type:"button",className:"btn btn-secondary",onClick:t,children:[u("i",{className:"fas fa-times me-1"}),"Close"]}),u("button",{type:"button",className:"btn btn-success",onClick:a,children:[u("i",{className:`fas ${n.id?"fa-save":"fa-plus"} me-1`})," ",n.id?"Save Changes":"Add Spell"]})]})]})})})},Os=()=>{const[e,t]=et(null);return gt(()=>{t(document.createElement("div"))},[]),gt(()=>{if(e)return e.className="toast-container position-fixed bottom-0 end-0 p-3",document.body.appendChild(e),()=>{document.body.removeChild(e)}},[e]),{showToast:(i,a="info-circle",o="primary",s="Notification")=>{if(!e)return;const l=document.createElement("div");l.className="toast",l.setAttribute("role","alert"),l.setAttribute("aria-live","assertive"),l.setAttribute("aria-atomic","true"),l.innerHTML=`
            <div class="toast-header">
                <i class="fas fa-${a} me-2 text-${o}"></i>
                <strong class="me-auto">${s}</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body">
                ${i}
            </div>
        `,e.appendChild(l),new xn(l,{autohide:!0,delay:3e3}).show(),l.addEventListener("hidden.bs.toast",()=>{e.removeChild(l)})}}},Uh=()=>{const{characterStats:e,setCharacterStats:t}=Ne(en),{spells:n,setSpells:i,getLinkedStats:a}=nn(),{showToast:o}=Os(),s={name:"",quantity:1,power:1,dice:"",description:"",actions:1,rank:1,isLinked:!1,linkedStat:"None",element:nt.PHYS},[l,c]=et(s),[r,h]=et(null),[p,m]=et(!1),[_,y]=et(!1),[C,A]=et(null),[O,k]=et(!1);gt(()=>{const E=x=>{x.key==="Control"&&k(!0)},P=x=>{x.key==="Control"&&k(!1)};return window.addEventListener("keydown",E),window.addEventListener("keyup",P),()=>{window.removeEventListener("keydown",E),window.removeEventListener("keyup",P)}},[]);const j=E=>{var P,x;return E&&((x=(P=e.affinities)==null?void 0:P[E.element])==null?void 0:x.mastered)||!1},D=E=>{E&&V(j(E))},V=E=>{const P=e.luck+le(n,"luck")||0,x=Math.min(P,Br);var Q=` Luck=[[${P}`;P>Br?Q+=`]] (+${Br} max bonus)`:Q+="]]";const Yt=`${E?2:1}d6cf1 + ${x}[Luck Bonus]`,vt=E?"Draw Spell (Mastery)":"Draw Spell",Kt=`&{template:default} {{name=${vt}}} {{Charges Gained=[[${Yt}]]}} {{${Q}}} {{Note=If the number is highlighted red, the true amount of Charges Gained is that total MINUS the Luck Bonus.}}`;navigator.clipboard.writeText(Kt).then(()=>{o(`${vt} command copied! Paste it into Roll20.`,"clipboard","success","Copied to clipboard")}).catch(L=>{console.error("Failed to copy command: ",L),o("Failed to copy command.","exclamation-triangle","danger","Copy Error")})},H=E=>{if(E.quantity>0&&E.dice)try{const P=Ur(n,E.dice,e),x=_n(E.element),Q=Ur(n,"1d20+[strength]",e);let it;E.actions===0?it="Free Action":it=E.actions===1?"Action":"Actions";const Yt=`&{template:default} {{name=${E.name}}}                                 {{Actions=${E.actions} ${it}}}                                 {{Level=**Spell ${E.power}** (S.Link Rank ${E.rank})}}                                 {{Attack=[[${Q}]]}}                                 {{Damage=[[${P}]] ${x} ${E.element}}}                                 ${E.description?`{{Description=${E.description}}}
                                `:""}`;navigator.clipboard.writeText(Yt),o("Spell roll command copied! Paste it into the text chat on Roll20.","clipboard","success","Copied to clipboard"),Et(E.id,"quantity",E.quantity-1)}catch(P){alert(P.message||"Invalid dice format!")}else o("No more charges of this spell remaining!","exclamation-triangle","warning","Cannot cast spell")},U=(E,P,x)=>{const Q=P-x,it=`${E.name}: ${x}  ${P} (${Q>=0?"+":""}${Q})`;console.log(it)},G=E=>{A(C===E?null:E)};gt(()=>{localStorage.setItem("spells",JSON.stringify(n))},[n]),gt(()=>{const P=[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map(x=>new Se(x));return()=>{P.forEach(x=>x.dispose())}},[]);const R=(E=null)=>{h(E),c(E||s),m(!0)},B=()=>{h(null),m(!1)},F=(E=null)=>{h(E),c(E||s),y(!0)},z=()=>{h(null),y(!1)},[Z,St]=et(""),mt=E=>{const P=$h(E,e);return St(P.error||""),P.isValid},ot=()=>{const E=kh(l);if(E.length>0){alert(`Please fix the following:
${E.join(`
`)}`);return}mt(l.dice)&&(i(r?n.map(P=>P.id===r.id?{...l,id:r.id}:P):[...n,{...l,id:Date.now()}]),p&&B(),_&&z())},[at,ht]=et(null),Et=(E,P,x)=>{const Q=n.find(it=>it.id===E);Q&&(Q.quantity!==x&&(ht(E),setTimeout(()=>ht(null),300),U(Q,x,Q.quantity)),i(n.map(it=>it.id===E?{...it,[P]:x}:it)))},[Mt,te]=et(null),ee=E=>{te(E)},ie=()=>{Mt&&(n.find(E=>E.id===Mt),i(n.filter(E=>E.id!==Mt)),te(null),B())},yt=(E,P)=>{const x=[...n],Q=E+P;Q>=0&&Q<n.length&&([x[E],x[Q]]=[x[Q],x[E]],i(x))},Tt=()=>{const E=l.power+1;c({...l,power:E,rank:wr(E)})},Bt=()=>{if(l.power>1){const E=l.power-1;c({...l,power:E,rank:wr(E)})}},[xt,ft]=et(1),ne=E=>{const P=n.find(Q=>Q.id===E),x=Math.min(Ee,P.quantity+xt);Et(E,"quantity",x),ft(1)},fe=E=>{const P=n.find(Q=>Q.id===E),x=Math.max(0,P.quantity-xt);Et(E,"quantity",x),ft(1)},Dt=E=>{let P="",x="";switch(E){case 0:P="[free-action]",x="Free Action";break;case 1:P="[one-action]",x="One Action";break;case 2:P="[two-actions]",x="Two Actions";break;case 3:P="[three-actions]",x="Three Actions";break;default:return""}return u("span",{className:"action","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-original-title":x,title:x,role:"img","aria-label":x,children:P})},re=E=>E.isLinked?"Linked to "+bt[E.linkedStat].name:"No linked stat",Ut=E=>{E.isLinked?console.log(`Linked stat: ${E.linkedStat}`):console.log("No linked stat"),F(E)};return u("div",{className:"spell-inventory","data-bs-theme":"dark",children:u("div",{className:"container",children:[u(an,{title:"SPELL INVENTORY",lineMaxWidth:"50px"}),u("div",{className:"d-flex align-items-center justify-content-center mb-4",children:[u("button",{className:`dark-btn me-2 ${O?"gold-button":"dark-btn-secondary"}`,onClick:E=>V(E.ctrlKey),style:{width:"160px",height:"60px"},children:u("div",{className:"d-flex flex-column align-items-center",children:[u("div",{children:[u("i",{className:"fas fa-dice me-2"})," ",u("span",{children:"Stock Roll"})]}),u("span",{style:{fontSize:"0.7em"},children:"hold Ctrl for mastery"})]})}),u("button",{className:"dark-btn dark-btn-primary",onClick:()=>R(),style:{width:"160px",height:"60px"},children:[u("i",{className:"fas fa-plus me-2"})," ",u("span",{children:"Add Spell"})]})]}),n.length===0&&u("span",{className:"text-muted text-center d-flex flex-column align-items-center justify-content-center"+(window.innerWidth<=750?" mt-4":""),children:"[ Inventory Empty ]"}),u("ul",{className:"list-group",children:n.map((E,P)=>u("li",{className:`list-group-item spell-item ${at===E.id?"quantity-flash":""}`,children:[u("div",{class:"d-flex justify-content-left",children:[u("div",{className:"d-flex align-items-center overflow-hidden",style:{flex:"1 1 0"},onClick:()=>G(E.id),children:[u("span",{id:`quantity-badge-${E.id}`,className:"text-black badge quantity-badge me-2",style:{width:"2.5rem",flexShrink:0},children:u("small",{children:E.quantity})}),u("div",{class:"text-truncate",children:[_n(E.element)," ",u("span",{className:"arsenal me-2",children:E.name}),u("span",{className:"action-label hide-on-small me-2",style:{width:window.innerWidth<=750?"0px":"50px"},children:Dt(E.actions)})]})]}),u("div",{className:"d-flex align-items-center justify-content-right",style:{gap:"0.5rem"},children:[u("i",{className:"fas fa-edit text-primary",onClick:x=>{x.stopPropagation(),R(E)},style:{cursor:"pointer",transition:"opacity 0.3s",opacity:.6,flexShrink:0},onMouseOver:x=>{x.stopPropagation(),x.currentTarget.style.opacity="1"},onMouseOut:x=>{x.stopPropagation(),x.currentTarget.style.opacity="0.6"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Edit Spell"}),u("span",{className:`badge bg-dark border text-${E.isLinked?bt[E.linkedStat].color:"secondary"} ms-2 d-flex justify-content-between align-items-center link-badge-normal`,"data-bs-toggle":"tooltip","data-bs-original-title":re(E),title:re(E),onClick:x=>{x.stopPropagation(),Ut(E)},style:{cursor:"pointer",width:"4rem"},children:[u("i",{className:`fas ${E.isLinked?bt[E.linkedStat].icon:"fa-link-slash"}`}),u("span",{children:E.isLinked?`+${rr(E.quantity,E.rank)}`:""})]}),u("button",{className:"btn btn-outline-danger btn-sm roll-button",style:{width:"120px",whiteSpace:"nowrap",overflow:"hidden"},onClick:x=>{x.stopPropagation(),H(E)},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Click to copy roll command",children:[u("i",{className:"fas fa-dice-d20"}),u("span",{className:"ms-1 text-truncate",children:Ur(n,E.dice,e,!0)})]}),u("button",{className:"btn btn-outline-info btn-sm",onClick:x=>{x.stopPropagation(),D(E)},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Click to copy the Stock roll command for ${E.name} (${E.element} - ${j(E)?"mastery":"normal"})`,style:{flexShrink:0},children:[u("i",{className:"fas fa-hand-sparkles"}),u("span",{className:"ms-1 hide-when-small",children:"Stock"})]}),u("div",{className:"input-group input-group-sm",children:[u("button",{className:"btn btn-outline-danger btn-sm",onClick:x=>{x.stopPropagation(),fe(E.id)},children:u("i",{className:"fas fa-minus"})}),u("input",{type:"number",className:"form-control form-control-sm text-center",style:{width:"60px"},value:xt,min:"1",max:Ee,onChange:x=>ft(Math.max(1,Math.min(Ee,parseInt(x.currentTarget.value)||1))),onClick:x=>x.stopPropagation()}),u("button",{className:"btn btn-outline-success btn-sm",onClick:x=>{x.stopPropagation(),ne(E.id)},children:u("i",{className:"fas fa-plus"})})]}),u("div",{className:"btn-group hide-on-small",style:{flexShrink:0},children:[u("button",{className:"btn btn-outline-secondary btn-sm",onClick:x=>{x.stopPropagation(),yt(P,1)},children:u("i",{className:"fas fa-chevron-down"})}),u("button",{className:"btn btn-outline-secondary btn-sm",onClick:x=>{x.stopPropagation(),yt(P,-1)},children:u("i",{className:"fas fa-chevron-up"})})]})]}),u("br",{})]}),C===E.id&&u("div",{className:"mt-3",children:[u("div",{className:"d-flex flex-wrap justify-content-center mb-2",style:{gap:"0.5rem"},children:[u("span",{className:`badge bg-dark border text-${E.isLinked?bt[E.linkedStat].color:"secondary"}
                                                link-badge-responsive`,"data-bs-toggle":"tooltip","data-bs-original-title":re(E),title:re(E),onClick:x=>{x.stopPropagation(),Ut(E)},style:{cursor:"pointer"},children:[u("i",{className:`fas ${E.isLinked?bt[E.linkedStat].icon:"fa-link-slash"}`}),u("span",{children:E.isLinked?u(Ke,{children:[`${bt[E.linkedStat].name}`,u("span",{className:"ms-2",children:`+${rr(E.quantity,E.rank)}`})]}):""})]}),u("span",{className:"badge bg-dark border",children:[Dt(E.actions)," ",E.actions," Actions"]}),u("span",{className:"badge bg-dark border",children:[_n(E.element)," ",E.element]}),u("span",{className:"badge bg-dark border",children:["Spell ",E.power," ",u("i",{children:["(SL. Rank: ",E.rank,")"]})]})]}),E.description&&u(Ke,{children:[u("p",{className:"py-1 border-bottom h5 arsenal",children:"Description"}),u("div",{className:"mb-0 spell-description arsenal",style:{display:"-webkit-box",WebkitLineClamp:"5",WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},dangerouslySetInnerHTML:{__html:E.description}})]})]})]},E.id))}),u(jh,{isModalOpen:p,closeModal:B,spellBeingEdited:r,currentSpell:l,setCurrentSpell:c,incrementPower:Tt,decrementPower:Bt,getSpellRank:wr,getActionLabel:Dt,validateDiceRoll:mt,diceError:Z,saveSpell:ot,removeSpell:ee}),u(Bh,{isLinkModalOpen:_,closeLinkModal:z,currentSpell:l,setCurrentSpell:c,saveSpell:ot,getLinkedStats:a}),u(Wh,{spellToDelete:Mt,confirmDelete:ie,setSpellToDelete:te})]})})},Yh=()=>{const{characterStats:e,setCharacterStats:t}=Ne(en),{spells:n}=nn(),{showToast:i}=Os(),a=(c,r)=>{t(h=>({...h,[c]:parseInt(r,10)||0}))},o=Object.entries(e).filter(([c])=>{var r;return((r=bt[c])==null?void 0:r.category)!==Ht.CORE}).reduce((c,[r,h])=>c+(parseInt(h,10)||0),0),s=c=>{const r=prompt("Enter a DC for the roll (leave blank for normal roll):");if(r===null)return;const h=Math.max(0,parseInt(r,10)),p=(e[c]||0)+le(n,c),m=bt[c];let _=`1d20+${p}`;h>1&&(_=`${_}cs>=${h}cf<${h}`);const y=h?`check vs DC ${h}`:"check",C=`&{template:default} {{name=${xs(c)} ${y}}}{{Roll=[[${_}]]}}{{Stat Bonus=[[${p}]] from ${m.shortName}}}`;navigator.clipboard.writeText(C);const A=h?`${m.name} roll vs DC ${h} copied! Paste it into Roll20.`:`${m.name} roll command copied! Paste it into Roll20.`;i(A,"clipboard","success","Copied to clipboard")},l=c=>{const r=Object.entries(bt).filter(([h,p])=>p.category===c);return r.length>0&&u("div",{className:"stat-category",children:[u("h6",{className:"stat-category-title text-secondary mb-2",children:c.toUpperCase()}),u("div",{className:"stat-grid",children:r.map(([h,p])=>u("div",{className:"stat-group mb-2",title:`${p.name} ${p.description}`,"data-bs-toggle":"tooltip","data-bs-placement":"top",children:u("div",{className:"input-group",children:[u("span",{className:`input-group-text gap-1 text-${p.color}`,onClick:()=>s(h),style:{cursor:"pointer"},children:[u("i",{className:`fas ${p.icon}`})," ",u("span",{className:"stat-text",children:p.shortName})]}),u("input",{type:"number",className:"form-control",value:e[h]||0,onChange:m=>a(h,m.currentTarget.value)}),u("span",{className:"input-group-text",children:[u("i",{className:`fas ${le(n,h)?"":"fa-link-slash"} text-muted`}),le(n,h)>0&&u("div",{children:[u("span",{className:"text-secondary ms-1",children:["+",le(n,h)," ="]}),u("span",{className:"text-muted ms-1",children:e[h]+le(n,h)})]})]})]})},h))})]})};return u("div",{className:"character-stats",children:[u(an,{title:"STATS",lineMaxWidth:"50px",containerClassName:"mb-1"}),u("h6",{className:"stat-category-title text-danger mb-4",children:["BASE ALLOCATED POINTS: ",o]}),l(Ht.PHYSICAL),l(Ht.MAGICAL),l(Ht.UTILITY)]})};function Kh(){return u("div",{className:"spell-inventory container-fluid",children:u("div",{className:"row",children:[u("div",{className:"col-12 col-md-4 order-2 order-md-1",style:{minHeight:"50vh",overflowY:"auto"},children:u(Yh,{})}),u("div",{className:"col-12 col-md-8 order-1 order-md-2",style:{minHeight:"50vh",overflowY:"auto"},children:u(Uh,{})})]})})}const qh="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs/%3e%3cg%3e%3cpath%20stroke='none'%20fill='%23FFFFFF'%20d='M16%208%20L48%208%20Q56%208%2056%2016%20L56%2048%20Q56%2056%2048%2056%20L16%2056%20Q8%2056%208%2048%20L8%2016%20Q8%208%2016%208%20M11%2016%20L11%2048%20Q11%2053%2016%2053%20L48%2053%20Q53%2053%2053%2048%20L53%2016%20Q53%2011%2048%2011%20L16%2011%20Q11%2011%2011%2016%20M22%2032%20L30%2024%2032%2024%2032%2028%2042%2028%2042%2036%2032%2036%2032%2040%2030%2040%2022%2032'/%3e%3c/g%3e%3c/svg%3e",Gh="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs/%3e%3cg%3e%3cpath%20stroke='none'%20fill='%23FFFFFF'%20d='M42%2032%20L34%2040%2032%2040%2032%2036%2022%2036%2022%2028%2032%2028%2032%2024%2034%2024%2042%2032%20M53%2048%20L53%2016%20Q53%2011%2048%2011%20L16%2011%20Q11%2011%2011%2016%20L11%2048%20Q11%2053%2016%2053%20L48%2053%20Q53%2053%2053%2048%20M48%2056%20L16%2056%20Q8%2056%208%2048%20L8%2016%20Q8%208%2016%208%20L48%208%20Q56%208%2056%2016%20L56%2048%20Q56%2056%2048%2056'/%3e%3c/g%3e%3c/svg%3e",zh=[{id:"character",title:"Health"},{id:"spells",title:"Spells and Stats"}],Pt=zh.map(e=>({title:e.title,path:e.id==="character"?nr:`${nr.replace(/\/$/,"")}/${e.id}`}));function Qh(){const{url:e,route:t}=cs(),n=Pt.findIndex(o=>o.path===e);gt(()=>{const o=s=>{const l=s.target.tagName.toLowerCase(),c=s.target.isContentEditable;l==="input"||l==="textarea"||c||(s.key==="ArrowLeft"?n>0&&t(Pt[n-1].path):s.key==="ArrowRight"&&n<Pt.length-1&&t(Pt[n+1].path))};return window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)}},[e,n]);const i={height:"48px",verticalAlign:"middle",cursor:"pointer"},a=o=>{t(o)};return u("header",{className:"header mb-4",children:u("div",{className:"d-flex justify-content-center align-items-center p-3 border-bottom",children:u("div",{className:"col-md-8 col-lg-6 text-center",children:[u(an,{title:"NAVIGATION",containerClassName:"mb-3"}),u("nav",{className:"btn-group gap-2",role:"group","aria-label":"Main navigation",children:[u("img",{src:qh,alt:"Navigate left",onClick:()=>n>0&&a(Pt[n-1].path),style:{...i,marginRight:"8px",filter:n>0?"none":"opacity(0.3)",cursor:n>0?"pointer":"default"},"aria-disabled":n<=0}),Pt.map((o,s)=>{let l="dark-btn dark-btn-primary";return e===o.path&&(l+="-active"),u("button",{className:l,onClick:()=>a(o.path),"data-bs-toggle":"tooltip",title:`Navigate to ${o.title} (${s>0?"Left Arrow":""}${s>0&&s<Pt.length-1?" / ":""}${s<Pt.length-1?"Right Arrow":""})`,children:u("span",{children:o.title})},o.path)}),u("img",{src:Gh,alt:"Navigate right",onClick:()=>n<Pt.length-1&&a(Pt[n+1].path),style:{...i,marginLeft:"8px",filter:n<Pt.length-1?"none":"opacity(0.3)",cursor:n<Pt.length-1?"pointer":"default"},"aria-disabled":n>=Pt.length-1})]})]})})})}const Xh=()=>{const{showToast:e}=Os(),{spells:t}=nn(),n=(o,s)=>{let l="[[1d20+"+le(t,s);o==="Initiative"&&(l+="&{tracker}"),l+="]]";const c=`&{template:default} {{name=${o}}}{{Roll=${l}}}{{Stat Bonus=[[${le(t,s)}]] from ${xs(s)}}}`;navigator.clipboard.writeText(c),e(o+" roll command copied! Paste it into the text chat on Roll20.","clipboard","success","Copied to clipboard")},i=[{name:"Fortitude Save",stat:"vitality"},{name:"Will Save",stat:"spirit"},{name:"Reflex Save",stat:"speed"}],a={name:"Initiative",stat:"speed",icon:"fa-bolt"};return u("div",{className:"save-rolls",children:u("div",{className:"d-flex flex-wrap gap-2 align-items-center justify-content-center",children:[i.map(o=>u("button",{onClick:()=>n(o.name,o.stat),className:"dark-btn dark-btn-secondary d-flex align-items-center justify-content-center flex-grow-1 position-relative",style:{minWidth:"140px",maxWidth:"170px",height:"48px"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Roll ${o.name} (${bt[o.stat].shortName})`,children:[u("i",{className:`fas ${bt[o.stat].icon} me-2`,style:{width:"20px"}}),u("span",{children:o.name})]},o.name)),u("button",{onClick:()=>n(a.name,a.stat),className:"dark-btn dark-btn-primary d-flex align-items-center justify-content-center flex-grow-1 position-relative",style:{minWidth:"140px",maxWidth:"170px",height:"48px"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Roll ${a.name} (${bt[a.stat].shortName})`,children:[u("i",{className:`fas ${a.icon} text-${a.color} me-2`,style:{width:"20px"}}),u("span",{children:a.name})]},a.name)]})})},Jh=({buildDate:e})=>{const{url:t}=cs();return u("footer",{className:"footer mt-auto py-3 text-light border-top",children:u("div",{className:"container-fluid",children:u("div",{className:"row",children:[u("div",{className:"col-4 text-start d-flex align-items-center",children:[u("span",{className:"me-2",children:["Build Date: ",e]}),u("a",{href:"https://github.com/btarg/requiem-pathfinder-preact",target:"_blank",rel:"noopener noreferrer",className:"text-light",title:"GitHub Repository",children:u("i",{className:"fab fa-github"})})]}),u("div",{className:"col-4 text-center",children:[u(Xh,{}),u(an,{title:"QUICK ROLLS",containerClassName:"mt-3"})]}),u("div",{className:"col-4 d-flex align-items-center justify-content-end",children:u("a",{href:"https://btarg.github.io/requiem-vault/",target:"_blank",rel:"noopener noreferrer",className:"dark-btn dark-btn-primary",children:[u("i",{className:"fas fa-book me-2"}),u("span",{className:"me-2",children:"Open Wiki"}),u("i",{className:"fa-solid fa-arrow-up-right-from-square",style:{fontSize:"0.75rem"}})]})})]})})})};function Zh(){return u(Ca,{children:u(wa,{children:u(Tn,{children:u("div",{className:"d-flex flex-column min-vh-100",children:[" ",u(Qh,{}),u("main",{className:"flex-grow-1",children:[" ",u(so,{children:[u(Cr,{path:nr,component:Vh}),u(Cr,{path:`${nr}spells`,component:Kh}),u(Cr,{default:!0,component:ba})]})]}),u(Jh,{buildDate:"2025-05-19T16:46:16.470Z"})]})})})})}ga(u(Zh,{}),document.getElementById("app"));
