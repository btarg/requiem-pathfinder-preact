(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function e(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(l){if(l.ep)return;l.ep=!0;const a=e(l);fetch(l.href,a)}})();var En,et,Bi,Le,Ks,Yi,Ki,qi,is,Gr,zr,Gi,bn={},zi=[],mo=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Nn=Array.isArray;function ce(n,t){for(var e in t)n[e]=t[e];return n}function as(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function De(n,t,e){var s,l,a,i={};for(a in t)a=="key"?s=t[a]:a=="ref"?l=t[a]:i[a]=t[a];if(arguments.length>2&&(i.children=arguments.length>3?En.call(arguments,2):e),typeof n=="function"&&n.defaultProps!=null)for(a in n.defaultProps)i[a]==null&&(i[a]=n.defaultProps[a]);return mn(n,i,s,l,null)}function mn(n,t,e,s,l){var a={type:n,props:t,key:e,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:l??++Bi,__i:-1,__u:0};return l==null&&et.vnode!=null&&et.vnode(a),a}function Xe(n){return n.children}function zn(n,t){this.props=n,this.context=t}function Je(n,t){if(t==null)return n.__?Je(n.__,n.__i+1):null;for(var e;t<n.__k.length;t++)if((e=n.__k[t])!=null&&e.__e!=null)return e.__e;return typeof n.type=="function"?Je(n):null}function Qi(n){var t,e;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,t=0;t<n.__k.length;t++)if((e=n.__k[t])!=null&&e.__e!=null){n.__e=n.__c.base=e.__e;break}return Qi(n)}}function Qr(n){(!n.__d&&(n.__d=!0)&&Le.push(n)&&!nr.__r++||Ks!=et.debounceRendering)&&((Ks=et.debounceRendering)||Yi)(nr)}function nr(){for(var n,t,e,s,l,a,i,c=1;Le.length;)Le.length>c&&Le.sort(Ki),n=Le.shift(),c=Le.length,n.__d&&(e=void 0,l=(s=(t=n).__v).__e,a=[],i=[],t.__P&&((e=ce({},s)).__v=s.__v+1,et.vnode&&et.vnode(e),os(t.__P,e,s,t.__n,t.__P.namespaceURI,32&s.__u?[l]:null,a,l??Je(s),!!(32&s.__u),i),e.__v=s.__v,e.__.__k[e.__i]=e,ta(a,e,i),e.__e!=l&&Qi(e)));nr.__r=0}function Xi(n,t,e,s,l,a,i,c,u,r,h){var p,m,_,E,A,C,O=s&&s.__k||zi,L=t.length;for(u=_o(e,t,O,u,L),p=0;p<L;p++)(_=e.__k[p])!=null&&(m=_.__i==-1?bn:O[_.__i]||bn,_.__i=p,C=os(n,_,m,l,a,i,c,u,r,h),E=_.__e,_.ref&&m.ref!=_.ref&&(m.ref&&ls(m.ref,null,_),h.push(_.ref,_.__c||E,_)),A==null&&E!=null&&(A=E),4&_.__u||m.__k===_.__k?u=Ji(_,u,n):typeof _.type=="function"&&C!==void 0?u=C:E&&(u=E.nextSibling),_.__u&=-7);return e.__e=A,u}function _o(n,t,e,s,l){var a,i,c,u,r,h=e.length,p=h,m=0;for(n.__k=new Array(l),a=0;a<l;a++)(i=t[a])!=null&&typeof i!="boolean"&&typeof i!="function"?(u=a+m,(i=n.__k[a]=typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?mn(null,i,null,null,null):Nn(i)?mn(Xe,{children:i},null,null,null):i.constructor==null&&i.__b>0?mn(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=n,i.__b=n.__b+1,c=null,(r=i.__i=go(i,e,u,p))!=-1&&(p--,(c=e[r])&&(c.__u|=2)),c==null||c.__v==null?(r==-1&&(l>h?m--:l<h&&m++),typeof i.type!="function"&&(i.__u|=4)):r!=u&&(r==u-1?m--:r==u+1?m++:(r>u?m--:m++,i.__u|=4))):n.__k[a]=null;if(p)for(a=0;a<h;a++)(c=e[a])!=null&&(2&c.__u)==0&&(c.__e==s&&(s=Je(c)),na(c,c));return s}function Ji(n,t,e){var s,l;if(typeof n.type=="function"){for(s=n.__k,l=0;s&&l<s.length;l++)s[l]&&(s[l].__=n,t=Ji(s[l],t,e));return t}n.__e!=t&&(t&&n.type&&!e.contains(t)&&(t=Je(n)),e.insertBefore(n.__e,t||null),t=n.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function Zi(n,t){return t=t||[],n==null||typeof n=="boolean"||(Nn(n)?n.some(function(e){Zi(e,t)}):t.push(n)),t}function go(n,t,e,s){var l,a,i=n.key,c=n.type,u=t[e];if(u===null&&n.key==null||u&&i==u.key&&c==u.type&&(2&u.__u)==0)return e;if(s>(u!=null&&(2&u.__u)==0?1:0))for(l=e-1,a=e+1;l>=0||a<t.length;){if(l>=0){if((u=t[l])&&(2&u.__u)==0&&i==u.key&&c==u.type)return l;l--}if(a<t.length){if((u=t[a])&&(2&u.__u)==0&&i==u.key&&c==u.type)return a;a++}}return-1}function qs(n,t,e){t[0]=="-"?n.setProperty(t,e??""):n[t]=e==null?"":typeof e!="number"||mo.test(t)?e:e+"px"}function Hn(n,t,e,s,l){var a;t:if(t=="style")if(typeof e=="string")n.style.cssText=e;else{if(typeof s=="string"&&(n.style.cssText=s=""),s)for(t in s)e&&t in e||qs(n.style,t,"");if(e)for(t in e)s&&e[t]==s[t]||qs(n.style,t,e[t])}else if(t[0]=="o"&&t[1]=="n")a=t!=(t=t.replace(qi,"$1")),t=t.toLowerCase()in n||t=="onFocusOut"||t=="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),n.l||(n.l={}),n.l[t+a]=e,e?s?e.u=s.u:(e.u=is,n.addEventListener(t,a?zr:Gr,a)):n.removeEventListener(t,a?zr:Gr,a);else{if(l=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in n)try{n[t]=e??"";break t}catch{}typeof e=="function"||(e==null||e===!1&&t[4]!="-"?n.removeAttribute(t):n.setAttribute(t,t=="popover"&&e==1?"":e))}}function Gs(n){return function(t){if(this.l){var e=this.l[t.type+n];if(t.t==null)t.t=is++;else if(t.t<e.u)return;return e(et.event?et.event(t):t)}}}function os(n,t,e,s,l,a,i,c,u,r){var h,p,m,_,E,A,C,O,L,B,M,U,V,Q,X,P,F,Y=t.type;if(t.constructor!=null)return null;128&e.__u&&(u=!!(32&e.__u),a=[c=t.__e=e.__e]),(h=et.__b)&&h(t);t:if(typeof Y=="function")try{if(O=t.props,L="prototype"in Y&&Y.prototype.render,B=(h=Y.contextType)&&s[h.__c],M=h?B?B.props.value:h.__:s,e.__c?C=(p=t.__c=e.__c).__=p.__E:(L?t.__c=p=new Y(O,M):(t.__c=p=new zn(O,M),p.constructor=Y,p.render=bo),B&&B.sub(p),p.props=O,p.state||(p.state={}),p.context=M,p.__n=s,m=p.__d=!0,p.__h=[],p._sb=[]),L&&p.__s==null&&(p.__s=p.state),L&&Y.getDerivedStateFromProps!=null&&(p.__s==p.state&&(p.__s=ce({},p.__s)),ce(p.__s,Y.getDerivedStateFromProps(O,p.__s))),_=p.props,E=p.state,p.__v=t,m)L&&Y.getDerivedStateFromProps==null&&p.componentWillMount!=null&&p.componentWillMount(),L&&p.componentDidMount!=null&&p.__h.push(p.componentDidMount);else{if(L&&Y.getDerivedStateFromProps==null&&O!==_&&p.componentWillReceiveProps!=null&&p.componentWillReceiveProps(O,M),!p.__e&&p.shouldComponentUpdate!=null&&p.shouldComponentUpdate(O,p.__s,M)===!1||t.__v==e.__v){for(t.__v!=e.__v&&(p.props=O,p.state=p.__s,p.__d=!1),t.__e=e.__e,t.__k=e.__k,t.__k.some(function(Z){Z&&(Z.__=t)}),U=0;U<p._sb.length;U++)p.__h.push(p._sb[U]);p._sb=[],p.__h.length&&i.push(p);break t}p.componentWillUpdate!=null&&p.componentWillUpdate(O,p.__s,M),L&&p.componentDidUpdate!=null&&p.__h.push(function(){p.componentDidUpdate(_,E,A)})}if(p.context=M,p.props=O,p.__P=n,p.__e=!1,V=et.__r,Q=0,L){for(p.state=p.__s,p.__d=!1,V&&V(t),h=p.render(p.props,p.state,p.context),X=0;X<p._sb.length;X++)p.__h.push(p._sb[X]);p._sb=[]}else do p.__d=!1,V&&V(t),h=p.render(p.props,p.state,p.context),p.state=p.__s;while(p.__d&&++Q<25);p.state=p.__s,p.getChildContext!=null&&(s=ce(ce({},s),p.getChildContext())),L&&!m&&p.getSnapshotBeforeUpdate!=null&&(A=p.getSnapshotBeforeUpdate(_,E)),P=h,h!=null&&h.type===Xe&&h.key==null&&(P=ea(h.props.children)),c=Xi(n,Nn(P)?P:[P],t,e,s,l,a,i,c,u,r),p.base=t.__e,t.__u&=-161,p.__h.length&&i.push(p),C&&(p.__E=p.__=null)}catch(Z){if(t.__v=null,u||a!=null)if(Z.then){for(t.__u|=u?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;a[a.indexOf(c)]=null,t.__e=c}else for(F=a.length;F--;)as(a[F]);else t.__e=e.__e,t.__k=e.__k;et.__e(Z,t,e)}else a==null&&t.__v==e.__v?(t.__k=e.__k,t.__e=e.__e):c=t.__e=vo(e.__e,t,e,s,l,a,i,u,r);return(h=et.diffed)&&h(t),128&t.__u?void 0:c}function ta(n,t,e){for(var s=0;s<e.length;s++)ls(e[s],e[++s],e[++s]);et.__c&&et.__c(t,n),n.some(function(l){try{n=l.__h,l.__h=[],n.some(function(a){a.call(l)})}catch(a){et.__e(a,l.__v)}})}function ea(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:Nn(n)?n.map(ea):ce({},n)}function vo(n,t,e,s,l,a,i,c,u){var r,h,p,m,_,E,A,C=e.props,O=t.props,L=t.type;if(L=="svg"?l="http://www.w3.org/2000/svg":L=="math"?l="http://www.w3.org/1998/Math/MathML":l||(l="http://www.w3.org/1999/xhtml"),a!=null){for(r=0;r<a.length;r++)if((_=a[r])&&"setAttribute"in _==!!L&&(L?_.localName==L:_.nodeType==3)){n=_,a[r]=null;break}}if(n==null){if(L==null)return document.createTextNode(O);n=document.createElementNS(l,L,O.is&&O),c&&(et.__m&&et.__m(t,a),c=!1),a=null}if(L==null)C===O||c&&n.data==O||(n.data=O);else{if(a=a&&En.call(n.childNodes),C=e.props||bn,!c&&a!=null)for(C={},r=0;r<n.attributes.length;r++)C[(_=n.attributes[r]).name]=_.value;for(r in C)if(_=C[r],r!="children"){if(r=="dangerouslySetInnerHTML")p=_;else if(!(r in O)){if(r=="value"&&"defaultValue"in O||r=="checked"&&"defaultChecked"in O)continue;Hn(n,r,null,_,l)}}for(r in O)_=O[r],r=="children"?m=_:r=="dangerouslySetInnerHTML"?h=_:r=="value"?E=_:r=="checked"?A=_:c&&typeof _!="function"||C[r]===_||Hn(n,r,_,C[r],l);if(h)c||p&&(h.__html==p.__html||h.__html==n.innerHTML)||(n.innerHTML=h.__html),t.__k=[];else if(p&&(n.innerHTML=""),Xi(t.type=="template"?n.content:n,Nn(m)?m:[m],t,e,s,L=="foreignObject"?"http://www.w3.org/1999/xhtml":l,a,i,a?a[0]:e.__k&&Je(e,0),c,u),a!=null)for(r=a.length;r--;)as(a[r]);c||(r="value",L=="progress"&&E==null?n.removeAttribute("value"):E!=null&&(E!==n[r]||L=="progress"&&!E||L=="option"&&E!=C[r])&&Hn(n,r,E,C[r],l),r="checked",A!=null&&A!=n[r]&&Hn(n,r,A,C[r],l))}return n}function ls(n,t,e){try{if(typeof n=="function"){var s=typeof n.__u=="function";s&&n.__u(),s&&t==null||(n.__u=n(t))}else n.current=t}catch(l){et.__e(l,e)}}function na(n,t,e){var s,l;if(et.unmount&&et.unmount(n),(s=n.ref)&&(s.current&&s.current!=n.__e||ls(s,null,t)),(s=n.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(a){et.__e(a,t)}s.base=s.__P=null}if(s=n.__k)for(l=0;l<s.length;l++)s[l]&&na(s[l],t,e||typeof n.type!="function");e||as(n.__e),n.__c=n.__=n.__e=void 0}function bo(n,t,e){return this.constructor(n,e)}function yo(n,t,e){var s,l,a,i;t==document&&(t=document.documentElement),et.__&&et.__(n,t),l=(s=!1)?null:t.__k,a=[],i=[],os(t,n=t.__k=De(Xe,null,[n]),l||bn,bn,t.namespaceURI,l?null:t.firstChild?En.call(t.childNodes):null,a,l?l.__e:t.firstChild,s,i),ta(a,n,i)}function zs(n,t,e){var s,l,a,i,c=ce({},n.props);for(a in n.type&&n.type.defaultProps&&(i=n.type.defaultProps),t)a=="key"?s=t[a]:a=="ref"?l=t[a]:c[a]=t[a]==null&&i!=null?i[a]:t[a];return arguments.length>2&&(c.children=arguments.length>3?En.call(arguments,2):e),mn(n.type,c,s||n.key,l||n.ref,null)}function An(n){function t(e){var s,l;return this.getChildContext||(s=new Set,(l={})[t.__c]=this,this.getChildContext=function(){return l},this.componentWillUnmount=function(){s=null},this.shouldComponentUpdate=function(a){this.props.value!=a.value&&s.forEach(function(i){i.__e=!0,Qr(i)})},this.sub=function(a){s.add(a);var i=a.componentWillUnmount;a.componentWillUnmount=function(){s&&s.delete(a),i&&i.call(a)}}),e.children}return t.__c="__cC"+Gi++,t.__=n,t.Provider=t.__l=(t.Consumer=function(e,s){return e.children(s)}).contextType=t,t}En=zi.slice,et={__e:function(n,t,e,s){for(var l,a,i;t=t.__;)if((l=t.__c)&&!l.__)try{if((a=l.constructor)&&a.getDerivedStateFromError!=null&&(l.setState(a.getDerivedStateFromError(n)),i=l.__d),l.componentDidCatch!=null&&(l.componentDidCatch(n,s||{}),i=l.__d),i)return l.__E=l}catch(c){n=c}throw n}},Bi=0,zn.prototype.setState=function(n,t){var e;e=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=ce({},this.state),typeof n=="function"&&(n=n(ce({},e),this.props)),n&&ce(e,n),n!=null&&this.__v&&(t&&this._sb.push(t),Qr(this))},zn.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),Qr(this))},zn.prototype.render=Xe,Le=[],Yi=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ki=function(n,t){return n.__v.__b-t.__v.__b},nr.__r=0,qi=/(PointerCapture)$|Capture$/i,is=0,Gr=Gs(!1),zr=Gs(!0),Gi=0;var Eo=0;function o(n,t,e,s,l,a){t||(t={});var i,c,u=t;if("ref"in u)for(c in u={},t)c=="ref"?i=t[c]:u[c]=t[c];var r={type:n,props:u,key:e,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Eo,__i:-1,__u:0,__source:l,__self:a};if(typeof n=="function"&&(i=n.defaultProps))for(c in i)u[c]===void 0&&(u[c]=i[c]);return et.vnode&&et.vnode(r),r}function No(){return o("section",{children:[o("h1",{children:"404: Not Found"}),o("p",{children:"It's gone :("})]})}var Pe,ct,kr,Qs,rr=0,ra=[],mt=et,Xs=mt.__b,Js=mt.__r,Zs=mt.diffed,ti=mt.__c,ei=mt.unmount,ni=mt.__;function Tn(n,t){mt.__h&&mt.__h(ct,n,rr||t),rr=0;var e=ct.__H||(ct.__H={__:[],__h:[]});return n>=e.__.length&&e.__.push({}),e.__[n]}function z(n){return rr=1,cs(ia,n)}function cs(n,t,e){var s=Tn(Pe++,2);if(s.t=n,!s.__c&&(s.__=[ia(void 0,t),function(c){var u=s.__N?s.__N[0]:s.__[0],r=s.t(u,c);u!==r&&(s.__N=[r,s.__[1]],s.__c.setState({}))}],s.__c=ct,!ct.__f)){var l=function(c,u,r){if(!s.__c.__H)return!0;var h=s.__c.__H.__.filter(function(m){return!!m.__c});if(h.every(function(m){return!m.__N}))return!a||a.call(this,c,u,r);var p=s.__c.props!==c;return h.forEach(function(m){if(m.__N){var _=m.__[0];m.__=m.__N,m.__N=void 0,_!==m.__[0]&&(p=!0)}}),a&&a.call(this,c,u,r)||p};ct.__f=!0;var a=ct.shouldComponentUpdate,i=ct.componentWillUpdate;ct.componentWillUpdate=function(c,u,r){if(this.__e){var h=a;a=void 0,l(c,u,r),a=h}i&&i.call(this,c,u,r)},ct.shouldComponentUpdate=l}return s.__N||s.__}function _t(n,t){var e=Tn(Pe++,3);!mt.__s&&ds(e.__H,t)&&(e.__=n,e.u=t,ct.__H.__h.push(e))}function sa(n,t){var e=Tn(Pe++,4);!mt.__s&&ds(e.__H,t)&&(e.__=n,e.u=t,ct.__h.push(e))}function Bt(n){return rr=5,us(function(){return{current:n}},[])}function us(n,t){var e=Tn(Pe++,7);return ds(e.__H,t)&&(e.__=n(),e.__H=t,e.__h=n),e.__}function fe(n){var t=ct.context[n.__c],e=Tn(Pe++,9);return e.c=n,t?(e.__==null&&(e.__=!0,t.sub(ct)),t.props.value):n.__}function Ao(){for(var n;n=ra.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(Qn),n.__H.__h.forEach(Xr),n.__H.__h=[]}catch(t){n.__H.__h=[],mt.__e(t,n.__v)}}mt.__b=function(n){ct=null,Xs&&Xs(n)},mt.__=function(n,t){n&&t.__k&&t.__k.__m&&(n.__m=t.__k.__m),ni&&ni(n,t)},mt.__r=function(n){Js&&Js(n),Pe=0;var t=(ct=n.__c).__H;t&&(kr===ct?(t.__h=[],ct.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.u=e.__N=void 0})):(t.__h.forEach(Qn),t.__h.forEach(Xr),t.__h=[],Pe=0)),kr=ct},mt.diffed=function(n){Zs&&Zs(n);var t=n.__c;t&&t.__H&&(t.__H.__h.length&&(ra.push(t)!==1&&Qs===mt.requestAnimationFrame||((Qs=mt.requestAnimationFrame)||To)(Ao)),t.__H.__.forEach(function(e){e.u&&(e.__H=e.u),e.u=void 0})),kr=ct=null},mt.__c=function(n,t){t.some(function(e){try{e.__h.forEach(Qn),e.__h=e.__h.filter(function(s){return!s.__||Xr(s)})}catch(s){t.some(function(l){l.__h&&(l.__h=[])}),t=[],mt.__e(s,e.__v)}}),ti&&ti(n,t)},mt.unmount=function(n){ei&&ei(n);var t,e=n.__c;e&&e.__H&&(e.__H.__.forEach(function(s){try{Qn(s)}catch(l){t=l}}),e.__H=void 0,t&&mt.__e(t,e.__v))};var ri=typeof requestAnimationFrame=="function";function To(n){var t,e=function(){clearTimeout(s),ri&&cancelAnimationFrame(t),setTimeout(n)},s=setTimeout(e,100);ri&&(t=requestAnimationFrame(e))}function Qn(n){var t=ct,e=n.__c;typeof e=="function"&&(n.__c=void 0,e()),ct=t}function Xr(n){var t=ct;n.__c=n.__(),ct=t}function ds(n,t){return!n||n.length!==t.length||t.some(function(e,s){return e!==n[s]})}function ia(n,t){return typeof t=="function"?t(n):t}let Oe,pn;const Co=(n,t)=>{if(Oe=void 0,t&&t.type==="click"){if(t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||t.button!==0)return n;const e=t.target.closest("a[href]"),s=e&&e.getAttribute("href");if(!e||e.origin!=location.origin||/^#/.test(s)||!/^(_?self)?$/i.test(e.target)||pn&&(typeof pn=="string"?!s.startsWith(pn):!pn.test(s)))return n;Oe=!0,t.preventDefault(),t=e.href.replace(location.origin,"")}else typeof t=="string"?Oe=!0:t&&t.url?(Oe=!t.replace,t=t.url):t=location.pathname+location.search;return Oe===!0?history.pushState(null,"",t):Oe===!1&&history.replaceState(null,"",t),t},wo=(n,t,e={})=>{n=n.split("/").filter(Boolean),t=(t||"").split("/").filter(Boolean),e.params||(e.params={});for(let s=0,l,a;s<Math.max(n.length,t.length);s++){let[,i,c,u]=(t[s]||"").match(/^(:?)(.*?)([+*?]?)$/);if(l=n[s],!(!i&&c==l)){if(!i&&l&&u=="*"){e.rest="/"+n.slice(s).map(decodeURIComponent).join("/");break}if(!i||!l&&u!="?"&&u!="*")return;if(a=u=="+"||u=="*",a?l=n.slice(s).map(decodeURIComponent).join("/")||void 0:l&&(l=decodeURIComponent(l)),e.params[c]=l,c in e||(e[c]=l),a)break}}return e};function Cn(n){const[t,e]=cs(Co,n.url||location.pathname+location.search);n.scope&&(pn=n.scope);const s=Oe===!0,l=us(()=>{const a=new URL(t,location.origin),i=a.pathname.replace(/\/+$/g,"")||"/";return{url:t,path:i,query:Object.fromEntries(a.searchParams),route:(c,u)=>e({url:c,replace:u}),wasPush:s}},[t]);return sa(()=>(addEventListener("click",e),addEventListener("popstate",e),()=>{removeEventListener("click",e),removeEventListener("popstate",e)}),[]),De(Cn.ctx.Provider,{value:l},n.children)}const So=Promise.resolve();function aa(n){const[t,e]=cs(P=>P+1,0),{url:s,query:l,wasPush:a,path:i}=hs(),{rest:c=i,params:u={}}=fe(si),r=Bt(!1),h=Bt(i),p=Bt(0),m=Bt(),_=Bt(),E=Bt(),A=Bt(!1),C=Bt();C.current=!1;let O,L,B;Zi(n.children).some(P=>{if(wo(c,P.props.path,B={...P.props,path:c,query:l,params:u,rest:""}))return O=zs(P,B);P.props.default&&(L=zs(P,B))});let M=O||L;const U=m.current&&m.current.__u&Fn&&m.current.__u&Vn,V=m.current&&m.current.__h,Q=us(()=>{_.current=m.current,m.current=De(si.Provider,{value:B},M);const P=_.current&&_.current.props.children;return!P||!M||M.type!==P.type||M.props.component!==P.props.component?(this.__v&&this.__v.__k&&this.__v.__k.reverse(),p.current++,!0):!1},[s,JSON.stringify(B)]);U?(m.current.__u|=Fn,m.current.__u|=Vn):V&&(m.current.__h=!0);const X=_.current;return _.current=null,this.__c=(P,F)=>{C.current=!0,_.current=X,n.onLoadStart&&n.onLoadStart(s),r.current=!0;let Y=p.current;P.then(()=>{Y===p.current&&(_.current=null,m.current&&(F.__h&&(m.current.__h=F.__h),F.__u&Vn&&(m.current.__u|=Vn),F.__u&Fn&&(m.current.__u|=Fn)),So.then(e))})},sa(()=>{const P=this.__v&&this.__v.__e;if(C.current){!A.current&&!E.current&&(E.current=P);return}!A.current&&E.current&&(E.current!==P&&E.current.remove(),E.current=null),A.current=!0,h.current!==i&&(a&&scrollTo(0,0),n.onRouteChange&&n.onRouteChange(s),h.current=i),n.onLoadEnd&&r.current&&n.onLoadEnd(s),r.current=!1},[i,a,t]),Q?[De(xr,{r:m}),De(xr,{r:_})]:De(xr,{r:m})}const Fn=32,Vn=128,xr=({r:n})=>n.current;aa.Provider=Cn;Cn.ctx=An({});const si=An({}),Wn=n=>De(n.component,n),hs=()=>fe(Cn.ctx),ii=et.__b;et.__b=n=>{n.type&&n.type._forwarded&&n.ref&&(n.props.ref=n.ref,n.ref=null),ii&&ii(n)};const ai=et.__e;et.__e=(n,t,e)=>{if(n&&n.then){let s=t;for(;s=s.__;)if(s.__c&&s.__c.__c)return t.__e==null&&(t.__c.__z=[e.__e],t.__e=e.__e,t.__k=e.__k),t.__k||(t.__k=[]),s.__c.__c(n,t)}ai&&ai(n,t,e)};const Ut={PHYSICAL:"physical",MAGICAL:"magical",UTILITY:"utility"},$t={OFFENSIVE:"offensive",DEFENSIVE:"defensive",UTILITY:"utility",CORE:"core"},wt={currentHealth:{defaultValue:10,label:"Current HP",type:$t.CORE},maxHealth:{defaultValue:10,label:"Max HP",type:$t.CORE},currentMp:{defaultValue:10,label:"Current MP",type:$t.CORE},maxMp:{defaultValue:10,label:"Max MP",type:$t.CORE},tempHealth:{defaultValue:0,label:"Temporary HP",type:$t.CORE},strength:{name:"Strength",shortName:"STR",icon:"fa-fist-raised",color:"danger",description:"Increases physical attack damage unless resisted/absorbed/immune. Applied as flat bonus to Physical damage rolls.",category:Ut.PHYSICAL,type:$t.OFFENSIVE,defaultValue:0,displayModifier:!0,affectsRolls:!0,damageType:"physical"},vitality:{name:"Vitality",shortName:"VIT",icon:"fa-shield-alt",color:"primary-emphasis",description:"Reduces incoming Physical damage when attack is resisted. Does not affect neutral or absorbed damage.",category:Ut.PHYSICAL,type:$t.DEFENSIVE,defaultValue:0,displayModifier:!0,damageReduction:!0,damageType:"physical"},magic:{name:"Magic",shortName:"MAG",icon:"fa-hand-sparkles",color:"success-emphasis",description:"Increases magical attack damage unless resisted/absorbed/immune. Applied as flat bonus.",category:Ut.MAGICAL,type:$t.OFFENSIVE,defaultValue:0,displayModifier:!0,affectsRolls:!0,damageType:"magical"},spirit:{name:"Spirit",shortName:"SPR",icon:"fa-shield-heart",color:"info",description:"Reduces incoming magical damage when attack is resisted. Does not affect neutral or absorbed damage.",category:Ut.MAGICAL,type:$t.DEFENSIVE,defaultValue:0,displayModifier:!0,damageReduction:!0,damageType:"magical"},speed:{name:"Speed",shortName:"SPD",icon:"fa-running",color:"secondary-emphasis",description:"Bonus to Initiative and movement distance per turn",category:Ut.PHYSICAL,type:$t.UTILITY,defaultValue:0,displayModifier:!0,derived:{initiative:n=>n,movement:n=>n}},luck:{name:"Luck",shortName:"LCK",icon:"fa-clover",color:"success",description:"Affects spell draws and knockdown resistance",category:Ut.MAGICAL,type:$t.UTILITY,defaultValue:0,displayModifier:!0,derived:{maxExtraDrawDice:n=>Math.min(Math.floor(n),4),knockdownBonus:n=>n}},perception:{name:"Perception",shortName:"PER",icon:"fa-eye",color:"danger-emphasis",description:"Used for Scanning for an enemy's Elemental Affinities, for noticing weak points, hidden treasure, hidden enemies etc.",category:Ut.UTILITY,type:$t.UTILITY,defaultValue:0,displayModifier:!0},wisdom:{name:"Wisdom",shortName:"WIS",icon:"fa-book-open",color:"warning-emphasis",description:"Used for Recalling Knowledge of any kind: essentially every Pathfinder 2E lore skill rolled into one. Also useful in social situations.",category:Ut.UTILITY,type:$t.UTILITY,defaultValue:0,displayModifier:!0},influence:{name:"Influence",shortName:"INF",icon:"fa-comments",color:"warning",description:"Used for social rolls, such as Deception, Intimidation, Performance, Diplomacy and Persuasion.",category:Ut.UTILITY,type:$t.UTILITY,defaultValue:0,displayModifier:!0}},dn={CANTRIP_AND_FIRST:1,SECOND_AND_THIRD:2,FOURTH_AND_FIFTH:3,SIXTH_AND_SEVENTH:4,EIGHTH_TO_TENTH:5},$r=n=>n<=1?dn.CANTRIP_AND_FIRST:n<=3?dn.SECOND_AND_THIRD:n<=5?dn.FOURTH_AND_FIFTH:n<=7?dn.SIXTH_AND_SEVENTH:dn.EIGHTH_TO_TENTH,Ve=An({characterStats:{},setCharacterStats:n=>{}});function ko({children:n}){const t=()=>{const a=localStorage.getItem("characterStats");if(a)return JSON.parse(a);{const i={};for(const c in wt)i[c]=wt[c].defaultValue||0;return i}},[e,s]=z(t);_t(()=>{localStorage.setItem("characterStats",JSON.stringify(e))},[e]);const l={characterStats:e,setCharacterStats:s};return o(Ve.Provider,{value:l,children:n})}const oa=An({spells:[],setSpells:n=>{},getLinkedStats:()=>[],subscribe:n=>{},unsubscribe:n=>{}}),xo=({children:n})=>{const[t,e]=z(()=>{const u=localStorage.getItem("spells");return u?JSON.parse(u):[]}),[s,l]=z([]);_t(()=>{localStorage.setItem("spells",JSON.stringify(t)),s.forEach(u=>u(t))},[t]);const a=()=>t.filter(u=>u.isLinked).map(u=>u.linkedStat),i=u=>{l(r=>[...r,u])},c=u=>{l(r=>r.filter(h=>h!==u))};return o(oa.Provider,{value:{spells:t,setSpells:e,getLinkedStats:a,subscribe:i,unsubscribe:c},children:n})},wn=()=>fe(oa),Xt=Object.freeze({WEAPON:"Weapon",GENERIC:"Generic"}),st=Object.freeze({PHYS:"Physical",FIRE:"Fire",ICE:"Cold",ELEC:"Electricity",FORCE:"Force",PSY:"Psychic",CHEM:"Chemical",RAD:"Radiant",VOID:"Void",TRUE:"Almighty"}),pt=Object.freeze({WEAK:"Weak",NEUTRAL:"Neutral",RESIST:"Resist",IMMUNE:"Immune",ABSORB:"Drain",REFLECT:"Reflect"}),$o={[st.PHYS]:"⚔️",[st.CHEM]:"🧪",[st.ICE]:"❄️",[st.ELEC]:"⚡",[st.FIRE]:"🔥",[st.FORCE]:"💥",[st.RAD]:"✨",[st.VOID]:"🌌",[st.PSY]:"🌀"},re=n=>$o[n]||"☄️",Oo=n=>({[st.PHYS]:"Phys",[st.CHEM]:"Chem",[st.ICE]:"Ice",[st.ELEC]:"Elec",[st.FIRE]:"Fire",[st.FORCE]:"Force",[st.RAD]:"Rad",[st.VOID]:"Void",[st.PSY]:"Psy",[st.TRUE]:"???"})[n]||"???",Lo=n=>({[pt.WEAK]:"WK",[pt.NEUTRAL]:"-",[pt.RESIST]:"RES",[pt.IMMUNE]:"NULL",[pt.ABSORB]:"DR",[pt.REFLECT]:"RFL"})[n]||"???",Se=({title:n,titleClassName:t="text-danger",lineColor:e="var(--bs-danger)",lineThickness:s="1px",containerClassName:l="mb-3",lineMaxWidth:a="none"})=>{const i={height:s,maxWidth:a};return o("div",{className:l,children:o("div",{className:"d-flex align-items-center justify-content-center",children:[o("div",{className:"flex-grow-1",style:{...i,backgroundImage:`linear-gradient(to right, transparent, ${e})`}}),o("h5",{className:`${t} mx-3 my-0 arsenal`,children:n}),o("div",{className:"flex-grow-1",style:{...i,backgroundImage:`linear-gradient(to left, transparent, ${e})`}})]})})},Do="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%20style='height:%20512px;%20width:%20512px;'%3e%3cg%20class=''%20transform='translate(0,0)'%20style=''%3e%3cpath%20d='m19.36%2019.457-.38%2027.84%20267.127%20154.75-58.703%2019.916%2057.602%2019.36L142.12%20383.546l-19.214-19.213-51.47%20114.324%20123.125-43.482-17.492-18.95%20151.868-151.87%2012.433%2043.078%2022.976-68.5%2056.675-16.565-57.475-15.492-22.934-79.828-14.145%2048.266-268.65-155.41-38.454-.446zM370.614%2081.94c-4.53.02-9.035.12-13.51.302-3.275.134-6.528.32-9.76.547l31.25%20108.786%20104.05%2028.045c6.204-39.085%208.902-80.275%209.18-120.075C456.37%2088.82%20415.098%2082.257%20375.15%2081.95a403.83%20403.83%200%200%200-4.537-.01zm-36.87%202.1c-31.99%203.653-61.013%2012.153-83.014%2025.87l64.493%2037.31%2018.52-63.18zm148.18%20139.997L378.958%20254.13l-38.93%20116.054-20.268-70.225-39.07%2039.067c18.814%2035.364%2046.1%2062.287%2086.175%2077.604%2047.473-17.834%2078.566-62.795%2098.014-121.6%207.323-22.14%2012.905-46.11%2017.042-70.993z'%20fill='%23fff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",Mo="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%20style='height:%20512px;%20width:%20512px;'%3e%3cg%20class=''%20transform='translate(0,0)'%20style=''%3e%3cpath%20d='M362.188%2017.998c-12.9%2065.825-49.788%20140.505-98.616%20197.37L352%20224l-89.377%2019.414%2052.197%2075.27-71.111-56.364L224%20336l-8.576-73.182%202.812-2.779c-45.221%2040.71-35.888%2074.86.702%2096.49%206.775%204.005%2016.257%209.046%2027.38%208.7%2058.243-1.813%2093.255%2035.012%20126.575%2076.199%2018.234%2022.54%2048.35%2030.059%2073.529%2044.246%2052.44%2029.548%2067.894-32.667%2014.767-53.445l-70.677-111.036c-11.42-53.08%2052.186-171.824%20103.49-248.37V17.997zM92.454%2023.424v32.17l32.799%2032.79%208.043-24.126zM78.578%2067.352c-.233-.026-.57.037-1.224.199-1.31.323-3.41%201.482-5.075%203.146-1.664%201.664-2.823%203.763-3.146%205.073-.266%201.074-.207%201.3.012%201.61l120.228%20120.208%203.275-6.55%206.545-3.272L78.97%2067.563c-.123-.086-.24-.195-.39-.211zM21.162%2087.029%2062%20127.86l24.13-8.043-30.335-30.33-.397-.396-.343-.442a17.99%2017.99%200%200%201-1.112-1.619zm213.563%20103.098-28.663%2014.326-14.33%2028.654%2038.264%2015.303%2020.096-19.869z'%20fill='%23fff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",Io="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%20style='height:%20512px;%20width:%20512px;'%3e%3cg%20class=''%20transform='translate(0,0)'%20style=''%3e%3cpath%20d='M372.48%2031.215c-77.65%200-116.48%2065.73-116.48%2065.73s-38.83-65.72-116.48-65.72c-37.14%200-107.77%2033.72-107.77%20125.13%200%20161.24%20224.25%20324.43%20224.25%20324.43s224.25-163.19%20224.25-324.43c0-91.42-70.63-125.13-107.77-125.14zm-145.492%20115.02h60.698v79.415h79.238v60.7h-79.238v79.884h-60.698V286.35h-80.064v-60.7h80.064z'%20fill='%23fff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e";function Ro(){const{characterStats:n,setCharacterStats:t}=fe(Ve),[e,s]=z(null),[l,a]=z(typeof window<"u"?window.innerWidth:1024);_t(()=>{const m=()=>a(window.innerWidth);return window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]);let i=l<1080;_t(()=>{let m=!n.affinities;if(n.affinities){const _=Object.keys(st)[0];_&&n.affinities[st[_]]&&typeof n.affinities[st[_]]!="object"&&(m=!0)}if(m){const _={};Object.values(st).forEach(E=>{_[E]={type:pt.NEUTRAL,mastered:!1}}),t(E=>({...E,affinities:_}))}},[n.affinities,t]);const c=m=>{s(_=>_===m?null:m)},u=(m,_)=>{t(E=>{var A;return{...E,affinities:{...E.affinities,[m]:{...((A=E.affinities)==null?void 0:A[m])||{type:pt.NEUTRAL,mastered:!1},type:_}}}})},r=m=>{t(_=>{var E,A,C;return{..._,affinities:{..._.affinities,[m]:{...((E=_.affinities)==null?void 0:E[m])||{type:pt.NEUTRAL,mastered:!1},mastered:!((C=(A=_.affinities)==null?void 0:A[m])!=null&&C.mastered)}}}})},h=m=>{switch(m){case pt.WEAK:return"danger";case pt.RESIST:return"info";case pt.IMMUNE:return"warning";case pt.ABSORB:return"success";case pt.REFLECT:return"primary";default:return"secondary"}},p=m=>{const _={width:"1.25em",height:"1.25em",color:"white"};switch(m){case pt.WEAK:return o("img",{src:Mo,alt:"Weak",style:_});case pt.RESIST:return o("i",{className:"fas fa-shield-alt",style:_});case pt.IMMUNE:return o("i",{className:"fas fa-ban",style:_});case pt.ABSORB:return o("img",{src:Io,alt:"Absorb",style:_});case pt.REFLECT:return o("img",{src:Do,alt:"Reflect",style:_});default:return o("i",{className:"fas fa-minus",style:_})}};return!n.affinities||typeof n.affinities[Object.values(st)[0]]!="object"?o("div",{className:"p-3",children:"Loading affinities..."}):o("div",{className:"affinity-tracker p-3",children:[o(Se,{title:"ELEMENTAL AFFINITIES"}),o("div",{className:"element-grid mt-4 gap-1",children:Object.values(st).filter(m=>m!=="Almighty").map(m=>{const _=n.affinities[m]||{type:pt.NEUTRAL,mastered:!1};return o("div",{className:`element-item clickable-card mb-3 ${_.mastered?"gold-bg":""} ${e===m?"editing":""}`,onClick:()=>c(m),children:[_.mastered&&o("div",{className:"mastery-watermark",children:"MASTERY"}),o("div",{className:"element-header d-flex align-items-center justify-content-between mb-1",children:[o("div",{className:"d-flex align-items-center element-info",children:[o("span",{className:"element-icon",children:re(m)}),o("span",{className:"arsenal element-name",children:[i?Oo(m):m,":"]}),o("span",{className:`arsenal ms-1 affinity-name text-${h(_.type)}`,children:i?Lo(_.type):_.type})]}),o("button",{className:`mastery-toggle-button ${_.mastered?"mastered":""}`,onClick:E=>{E.stopPropagation(),r(m)},title:_.mastered?"Disable Mastery":"Enable Mastery",children:o("i",{className:`${_.mastered?"fas fa-star":"fa-regular fa-star"}`})})]}),e===m&&o("div",{className:"affinity-buttons btn-group d-flex mt-2",children:Object.values(pt).map(E=>o("button",{className:`btn btn-${_.type===E?h(E):"dark inactive-btn"}`,onClick:A=>{A.stopPropagation(),u(m,E)},title:E,children:p(E)},E))})]},m)})})]})}var Xn={exports:{}},Po=Xn.exports,oi;function Ho(){return oi||(oi=1,function(n,t){(function(e,s){n.exports=s()})(Po,function(){return function(e){var s={};function l(a){if(s[a])return s[a].exports;var i=s[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,l),i.l=!0,i.exports}return l.m=e,l.c=s,l.d=function(a,i,c){l.o(a,i)||Object.defineProperty(a,i,{enumerable:!0,get:c})},l.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},l.t=function(a,i){if(1&i&&(a=l(a)),8&i||4&i&&typeof a=="object"&&a&&a.__esModule)return a;var c=Object.create(null);if(l.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:a}),2&i&&typeof a!="string")for(var u in a)l.d(c,u,(function(r){return a[r]}).bind(null,u));return c},l.n=function(a){var i=a&&a.__esModule?function(){return a.default}:function(){return a};return l.d(i,"a",i),i},l.o=function(a,i){return Object.prototype.hasOwnProperty.call(a,i)},l.p="",l(l.s=0)}([function(e,s,l){function a(i){for(var c in i)s.hasOwnProperty(c)||(s[c]=i[c])}Object.defineProperty(s,"__esModule",{value:!0}),a(l(1)),a(l(3))},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});const a=l(2);s.DiceRoller=class{constructor(i,c=1e3){this.randFunction=Math.random,this.maxRollCount=1e3,i&&(this.randFunction=i),this.maxRollCount=c}parse(i){return a.parse(i)}roll(i){const c=a.parse(i);return this.rollType(c)}rollValue(i){return this.roll(i).value}rollParsed(i){return this.rollType(i)}rollType(i){let c;switch(i.type){case"diceExpression":c=this.rollDiceExpr(i);break;case"group":c=this.rollGroup(i);break;case"die":c=this.rollDie(i);break;case"expression":c=this.rollExpression(i);break;case"mathfunction":c=this.rollFunction(i);break;case"inline":c=this.rollType(i.expr);break;case"number":c=Object.assign(Object.assign({},i),{success:!1,valid:!0,order:0});break;default:throw new Error(`Unable to render ${i.type}`)}return i.label&&(c.label=i.label),c}rollDiceExpr(i){const c=this.rollType(i.head),u=[c],r=[],h=i.ops.reduce((p,m,_)=>{const E=this.rollType(m.tail);switch(E.order=_,u.push(E),r.push(m.op),m.op){case"+":return p+E.value;case"-":return p-E.value;default:return p}},c.value);return{dice:u,ops:r,success:!1,type:"diceexpressionroll",valid:!0,value:h,order:0}}rollGroup(i){let c=i.rolls.map((u,r)=>Object.assign(Object.assign({},this.rollType(u)),{order:r}));if(i.mods){const u=i.mods,r=h=>{const p=u.some(m=>["failure","success"].includes(m.type));return h=u.reduce((m,_)=>this.applyGroupMod(m,_),h),p&&(h=h.map(m=>(m.success||(m.value=0,m.success=!0),m))),h};if(c.length===1&&["die","diceexpressionroll"].includes(c[0].type)){const h=c[0];let p=h.type==="die"?h.rolls:h.dice.filter(m=>m.type!=="number").reduce((m,_)=>[...m,..._.type==="die"?_.rolls:_.dice],[]);p=r(p),h.value=p.reduce((m,_)=>_.valid?m+_.value:m,0)}else c=r(c)}return{dice:c,success:!1,type:"grouproll",valid:!0,value:c.reduce((u,r)=>r.valid?u+r.value:u,0),order:0}}rollDie(i){const c=this.rollType(i.count);if(c.value>this.maxRollCount)throw new Error("Entered number of dice too large.");let u,r;i.die.type==="fate"?(r={type:"fate",success:!1,valid:!1,value:0,order:0},u=Array.from({length:c.value},(m,_)=>this.generateFateRoll(_))):(r=this.rollType(i.die),u=Array.from({length:c.value},(m,_)=>this.generateDiceRoll(r.value,_))),i.mods&&(u=i.mods.reduce((m,_)=>this.applyMod(m,_),u)),i.targets&&(u=i.targets.reduce((m,_)=>this.applyMod(m,_),u).map(m=>(m.success||(m.value=0,m.success=!0),m)));let h=!1,p=0;if(i.match){const m=i.match,_=u.reduce((A,C)=>A.set(C.roll,(A.get(C.roll)||0)+1),new Map),E=new Set(Array.from(_.entries()).filter(([A,C])=>C>=m.min.value).filter(([A])=>!(m.mod&&m.expr)||this.successTest(m.mod,this.rollType(m.expr).value,A)).map(([A])=>A));u.filter(A=>E.has(A.roll)).forEach(A=>A.matched=!0),m.count&&(h=!0,p=E.size)}return i.sort&&(u=this.applySort(u,i.sort)),{count:c,die:r,rolls:u,success:!1,type:"die",valid:!0,value:h?p:u.reduce((m,_)=>_.valid?m+_.value:m,0),order:0,matched:h}}rollExpression(i){const c=this.rollType(i.head),u=[c],r=[],h=i.ops.reduce((p,m)=>{const _=this.rollType(m.tail);switch(u.push(_),r.push(m.op),m.op){case"+":return p+_.value;case"-":return p-_.value;case"*":return p*_.value;case"/":return p/_.value;case"%":return p%_.value;case"**":return p**_.value;default:return p}},c.value);return{dice:u,ops:r,success:!1,type:"expressionroll",valid:!0,value:h,order:0}}rollFunction(i){const c=this.rollType(i.expr);let u;switch(i.op){case"floor":u=Math.floor(c.value);break;case"ceil":u=Math.ceil(c.value);break;case"round":u=Math.round(c.value);break;case"abs":u=Math.abs(c.value);break;default:u=c.value}return{expr:c,op:i.op,success:!1,type:"mathfunction",valid:!0,value:u,order:0}}applyGroupMod(i,c){return this.getGroupModMethod(c)(i)}getGroupModMethod(i){const c=u=>u.value;switch(i.type){case"success":return this.getSuccessMethod(i,c);case"failure":return this.getFailureMethod(i,c);case"keep":return this.getKeepMethod(i,c);case"drop":return this.getDropMethod(i,c);default:throw new Error(`Mod ${i.type} is not recognised`)}}applyMod(i,c){return this.getModMethod(c)(i)}getModMethod(i){const c=u=>u.roll;switch(i.type){case"success":return this.getSuccessMethod(i,c);case"failure":return this.getFailureMethod(i,c);case"crit":return this.getCritSuccessMethod(i,c);case"critfail":return this.getCritFailureMethod(i,c);case"keep":return u=>this.getKeepMethod(i,c)(u).sort((r,h)=>r.order-h.order);case"drop":return u=>this.getDropMethod(i,c)(u).sort((r,h)=>r.order-h.order);case"explode":return this.getExplodeMethod(i);case"compound":return this.getCompoundMethod(i);case"penetrate":return this.getPenetrateMethod(i);case"reroll":return this.getReRollMethod(i);case"rerollOnce":return this.getReRollOnceMethod(i);default:throw new Error(`Mod ${i.type} is not recognised`)}}applySort(i,c){return i.sort((u,r)=>c.asc?u.roll-r.roll:r.roll-u.roll),i.forEach((u,r)=>u.order=r),i}getCritSuccessMethod(i,c){const u=this.rollType(i.expr);return r=>r.map(h=>{if(!h.valid||h.type!=="roll"||h.success)return h;const p=h;return this.successTest(i.mod,u.value,c(h))?p.critical="success":p.critical==="success"&&(p.critical=null),h})}getCritFailureMethod(i,c){const u=this.rollType(i.expr);return r=>r.map(h=>{if(!h.valid||h.type!=="roll"||h.success)return h;const p=h;return this.successTest(i.mod,u.value,c(h))?p.critical="failure":p.critical==="failure"&&(p.critical=null),h})}getSuccessMethod(i,c){const u=this.rollType(i.expr);return r=>r.map(h=>(h.valid&&this.successTest(i.mod,u.value,c(h))&&(h.success?h.value+=1:(h.value=1,h.success=!0)),h))}getFailureMethod(i,c){const u=this.rollType(i.expr);return r=>r.map(h=>(h.valid&&this.successTest(i.mod,u.value,c(h))&&(h.success?h.value-=1:(h.value=-1,h.success=!0)),h))}getKeepMethod(i,c){const u=this.rollType(i.expr);return r=>{if(r.length===0)return r;r=r.sort((E,A)=>i.highlow==="l"?c(A)-c(E):c(E)-c(A)).sort((E,A)=>(E.valid?1:0)-(A.valid?1:0));const h=Math.max(Math.min(u.value,r.length),0);let p=0,m=0;const _=r.reduce((E,A)=>(A.valid?1:0)+E,0)-h;for(;m<r.length&&p<_;)r[m].valid&&(r[m].valid=!1,p++),m++;return r}}getDropMethod(i,c){const u=this.rollType(i.expr);return r=>{r=r.sort((_,E)=>i.highlow==="h"?c(E)-c(_):c(_)-c(E));const h=Math.max(Math.min(u.value,r.length),0);let p=0,m=0;for(;m<r.length&&p<h;)r[m].valid&&(r[m].valid=!1,p++),m++;return r}}getExplodeMethod(i){const c=i.target?this.rollType(i.target.value):null;return u=>{const r=c?h=>this.successTest(i.target.mod,c.value,h.roll):h=>this.successTest("=",h.type==="fateroll"?1:h.die,h.roll);if(u[0].type==="roll"&&r({roll:1})&&r({roll:u[0].die}))throw new Error("Invalid reroll target");for(let h=0;h<u.length;h++){let p=u[h];p.order=h;let m=0;for(;r(p)&&m++<1e3;){const _=this.reRoll(p,++h);u.splice(h,0,_),p=_}}return u}}getCompoundMethod(i){const c=i.target?this.rollType(i.target.value):null;return u=>{const r=c?h=>this.successTest(i.target.mod,c.value,h.roll):h=>this.successTest("=",h.type==="fateroll"?1:h.die,h.roll);if(u[0].type==="roll"&&r({roll:1})&&r({roll:u[0].die}))throw new Error("Invalid reroll target");for(let h=0;h<u.length;h++){let p=u[h],m=p.roll,_=0;for(;r(p)&&_++<1e3;){const E=this.reRoll(u[h],++h);m+=E.roll,p=E}p.value=m,p.roll=m}return u}}getPenetrateMethod(i){const c=i.target?this.rollType(i.target.value):null;return u=>{const r=c?h=>this.successTest(i.target.mod,c.value,h.roll):h=>this.successTest("=",h.type==="fateroll"?1:h.die,h.roll);if(c&&u[0].type==="roll"&&r(u[0])&&this.successTest(i.target.mod,c.value,1))throw new Error("Invalid reroll target");for(let h=0;h<u.length;h++){let p=u[h];p.order=h;let m=0;for(;r(p)&&m++<1e3;){const _=this.reRoll(p,++h);_.value-=1,_.roll-=1,u.splice(h,0,_),p=_}}return u}}getReRollMethod(i){const c=i.target?this.successTest.bind(null,i.target.mod,this.rollType(i.target.value).value):this.successTest.bind(null,"=",1);return u=>{if(u[0].type==="roll"&&c(1)&&c(u[0].die))throw new Error("Invalid reroll target");for(let r=0;r<u.length;r++)for(;c(u[r].roll);){u[r].valid=!1;const h=this.reRoll(u[r],r+1);u.splice(++r,0,h)}return u}}getReRollOnceMethod(i){const c=i.target?this.successTest.bind(null,i.target.mod,this.rollType(i.target.value).value):this.successTest.bind(null,"=",1);return u=>{if(u[0].type==="roll"&&c(1)&&c(u[0].die))throw new Error("Invalid reroll target");for(let r=0;r<u.length;r++)if(c(u[r].roll)){u[r].valid=!1;const h=this.reRoll(u[r],r+1);u.splice(++r,0,h)}return u}}successTest(i,c,u){switch(i){case">":return u>=c;case"<":return u<=c;case"=":default:return u==c}}reRoll(i,c){switch(i.type){case"roll":return this.generateDiceRoll(i.die,c);case"fateroll":return this.generateFateRoll(c);default:throw new Error(`Cannot do a reroll of a ${i.type}.`)}}generateDiceRoll(i,c){const u=Math.floor(this.randFunction()*i)+1;return{critical:u===i?"success":u===1?"failure":null,die:i,matched:!1,order:c,roll:u,success:!1,type:"roll",valid:!0,value:u}}generateFateRoll(i){const c=Math.floor(3*this.randFunction())-1;return{matched:!1,order:i,roll:c,success:!1,type:"fateroll",valid:!0,value:c}}}},function(e,s,l){function a(i,c,u,r){this.message=i,this.expected=c,this.found=u,this.location=r,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,a)}(function(i,c){function u(){this.constructor=i}u.prototype=c.prototype,i.prototype=new u})(a,Error),a.buildMessage=function(i,c){var u={literal:function(m){return'"'+h(m.text)+'"'},class:function(m){var _,E="";for(_=0;_<m.parts.length;_++)E+=m.parts[_]instanceof Array?p(m.parts[_][0])+"-"+p(m.parts[_][1]):p(m.parts[_]);return"["+(m.inverted?"^":"")+E+"]"},any:function(m){return"any character"},end:function(m){return"end of input"},other:function(m){return m.description}};function r(m){return m.charCodeAt(0).toString(16).toUpperCase()}function h(m){return m.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(_){return"\\x0"+r(_)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(_){return"\\x"+r(_)})}function p(m){return m.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(_){return"\\x0"+r(_)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(_){return"\\x"+r(_)})}return"Expected "+function(m){var _,E,A,C=new Array(m.length);for(_=0;_<m.length;_++)C[_]=(A=m[_],u[A.type](A));if(C.sort(),C.length>0){for(_=1,E=1;_<C.length;_++)C[_-1]!==C[_]&&(C[E]=C[_],E++);C.length=E}switch(C.length){case 1:return C[0];case 2:return C[0]+" or "+C[1];default:return C.slice(0,-1).join(", ")+", or "+C[C.length-1]}}(i)+" but "+function(m){return m?'"'+h(m)+'"':"end of input"}(c)+" found."},e.exports={SyntaxError:a,parse:function(i,c){c=c!==void 0?c:{};var u,r={},h={start:Is},p=Is,m={type:"any"},_=q("[[",!1),E=q("]]",!1),A=function(f,v){return v&&(f.label=v),f},C=q(">",!1),O=q("<",!1),L=q("=",!1),B=q("f",!1),M=q("cs",!1),U=q("cf",!1),V=q("m",!1),Q=q("t",!1),X=q("k",!1),P=q("l",!1),F=q("h",!1),Y=q("d",!1),Z=q("{",!1),lt=q(",",!1),Nt=q("}",!1),ut=q("+",!1),it=q("sa",!1),at=q("sd",!1),N=q("!",!1),x=q("!!",!1),K=q("!p",!1),Ct=q("r",!1),St=q("ro",!1),Dt=q("F",!1),At=q("%",!1),Tt=q("(",!1),Mt=q(")",!1),yt=q("-",!1),gt=function(f,v){return v.length==0?f:{head:f,type:"expression",ops:v.map(g=>({type:"math",op:g[1],tail:g[3]}))}},ft=q("*",!1),pe=q("/",!1),Ht=q("**",!1),Ft=q("floor",!1),Gt=q("ceil",!1),y=q("round",!1),j=q("abs",!1),$=Ls("integer"),tt=/^[0-9]/,dt=vr([["0","9"]],!1,!1),ne=function(){return{type:"number",value:parseInt(i.substring(W,d),10)}},kt=q("[",!1),I=/^[^\]]/,vt=vr(["]"],!0,!1),bt=q("]",!1),zt=Ls("whitespace"),ie=/^[ \t\n\r]/,Ee=vr([" ","	",`
`,"\r"],!1,!1),d=0,W=0,Ue=[{line:1,column:1}],ae=0,gr=[],S=0;if("startRule"in c){if(!(c.startRule in h))throw new Error(`Can't start parsing from rule "`+c.startRule+'".');p=h[c.startRule]}function q(f,v){return{type:"literal",text:f,ignoreCase:v}}function vr(f,v,g){return{type:"class",parts:f,inverted:v,ignoreCase:g}}function Ls(f){return{type:"other",description:f}}function Ds(f){var v,g=Ue[f];if(g)return g;for(v=f-1;!Ue[v];)v--;for(g={line:(g=Ue[v]).line,column:g.column};v<f;)i.charCodeAt(v)===10?(g.line++,g.column=1):g.column++,v++;return Ue[f]=g,g}function Ms(f,v){var g=Ds(f),b=Ds(v);return{start:{offset:f,line:g.line,column:g.column},end:{offset:v,line:b.line,column:b.column}}}function k(f){d<ae||(d>ae&&(ae=d,gr=[]),gr.push(f))}function co(f,v,g){return new a(a.buildMessage(f,v),f,v,g)}function Is(){var f,v,g,b,R,w;if(f=d,(v=Er())!==r){for(g=[],i.length>d?(b=i.charAt(d),d++):(b=r,S===0&&k(m));b!==r;)g.push(b),i.length>d?(b=i.charAt(d),d++):(b=r,S===0&&k(m));g!==r?(W=f,w=g,(R=v).root=!0,w&&(R.label=w.join("")),f=v=R):(d=f,f=r)}else d=f,f=r;return f}function uo(){var f,v,g;return f=d,(v=function(){var b,R,w,D,G;if(b=d,(R=function(){var nt,Vt,me,xt,ht,Wt,Rt,Qt,Et;if(nt=d,i.charCodeAt(d)===123?(Vt="{",d++):(Vt=r,S===0&&k(Z)),Vt!==r)if(rt()!==r)if((me=br())!==r){for(xt=[],ht=d,(Wt=rt())!==r?(i.charCodeAt(d)===44?(Rt=",",d++):(Rt=r,S===0&&k(lt)),Rt!==r&&(Qt=rt())!==r&&(Et=br())!==r?ht=Wt=[Wt,Rt,Qt,Et]:(d=ht,ht=r)):(d=ht,ht=r);ht!==r;)xt.push(ht),ht=d,(Wt=rt())!==r?(i.charCodeAt(d)===44?(Rt=",",d++):(Rt=r,S===0&&k(lt)),Rt!==r&&(Qt=rt())!==r&&(Et=br())!==r?ht=Wt=[Wt,Rt,Qt,Et]:(d=ht,ht=r)):(d=ht,ht=r);xt!==r&&(ht=rt())!==r?(i.charCodeAt(d)===125?(Wt="}",d++):(Wt=r,S===0&&k(Nt)),Wt!==r?(W=nt,Vt={rolls:[me,...xt.map(po=>po[3])],type:"group"},nt=Vt):(d=nt,nt=r)):(d=nt,nt=r)}else d=nt,nt=r;else d=nt,nt=r;else d=nt,nt=r;return nt}())!==r){for(w=[],(D=In())===r&&(D=Rn())===r&&(D=Dn())===r&&(D=Mn());D!==r;)w.push(D),(D=In())===r&&(D=Rn())===r&&(D=Dn())===r&&(D=Mn());w!==r&&(D=rt())!==r?((G=Pn())===r&&(G=null),G!==r?(W=b,J=R,It=G,(ot=w).length>0&&(J.mods=(J.mods||[]).concat(ot)),It&&(J.label=It),b=R=J):(d=b,b=r)):(d=b,b=r)}else d=b,b=r;var J,ot,It;return b}())===r&&(v=Hs())===r&&(v=Sr()),v!==r&&rt()!==r?((g=Pn())===r&&(g=null),g!==r?(W=f,f=v=A(v,g)):(d=f,f=r)):(d=f,f=r),f}function Dn(){var f,v,g;return f=d,i.charCodeAt(d)===62?(v=">",d++):(v=r,S===0&&k(C)),v===r&&(i.charCodeAt(d)===60?(v="<",d++):(v=r,S===0&&k(O)),v===r&&(i.charCodeAt(d)===61?(v="=",d++):(v=r,S===0&&k(L)))),v!==r&&(g=oe())!==r?(W=f,f=v={type:"success",mod:v,expr:g}):(d=f,f=r),f}function Mn(){var f,v,g,b;return f=d,i.charCodeAt(d)===102?(v="f",d++):(v=r,S===0&&k(B)),v!==r?(i.charCodeAt(d)===62?(g=">",d++):(g=r,S===0&&k(C)),g===r&&(i.charCodeAt(d)===60?(g="<",d++):(g=r,S===0&&k(O)),g===r&&(i.charCodeAt(d)===61?(g="=",d++):(g=r,S===0&&k(L)))),g===r&&(g=null),g!==r&&(b=oe())!==r?(W=f,f=v={type:"failure",mod:g,expr:b}):(d=f,f=r)):(d=f,f=r),f}function Rs(){var f,v,g,b;return f=d,i.substr(d,2)==="cs"?(v="cs",d+=2):(v=r,S===0&&k(M)),v!==r?(i.charCodeAt(d)===62?(g=">",d++):(g=r,S===0&&k(C)),g===r&&(i.charCodeAt(d)===60?(g="<",d++):(g=r,S===0&&k(O)),g===r&&(i.charCodeAt(d)===61?(g="=",d++):(g=r,S===0&&k(L)))),g===r&&(g=null),g!==r&&(b=oe())!==r?(W=f,f=v={type:"crit",mod:g,expr:b}):(d=f,f=r)):(d=f,f=r),f}function Ps(){var f,v,g,b;return f=d,i.substr(d,2)==="cf"?(v="cf",d+=2):(v=r,S===0&&k(U)),v!==r?(i.charCodeAt(d)===62?(g=">",d++):(g=r,S===0&&k(C)),g===r&&(i.charCodeAt(d)===60?(g="<",d++):(g=r,S===0&&k(O)),g===r&&(i.charCodeAt(d)===61?(g="=",d++):(g=r,S===0&&k(L)))),g===r&&(g=null),g!==r&&(b=oe())!==r?(W=f,f=v={type:"critfail",mod:g,expr:b}):(d=f,f=r)):(d=f,f=r),f}function ho(){var f,v,g,b,R;return f=d,i.charCodeAt(d)===109?(v="m",d++):(v=r,S===0&&k(V)),v!==r?(i.charCodeAt(d)===116?(g="t",d++):(g=r,S===0&&k(Q)),g===r&&(g=null),g!==r?((b=Sr())===r&&(b=null),b!==r?((R=function(){var w,D,G;return w=d,i.charCodeAt(d)===62?(D=">",d++):(D=r,S===0&&k(C)),D===r&&(i.charCodeAt(d)===60?(D="<",d++):(D=r,S===0&&k(O)),D===r&&(i.charCodeAt(d)===61?(D="=",d++):(D=r,S===0&&k(L)))),D!==r&&(G=oe())!==r?(W=w,w=D={mod:D,expr:G}):(d=w,w=r),w}())===r&&(R=null),R!==r?(W=f,f=v=function(w,D,G){const J={type:"match",min:D||{type:"number",value:2},count:!!w};return G&&(J.mod=G.mod,J.expr=G.expr),J}(g,b,R)):(d=f,f=r)):(d=f,f=r)):(d=f,f=r)):(d=f,f=r),f}function In(){var f,v,g,b;return f=d,i.charCodeAt(d)===107?(v="k",d++):(v=r,S===0&&k(X)),v!==r?(i.charCodeAt(d)===108?(g="l",d++):(g=r,S===0&&k(P)),g===r&&(i.charCodeAt(d)===104?(g="h",d++):(g=r,S===0&&k(F))),g===r&&(g=null),g!==r?((b=oe())===r&&(b=null),b!==r?(W=f,f=v={type:"keep",highlow:g,expr:b||Ys}):(d=f,f=r)):(d=f,f=r)):(d=f,f=r),f}function Rn(){var f,v,g,b;return f=d,i.charCodeAt(d)===100?(v="d",d++):(v=r,S===0&&k(Y)),v!==r?(i.charCodeAt(d)===108?(g="l",d++):(g=r,S===0&&k(P)),g===r&&(i.charCodeAt(d)===104?(g="h",d++):(g=r,S===0&&k(F))),g===r&&(g=null),g!==r?((b=oe())===r&&(b=null),b!==r?(W=f,f=v={type:"drop",highlow:g,expr:b||Ys}):(d=f,f=r)):(d=f,f=r)):(d=f,f=r),f}function br(){var f,v,g,b,R,w,D,G;if(f=d,(v=yr())!==r){for(g=[],b=d,(R=rt())!==r?(i.charCodeAt(d)===43?(w="+",d++):(w=r,S===0&&k(ut)),w!==r&&(D=rt())!==r&&(G=yr())!==r?b=R=[R,w,D,G]:(d=b,b=r)):(d=b,b=r);b!==r;)g.push(b),b=d,(R=rt())!==r?(i.charCodeAt(d)===43?(w="+",d++):(w=r,S===0&&k(ut)),w!==r&&(D=rt())!==r&&(G=yr())!==r?b=R=[R,w,D,G]:(d=b,b=r)):(d=b,b=r);g!==r?(W=f,f=v=function(J,ot){return ot.length==0?J:{head:J,type:"diceExpression",ops:ot.map(It=>({type:"math",op:It[1],tail:It[3]}))}}(v,g)):(d=f,f=r)}else d=f,f=r;return f}function yr(){var f;return(f=Hs())===r&&(f=Er()),f}function Hs(){var f,v,g;return f=d,(v=function(){var b,R,w,D,G;if(b=d,(R=function(){var J,ot,It,nt;if(J=d,(ot=function(){var xt,ht,Wt,Rt;return xt=d,(ht=oe())===r&&(ht=null),ht!==r?(i.charCodeAt(d)===100?(Wt="d",d++):(Wt=r,S===0&&k(Y)),Wt!==r?((Rt=function(){var Qt,Et;return Qt=d,i.charCodeAt(d)===70?(Et="F",d++):(Et=r,S===0&&k(Dt)),Et===r&&(i.charCodeAt(d)===102?(Et="f",d++):(Et=r,S===0&&k(B))),Et!==r&&(W=Qt,Et={type:"fate"}),Qt=Et}())===r&&(Rt=function(){var Qt,Et;return Qt=d,i.charCodeAt(d)===37?(Et="%",d++):(Et=r,S===0&&k(At)),Et!==r&&(W=Qt,Et={type:"number",value:"100"}),Qt=Et}())===r&&(Rt=oe()),Rt!==r?(W=xt,ht={die:Rt,count:ht||{type:"number",value:1},type:"die"},xt=ht):(d=xt,xt=r)):(d=xt,xt=r)):(d=xt,xt=r),xt}())!==r){for(It=[],(nt=Vs())===r&&(nt=Ws())===r&&(nt=Fs())===r&&(nt=Us())===r&&(nt=js());nt!==r;)It.push(nt),(nt=Vs())===r&&(nt=Ws())===r&&(nt=Fs())===r&&(nt=Us())===r&&(nt=js());It!==r?(W=J,me=It,(Vt=ot).mods=(Vt.mods||[]).concat(me),J=ot=Vt):(d=J,J=r)}else d=J,J=r;var Vt,me;return J}())!==r){for(w=[],(D=Rn())===r&&(D=In())===r&&(D=Dn())===r&&(D=Mn())===r&&(D=Ps())===r&&(D=Rs());D!==r;)w.push(D),(D=Rn())===r&&(D=In())===r&&(D=Dn())===r&&(D=Mn())===r&&(D=Ps())===r&&(D=Rs());w!==r?((D=ho())===r&&(D=null),D!==r?((G=function(){var J,ot;return J=d,i.substr(d,2)==="sa"?(ot="sa",d+=2):(ot=r,S===0&&k(it)),ot!==r&&(W=J,ot={type:"sort",asc:!0}),J=ot}())===r&&(G=function(){var J,ot;return J=d,i.substr(d,2)==="sd"?(ot="sd",d+=2):(ot=r,S===0&&k(at)),ot!==r&&(W=J,ot={type:"sort",asc:!1}),J=ot}()),G===r&&(G=null),G!==r?(W=b,R=function(J,ot,It,nt){const Vt=ot.filter(me=>["success","failure"].includes(me.type));return ot=ot.filter(me=>!Vt.includes(me)),J.mods=(J.mods||[]).concat(ot),Vt.length>0&&(J.targets=Vt),It&&(J.match=It),nt&&(J.sort=nt),J}(R,w,D,G),b=R):(d=b,b=r)):(d=b,b=r)):(d=b,b=r)}else d=b,b=r;return b}())!==r&&rt()!==r?((g=Pn())===r&&(g=null),g!==r?(W=f,f=v=A(v,g)):(d=f,f=r)):(d=f,f=r),f}function Fs(){var f,v,g;return f=d,i.charCodeAt(d)===33?(v="!",d++):(v=r,S===0&&k(N)),v!==r?((g=un())===r&&(g=null),g!==r?(W=f,f=v={type:"explode",target:g}):(d=f,f=r)):(d=f,f=r),f}function Vs(){var f,v,g;return f=d,i.substr(d,2)==="!!"?(v="!!",d+=2):(v=r,S===0&&k(x)),v!==r?((g=un())===r&&(g=null),g!==r?(W=f,f=v={type:"compound",target:g}):(d=f,f=r)):(d=f,f=r),f}function Ws(){var f,v,g;return f=d,i.substr(d,2)==="!p"?(v="!p",d+=2):(v=r,S===0&&k(K)),v!==r?((g=un())===r&&(g=null),g!==r?(W=f,f=v={type:"penetrate",target:g}):(d=f,f=r)):(d=f,f=r),f}function js(){var f,v,g;return f=d,i.charCodeAt(d)===114?(v="r",d++):(v=r,S===0&&k(Ct)),v!==r?((g=un())===r&&(g=null),g!==r?(W=f,f=v={type:"reroll",target:g||Bs}):(d=f,f=r)):(d=f,f=r),f}function Us(){var f,v,g;return f=d,i.substr(d,2)==="ro"?(v="ro",d+=2):(v=r,S===0&&k(St)),v!==r?((g=un())===r&&(g=null),g!==r?(W=f,f=v={type:"rerollOnce",target:g||Bs}):(d=f,f=r)):(d=f,f=r),f}function un(){var f,v,g;return f=d,i.charCodeAt(d)===62?(v=">",d++):(v=r,S===0&&k(C)),v===r&&(i.charCodeAt(d)===60?(v="<",d++):(v=r,S===0&&k(O)),v===r&&(i.charCodeAt(d)===61?(v="=",d++):(v=r,S===0&&k(L)))),v===r&&(v=null),v!==r&&(g=oe())!==r?(W=f,f=v={type:"target",mod:v,value:g}):(d=f,f=r),f}function oe(){var f;return(f=Nr())===r&&(f=Sr()),f}function Er(){var f;return(f=function(){var v,g,b,R;return v=d,i.substr(d,2)==="[["?(g="[[",d+=2):(g=r,S===0&&k(_)),g!==r&&(b=Er())!==r?(i.substr(d,2)==="]]"?(R="]]",d+=2):(R=r,S===0&&k(E)),R!==r?(W=v,v=g={type:"inline",expr:b}):(d=v,v=r)):(d=v,v=r),v}())===r&&(f=Ar())===r&&(f=Nr()),f}function Nr(){var f,v,g,b,R,w,D;return f=d,i.charCodeAt(d)===40?(v="(",d++):(v=r,S===0&&k(Tt)),v!==r&&(g=Ar())!==r?(i.charCodeAt(d)===41?(b=")",d++):(b=r,S===0&&k(Mt)),b!==r&&rt()!==r?((R=Pn())===r&&(R=null),R!==r?(W=f,w=g,(D=R)&&(w.label=D),f=v=w):(d=f,f=r)):(d=f,f=r)):(d=f,f=r),f}function Ar(){var f,v,g,b,R,w,D,G;if(f=d,(v=Tr())!==r){for(g=[],b=d,(R=rt())!==r?(i.charCodeAt(d)===43?(w="+",d++):(w=r,S===0&&k(ut)),w===r&&(i.charCodeAt(d)===45?(w="-",d++):(w=r,S===0&&k(yt))),w!==r&&(D=rt())!==r&&(G=Tr())!==r?b=R=[R,w,D,G]:(d=b,b=r)):(d=b,b=r);b!==r;)g.push(b),b=d,(R=rt())!==r?(i.charCodeAt(d)===43?(w="+",d++):(w=r,S===0&&k(ut)),w===r&&(i.charCodeAt(d)===45?(w="-",d++):(w=r,S===0&&k(yt))),w!==r&&(D=rt())!==r&&(G=Tr())!==r?b=R=[R,w,D,G]:(d=b,b=r)):(d=b,b=r);g!==r?(W=f,f=v=gt(v,g)):(d=f,f=r)}else d=f,f=r;return f}function Tr(){var f,v,g,b,R,w,D,G;if(f=d,(v=Cr())!==r){for(g=[],b=d,(R=rt())!==r?(i.charCodeAt(d)===42?(w="*",d++):(w=r,S===0&&k(ft)),w===r&&(i.charCodeAt(d)===47?(w="/",d++):(w=r,S===0&&k(pe))),w!==r&&(D=rt())!==r&&(G=Cr())!==r?b=R=[R,w,D,G]:(d=b,b=r)):(d=b,b=r);b!==r;)g.push(b),b=d,(R=rt())!==r?(i.charCodeAt(d)===42?(w="*",d++):(w=r,S===0&&k(ft)),w===r&&(i.charCodeAt(d)===47?(w="/",d++):(w=r,S===0&&k(pe))),w!==r&&(D=rt())!==r&&(G=Cr())!==r?b=R=[R,w,D,G]:(d=b,b=r)):(d=b,b=r);g!==r?(W=f,f=v=gt(v,g)):(d=f,f=r)}else d=f,f=r;return f}function Cr(){var f,v,g,b,R,w,D,G;if(f=d,(v=wr())!==r){for(g=[],b=d,(R=rt())!==r?(i.substr(d,2)==="**"?(w="**",d+=2):(w=r,S===0&&k(Ht)),w===r&&(i.charCodeAt(d)===37?(w="%",d++):(w=r,S===0&&k(At))),w!==r&&(D=rt())!==r&&(G=wr())!==r?b=R=[R,w,D,G]:(d=b,b=r)):(d=b,b=r);b!==r;)g.push(b),b=d,(R=rt())!==r?(i.substr(d,2)==="**"?(w="**",d+=2):(w=r,S===0&&k(Ht)),w===r&&(i.charCodeAt(d)===37?(w="%",d++):(w=r,S===0&&k(At))),w!==r&&(D=rt())!==r&&(G=wr())!==r?b=R=[R,w,D,G]:(d=b,b=r)):(d=b,b=r);g!==r?(W=f,f=v=gt(v,g)):(d=f,f=r)}else d=f,f=r;return f}function fo(){var f,v,g,b,R;return f=d,(v=function(){var w;return i.substr(d,5)==="floor"?(w="floor",d+=5):(w=r,S===0&&k(Ft)),w===r&&(i.substr(d,4)==="ceil"?(w="ceil",d+=4):(w=r,S===0&&k(Gt)),w===r&&(i.substr(d,5)==="round"?(w="round",d+=5):(w=r,S===0&&k(y)),w===r&&(i.substr(d,3)==="abs"?(w="abs",d+=3):(w=r,S===0&&k(j))))),w}())!==r&&rt()!==r?(i.charCodeAt(d)===40?(g="(",d++):(g=r,S===0&&k(Tt)),g!==r&&rt()!==r&&(b=Ar())!==r&&rt()!==r?(i.charCodeAt(d)===41?(R=")",d++):(R=r,S===0&&k(Mt)),R!==r?(W=f,f=v={type:"mathfunction",op:v,expr:b}):(d=f,f=r)):(d=f,f=r)):(d=f,f=r),f}function wr(){var f;return(f=fo())===r&&(f=uo())===r&&(f=Nr()),f}function Sr(){var f,v,g,b;if(S++,f=d,i.charCodeAt(d)===45?(v="-",d++):(v=r,S===0&&k(yt)),v===r&&(v=null),v!==r){if(g=[],tt.test(i.charAt(d))?(b=i.charAt(d),d++):(b=r,S===0&&k(dt)),b!==r)for(;b!==r;)g.push(b),tt.test(i.charAt(d))?(b=i.charAt(d),d++):(b=r,S===0&&k(dt));else g=r;g!==r?(W=f,f=v=ne()):(d=f,f=r)}else d=f,f=r;return S--,f===r&&(v=r,S===0&&k($)),f}function Pn(){var f,v,g,b;if(f=d,i.charCodeAt(d)===91?(v="[",d++):(v=r,S===0&&k(kt)),v!==r){if(g=[],I.test(i.charAt(d))?(b=i.charAt(d),d++):(b=r,S===0&&k(vt)),b!==r)for(;b!==r;)g.push(b),I.test(i.charAt(d))?(b=i.charAt(d),d++):(b=r,S===0&&k(vt));else g=r;g!==r?(i.charCodeAt(d)===93?(b="]",d++):(b=r,S===0&&k(bt)),b!==r?(W=f,f=v=g.join("")):(d=f,f=r)):(d=f,f=r)}else d=f,f=r;return f}function rt(){var f,v;for(S++,f=[],ie.test(i.charAt(d))?(v=i.charAt(d),d++):(v=r,S===0&&k(Ee));v!==r;)f.push(v),ie.test(i.charAt(d))?(v=i.charAt(d),d++):(v=r,S===0&&k(Ee));return S--,f===r&&(v=r,S===0&&k(zt)),f}const Bs={type:"target",mod:"=",value:{type:"number",value:1}},Ys={type:"number",value:1};if((u=p())!==r&&d===i.length)return u;throw u!==r&&d<i.length&&k({type:"end"}),co(gr,ae<i.length?i.charAt(ae):null,ae<i.length?Ms(ae,ae+1):Ms(ae,ae))}}},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0}),s.DiscordRollRenderer=class{render(a){return this.doRender(a,!0)}doRender(a,i=!1){let c="";switch(a.type){case"diceexpressionroll":c=this.renderGroupExpr(a);break;case"grouproll":c=this.renderGroup(a);break;case"die":c=this.renderDie(a);break;case"expressionroll":c=this.renderExpression(a);break;case"mathfunction":c=this.renderFunction(a);break;case"roll":return this.renderRoll(a);case"fateroll":return this.renderFateRoll(a);case"number":const u=a.label?` (${a.label})`:"";return`${a.value}${u}`;case"fate":return"F";default:throw new Error("Unable to render")}return a.valid||(c="~~"+c.replace(/~~/g,"")+"~~"),i?this.stripBrackets(c):a.label?`(${a.label}: ${c})`:c}renderGroup(a){const i=[];for(const c of a.dice)i.push(this.doRender(c));return i.length>1?`{ ${i.join(" + ")} } = ${a.value}`:`{ ${this.stripBrackets(i[0])} } = ${a.value}`}renderGroupExpr(a){const i=[];for(const c of a.dice)i.push(this.doRender(c));return i.length>1?`(${i.join(" + ")} = ${a.value})`:i[0]}renderDie(a){const i=[];for(const r of a.rolls)i.push(this.doRender(r));let c=`${i.join(", ")}`;["number","fate"].includes(a.die.type)&&a.count.type==="number"||(c+=`[*Rolling: ${this.doRender(a.count)}d${this.doRender(a.die)}*]`);const u=a.matched?` Match${a.value===1?"":"es"}`:"";return c+=` = ${a.value}${u}`,`(${c})`}renderExpression(a){if(a.dice.length>1){const i=[];for(let c=0;c<a.dice.length-1;c++)i.push(this.doRender(a.dice[c])),i.push(a.ops[c]);return i.push(this.doRender(a.dice.slice(-1)[0])),i.push("="),i.push(a.value+""),`(${i.join(" ")})`}return a.dice[0].type==="number"?a.value+"":this.doRender(a.dice[0])}renderFunction(a){const i=this.doRender(a.expr);return`(${a.op}${this.addBrackets(i)} = ${a.value})`}addBrackets(a){return a.startsWith("(")||(a=`(${a}`),a.endsWith(")")||(a=`${a})`),a}stripBrackets(a){return a.startsWith("(")&&(a=a.substring(1)),a.endsWith(")")&&(a=a.substring(0,a.length-1)),a}renderRoll(a){let i=`${a.roll}`;return a.valid?a.success&&a.value===1?i=`**${a.roll}**`:a.success&&a.value===-1?i=`*${a.roll}*`:a.success||a.critical!=="success"?a.success||a.critical!=="failure"||(i=`*${a.roll}*`):i=`**${a.roll}**`:i=`~~${a.roll}~~`,a.matched&&(i=`__${i}__`),i}renderFateRoll(a){const i=a.roll===0?"0":a.roll>0?"+":"-";let c=`${a.roll}`;return a.valid?a.success&&a.value===1?c=`**${i}**`:a.success&&a.value===-1&&(c=`*${i}*`):c=`~~${i}~~`,a.matched&&(c=`__${c}__`),c}}}])})}(Xn)),Xn.exports}var Fo=Ho();function fs(n){return String(n).charAt(0).toUpperCase()+String(n).slice(1)}const _n="/requiem-pathfinder-preact/",Ae=16,Or=4,sr=(n,t)=>Math.floor(Math.floor(n*t)/5),le=(n,t)=>{const e=n.find(s=>s.isLinked&&s.linkedStat===t);return e?sr(e.quantity,e.rank):0},Qe=(n,t,e,s=!1)=>t.replace(/\[(\w+)\]/g,(l,a)=>{const i=e[a]||0,c=le(n,a),u=i+c;return s?fs(u.toString()):`${u}[${a}]`}),Vo=n=>{const t=[];return n.name||t.push("Spell name is required"),n.quantity<0&&t.push("Quantity must be 0 or higher"),n.quantity>Ae&&t.push("Quantity over maximum stack limit"),n.power<=0&&t.push("Spell level must be greater than 0"),n.dice||t.push("Damage roll is required"),t},Jn=(n,t)=>{if(!n)return{isValid:!1,error:"A valid dice roll is required."};try{const e=n.replace(/\[\w+\]/g,"0");new Fo.DiceRoller().roll(e);const l=(n.match(/\[(\w+)\]/g)||[]).map(a=>a.slice(1,-1)).filter(a=>t[a]===void 0);return l.length>0?{isValid:!1,error:`Unknown stats: ${l.join(", ")}`}:{isValid:!0,error:null}}catch{return{isValid:!1,error:"Invalid dice format. Use format like '1d6+[spellAttackModifier]' or '2d8+3'"}}};var Ot="top",Yt="bottom",Kt="right",Lt="left",cr="auto",on=[Ot,Yt,Kt,Lt],He="start",Ze="end",la="clippingParents",ps="viewport",Ke="popper",ca="reference",Jr=on.reduce(function(n,t){return n.concat([t+"-"+He,t+"-"+Ze])},[]),ms=[].concat(on,[cr]).reduce(function(n,t){return n.concat([t,t+"-"+He,t+"-"+Ze])},[]),ua="beforeRead",da="read",ha="afterRead",fa="beforeMain",pa="main",ma="afterMain",_a="beforeWrite",ga="write",va="afterWrite",ba=[ua,da,ha,fa,pa,ma,_a,ga,va];function he(n){return n?(n.nodeName||"").toLowerCase():null}function qt(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var t=n.ownerDocument;return t&&t.defaultView||window}return n}function Fe(n){var t=qt(n).Element;return n instanceof t||n instanceof Element}function Jt(n){var t=qt(n).HTMLElement;return n instanceof t||n instanceof HTMLElement}function _s(n){if(typeof ShadowRoot>"u")return!1;var t=qt(n).ShadowRoot;return n instanceof t||n instanceof ShadowRoot}function Wo(n){var t=n.state;Object.keys(t.elements).forEach(function(e){var s=t.styles[e]||{},l=t.attributes[e]||{},a=t.elements[e];!Jt(a)||!he(a)||(Object.assign(a.style,s),Object.keys(l).forEach(function(i){var c=l[i];c===!1?a.removeAttribute(i):a.setAttribute(i,c===!0?"":c)}))})}function jo(n){var t=n.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(s){var l=t.elements[s],a=t.attributes[s]||{},i=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:e[s]),c=i.reduce(function(u,r){return u[r]="",u},{});!Jt(l)||!he(l)||(Object.assign(l.style,c),Object.keys(a).forEach(function(u){l.removeAttribute(u)}))})}}const gs={name:"applyStyles",enabled:!0,phase:"write",fn:Wo,effect:jo,requires:["computeStyles"]};function ue(n){return n.split("-")[0]}var Re=Math.max,ir=Math.min,tn=Math.round;function Zr(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function ya(){return!/^((?!chrome|android).)*safari/i.test(Zr())}function en(n,t,e){t===void 0&&(t=!1),e===void 0&&(e=!1);var s=n.getBoundingClientRect(),l=1,a=1;t&&Jt(n)&&(l=n.offsetWidth>0&&tn(s.width)/n.offsetWidth||1,a=n.offsetHeight>0&&tn(s.height)/n.offsetHeight||1);var i=Fe(n)?qt(n):window,c=i.visualViewport,u=!ya()&&e,r=(s.left+(u&&c?c.offsetLeft:0))/l,h=(s.top+(u&&c?c.offsetTop:0))/a,p=s.width/l,m=s.height/a;return{width:p,height:m,top:h,right:r+p,bottom:h+m,left:r,x:r,y:h}}function vs(n){var t=en(n),e=n.offsetWidth,s=n.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:n.offsetLeft,y:n.offsetTop,width:e,height:s}}function Ea(n,t){var e=t.getRootNode&&t.getRootNode();if(n.contains(t))return!0;if(e&&_s(e)){var s=t;do{if(s&&n.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function ve(n){return qt(n).getComputedStyle(n)}function Uo(n){return["table","td","th"].indexOf(he(n))>=0}function ke(n){return((Fe(n)?n.ownerDocument:n.document)||window.document).documentElement}function ur(n){return he(n)==="html"?n:n.assignedSlot||n.parentNode||(_s(n)?n.host:null)||ke(n)}function li(n){return!Jt(n)||ve(n).position==="fixed"?null:n.offsetParent}function Bo(n){var t=/firefox/i.test(Zr()),e=/Trident/i.test(Zr());if(e&&Jt(n)){var s=ve(n);if(s.position==="fixed")return null}var l=ur(n);for(_s(l)&&(l=l.host);Jt(l)&&["html","body"].indexOf(he(l))<0;){var a=ve(l);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||t&&a.willChange==="filter"||t&&a.filter&&a.filter!=="none")return l;l=l.parentNode}return null}function Sn(n){for(var t=qt(n),e=li(n);e&&Uo(e)&&ve(e).position==="static";)e=li(e);return e&&(he(e)==="html"||he(e)==="body"&&ve(e).position==="static")?t:e||Bo(n)||t}function bs(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function gn(n,t,e){return Re(n,ir(t,e))}function Yo(n,t,e){var s=gn(n,t,e);return s>e?e:s}function Na(){return{top:0,right:0,bottom:0,left:0}}function Aa(n){return Object.assign({},Na(),n)}function Ta(n,t){return t.reduce(function(e,s){return e[s]=n,e},{})}var Ko=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,Aa(typeof t!="number"?t:Ta(t,on))};function qo(n){var t,e=n.state,s=n.name,l=n.options,a=e.elements.arrow,i=e.modifiersData.popperOffsets,c=ue(e.placement),u=bs(c),r=[Lt,Kt].indexOf(c)>=0,h=r?"height":"width";if(!(!a||!i)){var p=Ko(l.padding,e),m=vs(a),_=u==="y"?Ot:Lt,E=u==="y"?Yt:Kt,A=e.rects.reference[h]+e.rects.reference[u]-i[u]-e.rects.popper[h],C=i[u]-e.rects.reference[u],O=Sn(a),L=O?u==="y"?O.clientHeight||0:O.clientWidth||0:0,B=A/2-C/2,M=p[_],U=L-m[h]-p[E],V=L/2-m[h]/2+B,Q=gn(M,V,U),X=u;e.modifiersData[s]=(t={},t[X]=Q,t.centerOffset=Q-V,t)}}function Go(n){var t=n.state,e=n.options,s=e.element,l=s===void 0?"[data-popper-arrow]":s;l!=null&&(typeof l=="string"&&(l=t.elements.popper.querySelector(l),!l)||Ea(t.elements.popper,l)&&(t.elements.arrow=l))}const Ca={name:"arrow",enabled:!0,phase:"main",fn:qo,effect:Go,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function nn(n){return n.split("-")[1]}var zo={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Qo(n,t){var e=n.x,s=n.y,l=t.devicePixelRatio||1;return{x:tn(e*l)/l||0,y:tn(s*l)/l||0}}function ci(n){var t,e=n.popper,s=n.popperRect,l=n.placement,a=n.variation,i=n.offsets,c=n.position,u=n.gpuAcceleration,r=n.adaptive,h=n.roundOffsets,p=n.isFixed,m=i.x,_=m===void 0?0:m,E=i.y,A=E===void 0?0:E,C=typeof h=="function"?h({x:_,y:A}):{x:_,y:A};_=C.x,A=C.y;var O=i.hasOwnProperty("x"),L=i.hasOwnProperty("y"),B=Lt,M=Ot,U=window;if(r){var V=Sn(e),Q="clientHeight",X="clientWidth";if(V===qt(e)&&(V=ke(e),ve(V).position!=="static"&&c==="absolute"&&(Q="scrollHeight",X="scrollWidth")),V=V,l===Ot||(l===Lt||l===Kt)&&a===Ze){M=Yt;var P=p&&V===U&&U.visualViewport?U.visualViewport.height:V[Q];A-=P-s.height,A*=u?1:-1}if(l===Lt||(l===Ot||l===Yt)&&a===Ze){B=Kt;var F=p&&V===U&&U.visualViewport?U.visualViewport.width:V[X];_-=F-s.width,_*=u?1:-1}}var Y=Object.assign({position:c},r&&zo),Z=h===!0?Qo({x:_,y:A},qt(e)):{x:_,y:A};if(_=Z.x,A=Z.y,u){var lt;return Object.assign({},Y,(lt={},lt[M]=L?"0":"",lt[B]=O?"0":"",lt.transform=(U.devicePixelRatio||1)<=1?"translate("+_+"px, "+A+"px)":"translate3d("+_+"px, "+A+"px, 0)",lt))}return Object.assign({},Y,(t={},t[M]=L?A+"px":"",t[B]=O?_+"px":"",t.transform="",t))}function Xo(n){var t=n.state,e=n.options,s=e.gpuAcceleration,l=s===void 0?!0:s,a=e.adaptive,i=a===void 0?!0:a,c=e.roundOffsets,u=c===void 0?!0:c,r={placement:ue(t.placement),variation:nn(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:l,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,ci(Object.assign({},r,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:i,roundOffsets:u})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,ci(Object.assign({},r,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const ys={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Xo,data:{}};var jn={passive:!0};function Jo(n){var t=n.state,e=n.instance,s=n.options,l=s.scroll,a=l===void 0?!0:l,i=s.resize,c=i===void 0?!0:i,u=qt(t.elements.popper),r=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&r.forEach(function(h){h.addEventListener("scroll",e.update,jn)}),c&&u.addEventListener("resize",e.update,jn),function(){a&&r.forEach(function(h){h.removeEventListener("scroll",e.update,jn)}),c&&u.removeEventListener("resize",e.update,jn)}}const Es={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Jo,data:{}};var Zo={left:"right",right:"left",bottom:"top",top:"bottom"};function Zn(n){return n.replace(/left|right|bottom|top/g,function(t){return Zo[t]})}var tl={start:"end",end:"start"};function ui(n){return n.replace(/start|end/g,function(t){return tl[t]})}function Ns(n){var t=qt(n),e=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:e,scrollTop:s}}function As(n){return en(ke(n)).left+Ns(n).scrollLeft}function el(n,t){var e=qt(n),s=ke(n),l=e.visualViewport,a=s.clientWidth,i=s.clientHeight,c=0,u=0;if(l){a=l.width,i=l.height;var r=ya();(r||!r&&t==="fixed")&&(c=l.offsetLeft,u=l.offsetTop)}return{width:a,height:i,x:c+As(n),y:u}}function nl(n){var t,e=ke(n),s=Ns(n),l=(t=n.ownerDocument)==null?void 0:t.body,a=Re(e.scrollWidth,e.clientWidth,l?l.scrollWidth:0,l?l.clientWidth:0),i=Re(e.scrollHeight,e.clientHeight,l?l.scrollHeight:0,l?l.clientHeight:0),c=-s.scrollLeft+As(n),u=-s.scrollTop;return ve(l||e).direction==="rtl"&&(c+=Re(e.clientWidth,l?l.clientWidth:0)-a),{width:a,height:i,x:c,y:u}}function Ts(n){var t=ve(n),e=t.overflow,s=t.overflowX,l=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+l+s)}function wa(n){return["html","body","#document"].indexOf(he(n))>=0?n.ownerDocument.body:Jt(n)&&Ts(n)?n:wa(ur(n))}function vn(n,t){var e;t===void 0&&(t=[]);var s=wa(n),l=s===((e=n.ownerDocument)==null?void 0:e.body),a=qt(s),i=l?[a].concat(a.visualViewport||[],Ts(s)?s:[]):s,c=t.concat(i);return l?c:c.concat(vn(ur(i)))}function ts(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function rl(n,t){var e=en(n,!1,t==="fixed");return e.top=e.top+n.clientTop,e.left=e.left+n.clientLeft,e.bottom=e.top+n.clientHeight,e.right=e.left+n.clientWidth,e.width=n.clientWidth,e.height=n.clientHeight,e.x=e.left,e.y=e.top,e}function di(n,t,e){return t===ps?ts(el(n,e)):Fe(t)?rl(t,e):ts(nl(ke(n)))}function sl(n){var t=vn(ur(n)),e=["absolute","fixed"].indexOf(ve(n).position)>=0,s=e&&Jt(n)?Sn(n):n;return Fe(s)?t.filter(function(l){return Fe(l)&&Ea(l,s)&&he(l)!=="body"}):[]}function il(n,t,e,s){var l=t==="clippingParents"?sl(n):[].concat(t),a=[].concat(l,[e]),i=a[0],c=a.reduce(function(u,r){var h=di(n,r,s);return u.top=Re(h.top,u.top),u.right=ir(h.right,u.right),u.bottom=ir(h.bottom,u.bottom),u.left=Re(h.left,u.left),u},di(n,i,s));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function Sa(n){var t=n.reference,e=n.element,s=n.placement,l=s?ue(s):null,a=s?nn(s):null,i=t.x+t.width/2-e.width/2,c=t.y+t.height/2-e.height/2,u;switch(l){case Ot:u={x:i,y:t.y-e.height};break;case Yt:u={x:i,y:t.y+t.height};break;case Kt:u={x:t.x+t.width,y:c};break;case Lt:u={x:t.x-e.width,y:c};break;default:u={x:t.x,y:t.y}}var r=l?bs(l):null;if(r!=null){var h=r==="y"?"height":"width";switch(a){case He:u[r]=u[r]-(t[h]/2-e[h]/2);break;case Ze:u[r]=u[r]+(t[h]/2-e[h]/2);break}}return u}function rn(n,t){t===void 0&&(t={});var e=t,s=e.placement,l=s===void 0?n.placement:s,a=e.strategy,i=a===void 0?n.strategy:a,c=e.boundary,u=c===void 0?la:c,r=e.rootBoundary,h=r===void 0?ps:r,p=e.elementContext,m=p===void 0?Ke:p,_=e.altBoundary,E=_===void 0?!1:_,A=e.padding,C=A===void 0?0:A,O=Aa(typeof C!="number"?C:Ta(C,on)),L=m===Ke?ca:Ke,B=n.rects.popper,M=n.elements[E?L:m],U=il(Fe(M)?M:M.contextElement||ke(n.elements.popper),u,h,i),V=en(n.elements.reference),Q=Sa({reference:V,element:B,placement:l}),X=ts(Object.assign({},B,Q)),P=m===Ke?X:V,F={top:U.top-P.top+O.top,bottom:P.bottom-U.bottom+O.bottom,left:U.left-P.left+O.left,right:P.right-U.right+O.right},Y=n.modifiersData.offset;if(m===Ke&&Y){var Z=Y[l];Object.keys(F).forEach(function(lt){var Nt=[Kt,Yt].indexOf(lt)>=0?1:-1,ut=[Ot,Yt].indexOf(lt)>=0?"y":"x";F[lt]+=Z[ut]*Nt})}return F}function al(n,t){t===void 0&&(t={});var e=t,s=e.placement,l=e.boundary,a=e.rootBoundary,i=e.padding,c=e.flipVariations,u=e.allowedAutoPlacements,r=u===void 0?ms:u,h=nn(s),p=h?c?Jr:Jr.filter(function(E){return nn(E)===h}):on,m=p.filter(function(E){return r.indexOf(E)>=0});m.length===0&&(m=p);var _=m.reduce(function(E,A){return E[A]=rn(n,{placement:A,boundary:l,rootBoundary:a,padding:i})[ue(A)],E},{});return Object.keys(_).sort(function(E,A){return _[E]-_[A]})}function ol(n){if(ue(n)===cr)return[];var t=Zn(n);return[ui(n),t,ui(t)]}function ll(n){var t=n.state,e=n.options,s=n.name;if(!t.modifiersData[s]._skip){for(var l=e.mainAxis,a=l===void 0?!0:l,i=e.altAxis,c=i===void 0?!0:i,u=e.fallbackPlacements,r=e.padding,h=e.boundary,p=e.rootBoundary,m=e.altBoundary,_=e.flipVariations,E=_===void 0?!0:_,A=e.allowedAutoPlacements,C=t.options.placement,O=ue(C),L=O===C,B=u||(L||!E?[Zn(C)]:ol(C)),M=[C].concat(B).reduce(function(At,Tt){return At.concat(ue(Tt)===cr?al(t,{placement:Tt,boundary:h,rootBoundary:p,padding:r,flipVariations:E,allowedAutoPlacements:A}):Tt)},[]),U=t.rects.reference,V=t.rects.popper,Q=new Map,X=!0,P=M[0],F=0;F<M.length;F++){var Y=M[F],Z=ue(Y),lt=nn(Y)===He,Nt=[Ot,Yt].indexOf(Z)>=0,ut=Nt?"width":"height",it=rn(t,{placement:Y,boundary:h,rootBoundary:p,altBoundary:m,padding:r}),at=Nt?lt?Kt:Lt:lt?Yt:Ot;U[ut]>V[ut]&&(at=Zn(at));var N=Zn(at),x=[];if(a&&x.push(it[Z]<=0),c&&x.push(it[at]<=0,it[N]<=0),x.every(function(At){return At})){P=Y,X=!1;break}Q.set(Y,x)}if(X)for(var K=E?3:1,Ct=function(Tt){var Mt=M.find(function(yt){var gt=Q.get(yt);if(gt)return gt.slice(0,Tt).every(function(ft){return ft})});if(Mt)return P=Mt,"break"},St=K;St>0;St--){var Dt=Ct(St);if(Dt==="break")break}t.placement!==P&&(t.modifiersData[s]._skip=!0,t.placement=P,t.reset=!0)}}const ka={name:"flip",enabled:!0,phase:"main",fn:ll,requiresIfExists:["offset"],data:{_skip:!1}};function hi(n,t,e){return e===void 0&&(e={x:0,y:0}),{top:n.top-t.height-e.y,right:n.right-t.width+e.x,bottom:n.bottom-t.height+e.y,left:n.left-t.width-e.x}}function fi(n){return[Ot,Kt,Yt,Lt].some(function(t){return n[t]>=0})}function cl(n){var t=n.state,e=n.name,s=t.rects.reference,l=t.rects.popper,a=t.modifiersData.preventOverflow,i=rn(t,{elementContext:"reference"}),c=rn(t,{altBoundary:!0}),u=hi(i,s),r=hi(c,l,a),h=fi(u),p=fi(r);t.modifiersData[e]={referenceClippingOffsets:u,popperEscapeOffsets:r,isReferenceHidden:h,hasPopperEscaped:p},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":p})}const xa={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:cl};function ul(n,t,e){var s=ue(n),l=[Lt,Ot].indexOf(s)>=0?-1:1,a=typeof e=="function"?e(Object.assign({},t,{placement:n})):e,i=a[0],c=a[1];return i=i||0,c=(c||0)*l,[Lt,Kt].indexOf(s)>=0?{x:c,y:i}:{x:i,y:c}}function dl(n){var t=n.state,e=n.options,s=n.name,l=e.offset,a=l===void 0?[0,0]:l,i=ms.reduce(function(h,p){return h[p]=ul(p,t.rects,a),h},{}),c=i[t.placement],u=c.x,r=c.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=u,t.modifiersData.popperOffsets.y+=r),t.modifiersData[s]=i}const $a={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:dl};function hl(n){var t=n.state,e=n.name;t.modifiersData[e]=Sa({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const Cs={name:"popperOffsets",enabled:!0,phase:"read",fn:hl,data:{}};function fl(n){return n==="x"?"y":"x"}function pl(n){var t=n.state,e=n.options,s=n.name,l=e.mainAxis,a=l===void 0?!0:l,i=e.altAxis,c=i===void 0?!1:i,u=e.boundary,r=e.rootBoundary,h=e.altBoundary,p=e.padding,m=e.tether,_=m===void 0?!0:m,E=e.tetherOffset,A=E===void 0?0:E,C=rn(t,{boundary:u,rootBoundary:r,padding:p,altBoundary:h}),O=ue(t.placement),L=nn(t.placement),B=!L,M=bs(O),U=fl(M),V=t.modifiersData.popperOffsets,Q=t.rects.reference,X=t.rects.popper,P=typeof A=="function"?A(Object.assign({},t.rects,{placement:t.placement})):A,F=typeof P=="number"?{mainAxis:P,altAxis:P}:Object.assign({mainAxis:0,altAxis:0},P),Y=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Z={x:0,y:0};if(V){if(a){var lt,Nt=M==="y"?Ot:Lt,ut=M==="y"?Yt:Kt,it=M==="y"?"height":"width",at=V[M],N=at+C[Nt],x=at-C[ut],K=_?-X[it]/2:0,Ct=L===He?Q[it]:X[it],St=L===He?-X[it]:-Q[it],Dt=t.elements.arrow,At=_&&Dt?vs(Dt):{width:0,height:0},Tt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Na(),Mt=Tt[Nt],yt=Tt[ut],gt=gn(0,Q[it],At[it]),ft=B?Q[it]/2-K-gt-Mt-F.mainAxis:Ct-gt-Mt-F.mainAxis,pe=B?-Q[it]/2+K+gt+yt+F.mainAxis:St+gt+yt+F.mainAxis,Ht=t.elements.arrow&&Sn(t.elements.arrow),Ft=Ht?M==="y"?Ht.clientTop||0:Ht.clientLeft||0:0,Gt=(lt=Y==null?void 0:Y[M])!=null?lt:0,y=at+ft-Gt-Ft,j=at+pe-Gt,$=gn(_?ir(N,y):N,at,_?Re(x,j):x);V[M]=$,Z[M]=$-at}if(c){var tt,dt=M==="x"?Ot:Lt,ne=M==="x"?Yt:Kt,kt=V[U],I=U==="y"?"height":"width",vt=kt+C[dt],bt=kt-C[ne],zt=[Ot,Lt].indexOf(O)!==-1,ie=(tt=Y==null?void 0:Y[U])!=null?tt:0,Ee=zt?vt:kt-Q[I]-X[I]-ie+F.altAxis,d=zt?kt+Q[I]+X[I]-ie-F.altAxis:bt,W=_&&zt?Yo(Ee,kt,d):gn(_?Ee:vt,kt,_?d:bt);V[U]=W,Z[U]=W-kt}t.modifiersData[s]=Z}}const Oa={name:"preventOverflow",enabled:!0,phase:"main",fn:pl,requiresIfExists:["offset"]};function ml(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function _l(n){return n===qt(n)||!Jt(n)?Ns(n):ml(n)}function gl(n){var t=n.getBoundingClientRect(),e=tn(t.width)/n.offsetWidth||1,s=tn(t.height)/n.offsetHeight||1;return e!==1||s!==1}function vl(n,t,e){e===void 0&&(e=!1);var s=Jt(t),l=Jt(t)&&gl(t),a=ke(t),i=en(n,l,e),c={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(s||!s&&!e)&&((he(t)!=="body"||Ts(a))&&(c=_l(t)),Jt(t)?(u=en(t,!0),u.x+=t.clientLeft,u.y+=t.clientTop):a&&(u.x=As(a))),{x:i.left+c.scrollLeft-u.x,y:i.top+c.scrollTop-u.y,width:i.width,height:i.height}}function bl(n){var t=new Map,e=new Set,s=[];n.forEach(function(a){t.set(a.name,a)});function l(a){e.add(a.name);var i=[].concat(a.requires||[],a.requiresIfExists||[]);i.forEach(function(c){if(!e.has(c)){var u=t.get(c);u&&l(u)}}),s.push(a)}return n.forEach(function(a){e.has(a.name)||l(a)}),s}function yl(n){var t=bl(n);return ba.reduce(function(e,s){return e.concat(t.filter(function(l){return l.phase===s}))},[])}function El(n){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(n())})})),t}}function Nl(n){var t=n.reduce(function(e,s){var l=e[s.name];return e[s.name]=l?Object.assign({},l,s,{options:Object.assign({},l.options,s.options),data:Object.assign({},l.data,s.data)}):s,e},{});return Object.keys(t).map(function(e){return t[e]})}var pi={placement:"bottom",modifiers:[],strategy:"absolute"};function mi(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function dr(n){n===void 0&&(n={});var t=n,e=t.defaultModifiers,s=e===void 0?[]:e,l=t.defaultOptions,a=l===void 0?pi:l;return function(c,u,r){r===void 0&&(r=a);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},pi,a),modifiersData:{},elements:{reference:c,popper:u},attributes:{},styles:{}},p=[],m=!1,_={state:h,setOptions:function(O){var L=typeof O=="function"?O(h.options):O;A(),h.options=Object.assign({},a,h.options,L),h.scrollParents={reference:Fe(c)?vn(c):c.contextElement?vn(c.contextElement):[],popper:vn(u)};var B=yl(Nl([].concat(s,h.options.modifiers)));return h.orderedModifiers=B.filter(function(M){return M.enabled}),E(),_.update()},forceUpdate:function(){if(!m){var O=h.elements,L=O.reference,B=O.popper;if(mi(L,B)){h.rects={reference:vl(L,Sn(B),h.options.strategy==="fixed"),popper:vs(B)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(F){return h.modifiersData[F.name]=Object.assign({},F.data)});for(var M=0;M<h.orderedModifiers.length;M++){if(h.reset===!0){h.reset=!1,M=-1;continue}var U=h.orderedModifiers[M],V=U.fn,Q=U.options,X=Q===void 0?{}:Q,P=U.name;typeof V=="function"&&(h=V({state:h,options:X,name:P,instance:_})||h)}}}},update:El(function(){return new Promise(function(C){_.forceUpdate(),C(h)})}),destroy:function(){A(),m=!0}};if(!mi(c,u))return _;_.setOptions(r).then(function(C){!m&&r.onFirstUpdate&&r.onFirstUpdate(C)});function E(){h.orderedModifiers.forEach(function(C){var O=C.name,L=C.options,B=L===void 0?{}:L,M=C.effect;if(typeof M=="function"){var U=M({state:h,name:O,instance:_,options:B}),V=function(){};p.push(U||V)}})}function A(){p.forEach(function(C){return C()}),p=[]}return _}}var Al=dr(),Tl=[Es,Cs,ys,gs],Cl=dr({defaultModifiers:Tl}),wl=[Es,Cs,ys,gs,$a,ka,Oa,Ca,xa],ws=dr({defaultModifiers:wl});const La=Object.freeze(Object.defineProperty({__proto__:null,afterMain:ma,afterRead:ha,afterWrite:va,applyStyles:gs,arrow:Ca,auto:cr,basePlacements:on,beforeMain:fa,beforeRead:ua,beforeWrite:_a,bottom:Yt,clippingParents:la,computeStyles:ys,createPopper:ws,createPopperBase:Al,createPopperLite:Cl,detectOverflow:rn,end:Ze,eventListeners:Es,flip:ka,hide:xa,left:Lt,main:pa,modifierPhases:ba,offset:$a,placements:ms,popper:Ke,popperGenerator:dr,popperOffsets:Cs,preventOverflow:Oa,read:da,reference:ca,right:Kt,start:He,top:Ot,variationPlacements:Jr,viewport:ps,write:ga},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.6 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Ne=new Map,Lr={set(n,t,e){Ne.has(n)||Ne.set(n,new Map);const s=Ne.get(n);if(!s.has(t)&&s.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`);return}s.set(t,e)},get(n,t){return Ne.has(n)&&Ne.get(n).get(t)||null},remove(n,t){if(!Ne.has(n))return;const e=Ne.get(n);e.delete(t),e.size===0&&Ne.delete(n)}},Sl=1e6,kl=1e3,es="transitionend",Da=n=>(n&&window.CSS&&window.CSS.escape&&(n=n.replace(/#([^\s"#']+)/g,(t,e)=>`#${CSS.escape(e)}`)),n),xl=n=>n==null?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase(),$l=n=>{do n+=Math.floor(Math.random()*Sl);while(document.getElementById(n));return n},Ol=n=>{if(!n)return 0;let{transitionDuration:t,transitionDelay:e}=window.getComputedStyle(n);const s=Number.parseFloat(t),l=Number.parseFloat(e);return!s&&!l?0:(t=t.split(",")[0],e=e.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(e))*kl)},Ma=n=>{n.dispatchEvent(new Event(es))},_e=n=>!n||typeof n!="object"?!1:(typeof n.jquery<"u"&&(n=n[0]),typeof n.nodeType<"u"),Te=n=>_e(n)?n.jquery?n[0]:n:typeof n=="string"&&n.length>0?document.querySelector(Da(n)):null,ln=n=>{if(!_e(n)||n.getClientRects().length===0)return!1;const t=getComputedStyle(n).getPropertyValue("visibility")==="visible",e=n.closest("details:not([open])");if(!e)return t;if(e!==n){const s=n.closest("summary");if(s&&s.parentNode!==e||s===null)return!1}return t},Ce=n=>!n||n.nodeType!==Node.ELEMENT_NODE||n.classList.contains("disabled")?!0:typeof n.disabled<"u"?n.disabled:n.hasAttribute("disabled")&&n.getAttribute("disabled")!=="false",Ia=n=>{if(!document.documentElement.attachShadow)return null;if(typeof n.getRootNode=="function"){const t=n.getRootNode();return t instanceof ShadowRoot?t:null}return n instanceof ShadowRoot?n:n.parentNode?Ia(n.parentNode):null},ar=()=>{},kn=n=>{n.offsetHeight},Ra=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Dr=[],Ll=n=>{document.readyState==="loading"?(Dr.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of Dr)t()}),Dr.push(n)):n()},Zt=()=>document.documentElement.dir==="rtl",ee=n=>{Ll(()=>{const t=Ra();if(t){const e=n.NAME,s=t.fn[e];t.fn[e]=n.jQueryInterface,t.fn[e].Constructor=n,t.fn[e].noConflict=()=>(t.fn[e]=s,n.jQueryInterface)}})},Pt=(n,t=[],e=n)=>typeof n=="function"?n.call(...t):e,Pa=(n,t,e=!0)=>{if(!e){Pt(n);return}const l=Ol(t)+5;let a=!1;const i=({target:c})=>{c===t&&(a=!0,t.removeEventListener(es,i),Pt(n))};t.addEventListener(es,i),setTimeout(()=>{a||Ma(t)},l)},Ss=(n,t,e,s)=>{const l=n.length;let a=n.indexOf(t);return a===-1?!e&&s?n[l-1]:n[0]:(a+=e?1:-1,s&&(a=(a+l)%l),n[Math.max(0,Math.min(a,l-1))])},Dl=/[^.]*(?=\..*)\.|.*/,Ml=/\..*/,Il=/::\d+$/,Mr={};let _i=1;const Ha={mouseenter:"mouseover",mouseleave:"mouseout"},Rl=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Fa(n,t){return t&&`${t}::${_i++}`||n.uidEvent||_i++}function Va(n){const t=Fa(n);return n.uidEvent=t,Mr[t]=Mr[t]||{},Mr[t]}function Pl(n,t){return function e(s){return ks(s,{delegateTarget:n}),e.oneOff&&T.off(n,s.type,t),t.apply(n,[s])}}function Hl(n,t,e){return function s(l){const a=n.querySelectorAll(t);for(let{target:i}=l;i&&i!==this;i=i.parentNode)for(const c of a)if(c===i)return ks(l,{delegateTarget:i}),s.oneOff&&T.off(n,l.type,t,e),e.apply(i,[l])}}function Wa(n,t,e=null){return Object.values(n).find(s=>s.callable===t&&s.delegationSelector===e)}function ja(n,t,e){const s=typeof t=="string",l=s?e:t||e;let a=Ua(n);return Rl.has(a)||(a=n),[s,l,a]}function gi(n,t,e,s,l){if(typeof t!="string"||!n)return;let[a,i,c]=ja(t,e,s);t in Ha&&(i=(E=>function(A){if(!A.relatedTarget||A.relatedTarget!==A.delegateTarget&&!A.delegateTarget.contains(A.relatedTarget))return E.call(this,A)})(i));const u=Va(n),r=u[c]||(u[c]={}),h=Wa(r,i,a?e:null);if(h){h.oneOff=h.oneOff&&l;return}const p=Fa(i,t.replace(Dl,"")),m=a?Hl(n,e,i):Pl(n,i);m.delegationSelector=a?e:null,m.callable=i,m.oneOff=l,m.uidEvent=p,r[p]=m,n.addEventListener(c,m,a)}function ns(n,t,e,s,l){const a=Wa(t[e],s,l);a&&(n.removeEventListener(e,a,!!l),delete t[e][a.uidEvent])}function Fl(n,t,e,s){const l=t[e]||{};for(const[a,i]of Object.entries(l))a.includes(s)&&ns(n,t,e,i.callable,i.delegationSelector)}function Ua(n){return n=n.replace(Ml,""),Ha[n]||n}const T={on(n,t,e,s){gi(n,t,e,s,!1)},one(n,t,e,s){gi(n,t,e,s,!0)},off(n,t,e,s){if(typeof t!="string"||!n)return;const[l,a,i]=ja(t,e,s),c=i!==t,u=Va(n),r=u[i]||{},h=t.startsWith(".");if(typeof a<"u"){if(!Object.keys(r).length)return;ns(n,u,i,a,l?e:null);return}if(h)for(const p of Object.keys(u))Fl(n,u,p,t.slice(1));for(const[p,m]of Object.entries(r)){const _=p.replace(Il,"");(!c||t.includes(_))&&ns(n,u,i,m.callable,m.delegationSelector)}},trigger(n,t,e){if(typeof t!="string"||!n)return null;const s=Ra(),l=Ua(t),a=t!==l;let i=null,c=!0,u=!0,r=!1;a&&s&&(i=s.Event(t,e),s(n).trigger(i),c=!i.isPropagationStopped(),u=!i.isImmediatePropagationStopped(),r=i.isDefaultPrevented());const h=ks(new Event(t,{bubbles:c,cancelable:!0}),e);return r&&h.preventDefault(),u&&n.dispatchEvent(h),h.defaultPrevented&&i&&i.preventDefault(),h}};function ks(n,t={}){for(const[e,s]of Object.entries(t))try{n[e]=s}catch{Object.defineProperty(n,e,{configurable:!0,get(){return s}})}return n}function vi(n){if(n==="true")return!0;if(n==="false")return!1;if(n===Number(n).toString())return Number(n);if(n===""||n==="null")return null;if(typeof n!="string")return n;try{return JSON.parse(decodeURIComponent(n))}catch{return n}}function Ir(n){return n.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const ge={setDataAttribute(n,t,e){n.setAttribute(`data-bs-${Ir(t)}`,e)},removeDataAttribute(n,t){n.removeAttribute(`data-bs-${Ir(t)}`)},getDataAttributes(n){if(!n)return{};const t={},e=Object.keys(n.dataset).filter(s=>s.startsWith("bs")&&!s.startsWith("bsConfig"));for(const s of e){let l=s.replace(/^bs/,"");l=l.charAt(0).toLowerCase()+l.slice(1),t[l]=vi(n.dataset[s])}return t},getDataAttribute(n,t){return vi(n.getAttribute(`data-bs-${Ir(t)}`))}};class xn{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const s=_e(e)?ge.getDataAttribute(e,"config"):{};return{...this.constructor.Default,...typeof s=="object"?s:{},..._e(e)?ge.getDataAttributes(e):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const[s,l]of Object.entries(e)){const a=t[s],i=_e(a)?"element":xl(a);if(!new RegExp(l).test(i))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${s}" provided type "${i}" but expected type "${l}".`)}}}const Vl="5.3.6";class se extends xn{constructor(t,e){super(),t=Te(t),t&&(this._element=t,this._config=this._getConfig(e),Lr.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Lr.remove(this._element,this.constructor.DATA_KEY),T.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,s=!0){Pa(t,e,s)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return Lr.get(Te(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,typeof e=="object"?e:null)}static get VERSION(){return Vl}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const Rr=n=>{let t=n.getAttribute("data-bs-target");if(!t||t==="#"){let e=n.getAttribute("href");if(!e||!e.includes("#")&&!e.startsWith("."))return null;e.includes("#")&&!e.startsWith("#")&&(e=`#${e.split("#")[1]}`),t=e&&e!=="#"?e.trim():null}return t?t.split(",").map(e=>Da(e)).join(","):null},H={find(n,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,n))},findOne(n,t=document.documentElement){return Element.prototype.querySelector.call(t,n)},children(n,t){return[].concat(...n.children).filter(e=>e.matches(t))},parents(n,t){const e=[];let s=n.parentNode.closest(t);for(;s;)e.push(s),s=s.parentNode.closest(t);return e},prev(n,t){let e=n.previousElementSibling;for(;e;){if(e.matches(t))return[e];e=e.previousElementSibling}return[]},next(n,t){let e=n.nextElementSibling;for(;e;){if(e.matches(t))return[e];e=e.nextElementSibling}return[]},focusableChildren(n){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>`${e}:not([tabindex^="-"])`).join(",");return this.find(t,n).filter(e=>!Ce(e)&&ln(e))},getSelectorFromElement(n){const t=Rr(n);return t&&H.findOne(t)?t:null},getElementFromSelector(n){const t=Rr(n);return t?H.findOne(t):null},getMultipleElementsFromSelector(n){const t=Rr(n);return t?H.find(t):[]}},hr=(n,t="hide")=>{const e=`click.dismiss${n.EVENT_KEY}`,s=n.NAME;T.on(document,e,`[data-bs-dismiss="${s}"]`,function(l){if(["A","AREA"].includes(this.tagName)&&l.preventDefault(),Ce(this))return;const a=H.getElementFromSelector(this)||this.closest(`.${s}`);n.getOrCreateInstance(a)[t]()})},Wl="alert",jl="bs.alert",Ba=`.${jl}`,Ul=`close${Ba}`,Bl=`closed${Ba}`,Yl="fade",Kl="show";class fr extends se{static get NAME(){return Wl}close(){if(T.trigger(this._element,Ul).defaultPrevented)return;this._element.classList.remove(Kl);const e=this._element.classList.contains(Yl);this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),T.trigger(this._element,Bl),this.dispose()}static jQueryInterface(t){return this.each(function(){const e=fr.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}hr(fr,"close");ee(fr);const ql="button",Gl="bs.button",zl=`.${Gl}`,Ql=".data-api",Xl="active",bi='[data-bs-toggle="button"]',Jl=`click${zl}${Ql}`;class pr extends se{static get NAME(){return ql}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Xl))}static jQueryInterface(t){return this.each(function(){const e=pr.getOrCreateInstance(this);t==="toggle"&&e[t]()})}}T.on(document,Jl,bi,n=>{n.preventDefault();const t=n.target.closest(bi);pr.getOrCreateInstance(t).toggle()});ee(pr);const Zl="swipe",cn=".bs.swipe",tc=`touchstart${cn}`,ec=`touchmove${cn}`,nc=`touchend${cn}`,rc=`pointerdown${cn}`,sc=`pointerup${cn}`,ic="touch",ac="pen",oc="pointer-event",lc=40,cc={endCallback:null,leftCallback:null,rightCallback:null},uc={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class or extends xn{constructor(t,e){super(),this._element=t,!(!t||!or.isSupported())&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return cc}static get DefaultType(){return uc}static get NAME(){return Zl}dispose(){T.off(this._element,cn)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),Pt(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=lc)return;const e=t/this._deltaX;this._deltaX=0,e&&Pt(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(T.on(this._element,rc,t=>this._start(t)),T.on(this._element,sc,t=>this._end(t)),this._element.classList.add(oc)):(T.on(this._element,tc,t=>this._start(t)),T.on(this._element,ec,t=>this._move(t)),T.on(this._element,nc,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===ac||t.pointerType===ic)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const dc="carousel",hc="bs.carousel",xe=`.${hc}`,Ya=".data-api",fc="ArrowLeft",pc="ArrowRight",mc=500,hn="next",Be="prev",qe="left",tr="right",_c=`slide${xe}`,Pr=`slid${xe}`,gc=`keydown${xe}`,vc=`mouseenter${xe}`,bc=`mouseleave${xe}`,yc=`dragstart${xe}`,Ec=`load${xe}${Ya}`,Nc=`click${xe}${Ya}`,Ka="carousel",Un="active",Ac="slide",Tc="carousel-item-end",Cc="carousel-item-start",wc="carousel-item-next",Sc="carousel-item-prev",qa=".active",Ga=".carousel-item",kc=qa+Ga,xc=".carousel-item img",$c=".carousel-indicators",Oc="[data-bs-slide], [data-bs-slide-to]",Lc='[data-bs-ride="carousel"]',Dc={[fc]:tr,[pc]:qe},Mc={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Ic={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class $n extends se{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=H.findOne($c,this._element),this._addEventListeners(),this._config.ride===Ka&&this.cycle()}static get Default(){return Mc}static get DefaultType(){return Ic}static get NAME(){return dc}next(){this._slide(hn)}nextWhenVisible(){!document.hidden&&ln(this._element)&&this.next()}prev(){this._slide(Be)}pause(){this._isSliding&&Ma(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){T.one(this._element,Pr,()=>this.cycle());return}this.cycle()}}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding){T.one(this._element,Pr,()=>this.to(t));return}const s=this._getItemIndex(this._getActive());if(s===t)return;const l=t>s?hn:Be;this._slide(l,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&T.on(this._element,gc,t=>this._keydown(t)),this._config.pause==="hover"&&(T.on(this._element,vc,()=>this.pause()),T.on(this._element,bc,()=>this._maybeEnableCycle())),this._config.touch&&or.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const s of H.find(xc,this._element))T.on(s,yc,l=>l.preventDefault());const e={leftCallback:()=>this._slide(this._directionToOrder(qe)),rightCallback:()=>this._slide(this._directionToOrder(tr)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),mc+this._config.interval))}};this._swipeHelper=new or(this._element,e)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=Dc[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=H.findOne(qa,this._indicatorsElement);e.classList.remove(Un),e.removeAttribute("aria-current");const s=H.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);s&&(s.classList.add(Un),s.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const s=this._getActive(),l=t===hn,a=e||Ss(this._getItems(),s,l,this._config.wrap);if(a===s)return;const i=this._getItemIndex(a),c=_=>T.trigger(this._element,_,{relatedTarget:a,direction:this._orderToDirection(t),from:this._getItemIndex(s),to:i});if(c(_c).defaultPrevented||!s||!a)return;const r=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(i),this._activeElement=a;const h=l?Cc:Tc,p=l?wc:Sc;a.classList.add(p),kn(a),s.classList.add(h),a.classList.add(h);const m=()=>{a.classList.remove(h,p),a.classList.add(Un),s.classList.remove(Un,p,h),this._isSliding=!1,c(Pr)};this._queueCallback(m,s,this._isAnimated()),r&&this.cycle()}_isAnimated(){return this._element.classList.contains(Ac)}_getActive(){return H.findOne(kc,this._element)}_getItems(){return H.find(Ga,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return Zt()?t===qe?Be:hn:t===qe?hn:Be}_orderToDirection(t){return Zt()?t===Be?qe:tr:t===Be?tr:qe}static jQueryInterface(t){return this.each(function(){const e=$n.getOrCreateInstance(this,t);if(typeof t=="number"){e.to(t);return}if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}T.on(document,Nc,Oc,function(n){const t=H.getElementFromSelector(this);if(!t||!t.classList.contains(Ka))return;n.preventDefault();const e=$n.getOrCreateInstance(t),s=this.getAttribute("data-bs-slide-to");if(s){e.to(s),e._maybeEnableCycle();return}if(ge.getDataAttribute(this,"slide")==="next"){e.next(),e._maybeEnableCycle();return}e.prev(),e._maybeEnableCycle()});T.on(window,Ec,()=>{const n=H.find(Lc);for(const t of n)$n.getOrCreateInstance(t)});ee($n);const Rc="collapse",Pc="bs.collapse",On=`.${Pc}`,Hc=".data-api",Fc=`show${On}`,Vc=`shown${On}`,Wc=`hide${On}`,jc=`hidden${On}`,Uc=`click${On}${Hc}`,Hr="show",ze="collapse",Bn="collapsing",Bc="collapsed",Yc=`:scope .${ze} .${ze}`,Kc="collapse-horizontal",qc="width",Gc="height",zc=".collapse.show, .collapse.collapsing",rs='[data-bs-toggle="collapse"]',Qc={parent:null,toggle:!0},Xc={parent:"(null|element)",toggle:"boolean"};class yn extends se{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const s=H.find(rs);for(const l of s){const a=H.getSelectorFromElement(l),i=H.find(a).filter(c=>c===this._element);a!==null&&i.length&&this._triggerArray.push(l)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Qc}static get DefaultType(){return Xc}static get NAME(){return Rc}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(zc).filter(c=>c!==this._element).map(c=>yn.getOrCreateInstance(c,{toggle:!1}))),t.length&&t[0]._isTransitioning||T.trigger(this._element,Fc).defaultPrevented)return;for(const c of t)c.hide();const s=this._getDimension();this._element.classList.remove(ze),this._element.classList.add(Bn),this._element.style[s]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const l=()=>{this._isTransitioning=!1,this._element.classList.remove(Bn),this._element.classList.add(ze,Hr),this._element.style[s]="",T.trigger(this._element,Vc)},i=`scroll${s[0].toUpperCase()+s.slice(1)}`;this._queueCallback(l,this._element,!0),this._element.style[s]=`${this._element[i]}px`}hide(){if(this._isTransitioning||!this._isShown()||T.trigger(this._element,Wc).defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,kn(this._element),this._element.classList.add(Bn),this._element.classList.remove(ze,Hr);for(const l of this._triggerArray){const a=H.getElementFromSelector(l);a&&!this._isShown(a)&&this._addAriaAndCollapsedClass([l],!1)}this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(Bn),this._element.classList.add(ze),T.trigger(this._element,jc)};this._element.style[e]="",this._queueCallback(s,this._element,!0)}_isShown(t=this._element){return t.classList.contains(Hr)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=Te(t.parent),t}_getDimension(){return this._element.classList.contains(Kc)?qc:Gc}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(rs);for(const e of t){const s=H.getElementFromSelector(e);s&&this._addAriaAndCollapsedClass([e],this._isShown(s))}}_getFirstLevelChildren(t){const e=H.find(Yc,this._config.parent);return H.find(t,this._config.parent).filter(s=>!e.includes(s))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const s of t)s.classList.toggle(Bc,!e),s.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return typeof t=="string"&&/show|hide/.test(t)&&(e.toggle=!1),this.each(function(){const s=yn.getOrCreateInstance(this,e);if(typeof t=="string"){if(typeof s[t]>"u")throw new TypeError(`No method named "${t}"`);s[t]()}})}}T.on(document,Uc,rs,function(n){(n.target.tagName==="A"||n.delegateTarget&&n.delegateTarget.tagName==="A")&&n.preventDefault();for(const t of H.getMultipleElementsFromSelector(this))yn.getOrCreateInstance(t,{toggle:!1}).toggle()});ee(yn);const yi="dropdown",Jc="bs.dropdown",We=`.${Jc}`,xs=".data-api",Zc="Escape",Ei="Tab",tu="ArrowUp",Ni="ArrowDown",eu=2,nu=`hide${We}`,ru=`hidden${We}`,su=`show${We}`,iu=`shown${We}`,za=`click${We}${xs}`,Qa=`keydown${We}${xs}`,au=`keyup${We}${xs}`,Ge="show",ou="dropup",lu="dropend",cu="dropstart",uu="dropup-center",du="dropdown-center",Me='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',hu=`${Me}.${Ge}`,er=".dropdown-menu",fu=".navbar",pu=".navbar-nav",mu=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",_u=Zt()?"top-end":"top-start",gu=Zt()?"top-start":"top-end",vu=Zt()?"bottom-end":"bottom-start",bu=Zt()?"bottom-start":"bottom-end",yu=Zt()?"left-start":"right-start",Eu=Zt()?"right-start":"left-start",Nu="top",Au="bottom",Tu={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Cu={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class de extends se{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=H.next(this._element,er)[0]||H.prev(this._element,er)[0]||H.findOne(er,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Tu}static get DefaultType(){return Cu}static get NAME(){return yi}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Ce(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!T.trigger(this._element,su,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(pu))for(const s of[].concat(...document.body.children))T.on(s,"mouseover",ar);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Ge),this._element.classList.add(Ge),T.trigger(this._element,iu,t)}}hide(){if(Ce(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!T.trigger(this._element,nu,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))T.off(s,"mouseover",ar);this._popper&&this._popper.destroy(),this._menu.classList.remove(Ge),this._element.classList.remove(Ge),this._element.setAttribute("aria-expanded","false"),ge.removeDataAttribute(this._menu,"popper"),T.trigger(this._element,ru,t),this._element.focus()}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!_e(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${yi.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof La>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let t=this._element;this._config.reference==="parent"?t=this._parent:_e(this._config.reference)?t=Te(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=ws(t,this._menu,e)}_isShown(){return this._menu.classList.contains(Ge)}_getPlacement(){const t=this._parent;if(t.classList.contains(lu))return yu;if(t.classList.contains(cu))return Eu;if(t.classList.contains(uu))return Nu;if(t.classList.contains(du))return Au;const e=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(ou)?e?gu:_u:e?bu:vu}_detectNavbar(){return this._element.closest(fu)!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(ge.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...Pt(this._config.popperConfig,[void 0,t])}}_selectMenuItem({key:t,target:e}){const s=H.find(mu,this._menu).filter(l=>ln(l));s.length&&Ss(s,e,t===Ni,!s.includes(e)).focus()}static jQueryInterface(t){return this.each(function(){const e=de.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}static clearMenus(t){if(t.button===eu||t.type==="keyup"&&t.key!==Ei)return;const e=H.find(hu);for(const s of e){const l=de.getInstance(s);if(!l||l._config.autoClose===!1)continue;const a=t.composedPath(),i=a.includes(l._menu);if(a.includes(l._element)||l._config.autoClose==="inside"&&!i||l._config.autoClose==="outside"&&i||l._menu.contains(t.target)&&(t.type==="keyup"&&t.key===Ei||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const c={relatedTarget:l._element};t.type==="click"&&(c.clickEvent=t),l._completeHide(c)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),s=t.key===Zc,l=[tu,Ni].includes(t.key);if(!l&&!s||e&&!s)return;t.preventDefault();const a=this.matches(Me)?this:H.prev(this,Me)[0]||H.next(this,Me)[0]||H.findOne(Me,t.delegateTarget.parentNode),i=de.getOrCreateInstance(a);if(l){t.stopPropagation(),i.show(),i._selectMenuItem(t);return}i._isShown()&&(t.stopPropagation(),i.hide(),a.focus())}}T.on(document,Qa,Me,de.dataApiKeydownHandler);T.on(document,Qa,er,de.dataApiKeydownHandler);T.on(document,za,de.clearMenus);T.on(document,au,de.clearMenus);T.on(document,za,Me,function(n){n.preventDefault(),de.getOrCreateInstance(this).toggle()});ee(de);const Xa="backdrop",wu="fade",Ai="show",Ti=`mousedown.bs.${Xa}`,Su={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},ku={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Ja extends xn{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return Su}static get DefaultType(){return ku}static get NAME(){return Xa}show(t){if(!this._config.isVisible){Pt(t);return}this._append();const e=this._getElement();this._config.isAnimated&&kn(e),e.classList.add(Ai),this._emulateAnimation(()=>{Pt(t)})}hide(t){if(!this._config.isVisible){Pt(t);return}this._getElement().classList.remove(Ai),this._emulateAnimation(()=>{this.dispose(),Pt(t)})}dispose(){this._isAppended&&(T.off(this._element,Ti),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(wu),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=Te(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),T.on(t,Ti,()=>{Pt(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){Pa(t,this._getElement(),this._config.isAnimated)}}const xu="focustrap",$u="bs.focustrap",lr=`.${$u}`,Ou=`focusin${lr}`,Lu=`keydown.tab${lr}`,Du="Tab",Mu="forward",Ci="backward",Iu={autofocus:!0,trapElement:null},Ru={autofocus:"boolean",trapElement:"element"};class Za extends xn{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Iu}static get DefaultType(){return Ru}static get NAME(){return xu}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),T.off(document,lr),T.on(document,Ou,t=>this._handleFocusin(t)),T.on(document,Lu,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,T.off(document,lr))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const s=H.focusableChildren(e);s.length===0?e.focus():this._lastTabNavDirection===Ci?s[s.length-1].focus():s[0].focus()}_handleKeydown(t){t.key===Du&&(this._lastTabNavDirection=t.shiftKey?Ci:Mu)}}const wi=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Si=".sticky-top",Yn="padding-right",ki="margin-right";class ss{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Yn,e=>e+t),this._setElementAttributes(wi,Yn,e=>e+t),this._setElementAttributes(Si,ki,e=>e-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Yn),this._resetElementAttributes(wi,Yn),this._resetElementAttributes(Si,ki)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,s){const l=this.getWidth(),a=i=>{if(i!==this._element&&window.innerWidth>i.clientWidth+l)return;this._saveInitialAttribute(i,e);const c=window.getComputedStyle(i).getPropertyValue(e);i.style.setProperty(e,`${s(Number.parseFloat(c))}px`)};this._applyManipulationCallback(t,a)}_saveInitialAttribute(t,e){const s=t.style.getPropertyValue(e);s&&ge.setDataAttribute(t,e,s)}_resetElementAttributes(t,e){const s=l=>{const a=ge.getDataAttribute(l,e);if(a===null){l.style.removeProperty(e);return}ge.removeDataAttribute(l,e),l.style.setProperty(e,a)};this._applyManipulationCallback(t,s)}_applyManipulationCallback(t,e){if(_e(t)){e(t);return}for(const s of H.find(t,this._element))e(s)}}const Pu="modal",Hu="bs.modal",te=`.${Hu}`,Fu=".data-api",Vu="Escape",Wu=`hide${te}`,ju=`hidePrevented${te}`,to=`hidden${te}`,eo=`show${te}`,Uu=`shown${te}`,Bu=`resize${te}`,Yu=`click.dismiss${te}`,Ku=`mousedown.dismiss${te}`,qu=`keydown.dismiss${te}`,Gu=`click${te}${Fu}`,xi="modal-open",zu="fade",$i="show",Fr="modal-static",Qu=".modal.show",Xu=".modal-dialog",Ju=".modal-body",Zu='[data-bs-toggle="modal"]',td={backdrop:!0,focus:!0,keyboard:!0},ed={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class sn extends se{constructor(t,e){super(t,e),this._dialog=H.findOne(Xu,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ss,this._addEventListeners()}static get Default(){return td}static get DefaultType(){return ed}static get NAME(){return Pu}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||T.trigger(this._element,eo,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(xi),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||T.trigger(this._element,Wu).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove($i),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){T.off(window,te),T.off(this._dialog,te),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Ja({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Za({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=H.findOne(Ju,this._dialog);e&&(e.scrollTop=0),kn(this._element),this._element.classList.add($i);const s=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,T.trigger(this._element,Uu,{relatedTarget:t})};this._queueCallback(s,this._dialog,this._isAnimated())}_addEventListeners(){T.on(this._element,qu,t=>{if(t.key===Vu){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),T.on(window,Bu,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),T.on(this._element,Ku,t=>{T.one(this._element,Yu,e=>{if(!(this._element!==t.target||this._element!==e.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(xi),this._resetAdjustments(),this._scrollBar.reset(),T.trigger(this._element,to)})}_isAnimated(){return this._element.classList.contains(zu)}_triggerBackdropTransition(){if(T.trigger(this._element,ju).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,s=this._element.style.overflowY;s==="hidden"||this._element.classList.contains(Fr)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(Fr),this._queueCallback(()=>{this._element.classList.remove(Fr),this._queueCallback(()=>{this._element.style.overflowY=s},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),s=e>0;if(s&&!t){const l=Zt()?"paddingLeft":"paddingRight";this._element.style[l]=`${e}px`}if(!s&&t){const l=Zt()?"paddingRight":"paddingLeft";this._element.style[l]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each(function(){const s=sn.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof s[t]>"u")throw new TypeError(`No method named "${t}"`);s[t](e)}})}}T.on(document,Gu,Zu,function(n){const t=H.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&n.preventDefault(),T.one(t,eo,l=>{l.defaultPrevented||T.one(t,to,()=>{ln(this)&&this.focus()})});const e=H.findOne(Qu);e&&sn.getInstance(e).hide(),sn.getOrCreateInstance(t).toggle(this)});hr(sn);ee(sn);const nd="offcanvas",rd="bs.offcanvas",be=`.${rd}`,no=".data-api",sd=`load${be}${no}`,id="Escape",Oi="show",Li="showing",Di="hiding",ad="offcanvas-backdrop",ro=".offcanvas.show",od=`show${be}`,ld=`shown${be}`,cd=`hide${be}`,Mi=`hidePrevented${be}`,so=`hidden${be}`,ud=`resize${be}`,dd=`click${be}${no}`,hd=`keydown.dismiss${be}`,fd='[data-bs-toggle="offcanvas"]',pd={backdrop:!0,keyboard:!0,scroll:!1},md={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class we extends se{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return pd}static get DefaultType(){return md}static get NAME(){return nd}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||T.trigger(this._element,od,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new ss().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Li);const s=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Oi),this._element.classList.remove(Li),T.trigger(this._element,ld,{relatedTarget:t})};this._queueCallback(s,this._element,!0)}hide(){if(!this._isShown||T.trigger(this._element,cd).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Di),this._backdrop.hide();const e=()=>{this._element.classList.remove(Oi,Di),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new ss().reset(),T.trigger(this._element,so)};this._queueCallback(e,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{if(this._config.backdrop==="static"){T.trigger(this._element,Mi);return}this.hide()},e=!!this._config.backdrop;return new Ja({className:ad,isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?t:null})}_initializeFocusTrap(){return new Za({trapElement:this._element})}_addEventListeners(){T.on(this._element,hd,t=>{if(t.key===id){if(this._config.keyboard){this.hide();return}T.trigger(this._element,Mi)}})}static jQueryInterface(t){return this.each(function(){const e=we.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}T.on(document,dd,fd,function(n){const t=H.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),Ce(this))return;T.one(t,so,()=>{ln(this)&&this.focus()});const e=H.findOne(ro);e&&e!==t&&we.getInstance(e).hide(),we.getOrCreateInstance(t).toggle(this)});T.on(window,sd,()=>{for(const n of H.find(ro))we.getOrCreateInstance(n).show()});T.on(window,ud,()=>{for(const n of H.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(n).position!=="fixed"&&we.getOrCreateInstance(n).hide()});hr(we);ee(we);const _d=/^aria-[\w-]*$/i,io={"*":["class","dir","id","lang","role",_d],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},gd=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),vd=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,bd=(n,t)=>{const e=n.nodeName.toLowerCase();return t.includes(e)?gd.has(e)?!!vd.test(n.nodeValue):!0:t.filter(s=>s instanceof RegExp).some(s=>s.test(e))};function yd(n,t,e){if(!n.length)return n;if(e&&typeof e=="function")return e(n);const l=new window.DOMParser().parseFromString(n,"text/html"),a=[].concat(...l.body.querySelectorAll("*"));for(const i of a){const c=i.nodeName.toLowerCase();if(!Object.keys(t).includes(c)){i.remove();continue}const u=[].concat(...i.attributes),r=[].concat(t["*"]||[],t[c]||[]);for(const h of u)bd(h,r)||i.removeAttribute(h.nodeName)}return l.body.innerHTML}const Ed="TemplateFactory",Nd={allowList:io,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Ad={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Td={entry:"(string|element|function|null)",selector:"(string|element)"};class Cd extends xn{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return Nd}static get DefaultType(){return Ad}static get NAME(){return Ed}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[l,a]of Object.entries(this._config.content))this._setContent(t,a,l);const e=t.children[0],s=this._resolvePossibleFunction(this._config.extraClass);return s&&e.classList.add(...s.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,s]of Object.entries(t))super._typeCheckConfig({selector:e,entry:s},Td)}_setContent(t,e,s){const l=H.findOne(s,t);if(l){if(e=this._resolvePossibleFunction(e),!e){l.remove();return}if(_e(e)){this._putElementInTemplate(Te(e),l);return}if(this._config.html){l.innerHTML=this._maybeSanitize(e);return}l.textContent=e}}_maybeSanitize(t){return this._config.sanitize?yd(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return Pt(t,[void 0,this])}_putElementInTemplate(t,e){if(this._config.html){e.innerHTML="",e.append(t);return}e.textContent=t.textContent}}const wd="tooltip",Sd=new Set(["sanitize","allowList","sanitizeFn"]),Vr="fade",kd="modal",Kn="show",xd=".tooltip-inner",Ii=`.${kd}`,Ri="hide.bs.modal",fn="hover",Wr="focus",$d="click",Od="manual",Ld="hide",Dd="hidden",Md="show",Id="shown",Rd="inserted",Pd="click",Hd="focusin",Fd="focusout",Vd="mouseenter",Wd="mouseleave",jd={AUTO:"auto",TOP:"top",RIGHT:Zt()?"left":"right",BOTTOM:"bottom",LEFT:Zt()?"right":"left"},Ud={allowList:io,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Bd={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class ye extends se{constructor(t,e){if(typeof La>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Ud}static get DefaultType(){return Bd}static get NAME(){return wd}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),T.off(this._element.closest(Ii),Ri,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const t=T.trigger(this._element,this.constructor.eventName(Md)),s=(Ia(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!s)return;this._disposePopper();const l=this._getTipElement();this._element.setAttribute("aria-describedby",l.getAttribute("id"));const{container:a}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(a.append(l),T.trigger(this._element,this.constructor.eventName(Rd))),this._popper=this._createPopper(l),l.classList.add(Kn),"ontouchstart"in document.documentElement)for(const c of[].concat(...document.body.children))T.on(c,"mouseover",ar);const i=()=>{T.trigger(this._element,this.constructor.eventName(Id)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(i,this.tip,this._isAnimated())}hide(){if(!this._isShown()||T.trigger(this._element,this.constructor.eventName(Ld)).defaultPrevented)return;if(this._getTipElement().classList.remove(Kn),"ontouchstart"in document.documentElement)for(const l of[].concat(...document.body.children))T.off(l,"mouseover",ar);this._activeTrigger[$d]=!1,this._activeTrigger[Wr]=!1,this._activeTrigger[fn]=!1,this._isHovered=null;const s=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),T.trigger(this._element,this.constructor.eventName(Dd)))};this._queueCallback(s,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(Vr,Kn),e.classList.add(`bs-${this.constructor.NAME}-auto`);const s=$l(this.constructor.NAME).toString();return e.setAttribute("id",s),this._isAnimated()&&e.classList.add(Vr),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new Cd({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[xd]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Vr)}_isShown(){return this.tip&&this.tip.classList.contains(Kn)}_createPopper(t){const e=Pt(this._config.placement,[this,t,this._element]),s=jd[e.toUpperCase()];return ws(this._element,t,this._getPopperConfig(s))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_resolvePossibleFunction(t){return Pt(t,[this._element,this._element])}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:s=>{this._getTipElement().setAttribute("data-popper-placement",s.state.placement)}}]};return{...e,...Pt(this._config.popperConfig,[void 0,e])}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if(e==="click")T.on(this._element,this.constructor.eventName(Pd),this._config.selector,s=>{this._initializeOnDelegatedTarget(s).toggle()});else if(e!==Od){const s=e===fn?this.constructor.eventName(Vd):this.constructor.eventName(Hd),l=e===fn?this.constructor.eventName(Wd):this.constructor.eventName(Fd);T.on(this._element,s,this._config.selector,a=>{const i=this._initializeOnDelegatedTarget(a);i._activeTrigger[a.type==="focusin"?Wr:fn]=!0,i._enter()}),T.on(this._element,l,this._config.selector,a=>{const i=this._initializeOnDelegatedTarget(a);i._activeTrigger[a.type==="focusout"?Wr:fn]=i._element.contains(a.relatedTarget),i._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},T.on(this._element.closest(Ii),Ri,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=ge.getDataAttributes(this._element);for(const s of Object.keys(e))Sd.has(s)&&delete e[s];return t={...e,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:Te(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[e,s]of Object.entries(this._config))this.constructor.Default[e]!==s&&(t[e]=s);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const e=ye.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}}ee(ye);const Yd="popover",Kd=".popover-header",qd=".popover-body",Gd={...ye.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},zd={...ye.DefaultType,content:"(null|string|element|function)"};class $s extends ye{static get Default(){return Gd}static get DefaultType(){return zd}static get NAME(){return Yd}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Kd]:this._getTitle(),[qd]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const e=$s.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}}ee($s);const Qd="scrollspy",Xd="bs.scrollspy",Os=`.${Xd}`,Jd=".data-api",Zd=`activate${Os}`,Pi=`click${Os}`,th=`load${Os}${Jd}`,eh="dropdown-item",Ye="active",nh='[data-bs-spy="scroll"]',jr="[href]",rh=".nav, .list-group",Hi=".nav-link",sh=".nav-item",ih=".list-group-item",ah=`${Hi}, ${sh} > ${Hi}, ${ih}`,oh=".dropdown",lh=".dropdown-toggle",ch={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},uh={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class mr extends se{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return ch}static get DefaultType(){return uh}static get NAME(){return Qd}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=Te(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(e=>Number.parseFloat(e))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(T.off(this._config.target,Pi),T.on(this._config.target,Pi,jr,t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const s=this._rootElement||window,l=e.offsetTop-this._element.offsetTop;if(s.scrollTo){s.scrollTo({top:l,behavior:"smooth"});return}s.scrollTop=l}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(e=>this._observerCallback(e),t)}_observerCallback(t){const e=i=>this._targetLinks.get(`#${i.target.id}`),s=i=>{this._previousScrollData.visibleEntryTop=i.target.offsetTop,this._process(e(i))},l=(this._rootElement||document.documentElement).scrollTop,a=l>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=l;for(const i of t){if(!i.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(i));continue}const c=i.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(a&&c){if(s(i),!l)return;continue}!a&&!c&&s(i)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=H.find(jr,this._config.target);for(const e of t){if(!e.hash||Ce(e))continue;const s=H.findOne(decodeURI(e.hash),this._element);ln(s)&&(this._targetLinks.set(decodeURI(e.hash),e),this._observableSections.set(e.hash,s))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(Ye),this._activateParents(t),T.trigger(this._element,Zd,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(eh)){H.findOne(lh,t.closest(oh)).classList.add(Ye);return}for(const e of H.parents(t,rh))for(const s of H.prev(e,ah))s.classList.add(Ye)}_clearActiveClass(t){t.classList.remove(Ye);const e=H.find(`${jr}.${Ye}`,t);for(const s of e)s.classList.remove(Ye)}static jQueryInterface(t){return this.each(function(){const e=mr.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}T.on(window,th,()=>{for(const n of H.find(nh))mr.getOrCreateInstance(n)});ee(mr);const dh="tab",hh="bs.tab",je=`.${hh}`,fh=`hide${je}`,ph=`hidden${je}`,mh=`show${je}`,_h=`shown${je}`,gh=`click${je}`,vh=`keydown${je}`,bh=`load${je}`,yh="ArrowLeft",Fi="ArrowRight",Eh="ArrowUp",Vi="ArrowDown",Ur="Home",Wi="End",Ie="active",ji="fade",Br="show",Nh="dropdown",ao=".dropdown-toggle",Ah=".dropdown-menu",Yr=`:not(${ao})`,Th='.list-group, .nav, [role="tablist"]',Ch=".nav-item, .list-group-item",wh=`.nav-link${Yr}, .list-group-item${Yr}, [role="tab"]${Yr}`,oo='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Kr=`${wh}, ${oo}`,Sh=`.${Ie}[data-bs-toggle="tab"], .${Ie}[data-bs-toggle="pill"], .${Ie}[data-bs-toggle="list"]`;class an extends se{constructor(t){super(t),this._parent=this._element.closest(Th),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),T.on(this._element,vh,e=>this._keydown(e)))}static get NAME(){return dh}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),s=e?T.trigger(e,fh,{relatedTarget:t}):null;T.trigger(t,mh,{relatedTarget:e}).defaultPrevented||s&&s.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){if(!t)return;t.classList.add(Ie),this._activate(H.getElementFromSelector(t));const s=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(Br);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),T.trigger(t,_h,{relatedTarget:e})};this._queueCallback(s,t,t.classList.contains(ji))}_deactivate(t,e){if(!t)return;t.classList.remove(Ie),t.blur(),this._deactivate(H.getElementFromSelector(t));const s=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(Br);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),T.trigger(t,ph,{relatedTarget:e})};this._queueCallback(s,t,t.classList.contains(ji))}_keydown(t){if(![yh,Fi,Eh,Vi,Ur,Wi].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=this._getChildren().filter(l=>!Ce(l));let s;if([Ur,Wi].includes(t.key))s=e[t.key===Ur?0:e.length-1];else{const l=[Fi,Vi].includes(t.key);s=Ss(e,t.target,l,!0)}s&&(s.focus({preventScroll:!0}),an.getOrCreateInstance(s).show())}_getChildren(){return H.find(Kr,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const s of e)this._setInitialAttributesOnChild(s)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),s=this._getOuterElement(t);t.setAttribute("aria-selected",e),s!==t&&this._setAttributeIfNotExists(s,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=H.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,e){const s=this._getOuterElement(t);if(!s.classList.contains(Nh))return;const l=(a,i)=>{const c=H.findOne(a,s);c&&c.classList.toggle(i,e)};l(ao,Ie),l(Ah,Br),s.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,s){t.hasAttribute(e)||t.setAttribute(e,s)}_elemIsActive(t){return t.classList.contains(Ie)}_getInnerElement(t){return t.matches(Kr)?t:H.findOne(Kr,t)}_getOuterElement(t){return t.closest(Ch)||t}static jQueryInterface(t){return this.each(function(){const e=an.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}T.on(document,gh,oo,function(n){["A","AREA"].includes(this.tagName)&&n.preventDefault(),!Ce(this)&&an.getOrCreateInstance(this).show()});T.on(window,bh,()=>{for(const n of H.find(Sh))an.getOrCreateInstance(n)});ee(an);const kh="toast",xh="bs.toast",$e=`.${xh}`,$h=`mouseover${$e}`,Oh=`mouseout${$e}`,Lh=`focusin${$e}`,Dh=`focusout${$e}`,Mh=`hide${$e}`,Ih=`hidden${$e}`,Rh=`show${$e}`,Ph=`shown${$e}`,Hh="fade",Ui="hide",qn="show",Gn="showing",Fh={animation:"boolean",autohide:"boolean",delay:"number"},Vh={animation:!0,autohide:!0,delay:5e3};class Ln extends se{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Vh}static get DefaultType(){return Fh}static get NAME(){return kh}show(){if(T.trigger(this._element,Rh).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Hh);const e=()=>{this._element.classList.remove(Gn),T.trigger(this._element,Ph),this._maybeScheduleHide()};this._element.classList.remove(Ui),kn(this._element),this._element.classList.add(qn,Gn),this._queueCallback(e,this._element,this._config.animation)}hide(){if(!this.isShown()||T.trigger(this._element,Mh).defaultPrevented)return;const e=()=>{this._element.classList.add(Ui),this._element.classList.remove(Gn,qn),T.trigger(this._element,Ih)};this._element.classList.add(Gn),this._queueCallback(e,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(qn),super.dispose()}isShown(){return this._element.classList.contains(qn)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=e;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=e;break}}if(e){this._clearTimeout();return}const s=t.relatedTarget;this._element===s||this._element.contains(s)||this._maybeScheduleHide()}_setListeners(){T.on(this._element,$h,t=>this._onInteraction(t,!0)),T.on(this._element,Oh,t=>this._onInteraction(t,!1)),T.on(this._element,Lh,t=>this._onInteraction(t,!0)),T.on(this._element,Dh,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const e=Ln.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}hr(Ln);ee(Ln);const qr=({value:n,maxValue:t,color:e,labelLeft:s=null,labelCenter:l=null,labelRight:a=null,className:i="",isOverlay:c=!1,trailingStartValue:u=null,trailColor:r="rgba(128, 128, 128, 0.5)"})=>{const h=Math.min(Math.max(n/t*100,0),100);let p=0;u!==null&&(p=Math.min(Math.max(u/t*100,0),100));let m={};return typeof e=="object"&&e.from&&e.to?m.backgroundImage=`linear-gradient(to right, ${e.from}, ${e.to} 100%)`:m.backgroundColor=e,o("div",{class:`progress-bar-pointed-container ${i} ${c?"progress-bar-pointed-container--overlay":""}`,children:[s&&o("span",{class:"progress-bar-pointed__label progress-bar-pointed__label--left",children:s}),u!==null&&o("div",{class:"progress-bar-pointed__trail",style:{width:`${p}%`,backgroundColor:r,"--progress-trail-color":r}}),o("div",{class:"progress-bar-pointed__fill",style:{width:`${h}%`,...m},children:l&&o("span",{class:"progress-bar-pointed__label progress-bar-pointed__label--center",children:l})}),a&&o("span",{class:"progress-bar-pointed__label progress-bar-pointed__label--right",children:a})]})};function Wh(){const{characterStats:n,setCharacterStats:t}=fe(Ve),[e,s]=z(1),[l,a]=z(!1),[i,c]=z(!1),[u,r]=z(!1),[h,p]=z(!1),[m,_]=z(!1),[E,A]=z(null),[C,O]=z(null),[L,B]=z(!1),[M,U]=z(!1),[V,Q]=z(!1),X=Bt(null),P=Bt(null),F=Bt(null),Y=Bt(null),Z=Bt(null),lt=300,Nt=600,[ut,it]=z(!1);_t(()=>{const vt=[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map(bt=>new ye(bt));return()=>{vt.forEach(bt=>{bt&&typeof bt.dispose=="function"&&bt.dispose()})}},[V]),_t(()=>{if(l){const I=setTimeout(()=>a(!1),300);return()=>clearTimeout(I)}},[l]),_t(()=>{if(u){const I=setTimeout(()=>r(!1),300);return()=>clearTimeout(I)}},[u]),_t(()=>{if(i){const I=setTimeout(()=>c(!1),300);return()=>clearTimeout(I)}},[i]),_t(()=>{if(h){const I=setTimeout(()=>p(!1),300);return()=>clearTimeout(I)}},[h]),_t(()=>{if(m){const I=setTimeout(()=>_(!1),300);return()=>clearTimeout(I)}},[m]),_t(()=>{const I=bt=>{bt.key==="Control"&&Q(!0)},vt=bt=>{bt.key==="Control"&&Q(!1)};return window.addEventListener("keydown",I),window.addEventListener("keyup",vt),()=>{window.removeEventListener("keydown",I),window.removeEventListener("keyup",vt)}},[]);const at=I=>{t(vt=>({...vt,...I}))};_t(()=>{(n.currentMp===void 0||n.maxMp===void 0)&&t(I=>({...I,currentMp:I.currentMp||0,maxMp:I.maxMp||10}))},[]);const N=()=>{X.current&&(clearTimeout(X.current),X.current=null),P.current&&(clearTimeout(P.current),P.current=null);const I=n.tempHealth||0;let vt=!1;A(n.currentHealth),I>0?(O(I),vt=!0):O(null);let bt=I,zt=n.currentHealth,ie=e,Ee=!1,d=!1;if(bt>0){const W=Math.min(ie,bt);W>0&&(bt-=W,ie-=W,r(!0),U(!0),Ee=!0)}if(ie>0&&zt>0){const W=Math.min(ie,zt);W>0&&(zt=Math.max(0,zt-W),a(!0),B(!0),d=!0)}d&&setTimeout(()=>B(!1),200),Ee&&setTimeout(()=>U(!1),200),setTimeout(()=>{t(Ue=>({...Ue,currentHealth:zt,tempHealth:bt}));const W=1e3;X.current=setTimeout(()=>{A(zt)},W),vt&&(P.current=setTimeout(()=>{O(bt)},W))},50),s(1)},x=()=>{c(!0),at({currentHealth:Math.min(n.maxHealth,n.currentHealth+e)}),s(1)},K=()=>{_(!0),at({tempHealth:(n.tempHealth||0)+e}),s(1)},Ct=()=>{s(V?n.maxHealth||0:I=>Math.min(I+1,n.maxHealth||1/0))},St=()=>{s(V?0:I=>Math.max(0,I-1))},Dt=()=>{p(!0),at({currentMp:Math.max(0,n.currentMp-e)}),s(1)},At=()=>{p(!0),at({currentMp:Math.min(n.maxMp,n.currentMp+e)})},Tt=()=>{const I=Math.max(0,Math.min(n.maxHealth,e));at({currentHealth:I}),c(!0),s(1)},Mt=()=>{const I=Math.max(0,Math.min(n.maxMp,e));at({currentMp:I}),p(!0),s(1)},yt=()=>{at({tempHealth:0}),r(!0)},gt=()=>{n.maxHealth!==void 0&&(at({currentHealth:n.maxHealth}),c(!0))},ft=()=>{n.maxMp!==void 0&&(at({currentMp:n.maxMp}),p(!0))},pe=I=>{I.type==="touchstart"&&I.preventDefault(),it(!0),Z.current=setTimeout(()=>{gt(),yt(),A(n.maxHealth||tt),O(0),it(!1),F.current&&(clearTimeout(F.current),F.current=null)},Nt)},Ht=I=>{I.type==="touchstart"&&I.preventDefault(),it(!0),Z.current=setTimeout(()=>{ft(),it(!1),Y.current&&(clearTimeout(Y.current),Y.current=null)},Nt)},Ft=I=>{if(Z.current&&(clearTimeout(Z.current),Z.current=null,ut&&I.type==="touchend")){const vt=I.currentTarget.getAttribute("data-bar-type");vt==="hp"?y():vt==="mp"&&j()}it(!1)},Gt=()=>{Z.current&&(clearTimeout(Z.current),Z.current=null),it(!1)},y=()=>{ut||(F.current?(clearTimeout(F.current),F.current=null,gt(),yt(),A(n.maxHealth||tt),O(0)):(Tt(),F.current=setTimeout(()=>{F.current=null},lt)))},j=()=>{ut||(Y.current?(clearTimeout(Y.current),Y.current=null,ft()):(Mt(),Y.current=setTimeout(()=>{Y.current=null},lt)))},$=n.currentHealth||0,tt=Math.max(1,n.maxHealth||0),dt=n.tempHealth||0,ne=n.currentMp||0,kt=Math.max(1,n.maxMp||0);return o("div",{className:"hit-points-component-container container-fluid mb-4",children:[o("div",{className:"row align-items-center mb-3",children:[o(Se,{title:"HEALTH AND MANA",containerClassName:"mb-3"}),o("div",{className:"d-flex justify-content-center align-items-center gap-1",children:[o("button",{onClick:Dt,className:"btn btn-outline-primary btn-icon-square","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Use MP",children:o("i",{className:"fas fa-bolt-lightning"})}),o("button",{onClick:yt,className:"btn btn-icon-square btn-outline-warning","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Clear Temporary HP","data-bs-original-title":"Clear Temporary HP",children:o("i",{className:"fas fa-times-circle"})}),o("button",{onClick:N,className:"btn btn-icon-square btn-outline-danger","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Damage HP","data-bs-original-title":"Damage HP",children:o("i",{className:"fas fa-heart-circle-minus"})}),o("div",{className:"input-group amount-input-container",style:{width:"auto",alignItems:"center"},children:[o("button",{onClick:St,className:"btn btn-outline-secondary btn-icon-square amount-control-btn",type:"button","data-bs-toggle":"tooltip","data-bs-placement":"top",title:V?"Set to Min (0)":"Decrease Amount","data-bs-original-title":V?"Set to Min (0)":"Decrease Amount",children:o("i",{className:"fas fa-minus"})}),o("input",{type:"number",value:e,onChange:I=>s(Math.max(0,parseInt(I.currentTarget.value)||0)),className:"form-control text-center bg-dark text-light",min:"0",style:{width:"70px",height:"40px"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Enter amount","aria-label":"Amount for HP/MP changes"}),o("button",{onClick:Ct,className:"btn btn-outline-secondary btn-icon-square amount-control-btn",type:"button","data-bs-toggle":"tooltip","data-bs-placement":"top",title:V?`Set to Max (${n.maxHealth||0})`:"Increase Amount","data-bs-original-title":V?`Set to Max (${n.maxHealth||0})`:"Increase Amount",children:o("i",{className:"fas fa-plus"})})]}),o("button",{onClick:x,className:"btn btn-icon-square btn-outline-success","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Heal HP","data-bs-original-title":"Heal HP",children:o("i",{className:"fas fa-heart-circle-plus"})}),o("button",{onClick:K,className:"btn btn-icon-square btn-outline-info","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Heal Temporary HP","data-bs-original-title":"Heal Temporary HP",children:o("i",{className:"fas fa-heart-pulse"})}),o("button",{onClick:At,className:"btn btn-outline-info btn-icon-square","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Restore MP","data-bs-original-title":"Restore MP",children:o("i",{className:"fas fa-droplet"})})]})]}),o("div",{className:"mb-3",children:["                ",o("div",{style:{position:"relative",cursor:"pointer"},className:"mb-2",onClick:I=>{I.type!=="touchend"&&y()},onMouseDown:pe,onMouseUp:Ft,onMouseLeave:Gt,onTouchStart:pe,onTouchEnd:Ft,onTouchCancel:Gt,onContextMenu:I=>I.preventDefault(),"data-bar-type":"hp","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Click to Set HP to ${e}, Long press/double click to reset HP & Temp HP`,"data-bs-original-title":`Click to Set HP to ${e}, Long press/double click to reset HP & Temp HP`,children:[o(qr,{value:$,maxValue:tt,color:{from:"#ef4444",to:"#e11d48"},labelRight:`${$} / ${tt}`,trailingStartValue:E,trailColor:"rgba(200, 0, 0, 0.7)",className:L?"progress-bar-damage-flash":""}),(dt>0||C!==null)&&o(qr,{value:dt,maxValue:tt,color:{from:"#21d2ec",to:"#14b8a7"},labelCenter:dt>0?`${dt} Temp`:"",isOverlay:!0,className:`health-overlay-bar ${M?"progress-bar-damage-flash":""}`,trailingStartValue:C,trailColor:"rgba(0, 50, 200, 0.7)"})]}),"                ",o("div",{style:{cursor:"pointer"},onClick:I=>{I.type!=="touchend"&&j()},onMouseDown:Ht,onMouseUp:Ft,onMouseLeave:Gt,onTouchStart:Ht,onTouchEnd:Ft,onTouchCancel:Gt,onContextMenu:I=>I.preventDefault(),"data-bar-type":"mp","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Click to Set MP to ${e}, Long press/double click to Full Restore MP`,"data-bs-original-title":`Click to Set MP to ${e}, Long press/double click to Full Restore MP`,children:o(qr,{value:ne,maxValue:kt,color:{from:"#3c82f6",to:"#6366f1"},labelRight:`${ne} / ${kt}`,className:h?"progress-bar-damage-flash":"",trailingStartValue:ne,trailColor:"rgba(0, 50, 200, 0.7)"})})]})]})}function jh(){const{spells:n}=wn(),{characterStats:t,setCharacterStats:e}=fe(Ve),s=()=>(t.speed||0)+le(n,"speed"),l=c=>{e(u=>({...u,...c}))},a=c=>{const u=c.currentTarget,r=Math.max(1,parseInt(u.value)||1);l({maxHealth:r}),t.currentHealth>r&&l({currentHealth:r})},i=c=>{const u=c.currentTarget,r=Math.max(1,parseInt(u.value)||1);l({maxMp:r}),t.currentMp>r&&l({currentMp:r})};return o("div",{className:"character-sheet container-fluid",children:o("div",{className:"column",children:[o(Wh,{}),o("div",{className:"row justify-content-between mt-4",children:[o("div",{className:"col-md-7",children:o(Ro,{})}),o("div",{className:"col-md-5 p-3",children:[o(Se,{title:"PLAYER CONDITION"}),o("div",{className:"row align-items-center mb-3",children:[o("div",{className:"col-auto",children:o("div",{className:"d-flex gap-2",children:[o("div",{className:"text-center",children:[o("small",{className:"d-block mb-1 text-secondary",children:"Speed"}),o("input",{type:"number",className:"form-control form-control box-no-input text-center bg-dark text-light",id:"speedInput",value:s()+30,readOnly:!0,"aria-label":"Speed"})]}),o("div",{className:"text-center",children:[o("small",{className:"d-block mb-1 text-secondary",children:"AC"}),o("input",{type:"number",className:"form-control box-no-input text-center bg-dark text-light",id:"acInput",value:t.AC||0,readOnly:!0,"aria-label":"Armor Class"})]})]})}),o("div",{className:"col-auto ms-auto",children:o("div",{className:"d-flex gap-2",children:[o("div",{className:"text-center",children:[o("small",{className:"d-block mb-1 text-secondary",children:"Max HP"}),o("input",{type:"number",className:"form-control form-control hp-input text-center bg-dark text-light",id:"maxHealthInput",value:t.maxHealth||"",onChange:a,min:"1","aria-label":"Maximum Hit Points"})]}),o("div",{className:"text-center",children:[o("small",{className:"d-block mb-1 text-secondary",children:"Max MP"}),o("input",{type:"number",className:"form-control form-control hp-input text-center bg-dark text-light",id:"maxMpInput",value:t.maxMp||"",onChange:i,min:"1","aria-label":"Maximum Mana Points"})]})]})})]}),o("div",{className:"conditions-tracker-placeholder p-3 border rounded bg-dark-subtle",children:[o("h5",{className:"text-secondary-emphasis",children:"CONDITIONS TRACKER"}),o("p",{className:"text-muted",children:"(Placeholder for future implementation)"})]})]})]})]})})}const _r=()=>{const[n,t]=z(null);return _t(()=>{t(document.createElement("div"))},[]),_t(()=>{if(n)return n.className="toast-container position-fixed bottom-0 end-0 p-3",document.body.appendChild(n),()=>{document.body.removeChild(n)}},[n]),{showToast:(s,l="info-circle",a="primary",i="Notification")=>{if(!n)return;const c=document.createElement("div");c.className="toast",c.setAttribute("role","alert"),c.setAttribute("aria-live","assertive"),c.setAttribute("aria-atomic","true"),c.innerHTML=`
            <div class="toast-header">
                <i class="fas fa-${l} me-2 text-${a}"></i>
                <strong class="me-auto">${i}</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body">
                ${s}
            </div>
        `,n.appendChild(c),new Ln(c,{autohide:!0,delay:3e3}).show(),c.addEventListener("hidden.bs.toast",()=>{n.removeChild(c)})}}},Uh=()=>{const{characterStats:n,setCharacterStats:t}=fe(Ve),{spells:e}=wn(),{showToast:s}=_r(),l=(u,r)=>{t(h=>({...h,[u]:parseInt(r,10)||0}))},a=Object.entries(n).filter(([u])=>{var r;return((r=wt[u])==null?void 0:r.category)!==Ut.CORE}).reduce((u,[r,h])=>u+(parseInt(h,10)||0),0),i=u=>{const r=prompt("Enter a DC for the roll (leave blank for normal roll):");if(r===null)return;const h=Math.max(0,parseInt(r,10)),p=(n[u]||0)+le(e,u),m=wt[u];let _=`1d20+${p}`;h>1&&(_=`${_}cs>=${h}cf<${h}`);const E=h?`check vs DC ${h}`:"check",A=`&{template:default} {{name=${fs(u)} ${E}}}{{Roll=[[${_}]]}}{{Stat Bonus=[[${p}]] from ${m.shortName}}}`;navigator.clipboard.writeText(A);const C=h?`${m.name} roll vs DC ${h} copied! Paste it into Roll20.`:`${m.name} roll command copied! Paste it into Roll20.`;s(C,"clipboard","success","Copied to clipboard")},c=u=>{const r=Object.entries(wt).filter(([h,p])=>p.category===u);return r.length>0&&o("div",{className:"stat-category",children:[o("h6",{className:"stat-category-title text-secondary mb-2",children:u.toUpperCase()}),o("div",{className:"stat-grid",children:r.map(([h,p])=>o("div",{className:"stat-group mb-2",title:`${p.name} ${p.description}`,"data-bs-toggle":"tooltip","data-bs-placement":"top",children:o("div",{className:"input-group",children:[o("span",{className:`input-group-text gap-1 text-${p.color}`,onClick:()=>i(h),style:{cursor:"pointer"},children:[o("i",{className:`fas ${p.icon}`})," ",o("span",{className:"stat-text",children:p.shortName})]}),o("input",{type:"number",className:"form-control",value:n[h]||0,onChange:m=>l(h,m.currentTarget.value)}),o("span",{className:"input-group-text",children:[o("i",{className:`fas ${le(e,h)?"":"fa-link-slash"} text-muted`}),le(e,h)>0&&o("div",{children:[o("span",{className:"text-secondary ms-1",children:["+",le(e,h)," ="]}),o("span",{className:"text-muted ms-1",children:n[h]+le(e,h)})]})]})]})},h))})]})};return o("div",{className:"character-stats",children:[o(Se,{title:"STATS",lineMaxWidth:"50px",containerClassName:"mb-1"}),o("h6",{className:"stat-category-title text-danger mb-4",children:["BASE ALLOCATED POINTS: ",a]}),c(Ut.PHYSICAL),c(Ut.MAGICAL),c(Ut.UTILITY)]})},Bh=({spellToDelete:n,confirmDelete:t,setSpellToDelete:e})=>o("div",{className:`modal fade ${n?"show":""}`,style:{display:n?"block":"none"},tabIndex:-1,children:o("div",{className:"modal-dialog",children:o("div",{className:"modal-content",children:[o("div",{className:"modal-header",children:[o("h5",{className:"modal-title",children:"Confirm Deletion"}),o("button",{type:"button",className:"btn-close",onClick:()=>e(null),"aria-label":"Close"})]}),o("div",{className:"modal-body",children:"Are you sure you want to delete this spell?"}),o("div",{className:"modal-footer",children:[o("button",{type:"button",className:"btn btn-secondary",onClick:()=>e(null),children:"No, Keep It"}),o("button",{type:"button",className:"btn btn-danger",onClick:t,children:"Yes, Delete It"})]})]})})}),Yh=({isModalOpen:n,closeModal:t,spellBeingEdited:e,currentSpell:s,setCurrentSpell:l,incrementPower:a,decrementPower:i,getSpellRank:c,getActionLabel:u,validateDiceRoll:r,diceError:h,saveSpell:p,removeSpell:m})=>o("div",{className:`modal ${n?"show":""}`,style:{display:n?"block":"none"},tabIndex:-1,children:o("div",{className:"modal-dialog",children:o("div",{className:"modal-content",children:[o("div",{className:"modal-header",children:[o("h5",{className:"modal-title",children:e?"Edit Spell Entry":"Add Spell"}),o("button",{type:"button",className:"btn-close",onClick:t})]}),o("div",{className:"modal-body",children:[o("div",{className:"mb-2",children:[o("label",{className:"form-label",children:"Spell Name"}),o("input",{type:"text",className:"form-control",placeholder:"Spell Name",value:s.name,onInput:_=>l({...s,name:_.currentTarget.value})})]}),o("div",{className:"mb-2",children:[o("label",{className:"form-label",children:"Spell Level"}),o("div",{className:"input-group",children:[o("button",{className:"btn btn-outline-secondary",type:"button",onClick:i,disabled:s.power<=1,children:o("i",{className:"fas fa-minus"})}),o("input",{type:"number",className:`form-control ${s.power<=0?"is-invalid":""}`,placeholder:"Spell Level",min:"1",value:s.power,onInput:_=>{const E=Math.max(1,parseInt(_.currentTarget.value,10)||1);l({...s,power:E,rank:c(E)})}}),o("button",{className:"btn btn-outline-secondary",type:"button",onClick:a,children:o("i",{className:"fas fa-plus"})}),s.power<=0&&o("div",{className:"invalid-feedback",children:"Spell level must be at least 1"})]})]}),o("div",{className:"alert alert-info py-1 mb-2",children:[o("i",{className:"fas fa-link me-2"}),o("small",{className:"text-muted d-block mt-1",children:["This spell's ",o("a",{href:"https://docs.google.com/document/d/1ZTxCemR8j6GhIMqhvmBd7kOo8wNsOisO_vOutlQBYv0/edit?tab=t.0",target:"_blank",children:"Soul Link Rank"})," will be ",o("b",{children:[c(s.power),"."]})]})]}),o("label",{className:"form-label",children:"Actions to Cast"}),o("div",{className:"input-group mb-2",children:[o("span",{className:"input-group-text",children:u(s.actions)}),o("select",{className:"form-select",value:s.actions,onChange:_=>l({...s,actions:parseInt(_.currentTarget.value)}),children:[o("option",{value:"1",children:"1 Action"}),o("option",{value:"2",children:"2 Actions"}),o("option",{value:"3",children:"3 Actions"}),o("option",{value:"0",children:"Free Action"})]})]}),o("label",{className:"form-label",children:"Element"}),o("div",{className:"input-group mb-2",children:[o("span",{className:"input-group-text",children:re(s.element)}),o("select",{className:"form-select",value:s.element,onChange:_=>l({...s,element:_.currentTarget.value}),children:Object.entries(st).map(([_,E])=>o("option",{value:E,children:E},_))})]}),o("label",{className:"form-label",children:"Damage Roll(s)"}),o("div",{className:"input-group mb-2",children:[o("span",{className:"input-group-text",children:o("i",{className:"fas fa-dice-d20"})}),o("input",{type:"text",className:`form-control ${h?"is-invalid":""}`,placeholder:"Dice Roll (e.g. 1d4)",value:s.dice,onInput:_=>{const E=_.currentTarget.value;l({...s,dice:E}),r(E)}}),h&&o("div",{className:"invalid-feedback",children:h})]}),o("div",{className:"alert alert-info py-1 mb-2",children:[o("i",{className:"fas fa-info-circle me-2"}),o("small",{children:"Use [stat] to include a stat's value (e.g., [strength] + 1d6)"})]}),o("div",{className:"mb-2",children:[o("label",{className:"form-label",children:"Spell Description"}),o("textarea",{className:"form-control",placeholder:"Spell Description",value:s.description,onInput:_=>l({...s,description:_.currentTarget.value})})]}),o("div",{className:"mb-2",children:[o("label",{className:"form-label",children:["Amount currently stocked ",o("i",{children:'("Spell Charges")'})]}),o("div",{className:"input-group",children:o("input",{type:"number",className:`form-control ${s.quantity<0||s.quantity>Ae?"is-invalid":""}`,placeholder:"Quantity",min:"0",max:Ae.toString(),value:s.quantity,onInput:_=>{const E=parseInt(_.currentTarget.value,10)||0;E>Ae?l({...s,quantity:Ae}):l({...s,quantity:Math.max(0,E)})}})})]})]}),o("div",{className:"modal-footer",children:[o("button",{type:"button",className:"btn btn-secondary",onClick:t,children:[o("i",{className:"fas fa-times me-1"}),"Close"]}),e&&o("button",{type:"button",className:"btn btn-danger",onClick:()=>m(e.id),children:[o("i",{className:"fas fa-trash-alt me-1"}),"Delete"]}),o("button",{type:"button",className:"btn btn-success",onClick:p,children:[o("i",{className:`fas ${e?"fa-save":"fa-plus"} me-1`}),e?"Save Changes":"Add Spell"]})]})]})})}),Kh=({isLinkModalOpen:n,closeLinkModal:t,currentSpell:e,setCurrentSpell:s,saveSpell:l,getLinkedStats:a})=>{var c;if(!e)return null;const{spells:i}=wn();return o("div",{className:`modal fade ${n?"show":""}`,style:{display:n?"block":"none"},tabIndex:-1,children:o("div",{className:"modal-dialog",children:o("div",{className:"modal-content",children:[o("div",{className:"modal-header",children:[o("h5",{className:"modal-title",children:`Link ${e.name} to stat`}),o("button",{type:"button",className:"btn-close",onClick:t,"aria-label":"Close"})]}),o("div",{className:"modal-body",children:o("div",{className:"input-group mb-2",children:[o("span",{className:"input-group-text gap-1",children:o("i",{className:`fas ${e.linkedStat&&e.linkedStat!=="None"&&((c=wt[e.linkedStat])==null?void 0:c.icon)||"fa-link-slash"}`})}),o("select",{className:"form-select",value:e.linkedStat||"None",onChange:u=>s({...e,linkedStat:u.currentTarget.value==="None"?null:u.currentTarget.value,isLinked:u.currentTarget.value!=="None"}),children:[o("option",{value:"None",children:"None"}),Object.entries(wt).map(([u,r])=>(!a().includes(u)||u===e.linkedStat)&&r.type!==$t.CORE?o("option",{value:u,children:r.name},u):null)]}),o("span",{className:"input-group-text",children:["+",sr(e.quantity,e.rank)]})]})}),o("div",{className:"modal-footer",children:[o("button",{type:"button",className:"btn btn-secondary",onClick:t,children:[o("i",{className:"fas fa-times me-1"}),"Close"]}),o("button",{type:"button",className:"btn btn-success",onClick:l,children:[o("i",{className:`fas ${e.id?"fa-save":"fa-plus"} me-1`})," ",e.id?"Save Changes":"Add Spell"]})]})]})})})},qh=()=>{const{characterStats:n,setCharacterStats:t}=fe(Ve),{spells:e,setSpells:s,getLinkedStats:l}=wn(),{showToast:a}=_r(),i={name:"",quantity:1,power:1,dice:"",description:"",actions:1,rank:1,isLinked:!1,linkedStat:"None",element:st.PHYS},[c,u]=z(i),[r,h]=z(null),[p,m]=z(!1),[_,E]=z(!1),[A,C]=z(null),[O,L]=z(!1);_t(()=>{const y=$=>{$.key==="Control"&&L(!0)},j=$=>{$.key==="Control"&&L(!1)};return window.addEventListener("keydown",y),window.addEventListener("keyup",j),()=>{window.removeEventListener("keydown",y),window.removeEventListener("keyup",j)}},[]);const B=y=>{var j,$;return y&&(($=(j=n.affinities)==null?void 0:j[y.element])==null?void 0:$.mastered)||!1},M=y=>{y&&U(B(y))},U=y=>{const j=n.luck+le(e,"luck")||0,$=Math.min(j,Or);var tt=`🍀 Luck=[[${j}`;j>Or?tt+=`]] (+${Or} max bonus)`:tt+="]]";const ne=`${y?2:1}d6cf1 + ${$}[Luck Bonus]`,kt=y?"Draw Spell (Mastery)":"Draw Spell",I=`&{template:default} {{name=${kt}}} {{Charges Gained=[[${ne}]]}} {{${tt}}} {{Note=If the number is highlighted red, the true amount of Charges Gained is that total MINUS the Luck Bonus.}}`;navigator.clipboard.writeText(I).then(()=>{a(`${kt} command copied! Paste it into Roll20.`,"clipboard","success","Copied to clipboard")}).catch(vt=>{console.error("Failed to copy command: ",vt),a("Failed to copy command.","exclamation-triangle","danger","Copy Error")})},V=y=>{if(y.quantity>0&&y.dice)try{const j=Qe(e,y.dice,n),$=re(y.element),tt=Qe(e,"1d20+[strength]",n);let dt;y.actions===0?dt="Free Action":dt=y.actions===1?"Action":"Actions";const ne=`&{template:default} {{name=${y.name}}}                                 {{Actions=${y.actions} ${dt}}}                                 {{Level=**Spell ${y.power}** (S.Link Rank ${y.rank})}}                                 {{Attack=[[${tt}]]}}                                 {{Damage=[[${j}]] ${$} ${y.element}}}                                 ${y.description?`{{Description=${y.description}}}
                                `:""}`;navigator.clipboard.writeText(ne),a("Spell roll command copied! Paste it into the text chat on Roll20.","clipboard","success","Copied to clipboard"),x(y.id,"quantity",y.quantity-1)}catch(j){alert(j.message||"Invalid dice format!")}else a("No more charges of this spell remaining!","exclamation-triangle","warning","Cannot cast spell")},Q=(y,j,$)=>{const tt=j-$,dt=`${y.name}: ${$} → ${j} (${tt>=0?"+":""}${tt})`;console.log(dt)},X=y=>{C(A===y?null:y)};_t(()=>{localStorage.setItem("spells",JSON.stringify(e))},[e]),_t(()=>{const j=[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map($=>new ye($));return()=>{j.forEach($=>$.dispose())}},[]);const P=(y=null)=>{h(y),u(y||i),m(!0)},F=()=>{h(null),m(!1)},Y=(y=null)=>{h(y),u(y||i),E(!0)},Z=()=>{h(null),E(!1)},[lt,Nt]=z(""),ut=y=>{const j=Jn(y,n);return Nt(j.error||""),j.isValid},it=()=>{const y=Vo(c);if(y.length>0){alert(`Please fix the following:
${y.join(`
`)}`);return}ut(c.dice)&&(s(r?e.map(j=>j.id===r.id?{...c,id:r.id}:j):[...e,{...c,id:Date.now()}]),p&&F(),_&&Z(),console.log("Spell saved:",c))},[at,N]=z(null),x=(y,j,$)=>{const tt=e.find(dt=>dt.id===y);tt&&(tt.quantity!==$&&(N(y),setTimeout(()=>N(null),300),Q(tt,$,tt.quantity)),s(e.map(dt=>dt.id===y?{...dt,[j]:$}:dt)))},[K,Ct]=z(null),St=y=>{Ct(y)},Dt=()=>{K&&(e.find(y=>y.id===K),s(e.filter(y=>y.id!==K)),Ct(null),F())},At=(y,j)=>{const $=[...e],tt=y+j;tt>=0&&tt<e.length&&([$[y],$[tt]]=[$[tt],$[y]],s($))},Tt=()=>{const y=c.power+1;u({...c,power:y,rank:$r(y)})},Mt=()=>{if(c.power>1){const y=c.power-1;u({...c,power:y,rank:$r(y)})}},[yt,gt]=z(1),ft=y=>{const j=e.find(tt=>tt.id===y),$=Math.min(Ae,j.quantity+yt);x(y,"quantity",$),gt(1)},pe=y=>{const j=e.find(tt=>tt.id===y),$=Math.max(0,j.quantity-yt);x(y,"quantity",$),gt(1)},Ht=y=>{let j="",$="";switch(y){case 0:j="[free-action]",$="Free Action";break;case 1:j="[one-action]",$="One Action";break;case 2:j="[two-actions]",$="Two Actions";break;case 3:j="[three-actions]",$="Three Actions";break;default:return""}return o("span",{className:"action","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-original-title":$,title:$,role:"img","aria-label":$,children:j})},Ft=y=>y.isLinked?"Linked to "+wt[y.linkedStat].name:"No linked stat",Gt=y=>{y.isLinked?console.log(`Linked stat: ${y.linkedStat}`):console.log("No linked stat"),Y(y)};return o("div",{className:"spell-inventory","data-bs-theme":"dark",children:o("div",{className:"container",children:[o(Se,{title:"SPELL INVENTORY",lineMaxWidth:"50px"}),o("div",{className:"d-flex align-items-center justify-content-center mb-4",children:[o("button",{className:`dark-btn me-2 ${O?"gold-button":"dark-btn-secondary"}`,onClick:y=>U(y.ctrlKey),style:{width:"160px",height:"60px"},children:o("div",{className:"d-flex flex-column align-items-center",children:[o("div",{children:[o("i",{className:"fas fa-dice me-2"})," ",o("span",{children:"Stock Roll"})]}),o("span",{style:{fontSize:"0.7em"},children:"hold Ctrl for mastery"})]})}),o("button",{className:"dark-btn dark-btn-primary",onClick:()=>P(),style:{width:"160px",height:"60px"},children:[o("i",{className:"fas fa-plus me-2"})," ",o("span",{children:"Add Spell"})]})]}),e.length===0&&o("span",{className:"text-muted text-center d-flex flex-column align-items-center justify-content-center"+(window.innerWidth<=750?" mt-4":""),children:"[ Inventory Empty ]"}),o("ul",{className:"list-group",children:e.map((y,j)=>o("li",{className:`list-group-item spell-item ${at===y.id?"quantity-flash":""}`,children:[o("div",{class:"d-flex justify-content-left",children:[o("div",{className:"d-flex align-items-center overflow-hidden",style:{flex:"1 1 0"},onClick:()=>X(y.id),children:[o("span",{id:`quantity-badge-${y.id}`,className:"text-black badge quantity-badge me-2",style:{width:"2.5rem",flexShrink:0},children:o("small",{children:y.quantity})}),o("div",{class:"text-truncate",children:[re(y.element)," ",o("span",{className:"arsenal me-2",children:y.name}),o("span",{className:"action-label hide-on-small me-2",style:{width:window.innerWidth<=750?"0px":"50px"},children:Ht(y.actions)})]})]}),o("div",{className:"d-flex align-items-center justify-content-right",style:{gap:"0.5rem"},children:[o("i",{className:"fas fa-edit text-primary",onClick:$=>{$.stopPropagation(),P(y)},style:{cursor:"pointer",transition:"opacity 0.3s",opacity:.6,flexShrink:0},onMouseOver:$=>{$.stopPropagation(),$.currentTarget.style.opacity="1"},onMouseOut:$=>{$.stopPropagation(),$.currentTarget.style.opacity="0.6"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Edit Spell"}),o("span",{className:`badge bg-dark border text-${y.isLinked?wt[y.linkedStat].color:"secondary"} ms-2 d-flex justify-content-between align-items-center link-badge-normal`,"data-bs-toggle":"tooltip","data-bs-original-title":Ft(y),title:Ft(y),onClick:$=>{$.stopPropagation(),Gt(y)},style:{cursor:"pointer",width:"4rem"},children:[o("i",{className:`fas ${y.isLinked?wt[y.linkedStat].icon:"fa-link-slash"}`}),o("span",{children:y.isLinked?`+${sr(y.quantity,y.rank)}`:""})]}),o("button",{className:"btn btn-outline-danger btn-sm roll-button",style:{width:"120px",whiteSpace:"nowrap",overflow:"hidden"},onClick:$=>{$.stopPropagation(),V(y)},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Click to copy roll command",children:[o("i",{className:"fas fa-dice-d20"}),o("span",{className:"ms-1 text-truncate",children:Qe(e,y.dice,n,!0)})]}),o("button",{className:"btn btn-outline-info btn-sm",onClick:$=>{$.stopPropagation(),M(y)},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Click to copy the Stock roll command for ${y.name} (${y.element} - ${B(y)?"mastery":"normal"})`,style:{flexShrink:0},children:o("i",{className:"fas fa-hand-sparkles"})}),o("div",{className:"input-group input-group-sm",children:[o("button",{className:"btn btn-outline-danger btn-sm",onClick:$=>{$.stopPropagation(),pe(y.id)},children:o("i",{className:"fas fa-minus"})}),o("input",{type:"number",className:"form-control form-control-sm text-center",style:{width:"60px"},value:yt,min:"1",max:Ae,onChange:$=>gt(Math.max(1,Math.min(Ae,parseInt($.currentTarget.value)||1))),onClick:$=>$.stopPropagation()}),o("button",{className:"btn btn-outline-success btn-sm",onClick:$=>{$.stopPropagation(),ft(y.id)},children:o("i",{className:"fas fa-plus"})})]}),o("div",{className:"btn-group hide-on-small",style:{flexShrink:0},children:[o("button",{className:"btn btn-outline-secondary btn-sm",onClick:$=>{$.stopPropagation(),At(j,1)},children:o("i",{className:"fas fa-chevron-down"})}),o("button",{className:"btn btn-outline-secondary btn-sm",onClick:$=>{$.stopPropagation(),At(j,-1)},children:o("i",{className:"fas fa-chevron-up"})})]})]}),o("br",{})]}),A===y.id&&o("div",{className:"mt-3",children:[o("div",{className:"d-flex flex-wrap justify-content-center mb-2",style:{gap:"0.5rem"},children:[o("span",{className:`badge bg-dark border text-${y.isLinked?wt[y.linkedStat].color:"secondary"}
                                                link-badge-responsive`,"data-bs-toggle":"tooltip","data-bs-original-title":Ft(y),title:Ft(y),onClick:$=>{$.stopPropagation(),Gt(y)},style:{cursor:"pointer"},children:[o("i",{className:`fas ${y.isLinked?wt[y.linkedStat].icon:"fa-link-slash"}`}),o("span",{children:y.isLinked?o(Xe,{children:[`${wt[y.linkedStat].name}`,o("span",{className:"ms-2",children:`+${sr(y.quantity,y.rank)}`})]}):""})]}),o("span",{className:"badge bg-dark border",children:[Ht(y.actions)," ",y.actions," Actions"]}),o("span",{className:"badge bg-dark border",children:[re(y.element)," ",y.element]}),o("span",{className:"badge bg-dark border",children:["Spell ",y.power," ",o("i",{children:["(SL. Rank: ",y.rank,")"]})]})]}),y.description&&o(Xe,{children:[o("p",{className:"py-1 border-bottom h5 arsenal",children:"Description"}),o("div",{className:"mb-0 spell-description arsenal",style:{display:"-webkit-box",WebkitLineClamp:"5",WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},dangerouslySetInnerHTML:{__html:y.description}})]})]})]},y.id))}),o(Yh,{isModalOpen:p,closeModal:F,spellBeingEdited:r,currentSpell:c,setCurrentSpell:u,incrementPower:Tt,decrementPower:Mt,getSpellRank:$r,getActionLabel:Ht,validateDiceRoll:ut,diceError:lt,saveSpell:it,removeSpell:St}),o(Kh,{isLinkModalOpen:_,closeLinkModal:Z,currentSpell:c,setCurrentSpell:u,saveSpell:it,getLinkedStats:l}),o(Bh,{spellToDelete:K,confirmDelete:Dt,setSpellToDelete:Ct})]})})};function Gh(){return o("div",{className:"spell-inventory container-fluid",children:o("div",{className:"row",children:[o("div",{className:"col-12 col-md-4 order-2 order-md-1",style:{minHeight:"50vh",overflowY:"auto"},children:o(Uh,{})}),o("div",{className:"col-12 col-md-8 order-1 order-md-2",style:{minHeight:"50vh",overflowY:"auto"},children:o(qh,{})})]})})}const zh="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs/%3e%3cg%3e%3cpath%20stroke='none'%20fill='%23FFFFFF'%20d='M16%208%20L48%208%20Q56%208%2056%2016%20L56%2048%20Q56%2056%2048%2056%20L16%2056%20Q8%2056%208%2048%20L8%2016%20Q8%208%2016%208%20M11%2016%20L11%2048%20Q11%2053%2016%2053%20L48%2053%20Q53%2053%2053%2048%20L53%2016%20Q53%2011%2048%2011%20L16%2011%20Q11%2011%2011%2016%20M22%2032%20L30%2024%2032%2024%2032%2028%2042%2028%2042%2036%2032%2036%2032%2040%2030%2040%2022%2032'/%3e%3c/g%3e%3c/svg%3e",Qh="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs/%3e%3cg%3e%3cpath%20stroke='none'%20fill='%23FFFFFF'%20d='M42%2032%20L34%2040%2032%2040%2032%2036%2022%2036%2022%2028%2032%2028%2032%2024%2034%2024%2042%2032%20M53%2048%20L53%2016%20Q53%2011%2048%2011%20L16%2011%20Q11%2011%2011%2016%20L11%2048%20Q11%2053%2016%2053%20L48%2053%20Q53%2053%2053%2048%20M48%2056%20L16%2056%20Q8%2056%208%2048%20L8%2016%20Q8%208%2016%208%20L48%208%20Q56%208%2056%2016%20L56%2048%20Q56%2056%2048%2056'/%3e%3c/g%3e%3c/svg%3e",Xh=[{id:"character",title:"Health"},{id:"spells",title:"Spells and Stats"},{id:"abilities",title:"Abilities"}],jt=Xh.map(n=>({title:n.title,path:n.id==="character"?_n:`${_n.replace(/\/$/,"")}/${n.id}`}));function Jh(){const{url:n,route:t}=hs(),e=jt.findIndex(a=>a.path===n);_t(()=>{const a=i=>{const c=i.target.tagName.toLowerCase(),u=i.target.isContentEditable;c==="input"||c==="textarea"||u||(i.key==="ArrowLeft"?e>0&&t(jt[e-1].path):i.key==="ArrowRight"&&e<jt.length-1&&t(jt[e+1].path))};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}},[n,e]);const s={height:"48px",verticalAlign:"middle",cursor:"pointer"},l=a=>{t(a)};return o("header",{className:"header mb-4",children:o("div",{className:"d-flex justify-content-center align-items-center p-3 border-bottom",children:o("div",{className:"col-md-8 col-lg-6 text-center",children:[o(Se,{title:"NAVIGATION",containerClassName:"mb-3"}),o("nav",{className:"btn-group gap-2",role:"group","aria-label":"Main navigation",children:[o("img",{src:zh,alt:"Navigate left",onClick:()=>e>0&&l(jt[e-1].path),style:{...s,marginRight:"8px",filter:e>0?"none":"opacity(0.3)",cursor:e>0?"pointer":"default"},"aria-disabled":e<=0}),jt.map((a,i)=>{let c="dark-btn dark-btn-primary";return n===a.path&&(c+="-active"),o("button",{className:c,onClick:()=>l(a.path),"data-bs-toggle":"tooltip",title:`Navigate to ${a.title} (${i>0?"Left Arrow":""}${i>0&&i<jt.length-1?" / ":""}${i<jt.length-1?"Right Arrow":""})`,children:o("span",{children:a.title})},a.path)}),o("img",{src:Qh,alt:"Navigate right",onClick:()=>e<jt.length-1&&l(jt[e+1].path),style:{...s,marginLeft:"8px",filter:e<jt.length-1?"none":"opacity(0.3)",cursor:e<jt.length-1?"pointer":"default"},"aria-disabled":e>=jt.length-1})]})]})})})}const Zh=()=>{const{showToast:n}=_r(),{spells:t}=wn(),e=(a,i)=>{let c="[[1d20+"+le(t,i);a==="Initiative"&&(c+="&{tracker}"),c+="]]";const u=`&{template:default} {{name=${a}}}{{Roll=${c}}}{{Stat Bonus=[[${le(t,i)}]] from ${fs(i)}}}`;navigator.clipboard.writeText(u),n(a+" roll command copied! Paste it into the text chat on Roll20.","clipboard","success","Copied to clipboard")},s=[{name:"Fortitude Save",stat:"vitality"},{name:"Will Save",stat:"spirit"},{name:"Reflex Save",stat:"speed"}],l={name:"Initiative",stat:"speed",icon:"fa-bolt"};return o("div",{className:"save-rolls",children:o("div",{className:"d-flex flex-wrap gap-2 align-items-center justify-content-center",children:[s.map(a=>o("button",{onClick:()=>e(a.name,a.stat),className:"dark-btn dark-btn-secondary d-flex align-items-center justify-content-center flex-grow-1 position-relative",style:{minWidth:"140px",maxWidth:"170px",height:"48px"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Roll ${a.name} (${wt[a.stat].shortName})`,children:[o("i",{className:`fas ${wt[a.stat].icon} me-2`,style:{width:"20px"}}),o("span",{children:a.name})]},a.name)),o("button",{onClick:()=>e(l.name,l.stat),className:"dark-btn dark-btn-primary d-flex align-items-center justify-content-center flex-grow-1 position-relative",style:{minWidth:"140px",maxWidth:"170px",height:"48px"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Roll ${l.name} (${wt[l.stat].shortName})`,children:[o("i",{className:`fas ${l.icon} text-${l.color} me-2`,style:{width:"20px"}}),o("span",{children:l.name})]},l.name)]})})},tf=({buildDate:n})=>{const{url:t}=hs();return o("footer",{className:"footer mt-auto py-3 text-light border-top",children:o("div",{className:"container-fluid",children:o("div",{className:"row",children:[o("div",{className:"col-4 text-start text-truncate d-flex align-items-center",children:[o("span",{className:"me-2",children:["Build Date: ",n]}),o("a",{href:"https://github.com/btarg/requiem-pathfinder-preact",target:"_blank",rel:"noopener noreferrer",className:"text-light",title:"GitHub Repository",children:o("i",{className:"fab fa-github"})})]}),o("div",{className:"col-4 text-center",children:[o(Zh,{}),o(Se,{title:"QUICK ROLLS",containerClassName:"mt-3"})]}),o("div",{className:"col-4 d-flex align-items-center justify-content-end",children:o("a",{href:"https://btarg.github.io/requiem-vault/",target:"_blank",rel:"noopener noreferrer",className:"dark-btn dark-btn-primary",children:[o("i",{className:"fas fa-book me-2"}),o("span",{className:"me-2",children:"Open Wiki"}),o("i",{className:"fa-solid fa-arrow-up-right-from-square",style:{fontSize:"0.75rem"}})]})})]})})})},lo=An({abilities:[],setAbilities:n=>{},subscribe:n=>{},unsubscribe:n=>{}}),ef=({children:n})=>{const[t,e]=z(()=>{try{const c=localStorage.getItem("abilities");return c?JSON.parse(c):[]}catch(c){return console.error("Error loading abilities from localStorage:",c),[]}}),[s,l]=z([]);_t(()=>{console.log("Saving abilities to localStorage:",t),localStorage.setItem("abilities",JSON.stringify(t)),s.forEach(c=>c(t))},[t,s]);const a=c=>{l(u=>[...u,c])},i=c=>{l(u=>u.filter(r=>r!==c))};return o(lo.Provider,{value:{abilities:t,setAbilities:e,subscribe:a,unsubscribe:i},children:n})},nf=()=>fe(lo),rf=({isModalOpen:n,closeModal:t,abilityBeingEdited:e,currentAbility:s,setCurrentAbility:l,getActionLabel:a,validateDiceRoll:i,diceError:c,saveAbility:u,removeAbility:r})=>o("div",{className:`modal ${n?"show":""}`,style:{display:n?"block":"none"},tabIndex:-1,children:o("div",{className:"modal-dialog",children:o("div",{className:"modal-content",children:[o("div",{className:"modal-header",children:[o("h5",{className:"modal-title",children:e?"Edit Ability":"Add Ability"}),o("button",{type:"button",className:"btn-close",onClick:t})]}),o("div",{className:"modal-body",children:[o("div",{className:"mb-2",children:[o("label",{className:"form-label",children:"Ability Type"}),o("div",{className:"btn-group w-100",children:[o("button",{type:"button",className:`btn ${s.type===Xt.GENERIC?"btn-danger":"btn-outline-danger"}`,onClick:()=>l({...s,type:Xt.GENERIC}),children:"Generic Ability"}),o("button",{type:"button",className:`btn ${s.type===Xt.WEAPON?"btn-danger":"btn-outline-danger"}`,onClick:()=>l({...s,type:Xt.WEAPON}),children:"Attack"})]})]}),o("div",{className:"mb-2",children:[o("label",{className:"form-label",children:"Name"}),o("input",{type:"text",className:"form-control",placeholder:s.type===Xt.WEAPON?"Attack Name":"Ability Name",value:s.name,onInput:h=>l({...s,name:h.currentTarget.value})})]}),o("label",{className:"form-label",children:"Actions to Use"}),o("div",{className:"input-group mb-2",children:[o("span",{className:"input-group-text",children:a(s.actions)}),o("select",{className:"form-select",value:s.actions,onChange:h=>l({...s,actions:parseInt(h.currentTarget.value)}),children:[o("option",{value:"1",children:"1 Action"}),o("option",{value:"2",children:"2 Actions"}),o("option",{value:"3",children:"3 Actions"}),o("option",{value:"4",children:"Reaction"}),o("option",{value:"0",children:"Free Action"})]})]}),o("label",{className:"form-label",children:"Element"}),o("div",{className:"input-group mb-2",children:[o("span",{className:"input-group-text",children:re(s.element)}),o("select",{className:"form-select",value:s.element,onChange:h=>l({...s,element:h.currentTarget.value}),children:Object.values(st).map(h=>o("option",{value:h,children:h},h))})]}),o("label",{className:"form-label",children:s.type===Xt.WEAPON?"Attack Roll":"Dice Roll"}),o("div",{className:"input-group mb-2",children:[o("span",{className:"input-group-text",children:o("i",{className:"fas fa-dice-d20"})}),o("input",{type:"text",className:`form-control ${c?"is-invalid":""}`,placeholder:"Dice Roll (e.g. 1d4)",value:s.dice,onInput:h=>{const p=h.currentTarget.value;l({...s,dice:p}),i(p)}}),c&&o("div",{className:"invalid-feedback",children:c})]}),o("div",{className:"alert alert-info py-1 mb-2",children:[o("i",{className:"fas fa-info-circle me-2"}),o("small",{children:"Use [stat] to include a stat's value (e.g., [strength] + 1d6)"})]}),s.type===Xt.WEAPON&&o("div",{className:"mb-3",children:[o("label",{className:"form-label",children:"Additional Attacks"}),o("br",{}),s.additionalAttacks&&s.additionalAttacks.map((h,p)=>o("div",{className:"input-group mb-2",children:[o("span",{className:"input-group-text",children:["Attack ",p+2," Modifier"]}),o("input",{type:"number",className:"form-control",value:h.penalty,onChange:m=>{const _=parseInt(m.currentTarget.value)||0,E=[...s.additionalAttacks];E[p]={...h,penalty:_},l({...s,additionalAttacks:E})}}),o("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>{const m=[...s.additionalAttacks];m.splice(p,1),l({...s,additionalAttacks:m})},children:o("i",{className:"fas fa-times"})})]},p)),o("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>{const h=[...s.additionalAttacks||[]];h.push({penalty:-5}),l({...s,additionalAttacks:h})},children:[o("i",{className:"fas fa-plus me-1"})," Add Attack"]})]}),o("div",{className:"mb-2",children:[o("label",{className:"form-label",children:"Description"}),o("textarea",{className:"form-control",placeholder:"Ability Description",value:s.description,onInput:h=>l({...s,description:h.currentTarget.value})})]})]}),o("div",{className:"modal-footer",children:[o("button",{type:"button",className:"btn btn-secondary",onClick:t,children:[o("i",{className:"fas fa-times me-1"}),"Close"]}),e&&o("button",{type:"button",className:"btn btn-danger",onClick:()=>r(e.id),children:[o("i",{className:"fas fa-trash-alt me-1"}),"Delete"]}),o("button",{type:"button",className:"btn btn-success",onClick:u,children:[o("i",{className:`fas ${e?"fa-save":"fa-plus"} me-1`}),e?"Save Changes":"Add Ability"]})]})]})})}),sf=({abilityToDelete:n,confirmDelete:t,setAbilityToDelete:e})=>o("div",{className:`modal fade ${n?"show":""}`,style:{display:n?"block":"none"},tabIndex:-1,children:o("div",{className:"modal-dialog",children:o("div",{className:"modal-content",children:[o("div",{className:"modal-header",children:[o("h5",{className:"modal-title",children:"Confirm Deletion"}),o("button",{type:"button",className:"btn-close",onClick:()=>e(null),"aria-label":"Close"})]}),o("div",{className:"modal-body",children:"Are you sure you want to delete this ability?"}),o("div",{className:"modal-footer",children:[o("button",{type:"button",className:"btn btn-secondary",onClick:()=>e(null),children:"No, Keep It"}),o("button",{type:"button",className:"btn btn-danger",onClick:t,children:"Yes, Delete It"})]})]})})}),af=()=>{const{abilities:n,setAbilities:t}=nf(),{characterStats:e}=fe(Ve),{showToast:s}=_r(),l={id:null,name:"",type:Xt.GENERIC,description:"",dice:"",actions:1,element:"Physical",additionalAttacks:[]},[a,i]=z(null),[c,u]=z(l),[r,h]=z(null),[p,m]=z(!1),[_,E]=z(null),[A,C]=z(""),[O,L]=z(null);_t(()=>{console.log("Saving abilities to localStorage:",n),localStorage.setItem("abilities",JSON.stringify(n))},[n]),_t(()=>{const x=[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map(K=>new ye(K));return()=>{x.forEach(K=>{K&&typeof K.dispose=="function"&&K.dispose()})}},[]);const B=N=>{i(a===N?null:N)},M=(N=null)=>{h(N),u(N||l),m(!0)},U=()=>{h(null),m(!1),C("")},V=N=>{E(N)},Q=()=>{if(_){const N=n.find(x=>x.id===_);t(n.filter(x=>x.id!==_)),E(null),U(),s(`${N.name} deleted successfully`,"trash","danger","Deleted")}},X=N=>{if(!N)return!0;const x=Jn(N,e);return C(x.error||""),x.isValid},P=()=>{var N;if(!c.name.trim()){C("Name is required");return}if(((N=c.type)==null?void 0:N.toString())===Xt.WEAPON.toString()&&!c.dice.trim()){C("Attack roll is required for weapons");return}if(!(c.dice&&!X(c.dice))){if(r)t(n.map(x=>x.id===r.id?{...c,id:r.id}:x)),s(`${c.name} updated successfully`,"check","success","Updated"),L(r.id);else{const x={...c,id:Date.now()};t(K=>[...K,x]),s(`${c.name} added successfully`,"plus","success","Added"),L(x.id)}setTimeout(()=>L(null),1e3),console.log("Ability saved:",c),U()}},F=N=>{let x="",K="";switch(N){case 0:x="[free-action]",K="Free Action";break;case 1:x="[one-action]",K="One Action";break;case 2:x="[two-actions]",K="Two Actions";break;case 3:x="[three-actions]",K="Three Actions";break;case 4:x="[reaction]",K="Reaction";break;default:return""}return o("span",{className:"action","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-original-title":K,title:K,role:"img","aria-label":K,children:x})},Y=N=>{N.type===Xt.WEAPON?Z(N):lt(N)},Z=(N,x=0)=>{const K=N.dice,{isValid:Ct,error:St}=Jn(K,e);if(!Ct){s(St,"exclamation-triangle","danger","Invalid Dice");return}const Dt=Qe([],K,e),At=N.name;let Tt=Dt;if(x>0&&N.additionalAttacks&&N.additionalAttacks[x-1]){const ft=N.additionalAttacks[x-1].penalty||0;ft!==0&&(Tt=`${Dt}${ft<0?ft:`+${ft}`}`)}const Mt=`{{Attack ${x>0?x+1:""}=[[${Tt}]]}}`;let yt="";N.element&&(yt=`{{Element=${re(N.element)} ${N.element}}}`);const gt=`&{template:default} {{name=${At}}} ${Mt} ${yt} {{Description=${N.description||""}}}`;navigator.clipboard.writeText(gt).then(()=>{const ft=x>0?` (Attack #${x+1})`:"";s(`${At}${ft} command copied! Paste it into Roll20.`,"clipboard","success","Copied to clipboard")}).catch(ft=>{console.error("Failed to copy command: ",ft),s("Failed to copy command.","exclamation-triangle","danger","Copy Error")})},lt=N=>{let x="";if(N.dice){const{isValid:Ct,error:St}=Jn(N.dice,e);if(!Ct){s(St,"exclamation-triangle","danger","Invalid Dice");return}x=`{{Roll=[[${Qe([],N.dice,e)}]]}}`}const K=`&{template:default} {{name=${N.name}}} ${x} {{Description=${N.description||""}}}`;navigator.clipboard.writeText(K).then(()=>{s(`${N.name} command copied! Paste it into Roll20.`,"clipboard","success","Copied to clipboard")}).catch(Ct=>{console.error("Failed to copy command: ",Ct),s("Failed to copy command.","exclamation-triangle","danger","Copy Error")})},Nt=n.filter(N=>{var x;return((x=N.type)==null?void 0:x.toString())===Xt.WEAPON.toString()}),ut=n.filter(N=>{var x;return((x=N.type)==null?void 0:x.toString())===Xt.GENERIC.toString()}),it=N=>o("li",{className:`list-group-item ${O===N.id?"quantity-flash":""}`,children:[o("div",{className:"d-flex justify-content-between align-items-center",children:[o("div",{className:"d-flex align-items-center overflow-hidden",style:{flex:"1 1 0"},onClick:()=>B(N.id),children:[o("span",{className:"me-2",children:re(N.element)}),o("div",{className:"text-truncate",children:[o("span",{className:"arsenal me-2",children:N.name}),o("span",{className:"action-label hide-on-small me-2",children:F(N.actions)})]})]}),o("div",{className:"d-flex align-items-center justify-content-center",style:{gap:"0.5rem"},children:["                    ",o("i",{className:"fas fa-edit text-primary",onClick:x=>{x.stopPropagation(),M(N)},style:{cursor:"pointer",transition:"opacity 0.3s",opacity:.6,flexShrink:0},onMouseOver:x=>{x.stopPropagation(),x.currentTarget.style.opacity="1"},onMouseOut:x=>{x.stopPropagation(),x.currentTarget.style.opacity="0.6"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Edit Weapon"}),o("div",{className:"btn-group d-flex justify-content-center",children:[o("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>Z(N,0),"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Roll base attack",children:[o("i",{className:"fas fa-dice-d20 me-1"}),o("span",{className:"ms-1 text-truncate",children:Qe(Nt,N.dice,e,!0)})]}),"                        ",N.additionalAttacks.map((x,K)=>o("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>Z(N,K+1),"data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Roll attack #${K+2} (${x.penalty<0?x.penalty:`+${x.penalty}`})`,children:["#",K+2," (",x.penalty<0?x.penalty:`+${x.penalty}`,")"]},K))]})]})]}),a===N.id&&o("div",{className:"ability-details mt-2",children:["                    ",o("div",{className:"d-flex flex-wrap mb-2 justify-content-center gap-1",children:[N.element&&o("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`${N.element} damage type`,children:[re(N.element)," ",N.element]}),o("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Takes ${N.actions} action${N.actions!==1?"s":""} to use`,children:[F(N.actions)," ",N.actions===4?"Reaction":`${N.actions} Action${N.actions!==1?"s":""}`]}),N.additionalAttacks&&N.additionalAttacks.length>0&&o("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Can make ${N.additionalAttacks.length+1} attacks in total`,children:[o("i",{className:"fas fa-crosshairs"})," ",N.additionalAttacks.length+1," Attacks"]})]}),N.description&&o("div",{children:[o("p",{className:"py-1 border-bottom h6 arsenal text-center",children:"Description"}),o("p",{className:"mb-2",children:N.description})]})]})]},N.id),at=N=>o("li",{className:`list-group-item ${O===N.id?"quantity-flash":""}`,children:[o("div",{className:"d-flex justify-content-between align-items-center",children:[o("div",{className:"d-flex align-items-center overflow-hidden",style:{flex:"1 1 0"},onClick:()=>B(N.id),children:[o("span",{className:"me-2",children:re(N.element)}),o("div",{className:"text-truncate",children:[o("span",{className:"arsenal me-2",children:N.name}),o("span",{className:"action-label hide-on-small me-2",children:F(N.actions)})]})]}),o("div",{className:"d-flex align-items-center",style:{gap:"0.5rem"},children:[o("i",{className:"fas fa-edit text-primary",onClick:x=>{x.stopPropagation(),M(N)},style:{cursor:"pointer",transition:"opacity 0.3s",opacity:.6,flexShrink:0},onMouseOver:x=>{x.stopPropagation(),x.currentTarget.style.opacity="1"},onMouseOut:x=>{x.stopPropagation(),x.currentTarget.style.opacity="0.6"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Edit Ability"}),N.dice&&o("button",{className:"btn btn-sm btn-outline-danger",onClick:x=>{x.stopPropagation(),Y(N)},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Roll this ability",children:[o("i",{className:"fas fa-dice-d20 me-1"}),o("span",{className:"text-truncate",children:N.dice})]})]})]}),a===N.id&&o("div",{className:"ability-details mt-2",children:["                    ",o("div",{className:"d-flex flex-wrap mb-2 justify-content-center gap-1",children:[o("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Takes ${N.actions} action${N.actions!==1?"s":""} to use`,children:[F(N.actions)," ",N.actions===4?"Reaction":`${N.actions} Action${N.actions!==1?"s":""}`]}),N.element&&o("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`${N.element} element type`,children:[re(N.element)," ",N.element]}),N.dice&&o("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Dice formula for this ability",children:[o("i",{className:"fas fa-dice-d20"})," ",N.dice]})]}),N.description&&o("div",{children:[o("p",{className:"py-1 border-bottom h6 arsenal",children:"Description"}),o("p",{className:"mb-0",children:N.description})]})]})]},N.id);return o("div",{className:"abilities-list-container",children:[o(Se,{title:"ABILITIES & ATTACKS",lineMaxWidth:"50px"}),o("div",{className:"d-flex flex-column justify-content-between align-items-center mb-4",children:o("button",{className:"dark-btn dark-btn-primary mt-2 mt-md-0",onClick:()=>M(),style:{width:"160px",height:"60px"},"data-bs-toggle":"tooltip","data-bs-placement":"bottom",title:"Create a new ability or weapon",children:[o("i",{className:"fas fa-plus me-2"})," ",o("span",{children:"Add Ability"})]})}),o("div",{className:"row",children:[o("div",{className:"col-12 col-md-6 mb-3",children:o("div",{className:"card",children:[o("div",{className:"card-header",children:o("h5",{className:"arsenal m-0",children:"Attacks"})}),o("div",{className:"card-body p-0",children:Nt.length>0?o("ul",{className:"list-group list-group-flush",children:Nt.map(N=>it(N))}):o("div",{className:"text-center p-4",children:o("p",{className:"arsenal mb-0",children:'No weapons found. Click "Add Ability" to create one.'})})})]})}),o("div",{className:"col-12 col-md-6 mb-3",children:o("div",{className:"card",children:[o("div",{className:"card-header",children:o("h5",{className:"arsenal m-0",children:"Generic Abilities"})}),o("div",{className:"card-body p-0",children:ut.length>0?o("ul",{className:"list-group list-group-flush",children:ut.map(N=>at(N))}):o("div",{className:"text-center p-4",children:o("p",{className:"arsenal mb-0",children:'No abilities found. Click "Add Ability" to create one.'})})})]})})]}),o(rf,{isModalOpen:p,closeModal:U,abilityBeingEdited:r,currentAbility:c,setCurrentAbility:u,getActionLabel:F,validateDiceRoll:X,diceError:A,saveAbility:P,removeAbility:V}),o(sf,{abilityToDelete:_,confirmDelete:Q,setAbilityToDelete:E})]})};function of(){return o("div",{className:"abilities-page container-fluid",children:o(af,{})})}function lf(){return o(ko,{children:o(xo,{children:o(ef,{children:o(Cn,{children:o("div",{className:"d-flex flex-column min-vh-100",children:[o(Jh,{}),o("main",{className:"flex-grow-1",children:o(aa,{children:[o(Wn,{path:_n,component:jh}),o(Wn,{path:`${_n}spells`,component:Gh}),o(Wn,{path:`${_n}abilities`,component:of}),o(Wn,{default:!0,component:No})]})}),o(tf,{buildDate:"2025-05-21T18:20:18.528Z"})]})})})})})}yo(o(lf,{}),document.getElementById("app"));
