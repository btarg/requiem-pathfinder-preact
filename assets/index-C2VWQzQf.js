(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();var En,te,Bi,Ot,Kr,Yi,Ki,qi,ir,Gs,zs,Gi,bn={},zi=[],mo=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Nn=Array.isArray;function ct(n,e){for(var t in e)n[t]=e[t];return n}function ar(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function Lt(n,e,t){var r,o,a,i={};for(a in e)a=="key"?r=e[a]:a=="ref"?o=e[a]:i[a]=e[a];if(arguments.length>2&&(i.children=arguments.length>3?En.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(a in n.defaultProps)i[a]==null&&(i[a]=n.defaultProps[a]);return mn(n,i,r,o,null)}function mn(n,e,t,r,o){var a={type:n,props:e,key:t,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++Bi,__i:-1,__u:0};return o==null&&te.vnode!=null&&te.vnode(a),a}function Xt(n){return n.children}function zn(n,e){this.props=n,this.context=e}function Jt(n,e){if(e==null)return n.__?Jt(n.__,n.__i+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?Jt(n):null}function Qi(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return Qi(n)}}function Qs(n){(!n.__d&&(n.__d=!0)&&Ot.push(n)&&!ns.__r++||Kr!=te.debounceRendering)&&((Kr=te.debounceRendering)||Yi)(ns)}function ns(){for(var n,e,t,r,o,a,i,c=1;Ot.length;)Ot.length>c&&Ot.sort(Ki),n=Ot.shift(),c=Ot.length,n.__d&&(t=void 0,o=(r=(e=n).__v).__e,a=[],i=[],e.__P&&((t=ct({},r)).__v=r.__v+1,te.vnode&&te.vnode(t),or(e.__P,t,r,e.__n,e.__P.namespaceURI,32&r.__u?[o]:null,a,o??Jt(r),!!(32&r.__u),i),t.__v=r.__v,t.__.__k[t.__i]=t,ea(a,t,i),t.__e!=o&&Qi(t)));ns.__r=0}function Xi(n,e,t,r,o,a,i,c,u,s,h){var p,m,_,E,A,C,O=r&&r.__k||zi,L=e.length;for(u=_o(t,e,O,u,L),p=0;p<L;p++)(_=t.__k[p])!=null&&(m=_.__i==-1?bn:O[_.__i]||bn,_.__i=p,C=or(n,_,m,o,a,i,c,u,s,h),E=_.__e,_.ref&&m.ref!=_.ref&&(m.ref&&lr(m.ref,null,_),h.push(_.ref,_.__c||E,_)),A==null&&E!=null&&(A=E),4&_.__u||m.__k===_.__k?u=Ji(_,u,n):typeof _.type=="function"&&C!==void 0?u=C:E&&(u=E.nextSibling),_.__u&=-7);return t.__e=A,u}function _o(n,e,t,r,o){var a,i,c,u,s,h=t.length,p=h,m=0;for(n.__k=new Array(o),a=0;a<o;a++)(i=e[a])!=null&&typeof i!="boolean"&&typeof i!="function"?(u=a+m,(i=n.__k[a]=typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?mn(null,i,null,null,null):Nn(i)?mn(Xt,{children:i},null,null,null):i.constructor==null&&i.__b>0?mn(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=n,i.__b=n.__b+1,c=null,(s=i.__i=go(i,t,u,p))!=-1&&(p--,(c=t[s])&&(c.__u|=2)),c==null||c.__v==null?(s==-1&&(o>h?m--:o<h&&m++),typeof i.type!="function"&&(i.__u|=4)):s!=u&&(s==u-1?m--:s==u+1?m++:(s>u?m--:m++,i.__u|=4))):n.__k[a]=null;if(p)for(a=0;a<h;a++)(c=t[a])!=null&&(2&c.__u)==0&&(c.__e==r&&(r=Jt(c)),na(c,c));return r}function Ji(n,e,t){var r,o;if(typeof n.type=="function"){for(r=n.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=n,e=Ji(r[o],e,t));return e}n.__e!=e&&(e&&n.type&&!t.contains(e)&&(e=Jt(n)),t.insertBefore(n.__e,e||null),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Zi(n,e){return e=e||[],n==null||typeof n=="boolean"||(Nn(n)?n.some(function(t){Zi(t,e)}):e.push(n)),e}function go(n,e,t,r){var o,a,i=n.key,c=n.type,u=e[t];if(u===null&&n.key==null||u&&i==u.key&&c==u.type&&(2&u.__u)==0)return t;if(r>(u!=null&&(2&u.__u)==0?1:0))for(o=t-1,a=t+1;o>=0||a<e.length;){if(o>=0){if((u=e[o])&&(2&u.__u)==0&&i==u.key&&c==u.type)return o;o--}if(a<e.length){if((u=e[a])&&(2&u.__u)==0&&i==u.key&&c==u.type)return a;a++}}return-1}function qr(n,e,t){e[0]=="-"?n.setProperty(e,t??""):n[e]=t==null?"":typeof t!="number"||mo.test(e)?t:t+"px"}function Hn(n,e,t,r,o){var a;e:if(e=="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof r=="string"&&(n.style.cssText=r=""),r)for(e in r)t&&e in t||qr(n.style,e,"");if(t)for(e in t)r&&t[e]==r[e]||qr(n.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")a=e!=(e=e.replace(qi,"$1")),e=e.toLowerCase()in n||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),n.l||(n.l={}),n.l[e+a]=t,t?r?t.u=r.u:(t.u=ir,n.addEventListener(e,a?zs:Gs,a)):n.removeEventListener(e,a?zs:Gs,a);else{if(o=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&t==1?"":t))}}function Gr(n){return function(e){if(this.l){var t=this.l[e.type+n];if(e.t==null)e.t=ir++;else if(e.t<t.u)return;return t(te.event?te.event(e):e)}}}function or(n,e,t,r,o,a,i,c,u,s){var h,p,m,_,E,A,C,O,L,B,M,U,V,Q,X,P,F,Y=e.type;if(e.constructor!=null)return null;128&t.__u&&(u=!!(32&t.__u),a=[c=e.__e=t.__e]),(h=te.__b)&&h(e);e:if(typeof Y=="function")try{if(O=e.props,L="prototype"in Y&&Y.prototype.render,B=(h=Y.contextType)&&r[h.__c],M=h?B?B.props.value:h.__:r,t.__c?C=(p=e.__c=t.__c).__=p.__E:(L?e.__c=p=new Y(O,M):(e.__c=p=new zn(O,M),p.constructor=Y,p.render=bo),B&&B.sub(p),p.props=O,p.state||(p.state={}),p.context=M,p.__n=r,m=p.__d=!0,p.__h=[],p._sb=[]),L&&p.__s==null&&(p.__s=p.state),L&&Y.getDerivedStateFromProps!=null&&(p.__s==p.state&&(p.__s=ct({},p.__s)),ct(p.__s,Y.getDerivedStateFromProps(O,p.__s))),_=p.props,E=p.state,p.__v=e,m)L&&Y.getDerivedStateFromProps==null&&p.componentWillMount!=null&&p.componentWillMount(),L&&p.componentDidMount!=null&&p.__h.push(p.componentDidMount);else{if(L&&Y.getDerivedStateFromProps==null&&O!==_&&p.componentWillReceiveProps!=null&&p.componentWillReceiveProps(O,M),!p.__e&&p.shouldComponentUpdate!=null&&p.shouldComponentUpdate(O,p.__s,M)===!1||e.__v==t.__v){for(e.__v!=t.__v&&(p.props=O,p.state=p.__s,p.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(Z){Z&&(Z.__=e)}),U=0;U<p._sb.length;U++)p.__h.push(p._sb[U]);p._sb=[],p.__h.length&&i.push(p);break e}p.componentWillUpdate!=null&&p.componentWillUpdate(O,p.__s,M),L&&p.componentDidUpdate!=null&&p.__h.push(function(){p.componentDidUpdate(_,E,A)})}if(p.context=M,p.props=O,p.__P=n,p.__e=!1,V=te.__r,Q=0,L){for(p.state=p.__s,p.__d=!1,V&&V(e),h=p.render(p.props,p.state,p.context),X=0;X<p._sb.length;X++)p.__h.push(p._sb[X]);p._sb=[]}else do p.__d=!1,V&&V(e),h=p.render(p.props,p.state,p.context),p.state=p.__s;while(p.__d&&++Q<25);p.state=p.__s,p.getChildContext!=null&&(r=ct(ct({},r),p.getChildContext())),L&&!m&&p.getSnapshotBeforeUpdate!=null&&(A=p.getSnapshotBeforeUpdate(_,E)),P=h,h!=null&&h.type===Xt&&h.key==null&&(P=ta(h.props.children)),c=Xi(n,Nn(P)?P:[P],e,t,r,o,a,i,c,u,s),p.base=e.__e,e.__u&=-161,p.__h.length&&i.push(p),C&&(p.__E=p.__=null)}catch(Z){if(e.__v=null,u||a!=null)if(Z.then){for(e.__u|=u?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;a[a.indexOf(c)]=null,e.__e=c}else for(F=a.length;F--;)ar(a[F]);else e.__e=t.__e,e.__k=t.__k;te.__e(Z,e,t)}else a==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):c=e.__e=vo(t.__e,e,t,r,o,a,i,u,s);return(h=te.diffed)&&h(e),128&e.__u?void 0:c}function ea(n,e,t){for(var r=0;r<t.length;r++)lr(t[r],t[++r],t[++r]);te.__c&&te.__c(e,n),n.some(function(o){try{n=o.__h,o.__h=[],n.some(function(a){a.call(o)})}catch(a){te.__e(a,o.__v)}})}function ta(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:Nn(n)?n.map(ta):ct({},n)}function vo(n,e,t,r,o,a,i,c,u){var s,h,p,m,_,E,A,C=t.props,O=e.props,L=e.type;if(L=="svg"?o="http://www.w3.org/2000/svg":L=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),a!=null){for(s=0;s<a.length;s++)if((_=a[s])&&"setAttribute"in _==!!L&&(L?_.localName==L:_.nodeType==3)){n=_,a[s]=null;break}}if(n==null){if(L==null)return document.createTextNode(O);n=document.createElementNS(o,L,O.is&&O),c&&(te.__m&&te.__m(e,a),c=!1),a=null}if(L==null)C===O||c&&n.data==O||(n.data=O);else{if(a=a&&En.call(n.childNodes),C=t.props||bn,!c&&a!=null)for(C={},s=0;s<n.attributes.length;s++)C[(_=n.attributes[s]).name]=_.value;for(s in C)if(_=C[s],s!="children"){if(s=="dangerouslySetInnerHTML")p=_;else if(!(s in O)){if(s=="value"&&"defaultValue"in O||s=="checked"&&"defaultChecked"in O)continue;Hn(n,s,null,_,o)}}for(s in O)_=O[s],s=="children"?m=_:s=="dangerouslySetInnerHTML"?h=_:s=="value"?E=_:s=="checked"?A=_:c&&typeof _!="function"||C[s]===_||Hn(n,s,_,C[s],o);if(h)c||p&&(h.__html==p.__html||h.__html==n.innerHTML)||(n.innerHTML=h.__html),e.__k=[];else if(p&&(n.innerHTML=""),Xi(e.type=="template"?n.content:n,Nn(m)?m:[m],e,t,r,L=="foreignObject"?"http://www.w3.org/1999/xhtml":o,a,i,a?a[0]:t.__k&&Jt(t,0),c,u),a!=null)for(s=a.length;s--;)ar(a[s]);c||(s="value",L=="progress"&&E==null?n.removeAttribute("value"):E!=null&&(E!==n[s]||L=="progress"&&!E||L=="option"&&E!=C[s])&&Hn(n,s,E,C[s],o),s="checked",A!=null&&A!=n[s]&&Hn(n,s,A,C[s],o))}return n}function lr(n,e,t){try{if(typeof n=="function"){var r=typeof n.__u=="function";r&&n.__u(),r&&e==null||(n.__u=n(e))}else n.current=e}catch(o){te.__e(o,t)}}function na(n,e,t){var r,o;if(te.unmount&&te.unmount(n),(r=n.ref)&&(r.current&&r.current!=n.__e||lr(r,null,e)),(r=n.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(a){te.__e(a,e)}r.base=r.__P=null}if(r=n.__k)for(o=0;o<r.length;o++)r[o]&&na(r[o],e,t||typeof n.type!="function");t||ar(n.__e),n.__c=n.__=n.__e=void 0}function bo(n,e,t){return this.constructor(n,t)}function yo(n,e,t){var r,o,a,i;e==document&&(e=document.documentElement),te.__&&te.__(n,e),o=(r=!1)?null:e.__k,a=[],i=[],or(e,n=e.__k=Lt(Xt,null,[n]),o||bn,bn,e.namespaceURI,o?null:e.firstChild?En.call(e.childNodes):null,a,o?o.__e:e.firstChild,r,i),ea(a,n,i)}function zr(n,e,t){var r,o,a,i,c=ct({},n.props);for(a in n.type&&n.type.defaultProps&&(i=n.type.defaultProps),e)a=="key"?r=e[a]:a=="ref"?o=e[a]:c[a]=e[a]==null&&i!=null?i[a]:e[a];return arguments.length>2&&(c.children=arguments.length>3?En.call(arguments,2):t),mn(n.type,c,r||n.key,o||n.ref,null)}function An(n){function e(t){var r,o;return this.getChildContext||(r=new Set,(o={})[e.__c]=this,this.getChildContext=function(){return o},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(a){this.props.value!=a.value&&r.forEach(function(i){i.__e=!0,Qs(i)})},this.sub=function(a){r.add(a);var i=a.componentWillUnmount;a.componentWillUnmount=function(){r&&r.delete(a),i&&i.call(a)}}),t.children}return e.__c="__cC"+Gi++,e.__=n,e.Provider=e.__l=(e.Consumer=function(t,r){return t.children(r)}).contextType=e,e}En=zi.slice,te={__e:function(n,e,t,r){for(var o,a,i;e=e.__;)if((o=e.__c)&&!o.__)try{if((a=o.constructor)&&a.getDerivedStateFromError!=null&&(o.setState(a.getDerivedStateFromError(n)),i=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(n,r||{}),i=o.__d),i)return o.__E=o}catch(c){n=c}throw n}},Bi=0,zn.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=ct({},this.state),typeof n=="function"&&(n=n(ct({},t),this.props)),n&&ct(t,n),n!=null&&this.__v&&(e&&this._sb.push(e),Qs(this))},zn.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),Qs(this))},zn.prototype.render=Xt,Ot=[],Yi=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ki=function(n,e){return n.__v.__b-e.__v.__b},ns.__r=0,qi=/(PointerCapture)$|Capture$/i,ir=0,Gs=Gr(!1),zs=Gr(!0),Gi=0;var Eo=0;function l(n,e,t,r,o,a){e||(e={});var i,c,u=e;if("ref"in u)for(c in u={},e)c=="ref"?i=e[c]:u[c]=e[c];var s={type:n,props:u,key:t,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Eo,__i:-1,__u:0,__source:o,__self:a};if(typeof n=="function"&&(i=n.defaultProps))for(c in i)u[c]===void 0&&(u[c]=i[c]);return te.vnode&&te.vnode(s),s}function No(){return l("section",{children:[l("h1",{children:"404: Not Found"}),l("p",{children:"It's gone :("})]})}var Rt,ce,ks,Qr,ss=0,sa=[],me=te,Xr=me.__b,Jr=me.__r,Zr=me.diffed,ei=me.__c,ti=me.unmount,ni=me.__;function Tn(n,e){me.__h&&me.__h(ce,n,ss||e),ss=0;var t=ce.__H||(ce.__H={__:[],__h:[]});return n>=t.__.length&&t.__.push({}),t.__[n]}function z(n){return ss=1,cr(ia,n)}function cr(n,e,t){var r=Tn(Rt++,2);if(r.t=n,!r.__c&&(r.__=[ia(void 0,e),function(c){var u=r.__N?r.__N[0]:r.__[0],s=r.t(u,c);u!==s&&(r.__N=[s,r.__[1]],r.__c.setState({}))}],r.__c=ce,!ce.__f)){var o=function(c,u,s){if(!r.__c.__H)return!0;var h=r.__c.__H.__.filter(function(m){return!!m.__c});if(h.every(function(m){return!m.__N}))return!a||a.call(this,c,u,s);var p=r.__c.props!==c;return h.forEach(function(m){if(m.__N){var _=m.__[0];m.__=m.__N,m.__N=void 0,_!==m.__[0]&&(p=!0)}}),a&&a.call(this,c,u,s)||p};ce.__f=!0;var a=ce.shouldComponentUpdate,i=ce.componentWillUpdate;ce.componentWillUpdate=function(c,u,s){if(this.__e){var h=a;a=void 0,o(c,u,s),a=h}i&&i.call(this,c,u,s)},ce.shouldComponentUpdate=o}return r.__N||r.__}function _e(n,e){var t=Tn(Rt++,3);!me.__s&&dr(t.__H,e)&&(t.__=n,t.u=e,ce.__H.__h.push(t))}function ra(n,e){var t=Tn(Rt++,4);!me.__s&&dr(t.__H,e)&&(t.__=n,t.u=e,ce.__h.push(t))}function Ue(n){return ss=5,ur(function(){return{current:n}},[])}function ur(n,e){var t=Tn(Rt++,7);return dr(t.__H,e)&&(t.__=n(),t.__H=e,t.__h=n),t.__}function ft(n){var e=ce.context[n.__c],t=Tn(Rt++,9);return t.c=n,e?(t.__==null&&(t.__=!0,e.sub(ce)),e.props.value):n.__}function Ao(){for(var n;n=sa.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(Qn),n.__H.__h.forEach(Xs),n.__H.__h=[]}catch(e){n.__H.__h=[],me.__e(e,n.__v)}}me.__b=function(n){ce=null,Xr&&Xr(n)},me.__=function(n,e){n&&e.__k&&e.__k.__m&&(n.__m=e.__k.__m),ni&&ni(n,e)},me.__r=function(n){Jr&&Jr(n),Rt=0;var e=(ce=n.__c).__H;e&&(ks===ce?(e.__h=[],ce.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(e.__h.forEach(Qn),e.__h.forEach(Xs),e.__h=[],Rt=0)),ks=ce},me.diffed=function(n){Zr&&Zr(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(sa.push(e)!==1&&Qr===me.requestAnimationFrame||((Qr=me.requestAnimationFrame)||To)(Ao)),e.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),ks=ce=null},me.__c=function(n,e){e.some(function(t){try{t.__h.forEach(Qn),t.__h=t.__h.filter(function(r){return!r.__||Xs(r)})}catch(r){e.some(function(o){o.__h&&(o.__h=[])}),e=[],me.__e(r,t.__v)}}),ei&&ei(n,e)},me.unmount=function(n){ti&&ti(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(r){try{Qn(r)}catch(o){e=o}}),t.__H=void 0,e&&me.__e(e,t.__v))};var si=typeof requestAnimationFrame=="function";function To(n){var e,t=function(){clearTimeout(r),si&&cancelAnimationFrame(e),setTimeout(n)},r=setTimeout(t,100);si&&(e=requestAnimationFrame(t))}function Qn(n){var e=ce,t=n.__c;typeof t=="function"&&(n.__c=void 0,t()),ce=e}function Xs(n){var e=ce;n.__c=n.__(),ce=e}function dr(n,e){return!n||n.length!==e.length||e.some(function(t,r){return t!==n[r]})}function ia(n,e){return typeof e=="function"?e(n):e}let $t,pn;const Co=(n,e)=>{if($t=void 0,e&&e.type==="click"){if(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button!==0)return n;const t=e.target.closest("a[href]"),r=t&&t.getAttribute("href");if(!t||t.origin!=location.origin||/^#/.test(r)||!/^(_?self)?$/i.test(t.target)||pn&&(typeof pn=="string"?!r.startsWith(pn):!pn.test(r)))return n;$t=!0,e.preventDefault(),e=t.href.replace(location.origin,"")}else typeof e=="string"?$t=!0:e&&e.url?($t=!e.replace,e=e.url):e=location.pathname+location.search;return $t===!0?history.pushState(null,"",e):$t===!1&&history.replaceState(null,"",e),e},wo=(n,e,t={})=>{n=n.split("/").filter(Boolean),e=(e||"").split("/").filter(Boolean),t.params||(t.params={});for(let r=0,o,a;r<Math.max(n.length,e.length);r++){let[,i,c,u]=(e[r]||"").match(/^(:?)(.*?)([+*?]?)$/);if(o=n[r],!(!i&&c==o)){if(!i&&o&&u=="*"){t.rest="/"+n.slice(r).map(decodeURIComponent).join("/");break}if(!i||!o&&u!="?"&&u!="*")return;if(a=u=="+"||u=="*",a?o=n.slice(r).map(decodeURIComponent).join("/")||void 0:o&&(o=decodeURIComponent(o)),t.params[c]=o,c in t||(t[c]=o),a)break}}return t};function Cn(n){const[e,t]=cr(Co,n.url||location.pathname+location.search);n.scope&&(pn=n.scope);const r=$t===!0,o=ur(()=>{const a=new URL(e,location.origin),i=a.pathname.replace(/\/+$/g,"")||"/";return{url:e,path:i,query:Object.fromEntries(a.searchParams),route:(c,u)=>t({url:c,replace:u}),wasPush:r}},[e]);return ra(()=>(addEventListener("click",t),addEventListener("popstate",t),()=>{removeEventListener("click",t),removeEventListener("popstate",t)}),[]),Lt(Cn.ctx.Provider,{value:o},n.children)}const So=Promise.resolve();function aa(n){const[e,t]=cr(P=>P+1,0),{url:r,query:o,wasPush:a,path:i}=hr(),{rest:c=i,params:u={}}=ft(ri),s=Ue(!1),h=Ue(i),p=Ue(0),m=Ue(),_=Ue(),E=Ue(),A=Ue(!1),C=Ue();C.current=!1;let O,L,B;Zi(n.children).some(P=>{if(wo(c,P.props.path,B={...P.props,path:c,query:o,params:u,rest:""}))return O=zr(P,B);P.props.default&&(L=zr(P,B))});let M=O||L;const U=m.current&&m.current.__u&Fn&&m.current.__u&Vn,V=m.current&&m.current.__h,Q=ur(()=>{_.current=m.current,m.current=Lt(ri.Provider,{value:B},M);const P=_.current&&_.current.props.children;return!P||!M||M.type!==P.type||M.props.component!==P.props.component?(this.__v&&this.__v.__k&&this.__v.__k.reverse(),p.current++,!0):!1},[r,JSON.stringify(B)]);U?(m.current.__u|=Fn,m.current.__u|=Vn):V&&(m.current.__h=!0);const X=_.current;return _.current=null,this.__c=(P,F)=>{C.current=!0,_.current=X,n.onLoadStart&&n.onLoadStart(r),s.current=!0;let Y=p.current;P.then(()=>{Y===p.current&&(_.current=null,m.current&&(F.__h&&(m.current.__h=F.__h),F.__u&Vn&&(m.current.__u|=Vn),F.__u&Fn&&(m.current.__u|=Fn)),So.then(t))})},ra(()=>{const P=this.__v&&this.__v.__e;if(C.current){!A.current&&!E.current&&(E.current=P);return}!A.current&&E.current&&(E.current!==P&&E.current.remove(),E.current=null),A.current=!0,h.current!==i&&(a&&scrollTo(0,0),n.onRouteChange&&n.onRouteChange(r),h.current=i),n.onLoadEnd&&s.current&&n.onLoadEnd(r),s.current=!1},[i,a,e]),Q?[Lt(xs,{r:m}),Lt(xs,{r:_})]:Lt(xs,{r:m})}const Fn=32,Vn=128,xs=({r:n})=>n.current;aa.Provider=Cn;Cn.ctx=An({});const ri=An({}),Wn=n=>Lt(n.component,n),hr=()=>ft(Cn.ctx),ii=te.__b;te.__b=n=>{n.type&&n.type._forwarded&&n.ref&&(n.props.ref=n.ref,n.ref=null),ii&&ii(n)};const ai=te.__e;te.__e=(n,e,t)=>{if(n&&n.then){let r=e;for(;r=r.__;)if(r.__c&&r.__c.__c)return e.__e==null&&(e.__c.__z=[t.__e],e.__e=t.__e,e.__k=t.__k),e.__k||(e.__k=[]),r.__c.__c(n,e)}ai&&ai(n,e,t)};const je={PHYSICAL:"physical",MAGICAL:"magical",UTILITY:"utility"},$e={OFFENSIVE:"offensive",DEFENSIVE:"defensive",UTILITY:"utility",CORE:"core"},we={currentHealth:{defaultValue:10,label:"Current HP",type:$e.CORE},maxHealth:{defaultValue:10,label:"Max HP",type:$e.CORE},currentMp:{defaultValue:10,label:"Current MP",type:$e.CORE},maxMp:{defaultValue:10,label:"Max MP",type:$e.CORE},tempHealth:{defaultValue:0,label:"Temporary HP",type:$e.CORE},strength:{name:"Strength",shortName:"STR",icon:"fa-fist-raised",color:"danger",description:"Increases physical attack damage unless resisted/absorbed/immune. Applied as flat bonus to Physical damage rolls.",category:je.PHYSICAL,type:$e.OFFENSIVE,defaultValue:0,displayModifier:!0,affectsRolls:!0,damageType:"physical"},vitality:{name:"Vitality",shortName:"VIT",icon:"fa-shield-alt",color:"primary-emphasis",description:"Reduces incoming Physical damage when attack is resisted. Does not affect neutral or absorbed damage.",category:je.PHYSICAL,type:$e.DEFENSIVE,defaultValue:0,displayModifier:!0,damageReduction:!0,damageType:"physical"},magic:{name:"Magic",shortName:"MAG",icon:"fa-hand-sparkles",color:"success-emphasis",description:"Increases magical attack damage unless resisted/absorbed/immune. Applied as flat bonus.",category:je.MAGICAL,type:$e.OFFENSIVE,defaultValue:0,displayModifier:!0,affectsRolls:!0,damageType:"magical"},spirit:{name:"Spirit",shortName:"SPR",icon:"fa-shield-heart",color:"info",description:"Reduces incoming magical damage when attack is resisted. Does not affect neutral or absorbed damage.",category:je.MAGICAL,type:$e.DEFENSIVE,defaultValue:0,displayModifier:!0,damageReduction:!0,damageType:"magical"},speed:{name:"Speed",shortName:"SPD",icon:"fa-running",color:"secondary-emphasis",description:"Bonus to Initiative and movement distance per turn",category:je.PHYSICAL,type:$e.UTILITY,defaultValue:0,displayModifier:!0,derived:{initiative:n=>n,movement:n=>n}},luck:{name:"Luck",shortName:"LCK",icon:"fa-clover",color:"success",description:"Affects spell draws and knockdown resistance",category:je.MAGICAL,type:$e.UTILITY,defaultValue:0,displayModifier:!0,derived:{maxExtraDrawDice:n=>Math.min(Math.floor(n),4),knockdownBonus:n=>n}},perception:{name:"Perception",shortName:"PER",icon:"fa-eye",color:"danger-emphasis",description:"Used for Scanning for an enemy's Elemental Affinities, for noticing weak points, hidden treasure, hidden enemies etc.",category:je.UTILITY,type:$e.UTILITY,defaultValue:0,displayModifier:!0},wisdom:{name:"Wisdom",shortName:"WIS",icon:"fa-book-open",color:"warning-emphasis",description:"Used for Recalling Knowledge of any kind: essentially every Pathfinder 2E lore skill rolled into one. Also useful in social situations.",category:je.UTILITY,type:$e.UTILITY,defaultValue:0,displayModifier:!0},influence:{name:"Influence",shortName:"INF",icon:"fa-comments",color:"warning",description:"Used for social rolls, such as Deception, Intimidation, Performance, Diplomacy and Persuasion.",category:je.UTILITY,type:$e.UTILITY,defaultValue:0,displayModifier:!0}},dn={CANTRIP_AND_FIRST:1,SECOND_AND_THIRD:2,FOURTH_AND_FIFTH:3,SIXTH_AND_SEVENTH:4,EIGHTH_TO_TENTH:5},$s=n=>n<=1?dn.CANTRIP_AND_FIRST:n<=3?dn.SECOND_AND_THIRD:n<=5?dn.FOURTH_AND_FIFTH:n<=7?dn.SIXTH_AND_SEVENTH:dn.EIGHTH_TO_TENTH,Ft=An({characterStats:{},setCharacterStats:n=>{}});function ko({children:n}){const e=()=>{const a=localStorage.getItem("characterStats");if(a)return JSON.parse(a);{const i={};for(const c in we)i[c]=we[c].defaultValue||0;return i}},[t,r]=z(e);_e(()=>{localStorage.setItem("characterStats",JSON.stringify(t))},[t]);const o={characterStats:t,setCharacterStats:r};return l(Ft.Provider,{value:o,children:n})}const oa=An({spells:[],setSpells:n=>{},getLinkedStats:()=>[],subscribe:n=>{},unsubscribe:n=>{}}),xo=({children:n})=>{const[e,t]=z(()=>{const u=localStorage.getItem("spells");return u?JSON.parse(u):[]}),[r,o]=z([]);_e(()=>{localStorage.setItem("spells",JSON.stringify(e)),r.forEach(u=>u(e))},[e]);const a=()=>e.filter(u=>u.isLinked).map(u=>u.linkedStat),i=u=>{o(s=>[...s,u])},c=u=>{o(s=>s.filter(h=>h!==u))};return l(oa.Provider,{value:{spells:e,setSpells:t,getLinkedStats:a,subscribe:i,unsubscribe:c},children:n})},wn=()=>ft(oa),Qe=Object.freeze({WEAPON:"Weapon",GENERIC:"Generic"}),re=Object.freeze({PHYS:"Physical",FIRE:"Fire",ICE:"Cold",ELEC:"Electricity",FORCE:"Force",PSY:"Psychic",CHEM:"Chemical",RAD:"Radiant",VOID:"Void",TRUE:"Almighty"}),pe=Object.freeze({WEAK:"Weak",NEUTRAL:"Neutral",RESIST:"Resist",IMMUNE:"Immune",ABSORB:"Drain",REFLECT:"Reflect"}),$o={[re.PHYS]:"âš”ï¸",[re.CHEM]:"ðŸ§ª",[re.ICE]:"â„ï¸",[re.ELEC]:"âš¡",[re.FIRE]:"ðŸ”¥",[re.FORCE]:"ðŸ’¥",[re.RAD]:"âœ¨",[re.VOID]:"ðŸŒŒ",[re.PSY]:"ðŸŒ€"},st=n=>$o[n]||"â˜„ï¸",Oo=n=>({[re.PHYS]:"Phys",[re.CHEM]:"Chem",[re.ICE]:"Ice",[re.ELEC]:"Elec",[re.FIRE]:"Fire",[re.FORCE]:"Force",[re.RAD]:"Rad",[re.VOID]:"Void",[re.PSY]:"Psy",[re.TRUE]:"???"})[n]||"???",Lo=n=>({[pe.WEAK]:"WK",[pe.NEUTRAL]:"-",[pe.RESIST]:"RES",[pe.IMMUNE]:"NULL",[pe.ABSORB]:"DR",[pe.REFLECT]:"RFL"})[n]||"???",Vt=({title:n,titleClassName:e="text-danger",lineColor:t="var(--bs-danger)",lineThickness:r="1px",containerClassName:o="mb-3",lineMaxWidth:a="none"})=>{const i={height:r,maxWidth:a};return l("div",{className:o,children:l("div",{className:"d-flex align-items-center justify-content-center",children:[l("div",{className:"flex-grow-1",style:{...i,backgroundImage:`linear-gradient(to right, transparent, ${t})`}}),l("h5",{className:`${e} mx-3 my-0 arsenal`,children:n}),l("div",{className:"flex-grow-1",style:{...i,backgroundImage:`linear-gradient(to left, transparent, ${t})`}})]})})},Do="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%20style='height:%20512px;%20width:%20512px;'%3e%3cg%20class=''%20transform='translate(0,0)'%20style=''%3e%3cpath%20d='m19.36%2019.457-.38%2027.84%20267.127%20154.75-58.703%2019.916%2057.602%2019.36L142.12%20383.546l-19.214-19.213-51.47%20114.324%20123.125-43.482-17.492-18.95%20151.868-151.87%2012.433%2043.078%2022.976-68.5%2056.675-16.565-57.475-15.492-22.934-79.828-14.145%2048.266-268.65-155.41-38.454-.446zM370.614%2081.94c-4.53.02-9.035.12-13.51.302-3.275.134-6.528.32-9.76.547l31.25%20108.786%20104.05%2028.045c6.204-39.085%208.902-80.275%209.18-120.075C456.37%2088.82%20415.098%2082.257%20375.15%2081.95a403.83%20403.83%200%200%200-4.537-.01zm-36.87%202.1c-31.99%203.653-61.013%2012.153-83.014%2025.87l64.493%2037.31%2018.52-63.18zm148.18%20139.997L378.958%20254.13l-38.93%20116.054-20.268-70.225-39.07%2039.067c18.814%2035.364%2046.1%2062.287%2086.175%2077.604%2047.473-17.834%2078.566-62.795%2098.014-121.6%207.323-22.14%2012.905-46.11%2017.042-70.993z'%20fill='%23fff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",Mo="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%20style='height:%20512px;%20width:%20512px;'%3e%3cg%20class=''%20transform='translate(0,0)'%20style=''%3e%3cpath%20d='M362.188%2017.998c-12.9%2065.825-49.788%20140.505-98.616%20197.37L352%20224l-89.377%2019.414%2052.197%2075.27-71.111-56.364L224%20336l-8.576-73.182%202.812-2.779c-45.221%2040.71-35.888%2074.86.702%2096.49%206.775%204.005%2016.257%209.046%2027.38%208.7%2058.243-1.813%2093.255%2035.012%20126.575%2076.199%2018.234%2022.54%2048.35%2030.059%2073.529%2044.246%2052.44%2029.548%2067.894-32.667%2014.767-53.445l-70.677-111.036c-11.42-53.08%2052.186-171.824%20103.49-248.37V17.997zM92.454%2023.424v32.17l32.799%2032.79%208.043-24.126zM78.578%2067.352c-.233-.026-.57.037-1.224.199-1.31.323-3.41%201.482-5.075%203.146-1.664%201.664-2.823%203.763-3.146%205.073-.266%201.074-.207%201.3.012%201.61l120.228%20120.208%203.275-6.55%206.545-3.272L78.97%2067.563c-.123-.086-.24-.195-.39-.211zM21.162%2087.029%2062%20127.86l24.13-8.043-30.335-30.33-.397-.396-.343-.442a17.99%2017.99%200%200%201-1.112-1.619zm213.563%20103.098-28.663%2014.326-14.33%2028.654%2038.264%2015.303%2020.096-19.869z'%20fill='%23fff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",Io="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%20style='height:%20512px;%20width:%20512px;'%3e%3cg%20class=''%20transform='translate(0,0)'%20style=''%3e%3cpath%20d='M372.48%2031.215c-77.65%200-116.48%2065.73-116.48%2065.73s-38.83-65.72-116.48-65.72c-37.14%200-107.77%2033.72-107.77%20125.13%200%20161.24%20224.25%20324.43%20224.25%20324.43s224.25-163.19%20224.25-324.43c0-91.42-70.63-125.13-107.77-125.14zm-145.492%20115.02h60.698v79.415h79.238v60.7h-79.238v79.884h-60.698V286.35h-80.064v-60.7h80.064z'%20fill='%23fff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e";function Ro(){const{characterStats:n,setCharacterStats:e}=ft(Ft),[t,r]=z(null),[o,a]=z(typeof window<"u"?window.innerWidth:1024);_e(()=>{const m=()=>a(window.innerWidth);return window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]);let i=o<1080;_e(()=>{let m=!n.affinities;if(n.affinities){const _=Object.keys(re)[0];_&&n.affinities[re[_]]&&typeof n.affinities[re[_]]!="object"&&(m=!0)}if(m){const _={};Object.values(re).forEach(E=>{_[E]={type:pe.NEUTRAL,mastered:!1}}),e(E=>({...E,affinities:_}))}},[n.affinities,e]);const c=m=>{r(_=>_===m?null:m)},u=(m,_)=>{e(E=>{var A;return{...E,affinities:{...E.affinities,[m]:{...((A=E.affinities)==null?void 0:A[m])||{type:pe.NEUTRAL,mastered:!1},type:_}}}})},s=m=>{e(_=>{var E,A,C;return{..._,affinities:{..._.affinities,[m]:{...((E=_.affinities)==null?void 0:E[m])||{type:pe.NEUTRAL,mastered:!1},mastered:!((C=(A=_.affinities)==null?void 0:A[m])!=null&&C.mastered)}}}})},h=m=>{switch(m){case pe.WEAK:return"danger";case pe.RESIST:return"info";case pe.IMMUNE:return"warning";case pe.ABSORB:return"success";case pe.REFLECT:return"primary";default:return"secondary"}},p=m=>{const _={width:"1.25em",height:"1.25em",color:"white"};switch(m){case pe.WEAK:return l("img",{src:Mo,alt:"Weak",style:_});case pe.RESIST:return l("i",{className:"fas fa-shield-alt",style:_});case pe.IMMUNE:return l("i",{className:"fas fa-ban",style:_});case pe.ABSORB:return l("img",{src:Io,alt:"Absorb",style:_});case pe.REFLECT:return l("img",{src:Do,alt:"Reflect",style:_});default:return l("i",{className:"fas fa-minus",style:_})}};return!n.affinities||typeof n.affinities[Object.values(re)[0]]!="object"?l("div",{className:"p-3",children:"Loading affinities..."}):l("div",{className:"affinity-tracker p-3",children:[l(Vt,{title:"ELEMENTAL AFFINITIES"}),l("div",{className:"element-grid mt-4 gap-1",children:Object.values(re).filter(m=>m!=="Almighty").map(m=>{const _=n.affinities[m]||{type:pe.NEUTRAL,mastered:!1};return l("div",{className:`element-item clickable-card mb-3 ${_.mastered?"gold-bg":""} ${t===m?"editing":""}`,onClick:()=>c(m),children:[_.mastered&&l("div",{className:"mastery-watermark",children:"MASTERY"}),l("div",{className:"element-header d-flex align-items-center justify-content-between mb-1",children:[l("div",{className:"d-flex align-items-center element-info",children:[l("span",{className:"element-icon",children:st(m)}),l("span",{className:"arsenal element-name",children:[i?Oo(m):m,":"]}),l("span",{className:`arsenal ms-1 affinity-name text-${h(_.type)}`,children:i?Lo(_.type):_.type})]}),l("button",{className:`mastery-toggle-button ${_.mastered?"mastered":""}`,onClick:E=>{E.stopPropagation(),s(m)},title:_.mastered?"Disable Mastery":"Enable Mastery",children:l("i",{className:`${_.mastered?"fas fa-star":"fa-regular fa-star"}`})})]}),t===m&&l("div",{className:"affinity-buttons btn-group d-flex mt-2",children:Object.values(pe).map(E=>l("button",{className:`btn btn-${_.type===E?h(E):"dark inactive-btn"}`,onClick:A=>{A.stopPropagation(),u(m,E)},title:E,children:p(E)},E))})]},m)})})]})}var Xn={exports:{}},Po=Xn.exports,oi;function Ho(){return oi||(oi=1,function(n,e){(function(t,r){n.exports=r()})(Po,function(){return function(t){var r={};function o(a){if(r[a])return r[a].exports;var i=r[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=t,o.c=r,o.d=function(a,i,c){o.o(a,i)||Object.defineProperty(a,i,{enumerable:!0,get:c})},o.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,i){if(1&i&&(a=o(a)),8&i||4&i&&typeof a=="object"&&a&&a.__esModule)return a;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:a}),2&i&&typeof a!="string")for(var u in a)o.d(c,u,(function(s){return a[s]}).bind(null,u));return c},o.n=function(a){var i=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(i,"a",i),i},o.o=function(a,i){return Object.prototype.hasOwnProperty.call(a,i)},o.p="",o(o.s=0)}([function(t,r,o){function a(i){for(var c in i)r.hasOwnProperty(c)||(r[c]=i[c])}Object.defineProperty(r,"__esModule",{value:!0}),a(o(1)),a(o(3))},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});const a=o(2);r.DiceRoller=class{constructor(i,c=1e3){this.randFunction=Math.random,this.maxRollCount=1e3,i&&(this.randFunction=i),this.maxRollCount=c}parse(i){return a.parse(i)}roll(i){const c=a.parse(i);return this.rollType(c)}rollValue(i){return this.roll(i).value}rollParsed(i){return this.rollType(i)}rollType(i){let c;switch(i.type){case"diceExpression":c=this.rollDiceExpr(i);break;case"group":c=this.rollGroup(i);break;case"die":c=this.rollDie(i);break;case"expression":c=this.rollExpression(i);break;case"mathfunction":c=this.rollFunction(i);break;case"inline":c=this.rollType(i.expr);break;case"number":c=Object.assign(Object.assign({},i),{success:!1,valid:!0,order:0});break;default:throw new Error(`Unable to render ${i.type}`)}return i.label&&(c.label=i.label),c}rollDiceExpr(i){const c=this.rollType(i.head),u=[c],s=[],h=i.ops.reduce((p,m,_)=>{const E=this.rollType(m.tail);switch(E.order=_,u.push(E),s.push(m.op),m.op){case"+":return p+E.value;case"-":return p-E.value;default:return p}},c.value);return{dice:u,ops:s,success:!1,type:"diceexpressionroll",valid:!0,value:h,order:0}}rollGroup(i){let c=i.rolls.map((u,s)=>Object.assign(Object.assign({},this.rollType(u)),{order:s}));if(i.mods){const u=i.mods,s=h=>{const p=u.some(m=>["failure","success"].includes(m.type));return h=u.reduce((m,_)=>this.applyGroupMod(m,_),h),p&&(h=h.map(m=>(m.success||(m.value=0,m.success=!0),m))),h};if(c.length===1&&["die","diceexpressionroll"].includes(c[0].type)){const h=c[0];let p=h.type==="die"?h.rolls:h.dice.filter(m=>m.type!=="number").reduce((m,_)=>[...m,..._.type==="die"?_.rolls:_.dice],[]);p=s(p),h.value=p.reduce((m,_)=>_.valid?m+_.value:m,0)}else c=s(c)}return{dice:c,success:!1,type:"grouproll",valid:!0,value:c.reduce((u,s)=>s.valid?u+s.value:u,0),order:0}}rollDie(i){const c=this.rollType(i.count);if(c.value>this.maxRollCount)throw new Error("Entered number of dice too large.");let u,s;i.die.type==="fate"?(s={type:"fate",success:!1,valid:!1,value:0,order:0},u=Array.from({length:c.value},(m,_)=>this.generateFateRoll(_))):(s=this.rollType(i.die),u=Array.from({length:c.value},(m,_)=>this.generateDiceRoll(s.value,_))),i.mods&&(u=i.mods.reduce((m,_)=>this.applyMod(m,_),u)),i.targets&&(u=i.targets.reduce((m,_)=>this.applyMod(m,_),u).map(m=>(m.success||(m.value=0,m.success=!0),m)));let h=!1,p=0;if(i.match){const m=i.match,_=u.reduce((A,C)=>A.set(C.roll,(A.get(C.roll)||0)+1),new Map),E=new Set(Array.from(_.entries()).filter(([A,C])=>C>=m.min.value).filter(([A])=>!(m.mod&&m.expr)||this.successTest(m.mod,this.rollType(m.expr).value,A)).map(([A])=>A));u.filter(A=>E.has(A.roll)).forEach(A=>A.matched=!0),m.count&&(h=!0,p=E.size)}return i.sort&&(u=this.applySort(u,i.sort)),{count:c,die:s,rolls:u,success:!1,type:"die",valid:!0,value:h?p:u.reduce((m,_)=>_.valid?m+_.value:m,0),order:0,matched:h}}rollExpression(i){const c=this.rollType(i.head),u=[c],s=[],h=i.ops.reduce((p,m)=>{const _=this.rollType(m.tail);switch(u.push(_),s.push(m.op),m.op){case"+":return p+_.value;case"-":return p-_.value;case"*":return p*_.value;case"/":return p/_.value;case"%":return p%_.value;case"**":return p**_.value;default:return p}},c.value);return{dice:u,ops:s,success:!1,type:"expressionroll",valid:!0,value:h,order:0}}rollFunction(i){const c=this.rollType(i.expr);let u;switch(i.op){case"floor":u=Math.floor(c.value);break;case"ceil":u=Math.ceil(c.value);break;case"round":u=Math.round(c.value);break;case"abs":u=Math.abs(c.value);break;default:u=c.value}return{expr:c,op:i.op,success:!1,type:"mathfunction",valid:!0,value:u,order:0}}applyGroupMod(i,c){return this.getGroupModMethod(c)(i)}getGroupModMethod(i){const c=u=>u.value;switch(i.type){case"success":return this.getSuccessMethod(i,c);case"failure":return this.getFailureMethod(i,c);case"keep":return this.getKeepMethod(i,c);case"drop":return this.getDropMethod(i,c);default:throw new Error(`Mod ${i.type} is not recognised`)}}applyMod(i,c){return this.getModMethod(c)(i)}getModMethod(i){const c=u=>u.roll;switch(i.type){case"success":return this.getSuccessMethod(i,c);case"failure":return this.getFailureMethod(i,c);case"crit":return this.getCritSuccessMethod(i,c);case"critfail":return this.getCritFailureMethod(i,c);case"keep":return u=>this.getKeepMethod(i,c)(u).sort((s,h)=>s.order-h.order);case"drop":return u=>this.getDropMethod(i,c)(u).sort((s,h)=>s.order-h.order);case"explode":return this.getExplodeMethod(i);case"compound":return this.getCompoundMethod(i);case"penetrate":return this.getPenetrateMethod(i);case"reroll":return this.getReRollMethod(i);case"rerollOnce":return this.getReRollOnceMethod(i);default:throw new Error(`Mod ${i.type} is not recognised`)}}applySort(i,c){return i.sort((u,s)=>c.asc?u.roll-s.roll:s.roll-u.roll),i.forEach((u,s)=>u.order=s),i}getCritSuccessMethod(i,c){const u=this.rollType(i.expr);return s=>s.map(h=>{if(!h.valid||h.type!=="roll"||h.success)return h;const p=h;return this.successTest(i.mod,u.value,c(h))?p.critical="success":p.critical==="success"&&(p.critical=null),h})}getCritFailureMethod(i,c){const u=this.rollType(i.expr);return s=>s.map(h=>{if(!h.valid||h.type!=="roll"||h.success)return h;const p=h;return this.successTest(i.mod,u.value,c(h))?p.critical="failure":p.critical==="failure"&&(p.critical=null),h})}getSuccessMethod(i,c){const u=this.rollType(i.expr);return s=>s.map(h=>(h.valid&&this.successTest(i.mod,u.value,c(h))&&(h.success?h.value+=1:(h.value=1,h.success=!0)),h))}getFailureMethod(i,c){const u=this.rollType(i.expr);return s=>s.map(h=>(h.valid&&this.successTest(i.mod,u.value,c(h))&&(h.success?h.value-=1:(h.value=-1,h.success=!0)),h))}getKeepMethod(i,c){const u=this.rollType(i.expr);return s=>{if(s.length===0)return s;s=s.sort((E,A)=>i.highlow==="l"?c(A)-c(E):c(E)-c(A)).sort((E,A)=>(E.valid?1:0)-(A.valid?1:0));const h=Math.max(Math.min(u.value,s.length),0);let p=0,m=0;const _=s.reduce((E,A)=>(A.valid?1:0)+E,0)-h;for(;m<s.length&&p<_;)s[m].valid&&(s[m].valid=!1,p++),m++;return s}}getDropMethod(i,c){const u=this.rollType(i.expr);return s=>{s=s.sort((_,E)=>i.highlow==="h"?c(E)-c(_):c(_)-c(E));const h=Math.max(Math.min(u.value,s.length),0);let p=0,m=0;for(;m<s.length&&p<h;)s[m].valid&&(s[m].valid=!1,p++),m++;return s}}getExplodeMethod(i){const c=i.target?this.rollType(i.target.value):null;return u=>{const s=c?h=>this.successTest(i.target.mod,c.value,h.roll):h=>this.successTest("=",h.type==="fateroll"?1:h.die,h.roll);if(u[0].type==="roll"&&s({roll:1})&&s({roll:u[0].die}))throw new Error("Invalid reroll target");for(let h=0;h<u.length;h++){let p=u[h];p.order=h;let m=0;for(;s(p)&&m++<1e3;){const _=this.reRoll(p,++h);u.splice(h,0,_),p=_}}return u}}getCompoundMethod(i){const c=i.target?this.rollType(i.target.value):null;return u=>{const s=c?h=>this.successTest(i.target.mod,c.value,h.roll):h=>this.successTest("=",h.type==="fateroll"?1:h.die,h.roll);if(u[0].type==="roll"&&s({roll:1})&&s({roll:u[0].die}))throw new Error("Invalid reroll target");for(let h=0;h<u.length;h++){let p=u[h],m=p.roll,_=0;for(;s(p)&&_++<1e3;){const E=this.reRoll(u[h],++h);m+=E.roll,p=E}p.value=m,p.roll=m}return u}}getPenetrateMethod(i){const c=i.target?this.rollType(i.target.value):null;return u=>{const s=c?h=>this.successTest(i.target.mod,c.value,h.roll):h=>this.successTest("=",h.type==="fateroll"?1:h.die,h.roll);if(c&&u[0].type==="roll"&&s(u[0])&&this.successTest(i.target.mod,c.value,1))throw new Error("Invalid reroll target");for(let h=0;h<u.length;h++){let p=u[h];p.order=h;let m=0;for(;s(p)&&m++<1e3;){const _=this.reRoll(p,++h);_.value-=1,_.roll-=1,u.splice(h,0,_),p=_}}return u}}getReRollMethod(i){const c=i.target?this.successTest.bind(null,i.target.mod,this.rollType(i.target.value).value):this.successTest.bind(null,"=",1);return u=>{if(u[0].type==="roll"&&c(1)&&c(u[0].die))throw new Error("Invalid reroll target");for(let s=0;s<u.length;s++)for(;c(u[s].roll);){u[s].valid=!1;const h=this.reRoll(u[s],s+1);u.splice(++s,0,h)}return u}}getReRollOnceMethod(i){const c=i.target?this.successTest.bind(null,i.target.mod,this.rollType(i.target.value).value):this.successTest.bind(null,"=",1);return u=>{if(u[0].type==="roll"&&c(1)&&c(u[0].die))throw new Error("Invalid reroll target");for(let s=0;s<u.length;s++)if(c(u[s].roll)){u[s].valid=!1;const h=this.reRoll(u[s],s+1);u.splice(++s,0,h)}return u}}successTest(i,c,u){switch(i){case">":return u>=c;case"<":return u<=c;case"=":default:return u==c}}reRoll(i,c){switch(i.type){case"roll":return this.generateDiceRoll(i.die,c);case"fateroll":return this.generateFateRoll(c);default:throw new Error(`Cannot do a reroll of a ${i.type}.`)}}generateDiceRoll(i,c){const u=Math.floor(this.randFunction()*i)+1;return{critical:u===i?"success":u===1?"failure":null,die:i,matched:!1,order:c,roll:u,success:!1,type:"roll",valid:!0,value:u}}generateFateRoll(i){const c=Math.floor(3*this.randFunction())-1;return{matched:!1,order:i,roll:c,success:!1,type:"fateroll",valid:!0,value:c}}}},function(t,r,o){function a(i,c,u,s){this.message=i,this.expected=c,this.found=u,this.location=s,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,a)}(function(i,c){function u(){this.constructor=i}u.prototype=c.prototype,i.prototype=new u})(a,Error),a.buildMessage=function(i,c){var u={literal:function(m){return'"'+h(m.text)+'"'},class:function(m){var _,E="";for(_=0;_<m.parts.length;_++)E+=m.parts[_]instanceof Array?p(m.parts[_][0])+"-"+p(m.parts[_][1]):p(m.parts[_]);return"["+(m.inverted?"^":"")+E+"]"},any:function(m){return"any character"},end:function(m){return"end of input"},other:function(m){return m.description}};function s(m){return m.charCodeAt(0).toString(16).toUpperCase()}function h(m){return m.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(_){return"\\x0"+s(_)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(_){return"\\x"+s(_)})}function p(m){return m.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(_){return"\\x0"+s(_)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(_){return"\\x"+s(_)})}return"Expected "+function(m){var _,E,A,C=new Array(m.length);for(_=0;_<m.length;_++)C[_]=(A=m[_],u[A.type](A));if(C.sort(),C.length>0){for(_=1,E=1;_<C.length;_++)C[_-1]!==C[_]&&(C[E]=C[_],E++);C.length=E}switch(C.length){case 1:return C[0];case 2:return C[0]+" or "+C[1];default:return C.slice(0,-1).join(", ")+", or "+C[C.length-1]}}(i)+" but "+function(m){return m?'"'+h(m)+'"':"end of input"}(c)+" found."},t.exports={SyntaxError:a,parse:function(i,c){c=c!==void 0?c:{};var u,s={},h={start:Ir},p=Ir,m={type:"any"},_=q("[[",!1),E=q("]]",!1),A=function(f,v){return v&&(f.label=v),f},C=q(">",!1),O=q("<",!1),L=q("=",!1),B=q("f",!1),M=q("cs",!1),U=q("cf",!1),V=q("m",!1),Q=q("t",!1),X=q("k",!1),P=q("l",!1),F=q("h",!1),Y=q("d",!1),Z=q("{",!1),le=q(",",!1),Ne=q("}",!1),ue=q("+",!1),ie=q("sa",!1),ae=q("sd",!1),N=q("!",!1),x=q("!!",!1),K=q("!p",!1),Ce=q("r",!1),Se=q("ro",!1),De=q("F",!1),Ae=q("%",!1),Te=q("(",!1),Me=q(")",!1),ye=q("-",!1),ge=function(f,v){return v.length==0?f:{head:f,type:"expression",ops:v.map(g=>({type:"math",op:g[1],tail:g[3]}))}},fe=q("*",!1),pt=q("/",!1),He=q("**",!1),Fe=q("floor",!1),qe=q("ceil",!1),y=q("round",!1),j=q("abs",!1),$=Lr("integer"),ee=/^[0-9]/,de=vs([["0","9"]],!1,!1),tt=function(){return{type:"number",value:parseInt(i.substring(W,d),10)}},ke=q("[",!1),I=/^[^\]]/,ve=vs(["]"],!0,!1),be=q("]",!1),Ge=Lr("whitespace"),it=/^[ \t\n\r]/,Et=vs([" ","	",`
`,"\r"],!1,!1),d=0,W=0,Ut=[{line:1,column:1}],at=0,gs=[],S=0;if("startRule"in c){if(!(c.startRule in h))throw new Error(`Can't start parsing from rule "`+c.startRule+'".');p=h[c.startRule]}function q(f,v){return{type:"literal",text:f,ignoreCase:v}}function vs(f,v,g){return{type:"class",parts:f,inverted:v,ignoreCase:g}}function Lr(f){return{type:"other",description:f}}function Dr(f){var v,g=Ut[f];if(g)return g;for(v=f-1;!Ut[v];)v--;for(g={line:(g=Ut[v]).line,column:g.column};v<f;)i.charCodeAt(v)===10?(g.line++,g.column=1):g.column++,v++;return Ut[f]=g,g}function Mr(f,v){var g=Dr(f),b=Dr(v);return{start:{offset:f,line:g.line,column:g.column},end:{offset:v,line:b.line,column:b.column}}}function k(f){d<at||(d>at&&(at=d,gs=[]),gs.push(f))}function co(f,v,g){return new a(a.buildMessage(f,v),f,v,g)}function Ir(){var f,v,g,b,R,w;if(f=d,(v=Es())!==s){for(g=[],i.length>d?(b=i.charAt(d),d++):(b=s,S===0&&k(m));b!==s;)g.push(b),i.length>d?(b=i.charAt(d),d++):(b=s,S===0&&k(m));g!==s?(W=f,w=g,(R=v).root=!0,w&&(R.label=w.join("")),f=v=R):(d=f,f=s)}else d=f,f=s;return f}function uo(){var f,v,g;return f=d,(v=function(){var b,R,w,D,G;if(b=d,(R=function(){var ne,Ve,mt,xe,he,We,Re,ze,Ee;if(ne=d,i.charCodeAt(d)===123?(Ve="{",d++):(Ve=s,S===0&&k(Z)),Ve!==s)if(se()!==s)if((mt=bs())!==s){for(xe=[],he=d,(We=se())!==s?(i.charCodeAt(d)===44?(Re=",",d++):(Re=s,S===0&&k(le)),Re!==s&&(ze=se())!==s&&(Ee=bs())!==s?he=We=[We,Re,ze,Ee]:(d=he,he=s)):(d=he,he=s);he!==s;)xe.push(he),he=d,(We=se())!==s?(i.charCodeAt(d)===44?(Re=",",d++):(Re=s,S===0&&k(le)),Re!==s&&(ze=se())!==s&&(Ee=bs())!==s?he=We=[We,Re,ze,Ee]:(d=he,he=s)):(d=he,he=s);xe!==s&&(he=se())!==s?(i.charCodeAt(d)===125?(We="}",d++):(We=s,S===0&&k(Ne)),We!==s?(W=ne,Ve={rolls:[mt,...xe.map(po=>po[3])],type:"group"},ne=Ve):(d=ne,ne=s)):(d=ne,ne=s)}else d=ne,ne=s;else d=ne,ne=s;else d=ne,ne=s;return ne}())!==s){for(w=[],(D=In())===s&&(D=Rn())===s&&(D=Dn())===s&&(D=Mn());D!==s;)w.push(D),(D=In())===s&&(D=Rn())===s&&(D=Dn())===s&&(D=Mn());w!==s&&(D=se())!==s?((G=Pn())===s&&(G=null),G!==s?(W=b,J=R,Ie=G,(oe=w).length>0&&(J.mods=(J.mods||[]).concat(oe)),Ie&&(J.label=Ie),b=R=J):(d=b,b=s)):(d=b,b=s)}else d=b,b=s;var J,oe,Ie;return b}())===s&&(v=Hr())===s&&(v=Ss()),v!==s&&se()!==s?((g=Pn())===s&&(g=null),g!==s?(W=f,f=v=A(v,g)):(d=f,f=s)):(d=f,f=s),f}function Dn(){var f,v,g;return f=d,i.charCodeAt(d)===62?(v=">",d++):(v=s,S===0&&k(C)),v===s&&(i.charCodeAt(d)===60?(v="<",d++):(v=s,S===0&&k(O)),v===s&&(i.charCodeAt(d)===61?(v="=",d++):(v=s,S===0&&k(L)))),v!==s&&(g=ot())!==s?(W=f,f=v={type:"success",mod:v,expr:g}):(d=f,f=s),f}function Mn(){var f,v,g,b;return f=d,i.charCodeAt(d)===102?(v="f",d++):(v=s,S===0&&k(B)),v!==s?(i.charCodeAt(d)===62?(g=">",d++):(g=s,S===0&&k(C)),g===s&&(i.charCodeAt(d)===60?(g="<",d++):(g=s,S===0&&k(O)),g===s&&(i.charCodeAt(d)===61?(g="=",d++):(g=s,S===0&&k(L)))),g===s&&(g=null),g!==s&&(b=ot())!==s?(W=f,f=v={type:"failure",mod:g,expr:b}):(d=f,f=s)):(d=f,f=s),f}function Rr(){var f,v,g,b;return f=d,i.substr(d,2)==="cs"?(v="cs",d+=2):(v=s,S===0&&k(M)),v!==s?(i.charCodeAt(d)===62?(g=">",d++):(g=s,S===0&&k(C)),g===s&&(i.charCodeAt(d)===60?(g="<",d++):(g=s,S===0&&k(O)),g===s&&(i.charCodeAt(d)===61?(g="=",d++):(g=s,S===0&&k(L)))),g===s&&(g=null),g!==s&&(b=ot())!==s?(W=f,f=v={type:"crit",mod:g,expr:b}):(d=f,f=s)):(d=f,f=s),f}function Pr(){var f,v,g,b;return f=d,i.substr(d,2)==="cf"?(v="cf",d+=2):(v=s,S===0&&k(U)),v!==s?(i.charCodeAt(d)===62?(g=">",d++):(g=s,S===0&&k(C)),g===s&&(i.charCodeAt(d)===60?(g="<",d++):(g=s,S===0&&k(O)),g===s&&(i.charCodeAt(d)===61?(g="=",d++):(g=s,S===0&&k(L)))),g===s&&(g=null),g!==s&&(b=ot())!==s?(W=f,f=v={type:"critfail",mod:g,expr:b}):(d=f,f=s)):(d=f,f=s),f}function ho(){var f,v,g,b,R;return f=d,i.charCodeAt(d)===109?(v="m",d++):(v=s,S===0&&k(V)),v!==s?(i.charCodeAt(d)===116?(g="t",d++):(g=s,S===0&&k(Q)),g===s&&(g=null),g!==s?((b=Ss())===s&&(b=null),b!==s?((R=function(){var w,D,G;return w=d,i.charCodeAt(d)===62?(D=">",d++):(D=s,S===0&&k(C)),D===s&&(i.charCodeAt(d)===60?(D="<",d++):(D=s,S===0&&k(O)),D===s&&(i.charCodeAt(d)===61?(D="=",d++):(D=s,S===0&&k(L)))),D!==s&&(G=ot())!==s?(W=w,w=D={mod:D,expr:G}):(d=w,w=s),w}())===s&&(R=null),R!==s?(W=f,f=v=function(w,D,G){const J={type:"match",min:D||{type:"number",value:2},count:!!w};return G&&(J.mod=G.mod,J.expr=G.expr),J}(g,b,R)):(d=f,f=s)):(d=f,f=s)):(d=f,f=s)):(d=f,f=s),f}function In(){var f,v,g,b;return f=d,i.charCodeAt(d)===107?(v="k",d++):(v=s,S===0&&k(X)),v!==s?(i.charCodeAt(d)===108?(g="l",d++):(g=s,S===0&&k(P)),g===s&&(i.charCodeAt(d)===104?(g="h",d++):(g=s,S===0&&k(F))),g===s&&(g=null),g!==s?((b=ot())===s&&(b=null),b!==s?(W=f,f=v={type:"keep",highlow:g,expr:b||Yr}):(d=f,f=s)):(d=f,f=s)):(d=f,f=s),f}function Rn(){var f,v,g,b;return f=d,i.charCodeAt(d)===100?(v="d",d++):(v=s,S===0&&k(Y)),v!==s?(i.charCodeAt(d)===108?(g="l",d++):(g=s,S===0&&k(P)),g===s&&(i.charCodeAt(d)===104?(g="h",d++):(g=s,S===0&&k(F))),g===s&&(g=null),g!==s?((b=ot())===s&&(b=null),b!==s?(W=f,f=v={type:"drop",highlow:g,expr:b||Yr}):(d=f,f=s)):(d=f,f=s)):(d=f,f=s),f}function bs(){var f,v,g,b,R,w,D,G;if(f=d,(v=ys())!==s){for(g=[],b=d,(R=se())!==s?(i.charCodeAt(d)===43?(w="+",d++):(w=s,S===0&&k(ue)),w!==s&&(D=se())!==s&&(G=ys())!==s?b=R=[R,w,D,G]:(d=b,b=s)):(d=b,b=s);b!==s;)g.push(b),b=d,(R=se())!==s?(i.charCodeAt(d)===43?(w="+",d++):(w=s,S===0&&k(ue)),w!==s&&(D=se())!==s&&(G=ys())!==s?b=R=[R,w,D,G]:(d=b,b=s)):(d=b,b=s);g!==s?(W=f,f=v=function(J,oe){return oe.length==0?J:{head:J,type:"diceExpression",ops:oe.map(Ie=>({type:"math",op:Ie[1],tail:Ie[3]}))}}(v,g)):(d=f,f=s)}else d=f,f=s;return f}function ys(){var f;return(f=Hr())===s&&(f=Es()),f}function Hr(){var f,v,g;return f=d,(v=function(){var b,R,w,D,G;if(b=d,(R=function(){var J,oe,Ie,ne;if(J=d,(oe=function(){var xe,he,We,Re;return xe=d,(he=ot())===s&&(he=null),he!==s?(i.charCodeAt(d)===100?(We="d",d++):(We=s,S===0&&k(Y)),We!==s?((Re=function(){var ze,Ee;return ze=d,i.charCodeAt(d)===70?(Ee="F",d++):(Ee=s,S===0&&k(De)),Ee===s&&(i.charCodeAt(d)===102?(Ee="f",d++):(Ee=s,S===0&&k(B))),Ee!==s&&(W=ze,Ee={type:"fate"}),ze=Ee}())===s&&(Re=function(){var ze,Ee;return ze=d,i.charCodeAt(d)===37?(Ee="%",d++):(Ee=s,S===0&&k(Ae)),Ee!==s&&(W=ze,Ee={type:"number",value:"100"}),ze=Ee}())===s&&(Re=ot()),Re!==s?(W=xe,he={die:Re,count:he||{type:"number",value:1},type:"die"},xe=he):(d=xe,xe=s)):(d=xe,xe=s)):(d=xe,xe=s),xe}())!==s){for(Ie=[],(ne=Vr())===s&&(ne=Wr())===s&&(ne=Fr())===s&&(ne=Ur())===s&&(ne=jr());ne!==s;)Ie.push(ne),(ne=Vr())===s&&(ne=Wr())===s&&(ne=Fr())===s&&(ne=Ur())===s&&(ne=jr());Ie!==s?(W=J,mt=Ie,(Ve=oe).mods=(Ve.mods||[]).concat(mt),J=oe=Ve):(d=J,J=s)}else d=J,J=s;var Ve,mt;return J}())!==s){for(w=[],(D=Rn())===s&&(D=In())===s&&(D=Dn())===s&&(D=Mn())===s&&(D=Pr())===s&&(D=Rr());D!==s;)w.push(D),(D=Rn())===s&&(D=In())===s&&(D=Dn())===s&&(D=Mn())===s&&(D=Pr())===s&&(D=Rr());w!==s?((D=ho())===s&&(D=null),D!==s?((G=function(){var J,oe;return J=d,i.substr(d,2)==="sa"?(oe="sa",d+=2):(oe=s,S===0&&k(ie)),oe!==s&&(W=J,oe={type:"sort",asc:!0}),J=oe}())===s&&(G=function(){var J,oe;return J=d,i.substr(d,2)==="sd"?(oe="sd",d+=2):(oe=s,S===0&&k(ae)),oe!==s&&(W=J,oe={type:"sort",asc:!1}),J=oe}()),G===s&&(G=null),G!==s?(W=b,R=function(J,oe,Ie,ne){const Ve=oe.filter(mt=>["success","failure"].includes(mt.type));return oe=oe.filter(mt=>!Ve.includes(mt)),J.mods=(J.mods||[]).concat(oe),Ve.length>0&&(J.targets=Ve),Ie&&(J.match=Ie),ne&&(J.sort=ne),J}(R,w,D,G),b=R):(d=b,b=s)):(d=b,b=s)):(d=b,b=s)}else d=b,b=s;return b}())!==s&&se()!==s?((g=Pn())===s&&(g=null),g!==s?(W=f,f=v=A(v,g)):(d=f,f=s)):(d=f,f=s),f}function Fr(){var f,v,g;return f=d,i.charCodeAt(d)===33?(v="!",d++):(v=s,S===0&&k(N)),v!==s?((g=un())===s&&(g=null),g!==s?(W=f,f=v={type:"explode",target:g}):(d=f,f=s)):(d=f,f=s),f}function Vr(){var f,v,g;return f=d,i.substr(d,2)==="!!"?(v="!!",d+=2):(v=s,S===0&&k(x)),v!==s?((g=un())===s&&(g=null),g!==s?(W=f,f=v={type:"compound",target:g}):(d=f,f=s)):(d=f,f=s),f}function Wr(){var f,v,g;return f=d,i.substr(d,2)==="!p"?(v="!p",d+=2):(v=s,S===0&&k(K)),v!==s?((g=un())===s&&(g=null),g!==s?(W=f,f=v={type:"penetrate",target:g}):(d=f,f=s)):(d=f,f=s),f}function jr(){var f,v,g;return f=d,i.charCodeAt(d)===114?(v="r",d++):(v=s,S===0&&k(Ce)),v!==s?((g=un())===s&&(g=null),g!==s?(W=f,f=v={type:"reroll",target:g||Br}):(d=f,f=s)):(d=f,f=s),f}function Ur(){var f,v,g;return f=d,i.substr(d,2)==="ro"?(v="ro",d+=2):(v=s,S===0&&k(Se)),v!==s?((g=un())===s&&(g=null),g!==s?(W=f,f=v={type:"rerollOnce",target:g||Br}):(d=f,f=s)):(d=f,f=s),f}function un(){var f,v,g;return f=d,i.charCodeAt(d)===62?(v=">",d++):(v=s,S===0&&k(C)),v===s&&(i.charCodeAt(d)===60?(v="<",d++):(v=s,S===0&&k(O)),v===s&&(i.charCodeAt(d)===61?(v="=",d++):(v=s,S===0&&k(L)))),v===s&&(v=null),v!==s&&(g=ot())!==s?(W=f,f=v={type:"target",mod:v,value:g}):(d=f,f=s),f}function ot(){var f;return(f=Ns())===s&&(f=Ss()),f}function Es(){var f;return(f=function(){var v,g,b,R;return v=d,i.substr(d,2)==="[["?(g="[[",d+=2):(g=s,S===0&&k(_)),g!==s&&(b=Es())!==s?(i.substr(d,2)==="]]"?(R="]]",d+=2):(R=s,S===0&&k(E)),R!==s?(W=v,v=g={type:"inline",expr:b}):(d=v,v=s)):(d=v,v=s),v}())===s&&(f=As())===s&&(f=Ns()),f}function Ns(){var f,v,g,b,R,w,D;return f=d,i.charCodeAt(d)===40?(v="(",d++):(v=s,S===0&&k(Te)),v!==s&&(g=As())!==s?(i.charCodeAt(d)===41?(b=")",d++):(b=s,S===0&&k(Me)),b!==s&&se()!==s?((R=Pn())===s&&(R=null),R!==s?(W=f,w=g,(D=R)&&(w.label=D),f=v=w):(d=f,f=s)):(d=f,f=s)):(d=f,f=s),f}function As(){var f,v,g,b,R,w,D,G;if(f=d,(v=Ts())!==s){for(g=[],b=d,(R=se())!==s?(i.charCodeAt(d)===43?(w="+",d++):(w=s,S===0&&k(ue)),w===s&&(i.charCodeAt(d)===45?(w="-",d++):(w=s,S===0&&k(ye))),w!==s&&(D=se())!==s&&(G=Ts())!==s?b=R=[R,w,D,G]:(d=b,b=s)):(d=b,b=s);b!==s;)g.push(b),b=d,(R=se())!==s?(i.charCodeAt(d)===43?(w="+",d++):(w=s,S===0&&k(ue)),w===s&&(i.charCodeAt(d)===45?(w="-",d++):(w=s,S===0&&k(ye))),w!==s&&(D=se())!==s&&(G=Ts())!==s?b=R=[R,w,D,G]:(d=b,b=s)):(d=b,b=s);g!==s?(W=f,f=v=ge(v,g)):(d=f,f=s)}else d=f,f=s;return f}function Ts(){var f,v,g,b,R,w,D,G;if(f=d,(v=Cs())!==s){for(g=[],b=d,(R=se())!==s?(i.charCodeAt(d)===42?(w="*",d++):(w=s,S===0&&k(fe)),w===s&&(i.charCodeAt(d)===47?(w="/",d++):(w=s,S===0&&k(pt))),w!==s&&(D=se())!==s&&(G=Cs())!==s?b=R=[R,w,D,G]:(d=b,b=s)):(d=b,b=s);b!==s;)g.push(b),b=d,(R=se())!==s?(i.charCodeAt(d)===42?(w="*",d++):(w=s,S===0&&k(fe)),w===s&&(i.charCodeAt(d)===47?(w="/",d++):(w=s,S===0&&k(pt))),w!==s&&(D=se())!==s&&(G=Cs())!==s?b=R=[R,w,D,G]:(d=b,b=s)):(d=b,b=s);g!==s?(W=f,f=v=ge(v,g)):(d=f,f=s)}else d=f,f=s;return f}function Cs(){var f,v,g,b,R,w,D,G;if(f=d,(v=ws())!==s){for(g=[],b=d,(R=se())!==s?(i.substr(d,2)==="**"?(w="**",d+=2):(w=s,S===0&&k(He)),w===s&&(i.charCodeAt(d)===37?(w="%",d++):(w=s,S===0&&k(Ae))),w!==s&&(D=se())!==s&&(G=ws())!==s?b=R=[R,w,D,G]:(d=b,b=s)):(d=b,b=s);b!==s;)g.push(b),b=d,(R=se())!==s?(i.substr(d,2)==="**"?(w="**",d+=2):(w=s,S===0&&k(He)),w===s&&(i.charCodeAt(d)===37?(w="%",d++):(w=s,S===0&&k(Ae))),w!==s&&(D=se())!==s&&(G=ws())!==s?b=R=[R,w,D,G]:(d=b,b=s)):(d=b,b=s);g!==s?(W=f,f=v=ge(v,g)):(d=f,f=s)}else d=f,f=s;return f}function fo(){var f,v,g,b,R;return f=d,(v=function(){var w;return i.substr(d,5)==="floor"?(w="floor",d+=5):(w=s,S===0&&k(Fe)),w===s&&(i.substr(d,4)==="ceil"?(w="ceil",d+=4):(w=s,S===0&&k(qe)),w===s&&(i.substr(d,5)==="round"?(w="round",d+=5):(w=s,S===0&&k(y)),w===s&&(i.substr(d,3)==="abs"?(w="abs",d+=3):(w=s,S===0&&k(j))))),w}())!==s&&se()!==s?(i.charCodeAt(d)===40?(g="(",d++):(g=s,S===0&&k(Te)),g!==s&&se()!==s&&(b=As())!==s&&se()!==s?(i.charCodeAt(d)===41?(R=")",d++):(R=s,S===0&&k(Me)),R!==s?(W=f,f=v={type:"mathfunction",op:v,expr:b}):(d=f,f=s)):(d=f,f=s)):(d=f,f=s),f}function ws(){var f;return(f=fo())===s&&(f=uo())===s&&(f=Ns()),f}function Ss(){var f,v,g,b;if(S++,f=d,i.charCodeAt(d)===45?(v="-",d++):(v=s,S===0&&k(ye)),v===s&&(v=null),v!==s){if(g=[],ee.test(i.charAt(d))?(b=i.charAt(d),d++):(b=s,S===0&&k(de)),b!==s)for(;b!==s;)g.push(b),ee.test(i.charAt(d))?(b=i.charAt(d),d++):(b=s,S===0&&k(de));else g=s;g!==s?(W=f,f=v=tt()):(d=f,f=s)}else d=f,f=s;return S--,f===s&&(v=s,S===0&&k($)),f}function Pn(){var f,v,g,b;if(f=d,i.charCodeAt(d)===91?(v="[",d++):(v=s,S===0&&k(ke)),v!==s){if(g=[],I.test(i.charAt(d))?(b=i.charAt(d),d++):(b=s,S===0&&k(ve)),b!==s)for(;b!==s;)g.push(b),I.test(i.charAt(d))?(b=i.charAt(d),d++):(b=s,S===0&&k(ve));else g=s;g!==s?(i.charCodeAt(d)===93?(b="]",d++):(b=s,S===0&&k(be)),b!==s?(W=f,f=v=g.join("")):(d=f,f=s)):(d=f,f=s)}else d=f,f=s;return f}function se(){var f,v;for(S++,f=[],it.test(i.charAt(d))?(v=i.charAt(d),d++):(v=s,S===0&&k(Et));v!==s;)f.push(v),it.test(i.charAt(d))?(v=i.charAt(d),d++):(v=s,S===0&&k(Et));return S--,f===s&&(v=s,S===0&&k(Ge)),f}const Br={type:"target",mod:"=",value:{type:"number",value:1}},Yr={type:"number",value:1};if((u=p())!==s&&d===i.length)return u;throw u!==s&&d<i.length&&k({type:"end"}),co(gs,at<i.length?i.charAt(at):null,at<i.length?Mr(at,at+1):Mr(at,at))}}},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.DiscordRollRenderer=class{render(a){return this.doRender(a,!0)}doRender(a,i=!1){let c="";switch(a.type){case"diceexpressionroll":c=this.renderGroupExpr(a);break;case"grouproll":c=this.renderGroup(a);break;case"die":c=this.renderDie(a);break;case"expressionroll":c=this.renderExpression(a);break;case"mathfunction":c=this.renderFunction(a);break;case"roll":return this.renderRoll(a);case"fateroll":return this.renderFateRoll(a);case"number":const u=a.label?` (${a.label})`:"";return`${a.value}${u}`;case"fate":return"F";default:throw new Error("Unable to render")}return a.valid||(c="~~"+c.replace(/~~/g,"")+"~~"),i?this.stripBrackets(c):a.label?`(${a.label}: ${c})`:c}renderGroup(a){const i=[];for(const c of a.dice)i.push(this.doRender(c));return i.length>1?`{ ${i.join(" + ")} } = ${a.value}`:`{ ${this.stripBrackets(i[0])} } = ${a.value}`}renderGroupExpr(a){const i=[];for(const c of a.dice)i.push(this.doRender(c));return i.length>1?`(${i.join(" + ")} = ${a.value})`:i[0]}renderDie(a){const i=[];for(const s of a.rolls)i.push(this.doRender(s));let c=`${i.join(", ")}`;["number","fate"].includes(a.die.type)&&a.count.type==="number"||(c+=`[*Rolling: ${this.doRender(a.count)}d${this.doRender(a.die)}*]`);const u=a.matched?` Match${a.value===1?"":"es"}`:"";return c+=` = ${a.value}${u}`,`(${c})`}renderExpression(a){if(a.dice.length>1){const i=[];for(let c=0;c<a.dice.length-1;c++)i.push(this.doRender(a.dice[c])),i.push(a.ops[c]);return i.push(this.doRender(a.dice.slice(-1)[0])),i.push("="),i.push(a.value+""),`(${i.join(" ")})`}return a.dice[0].type==="number"?a.value+"":this.doRender(a.dice[0])}renderFunction(a){const i=this.doRender(a.expr);return`(${a.op}${this.addBrackets(i)} = ${a.value})`}addBrackets(a){return a.startsWith("(")||(a=`(${a}`),a.endsWith(")")||(a=`${a})`),a}stripBrackets(a){return a.startsWith("(")&&(a=a.substring(1)),a.endsWith(")")&&(a=a.substring(0,a.length-1)),a}renderRoll(a){let i=`${a.roll}`;return a.valid?a.success&&a.value===1?i=`**${a.roll}**`:a.success&&a.value===-1?i=`*${a.roll}*`:a.success||a.critical!=="success"?a.success||a.critical!=="failure"||(i=`*${a.roll}*`):i=`**${a.roll}**`:i=`~~${a.roll}~~`,a.matched&&(i=`__${i}__`),i}renderFateRoll(a){const i=a.roll===0?"0":a.roll>0?"+":"-";let c=`${a.roll}`;return a.valid?a.success&&a.value===1?c=`**${i}**`:a.success&&a.value===-1&&(c=`*${i}*`):c=`~~${i}~~`,a.matched&&(c=`__${c}__`),c}}}])})}(Xn)),Xn.exports}var Fo=Ho();function fr(n){return String(n).charAt(0).toUpperCase()+String(n).slice(1)}const _n="/requiem-pathfinder-preact/",At=16,Os=4,rs=(n,e)=>Math.floor(Math.floor(n*e)/5),lt=(n,e)=>{const t=n.find(r=>r.isLinked&&r.linkedStat===e);return t?rs(t.quantity,t.rank):0},Qt=(n,e,t,r=!1)=>e.replace(/\[(\w+)\]/g,(o,a)=>{const i=t[a]||0,c=lt(n,a),u=i+c;return r?fr(u.toString()):`${u}[${a}]`}),Vo=n=>{const e=[];return n.name||e.push("Spell name is required"),n.quantity<0&&e.push("Quantity must be 0 or higher"),n.quantity>At&&e.push("Quantity over maximum stack limit"),n.power<=0&&e.push("Spell level must be greater than 0"),n.dice||e.push("Damage roll is required"),e},Jn=(n,e)=>{if(!n)return{isValid:!1,error:"A valid dice roll is required."};try{const t=n.replace(/\[\w+\]/g,"0");new Fo.DiceRoller().roll(t);const o=(n.match(/\[(\w+)\]/g)||[]).map(a=>a.slice(1,-1)).filter(a=>e[a]===void 0);return o.length>0?{isValid:!1,error:`Unknown stats: ${o.join(", ")}`}:{isValid:!0,error:null}}catch{return{isValid:!1,error:"Invalid dice format. Use format like '1d6+[spellAttackModifier]' or '2d8+3'"}}};var Oe="top",Be="bottom",Ye="right",Le="left",cs="auto",on=[Oe,Be,Ye,Le],Pt="start",Zt="end",la="clippingParents",pr="viewport",Kt="popper",ca="reference",Js=on.reduce(function(n,e){return n.concat([e+"-"+Pt,e+"-"+Zt])},[]),mr=[].concat(on,[cs]).reduce(function(n,e){return n.concat([e,e+"-"+Pt,e+"-"+Zt])},[]),ua="beforeRead",da="read",ha="afterRead",fa="beforeMain",pa="main",ma="afterMain",_a="beforeWrite",ga="write",va="afterWrite",ba=[ua,da,ha,fa,pa,ma,_a,ga,va];function ht(n){return n?(n.nodeName||"").toLowerCase():null}function Ke(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function Ht(n){var e=Ke(n).Element;return n instanceof e||n instanceof Element}function Xe(n){var e=Ke(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function _r(n){if(typeof ShadowRoot>"u")return!1;var e=Ke(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function Wo(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},o=e.attributes[t]||{},a=e.elements[t];!Xe(a)||!ht(a)||(Object.assign(a.style,r),Object.keys(o).forEach(function(i){var c=o[i];c===!1?a.removeAttribute(i):a.setAttribute(i,c===!0?"":c)}))})}function jo(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var o=e.elements[r],a=e.attributes[r]||{},i=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]),c=i.reduce(function(u,s){return u[s]="",u},{});!Xe(o)||!ht(o)||(Object.assign(o.style,c),Object.keys(a).forEach(function(u){o.removeAttribute(u)}))})}}const gr={name:"applyStyles",enabled:!0,phase:"write",fn:Wo,effect:jo,requires:["computeStyles"]};function ut(n){return n.split("-")[0]}var It=Math.max,is=Math.min,en=Math.round;function Zs(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function ya(){return!/^((?!chrome|android).)*safari/i.test(Zs())}function tn(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var r=n.getBoundingClientRect(),o=1,a=1;e&&Xe(n)&&(o=n.offsetWidth>0&&en(r.width)/n.offsetWidth||1,a=n.offsetHeight>0&&en(r.height)/n.offsetHeight||1);var i=Ht(n)?Ke(n):window,c=i.visualViewport,u=!ya()&&t,s=(r.left+(u&&c?c.offsetLeft:0))/o,h=(r.top+(u&&c?c.offsetTop:0))/a,p=r.width/o,m=r.height/a;return{width:p,height:m,top:h,right:s+p,bottom:h+m,left:s,x:s,y:h}}function vr(n){var e=tn(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}function Ea(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&_r(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function vt(n){return Ke(n).getComputedStyle(n)}function Uo(n){return["table","td","th"].indexOf(ht(n))>=0}function St(n){return((Ht(n)?n.ownerDocument:n.document)||window.document).documentElement}function us(n){return ht(n)==="html"?n:n.assignedSlot||n.parentNode||(_r(n)?n.host:null)||St(n)}function li(n){return!Xe(n)||vt(n).position==="fixed"?null:n.offsetParent}function Bo(n){var e=/firefox/i.test(Zs()),t=/Trident/i.test(Zs());if(t&&Xe(n)){var r=vt(n);if(r.position==="fixed")return null}var o=us(n);for(_r(o)&&(o=o.host);Xe(o)&&["html","body"].indexOf(ht(o))<0;){var a=vt(o);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return o;o=o.parentNode}return null}function Sn(n){for(var e=Ke(n),t=li(n);t&&Uo(t)&&vt(t).position==="static";)t=li(t);return t&&(ht(t)==="html"||ht(t)==="body"&&vt(t).position==="static")?e:t||Bo(n)||e}function br(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function gn(n,e,t){return It(n,is(e,t))}function Yo(n,e,t){var r=gn(n,e,t);return r>t?t:r}function Na(){return{top:0,right:0,bottom:0,left:0}}function Aa(n){return Object.assign({},Na(),n)}function Ta(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}var Ko=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,Aa(typeof e!="number"?e:Ta(e,on))};function qo(n){var e,t=n.state,r=n.name,o=n.options,a=t.elements.arrow,i=t.modifiersData.popperOffsets,c=ut(t.placement),u=br(c),s=[Le,Ye].indexOf(c)>=0,h=s?"height":"width";if(!(!a||!i)){var p=Ko(o.padding,t),m=vr(a),_=u==="y"?Oe:Le,E=u==="y"?Be:Ye,A=t.rects.reference[h]+t.rects.reference[u]-i[u]-t.rects.popper[h],C=i[u]-t.rects.reference[u],O=Sn(a),L=O?u==="y"?O.clientHeight||0:O.clientWidth||0:0,B=A/2-C/2,M=p[_],U=L-m[h]-p[E],V=L/2-m[h]/2+B,Q=gn(M,V,U),X=u;t.modifiersData[r]=(e={},e[X]=Q,e.centerOffset=Q-V,e)}}function Go(n){var e=n.state,t=n.options,r=t.element,o=r===void 0?"[data-popper-arrow]":r;o!=null&&(typeof o=="string"&&(o=e.elements.popper.querySelector(o),!o)||Ea(e.elements.popper,o)&&(e.elements.arrow=o))}const Ca={name:"arrow",enabled:!0,phase:"main",fn:qo,effect:Go,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function nn(n){return n.split("-")[1]}var zo={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Qo(n,e){var t=n.x,r=n.y,o=e.devicePixelRatio||1;return{x:en(t*o)/o||0,y:en(r*o)/o||0}}function ci(n){var e,t=n.popper,r=n.popperRect,o=n.placement,a=n.variation,i=n.offsets,c=n.position,u=n.gpuAcceleration,s=n.adaptive,h=n.roundOffsets,p=n.isFixed,m=i.x,_=m===void 0?0:m,E=i.y,A=E===void 0?0:E,C=typeof h=="function"?h({x:_,y:A}):{x:_,y:A};_=C.x,A=C.y;var O=i.hasOwnProperty("x"),L=i.hasOwnProperty("y"),B=Le,M=Oe,U=window;if(s){var V=Sn(t),Q="clientHeight",X="clientWidth";if(V===Ke(t)&&(V=St(t),vt(V).position!=="static"&&c==="absolute"&&(Q="scrollHeight",X="scrollWidth")),V=V,o===Oe||(o===Le||o===Ye)&&a===Zt){M=Be;var P=p&&V===U&&U.visualViewport?U.visualViewport.height:V[Q];A-=P-r.height,A*=u?1:-1}if(o===Le||(o===Oe||o===Be)&&a===Zt){B=Ye;var F=p&&V===U&&U.visualViewport?U.visualViewport.width:V[X];_-=F-r.width,_*=u?1:-1}}var Y=Object.assign({position:c},s&&zo),Z=h===!0?Qo({x:_,y:A},Ke(t)):{x:_,y:A};if(_=Z.x,A=Z.y,u){var le;return Object.assign({},Y,(le={},le[M]=L?"0":"",le[B]=O?"0":"",le.transform=(U.devicePixelRatio||1)<=1?"translate("+_+"px, "+A+"px)":"translate3d("+_+"px, "+A+"px, 0)",le))}return Object.assign({},Y,(e={},e[M]=L?A+"px":"",e[B]=O?_+"px":"",e.transform="",e))}function Xo(n){var e=n.state,t=n.options,r=t.gpuAcceleration,o=r===void 0?!0:r,a=t.adaptive,i=a===void 0?!0:a,c=t.roundOffsets,u=c===void 0?!0:c,s={placement:ut(e.placement),variation:nn(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:o,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,ci(Object.assign({},s,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:i,roundOffsets:u})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,ci(Object.assign({},s,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const yr={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Xo,data:{}};var jn={passive:!0};function Jo(n){var e=n.state,t=n.instance,r=n.options,o=r.scroll,a=o===void 0?!0:o,i=r.resize,c=i===void 0?!0:i,u=Ke(e.elements.popper),s=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&s.forEach(function(h){h.addEventListener("scroll",t.update,jn)}),c&&u.addEventListener("resize",t.update,jn),function(){a&&s.forEach(function(h){h.removeEventListener("scroll",t.update,jn)}),c&&u.removeEventListener("resize",t.update,jn)}}const Er={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Jo,data:{}};var Zo={left:"right",right:"left",bottom:"top",top:"bottom"};function Zn(n){return n.replace(/left|right|bottom|top/g,function(e){return Zo[e]})}var el={start:"end",end:"start"};function ui(n){return n.replace(/start|end/g,function(e){return el[e]})}function Nr(n){var e=Ke(n),t=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:t,scrollTop:r}}function Ar(n){return tn(St(n)).left+Nr(n).scrollLeft}function tl(n,e){var t=Ke(n),r=St(n),o=t.visualViewport,a=r.clientWidth,i=r.clientHeight,c=0,u=0;if(o){a=o.width,i=o.height;var s=ya();(s||!s&&e==="fixed")&&(c=o.offsetLeft,u=o.offsetTop)}return{width:a,height:i,x:c+Ar(n),y:u}}function nl(n){var e,t=St(n),r=Nr(n),o=(e=n.ownerDocument)==null?void 0:e.body,a=It(t.scrollWidth,t.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),i=It(t.scrollHeight,t.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),c=-r.scrollLeft+Ar(n),u=-r.scrollTop;return vt(o||t).direction==="rtl"&&(c+=It(t.clientWidth,o?o.clientWidth:0)-a),{width:a,height:i,x:c,y:u}}function Tr(n){var e=vt(n),t=e.overflow,r=e.overflowX,o=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+o+r)}function wa(n){return["html","body","#document"].indexOf(ht(n))>=0?n.ownerDocument.body:Xe(n)&&Tr(n)?n:wa(us(n))}function vn(n,e){var t;e===void 0&&(e=[]);var r=wa(n),o=r===((t=n.ownerDocument)==null?void 0:t.body),a=Ke(r),i=o?[a].concat(a.visualViewport||[],Tr(r)?r:[]):r,c=e.concat(i);return o?c:c.concat(vn(us(i)))}function er(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function sl(n,e){var t=tn(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function di(n,e,t){return e===pr?er(tl(n,t)):Ht(e)?sl(e,t):er(nl(St(n)))}function rl(n){var e=vn(us(n)),t=["absolute","fixed"].indexOf(vt(n).position)>=0,r=t&&Xe(n)?Sn(n):n;return Ht(r)?e.filter(function(o){return Ht(o)&&Ea(o,r)&&ht(o)!=="body"}):[]}function il(n,e,t,r){var o=e==="clippingParents"?rl(n):[].concat(e),a=[].concat(o,[t]),i=a[0],c=a.reduce(function(u,s){var h=di(n,s,r);return u.top=It(h.top,u.top),u.right=is(h.right,u.right),u.bottom=is(h.bottom,u.bottom),u.left=It(h.left,u.left),u},di(n,i,r));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function Sa(n){var e=n.reference,t=n.element,r=n.placement,o=r?ut(r):null,a=r?nn(r):null,i=e.x+e.width/2-t.width/2,c=e.y+e.height/2-t.height/2,u;switch(o){case Oe:u={x:i,y:e.y-t.height};break;case Be:u={x:i,y:e.y+e.height};break;case Ye:u={x:e.x+e.width,y:c};break;case Le:u={x:e.x-t.width,y:c};break;default:u={x:e.x,y:e.y}}var s=o?br(o):null;if(s!=null){var h=s==="y"?"height":"width";switch(a){case Pt:u[s]=u[s]-(e[h]/2-t[h]/2);break;case Zt:u[s]=u[s]+(e[h]/2-t[h]/2);break}}return u}function sn(n,e){e===void 0&&(e={});var t=e,r=t.placement,o=r===void 0?n.placement:r,a=t.strategy,i=a===void 0?n.strategy:a,c=t.boundary,u=c===void 0?la:c,s=t.rootBoundary,h=s===void 0?pr:s,p=t.elementContext,m=p===void 0?Kt:p,_=t.altBoundary,E=_===void 0?!1:_,A=t.padding,C=A===void 0?0:A,O=Aa(typeof C!="number"?C:Ta(C,on)),L=m===Kt?ca:Kt,B=n.rects.popper,M=n.elements[E?L:m],U=il(Ht(M)?M:M.contextElement||St(n.elements.popper),u,h,i),V=tn(n.elements.reference),Q=Sa({reference:V,element:B,placement:o}),X=er(Object.assign({},B,Q)),P=m===Kt?X:V,F={top:U.top-P.top+O.top,bottom:P.bottom-U.bottom+O.bottom,left:U.left-P.left+O.left,right:P.right-U.right+O.right},Y=n.modifiersData.offset;if(m===Kt&&Y){var Z=Y[o];Object.keys(F).forEach(function(le){var Ne=[Ye,Be].indexOf(le)>=0?1:-1,ue=[Oe,Be].indexOf(le)>=0?"y":"x";F[le]+=Z[ue]*Ne})}return F}function al(n,e){e===void 0&&(e={});var t=e,r=t.placement,o=t.boundary,a=t.rootBoundary,i=t.padding,c=t.flipVariations,u=t.allowedAutoPlacements,s=u===void 0?mr:u,h=nn(r),p=h?c?Js:Js.filter(function(E){return nn(E)===h}):on,m=p.filter(function(E){return s.indexOf(E)>=0});m.length===0&&(m=p);var _=m.reduce(function(E,A){return E[A]=sn(n,{placement:A,boundary:o,rootBoundary:a,padding:i})[ut(A)],E},{});return Object.keys(_).sort(function(E,A){return _[E]-_[A]})}function ol(n){if(ut(n)===cs)return[];var e=Zn(n);return[ui(n),e,ui(e)]}function ll(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var o=t.mainAxis,a=o===void 0?!0:o,i=t.altAxis,c=i===void 0?!0:i,u=t.fallbackPlacements,s=t.padding,h=t.boundary,p=t.rootBoundary,m=t.altBoundary,_=t.flipVariations,E=_===void 0?!0:_,A=t.allowedAutoPlacements,C=e.options.placement,O=ut(C),L=O===C,B=u||(L||!E?[Zn(C)]:ol(C)),M=[C].concat(B).reduce(function(Ae,Te){return Ae.concat(ut(Te)===cs?al(e,{placement:Te,boundary:h,rootBoundary:p,padding:s,flipVariations:E,allowedAutoPlacements:A}):Te)},[]),U=e.rects.reference,V=e.rects.popper,Q=new Map,X=!0,P=M[0],F=0;F<M.length;F++){var Y=M[F],Z=ut(Y),le=nn(Y)===Pt,Ne=[Oe,Be].indexOf(Z)>=0,ue=Ne?"width":"height",ie=sn(e,{placement:Y,boundary:h,rootBoundary:p,altBoundary:m,padding:s}),ae=Ne?le?Ye:Le:le?Be:Oe;U[ue]>V[ue]&&(ae=Zn(ae));var N=Zn(ae),x=[];if(a&&x.push(ie[Z]<=0),c&&x.push(ie[ae]<=0,ie[N]<=0),x.every(function(Ae){return Ae})){P=Y,X=!1;break}Q.set(Y,x)}if(X)for(var K=E?3:1,Ce=function(Te){var Me=M.find(function(ye){var ge=Q.get(ye);if(ge)return ge.slice(0,Te).every(function(fe){return fe})});if(Me)return P=Me,"break"},Se=K;Se>0;Se--){var De=Ce(Se);if(De==="break")break}e.placement!==P&&(e.modifiersData[r]._skip=!0,e.placement=P,e.reset=!0)}}const ka={name:"flip",enabled:!0,phase:"main",fn:ll,requiresIfExists:["offset"],data:{_skip:!1}};function hi(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function fi(n){return[Oe,Ye,Be,Le].some(function(e){return n[e]>=0})}function cl(n){var e=n.state,t=n.name,r=e.rects.reference,o=e.rects.popper,a=e.modifiersData.preventOverflow,i=sn(e,{elementContext:"reference"}),c=sn(e,{altBoundary:!0}),u=hi(i,r),s=hi(c,o,a),h=fi(u),p=fi(s);e.modifiersData[t]={referenceClippingOffsets:u,popperEscapeOffsets:s,isReferenceHidden:h,hasPopperEscaped:p},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":p})}const xa={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:cl};function ul(n,e,t){var r=ut(n),o=[Le,Oe].indexOf(r)>=0?-1:1,a=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,i=a[0],c=a[1];return i=i||0,c=(c||0)*o,[Le,Ye].indexOf(r)>=0?{x:c,y:i}:{x:i,y:c}}function dl(n){var e=n.state,t=n.options,r=n.name,o=t.offset,a=o===void 0?[0,0]:o,i=mr.reduce(function(h,p){return h[p]=ul(p,e.rects,a),h},{}),c=i[e.placement],u=c.x,s=c.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=u,e.modifiersData.popperOffsets.y+=s),e.modifiersData[r]=i}const $a={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:dl};function hl(n){var e=n.state,t=n.name;e.modifiersData[t]=Sa({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const Cr={name:"popperOffsets",enabled:!0,phase:"read",fn:hl,data:{}};function fl(n){return n==="x"?"y":"x"}function pl(n){var e=n.state,t=n.options,r=n.name,o=t.mainAxis,a=o===void 0?!0:o,i=t.altAxis,c=i===void 0?!1:i,u=t.boundary,s=t.rootBoundary,h=t.altBoundary,p=t.padding,m=t.tether,_=m===void 0?!0:m,E=t.tetherOffset,A=E===void 0?0:E,C=sn(e,{boundary:u,rootBoundary:s,padding:p,altBoundary:h}),O=ut(e.placement),L=nn(e.placement),B=!L,M=br(O),U=fl(M),V=e.modifiersData.popperOffsets,Q=e.rects.reference,X=e.rects.popper,P=typeof A=="function"?A(Object.assign({},e.rects,{placement:e.placement})):A,F=typeof P=="number"?{mainAxis:P,altAxis:P}:Object.assign({mainAxis:0,altAxis:0},P),Y=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,Z={x:0,y:0};if(V){if(a){var le,Ne=M==="y"?Oe:Le,ue=M==="y"?Be:Ye,ie=M==="y"?"height":"width",ae=V[M],N=ae+C[Ne],x=ae-C[ue],K=_?-X[ie]/2:0,Ce=L===Pt?Q[ie]:X[ie],Se=L===Pt?-X[ie]:-Q[ie],De=e.elements.arrow,Ae=_&&De?vr(De):{width:0,height:0},Te=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Na(),Me=Te[Ne],ye=Te[ue],ge=gn(0,Q[ie],Ae[ie]),fe=B?Q[ie]/2-K-ge-Me-F.mainAxis:Ce-ge-Me-F.mainAxis,pt=B?-Q[ie]/2+K+ge+ye+F.mainAxis:Se+ge+ye+F.mainAxis,He=e.elements.arrow&&Sn(e.elements.arrow),Fe=He?M==="y"?He.clientTop||0:He.clientLeft||0:0,qe=(le=Y==null?void 0:Y[M])!=null?le:0,y=ae+fe-qe-Fe,j=ae+pt-qe,$=gn(_?is(N,y):N,ae,_?It(x,j):x);V[M]=$,Z[M]=$-ae}if(c){var ee,de=M==="x"?Oe:Le,tt=M==="x"?Be:Ye,ke=V[U],I=U==="y"?"height":"width",ve=ke+C[de],be=ke-C[tt],Ge=[Oe,Le].indexOf(O)!==-1,it=(ee=Y==null?void 0:Y[U])!=null?ee:0,Et=Ge?ve:ke-Q[I]-X[I]-it+F.altAxis,d=Ge?ke+Q[I]+X[I]-it-F.altAxis:be,W=_&&Ge?Yo(Et,ke,d):gn(_?Et:ve,ke,_?d:be);V[U]=W,Z[U]=W-ke}e.modifiersData[r]=Z}}const Oa={name:"preventOverflow",enabled:!0,phase:"main",fn:pl,requiresIfExists:["offset"]};function ml(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function _l(n){return n===Ke(n)||!Xe(n)?Nr(n):ml(n)}function gl(n){var e=n.getBoundingClientRect(),t=en(e.width)/n.offsetWidth||1,r=en(e.height)/n.offsetHeight||1;return t!==1||r!==1}function vl(n,e,t){t===void 0&&(t=!1);var r=Xe(e),o=Xe(e)&&gl(e),a=St(e),i=tn(n,o,t),c={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!t)&&((ht(e)!=="body"||Tr(a))&&(c=_l(e)),Xe(e)?(u=tn(e,!0),u.x+=e.clientLeft,u.y+=e.clientTop):a&&(u.x=Ar(a))),{x:i.left+c.scrollLeft-u.x,y:i.top+c.scrollTop-u.y,width:i.width,height:i.height}}function bl(n){var e=new Map,t=new Set,r=[];n.forEach(function(a){e.set(a.name,a)});function o(a){t.add(a.name);var i=[].concat(a.requires||[],a.requiresIfExists||[]);i.forEach(function(c){if(!t.has(c)){var u=e.get(c);u&&o(u)}}),r.push(a)}return n.forEach(function(a){t.has(a.name)||o(a)}),r}function yl(n){var e=bl(n);return ba.reduce(function(t,r){return t.concat(e.filter(function(o){return o.phase===r}))},[])}function El(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function Nl(n){var e=n.reduce(function(t,r){var o=t[r.name];return t[r.name]=o?Object.assign({},o,r,{options:Object.assign({},o.options,r.options),data:Object.assign({},o.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}var pi={placement:"bottom",modifiers:[],strategy:"absolute"};function mi(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function ds(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,r=t===void 0?[]:t,o=e.defaultOptions,a=o===void 0?pi:o;return function(c,u,s){s===void 0&&(s=a);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},pi,a),modifiersData:{},elements:{reference:c,popper:u},attributes:{},styles:{}},p=[],m=!1,_={state:h,setOptions:function(O){var L=typeof O=="function"?O(h.options):O;A(),h.options=Object.assign({},a,h.options,L),h.scrollParents={reference:Ht(c)?vn(c):c.contextElement?vn(c.contextElement):[],popper:vn(u)};var B=yl(Nl([].concat(r,h.options.modifiers)));return h.orderedModifiers=B.filter(function(M){return M.enabled}),E(),_.update()},forceUpdate:function(){if(!m){var O=h.elements,L=O.reference,B=O.popper;if(mi(L,B)){h.rects={reference:vl(L,Sn(B),h.options.strategy==="fixed"),popper:vr(B)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(F){return h.modifiersData[F.name]=Object.assign({},F.data)});for(var M=0;M<h.orderedModifiers.length;M++){if(h.reset===!0){h.reset=!1,M=-1;continue}var U=h.orderedModifiers[M],V=U.fn,Q=U.options,X=Q===void 0?{}:Q,P=U.name;typeof V=="function"&&(h=V({state:h,options:X,name:P,instance:_})||h)}}}},update:El(function(){return new Promise(function(C){_.forceUpdate(),C(h)})}),destroy:function(){A(),m=!0}};if(!mi(c,u))return _;_.setOptions(s).then(function(C){!m&&s.onFirstUpdate&&s.onFirstUpdate(C)});function E(){h.orderedModifiers.forEach(function(C){var O=C.name,L=C.options,B=L===void 0?{}:L,M=C.effect;if(typeof M=="function"){var U=M({state:h,name:O,instance:_,options:B}),V=function(){};p.push(U||V)}})}function A(){p.forEach(function(C){return C()}),p=[]}return _}}var Al=ds(),Tl=[Er,Cr,yr,gr],Cl=ds({defaultModifiers:Tl}),wl=[Er,Cr,yr,gr,$a,ka,Oa,Ca,xa],wr=ds({defaultModifiers:wl});const La=Object.freeze(Object.defineProperty({__proto__:null,afterMain:ma,afterRead:ha,afterWrite:va,applyStyles:gr,arrow:Ca,auto:cs,basePlacements:on,beforeMain:fa,beforeRead:ua,beforeWrite:_a,bottom:Be,clippingParents:la,computeStyles:yr,createPopper:wr,createPopperBase:Al,createPopperLite:Cl,detectOverflow:sn,end:Zt,eventListeners:Er,flip:ka,hide:xa,left:Le,main:pa,modifierPhases:ba,offset:$a,placements:mr,popper:Kt,popperGenerator:ds,popperOffsets:Cr,preventOverflow:Oa,read:da,reference:ca,right:Ye,start:Pt,top:Oe,variationPlacements:Js,viewport:pr,write:ga},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.6 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Nt=new Map,Ls={set(n,e,t){Nt.has(n)||Nt.set(n,new Map);const r=Nt.get(n);if(!r.has(e)&&r.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`);return}r.set(e,t)},get(n,e){return Nt.has(n)&&Nt.get(n).get(e)||null},remove(n,e){if(!Nt.has(n))return;const t=Nt.get(n);t.delete(e),t.size===0&&Nt.delete(n)}},Sl=1e6,kl=1e3,tr="transitionend",Da=n=>(n&&window.CSS&&window.CSS.escape&&(n=n.replace(/#([^\s"#']+)/g,(e,t)=>`#${CSS.escape(t)}`)),n),xl=n=>n==null?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase(),$l=n=>{do n+=Math.floor(Math.random()*Sl);while(document.getElementById(n));return n},Ol=n=>{if(!n)return 0;let{transitionDuration:e,transitionDelay:t}=window.getComputedStyle(n);const r=Number.parseFloat(e),o=Number.parseFloat(t);return!r&&!o?0:(e=e.split(",")[0],t=t.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(t))*kl)},Ma=n=>{n.dispatchEvent(new Event(tr))},_t=n=>!n||typeof n!="object"?!1:(typeof n.jquery<"u"&&(n=n[0]),typeof n.nodeType<"u"),Tt=n=>_t(n)?n.jquery?n[0]:n:typeof n=="string"&&n.length>0?document.querySelector(Da(n)):null,ln=n=>{if(!_t(n)||n.getClientRects().length===0)return!1;const e=getComputedStyle(n).getPropertyValue("visibility")==="visible",t=n.closest("details:not([open])");if(!t)return e;if(t!==n){const r=n.closest("summary");if(r&&r.parentNode!==t||r===null)return!1}return e},Ct=n=>!n||n.nodeType!==Node.ELEMENT_NODE||n.classList.contains("disabled")?!0:typeof n.disabled<"u"?n.disabled:n.hasAttribute("disabled")&&n.getAttribute("disabled")!=="false",Ia=n=>{if(!document.documentElement.attachShadow)return null;if(typeof n.getRootNode=="function"){const e=n.getRootNode();return e instanceof ShadowRoot?e:null}return n instanceof ShadowRoot?n:n.parentNode?Ia(n.parentNode):null},as=()=>{},kn=n=>{n.offsetHeight},Ra=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Ds=[],Ll=n=>{document.readyState==="loading"?(Ds.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of Ds)e()}),Ds.push(n)):n()},Je=()=>document.documentElement.dir==="rtl",et=n=>{Ll(()=>{const e=Ra();if(e){const t=n.NAME,r=e.fn[t];e.fn[t]=n.jQueryInterface,e.fn[t].Constructor=n,e.fn[t].noConflict=()=>(e.fn[t]=r,n.jQueryInterface)}})},Pe=(n,e=[],t=n)=>typeof n=="function"?n.call(...e):t,Pa=(n,e,t=!0)=>{if(!t){Pe(n);return}const o=Ol(e)+5;let a=!1;const i=({target:c})=>{c===e&&(a=!0,e.removeEventListener(tr,i),Pe(n))};e.addEventListener(tr,i),setTimeout(()=>{a||Ma(e)},o)},Sr=(n,e,t,r)=>{const o=n.length;let a=n.indexOf(e);return a===-1?!t&&r?n[o-1]:n[0]:(a+=t?1:-1,r&&(a=(a+o)%o),n[Math.max(0,Math.min(a,o-1))])},Dl=/[^.]*(?=\..*)\.|.*/,Ml=/\..*/,Il=/::\d+$/,Ms={};let _i=1;const Ha={mouseenter:"mouseover",mouseleave:"mouseout"},Rl=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Fa(n,e){return e&&`${e}::${_i++}`||n.uidEvent||_i++}function Va(n){const e=Fa(n);return n.uidEvent=e,Ms[e]=Ms[e]||{},Ms[e]}function Pl(n,e){return function t(r){return kr(r,{delegateTarget:n}),t.oneOff&&T.off(n,r.type,e),e.apply(n,[r])}}function Hl(n,e,t){return function r(o){const a=n.querySelectorAll(e);for(let{target:i}=o;i&&i!==this;i=i.parentNode)for(const c of a)if(c===i)return kr(o,{delegateTarget:i}),r.oneOff&&T.off(n,o.type,e,t),t.apply(i,[o])}}function Wa(n,e,t=null){return Object.values(n).find(r=>r.callable===e&&r.delegationSelector===t)}function ja(n,e,t){const r=typeof e=="string",o=r?t:e||t;let a=Ua(n);return Rl.has(a)||(a=n),[r,o,a]}function gi(n,e,t,r,o){if(typeof e!="string"||!n)return;let[a,i,c]=ja(e,t,r);e in Ha&&(i=(E=>function(A){if(!A.relatedTarget||A.relatedTarget!==A.delegateTarget&&!A.delegateTarget.contains(A.relatedTarget))return E.call(this,A)})(i));const u=Va(n),s=u[c]||(u[c]={}),h=Wa(s,i,a?t:null);if(h){h.oneOff=h.oneOff&&o;return}const p=Fa(i,e.replace(Dl,"")),m=a?Hl(n,t,i):Pl(n,i);m.delegationSelector=a?t:null,m.callable=i,m.oneOff=o,m.uidEvent=p,s[p]=m,n.addEventListener(c,m,a)}function nr(n,e,t,r,o){const a=Wa(e[t],r,o);a&&(n.removeEventListener(t,a,!!o),delete e[t][a.uidEvent])}function Fl(n,e,t,r){const o=e[t]||{};for(const[a,i]of Object.entries(o))a.includes(r)&&nr(n,e,t,i.callable,i.delegationSelector)}function Ua(n){return n=n.replace(Ml,""),Ha[n]||n}const T={on(n,e,t,r){gi(n,e,t,r,!1)},one(n,e,t,r){gi(n,e,t,r,!0)},off(n,e,t,r){if(typeof e!="string"||!n)return;const[o,a,i]=ja(e,t,r),c=i!==e,u=Va(n),s=u[i]||{},h=e.startsWith(".");if(typeof a<"u"){if(!Object.keys(s).length)return;nr(n,u,i,a,o?t:null);return}if(h)for(const p of Object.keys(u))Fl(n,u,p,e.slice(1));for(const[p,m]of Object.entries(s)){const _=p.replace(Il,"");(!c||e.includes(_))&&nr(n,u,i,m.callable,m.delegationSelector)}},trigger(n,e,t){if(typeof e!="string"||!n)return null;const r=Ra(),o=Ua(e),a=e!==o;let i=null,c=!0,u=!0,s=!1;a&&r&&(i=r.Event(e,t),r(n).trigger(i),c=!i.isPropagationStopped(),u=!i.isImmediatePropagationStopped(),s=i.isDefaultPrevented());const h=kr(new Event(e,{bubbles:c,cancelable:!0}),t);return s&&h.preventDefault(),u&&n.dispatchEvent(h),h.defaultPrevented&&i&&i.preventDefault(),h}};function kr(n,e={}){for(const[t,r]of Object.entries(e))try{n[t]=r}catch{Object.defineProperty(n,t,{configurable:!0,get(){return r}})}return n}function vi(n){if(n==="true")return!0;if(n==="false")return!1;if(n===Number(n).toString())return Number(n);if(n===""||n==="null")return null;if(typeof n!="string")return n;try{return JSON.parse(decodeURIComponent(n))}catch{return n}}function Is(n){return n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const gt={setDataAttribute(n,e,t){n.setAttribute(`data-bs-${Is(e)}`,t)},removeDataAttribute(n,e){n.removeAttribute(`data-bs-${Is(e)}`)},getDataAttributes(n){if(!n)return{};const e={},t=Object.keys(n.dataset).filter(r=>r.startsWith("bs")&&!r.startsWith("bsConfig"));for(const r of t){let o=r.replace(/^bs/,"");o=o.charAt(0).toLowerCase()+o.slice(1),e[o]=vi(n.dataset[r])}return e},getDataAttribute(n,e){return vi(n.getAttribute(`data-bs-${Is(e)}`))}};class xn{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const r=_t(t)?gt.getDataAttribute(t,"config"):{};return{...this.constructor.Default,...typeof r=="object"?r:{},..._t(t)?gt.getDataAttributes(t):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,t=this.constructor.DefaultType){for(const[r,o]of Object.entries(t)){const a=e[r],i=_t(a)?"element":xl(a);if(!new RegExp(o).test(i))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${r}" provided type "${i}" but expected type "${o}".`)}}}const Vl="5.3.6";class rt extends xn{constructor(e,t){super(),e=Tt(e),e&&(this._element=e,this._config=this._getConfig(t),Ls.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Ls.remove(this._element,this.constructor.DATA_KEY),T.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t,r=!0){Pa(e,t,r)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return Ls.get(Tt(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,typeof t=="object"?t:null)}static get VERSION(){return Vl}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const Rs=n=>{let e=n.getAttribute("data-bs-target");if(!e||e==="#"){let t=n.getAttribute("href");if(!t||!t.includes("#")&&!t.startsWith("."))return null;t.includes("#")&&!t.startsWith("#")&&(t=`#${t.split("#")[1]}`),e=t&&t!=="#"?t.trim():null}return e?e.split(",").map(t=>Da(t)).join(","):null},H={find(n,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,n))},findOne(n,e=document.documentElement){return Element.prototype.querySelector.call(e,n)},children(n,e){return[].concat(...n.children).filter(t=>t.matches(e))},parents(n,e){const t=[];let r=n.parentNode.closest(e);for(;r;)t.push(r),r=r.parentNode.closest(e);return t},prev(n,e){let t=n.previousElementSibling;for(;t;){if(t.matches(e))return[t];t=t.previousElementSibling}return[]},next(n,e){let t=n.nextElementSibling;for(;t;){if(t.matches(e))return[t];t=t.nextElementSibling}return[]},focusableChildren(n){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(t=>`${t}:not([tabindex^="-"])`).join(",");return this.find(e,n).filter(t=>!Ct(t)&&ln(t))},getSelectorFromElement(n){const e=Rs(n);return e&&H.findOne(e)?e:null},getElementFromSelector(n){const e=Rs(n);return e?H.findOne(e):null},getMultipleElementsFromSelector(n){const e=Rs(n);return e?H.find(e):[]}},hs=(n,e="hide")=>{const t=`click.dismiss${n.EVENT_KEY}`,r=n.NAME;T.on(document,t,`[data-bs-dismiss="${r}"]`,function(o){if(["A","AREA"].includes(this.tagName)&&o.preventDefault(),Ct(this))return;const a=H.getElementFromSelector(this)||this.closest(`.${r}`);n.getOrCreateInstance(a)[e]()})},Wl="alert",jl="bs.alert",Ba=`.${jl}`,Ul=`close${Ba}`,Bl=`closed${Ba}`,Yl="fade",Kl="show";class fs extends rt{static get NAME(){return Wl}close(){if(T.trigger(this._element,Ul).defaultPrevented)return;this._element.classList.remove(Kl);const t=this._element.classList.contains(Yl);this._queueCallback(()=>this._destroyElement(),this._element,t)}_destroyElement(){this._element.remove(),T.trigger(this._element,Bl),this.dispose()}static jQueryInterface(e){return this.each(function(){const t=fs.getOrCreateInstance(this);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}hs(fs,"close");et(fs);const ql="button",Gl="bs.button",zl=`.${Gl}`,Ql=".data-api",Xl="active",bi='[data-bs-toggle="button"]',Jl=`click${zl}${Ql}`;class ps extends rt{static get NAME(){return ql}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Xl))}static jQueryInterface(e){return this.each(function(){const t=ps.getOrCreateInstance(this);e==="toggle"&&t[e]()})}}T.on(document,Jl,bi,n=>{n.preventDefault();const e=n.target.closest(bi);ps.getOrCreateInstance(e).toggle()});et(ps);const Zl="swipe",cn=".bs.swipe",ec=`touchstart${cn}`,tc=`touchmove${cn}`,nc=`touchend${cn}`,sc=`pointerdown${cn}`,rc=`pointerup${cn}`,ic="touch",ac="pen",oc="pointer-event",lc=40,cc={endCallback:null,leftCallback:null,rightCallback:null},uc={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class os extends xn{constructor(e,t){super(),this._element=e,!(!e||!os.isSupported())&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return cc}static get DefaultType(){return uc}static get NAME(){return Zl}dispose(){T.off(this._element,cn)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),Pe(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=lc)return;const t=e/this._deltaX;this._deltaX=0,t&&Pe(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(T.on(this._element,sc,e=>this._start(e)),T.on(this._element,rc,e=>this._end(e)),this._element.classList.add(oc)):(T.on(this._element,ec,e=>this._start(e)),T.on(this._element,tc,e=>this._move(e)),T.on(this._element,nc,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===ac||e.pointerType===ic)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const dc="carousel",hc="bs.carousel",kt=`.${hc}`,Ya=".data-api",fc="ArrowLeft",pc="ArrowRight",mc=500,hn="next",Bt="prev",qt="left",es="right",_c=`slide${kt}`,Ps=`slid${kt}`,gc=`keydown${kt}`,vc=`mouseenter${kt}`,bc=`mouseleave${kt}`,yc=`dragstart${kt}`,Ec=`load${kt}${Ya}`,Nc=`click${kt}${Ya}`,Ka="carousel",Un="active",Ac="slide",Tc="carousel-item-end",Cc="carousel-item-start",wc="carousel-item-next",Sc="carousel-item-prev",qa=".active",Ga=".carousel-item",kc=qa+Ga,xc=".carousel-item img",$c=".carousel-indicators",Oc="[data-bs-slide], [data-bs-slide-to]",Lc='[data-bs-ride="carousel"]',Dc={[fc]:es,[pc]:qt},Mc={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Ic={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class $n extends rt{constructor(e,t){super(e,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=H.findOne($c,this._element),this._addEventListeners(),this._config.ride===Ka&&this.cycle()}static get Default(){return Mc}static get DefaultType(){return Ic}static get NAME(){return dc}next(){this._slide(hn)}nextWhenVisible(){!document.hidden&&ln(this._element)&&this.next()}prev(){this._slide(Bt)}pause(){this._isSliding&&Ma(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){T.one(this._element,Ps,()=>this.cycle());return}this.cycle()}}to(e){const t=this._getItems();if(e>t.length-1||e<0)return;if(this._isSliding){T.one(this._element,Ps,()=>this.to(e));return}const r=this._getItemIndex(this._getActive());if(r===e)return;const o=e>r?hn:Bt;this._slide(o,t[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&T.on(this._element,gc,e=>this._keydown(e)),this._config.pause==="hover"&&(T.on(this._element,vc,()=>this.pause()),T.on(this._element,bc,()=>this._maybeEnableCycle())),this._config.touch&&os.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const r of H.find(xc,this._element))T.on(r,yc,o=>o.preventDefault());const t={leftCallback:()=>this._slide(this._directionToOrder(qt)),rightCallback:()=>this._slide(this._directionToOrder(es)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),mc+this._config.interval))}};this._swipeHelper=new os(this._element,t)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=Dc[e.key];t&&(e.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const t=H.findOne(qa,this._indicatorsElement);t.classList.remove(Un),t.removeAttribute("aria-current");const r=H.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);r&&(r.classList.add(Un),r.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(e,t=null){if(this._isSliding)return;const r=this._getActive(),o=e===hn,a=t||Sr(this._getItems(),r,o,this._config.wrap);if(a===r)return;const i=this._getItemIndex(a),c=_=>T.trigger(this._element,_,{relatedTarget:a,direction:this._orderToDirection(e),from:this._getItemIndex(r),to:i});if(c(_c).defaultPrevented||!r||!a)return;const s=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(i),this._activeElement=a;const h=o?Cc:Tc,p=o?wc:Sc;a.classList.add(p),kn(a),r.classList.add(h),a.classList.add(h);const m=()=>{a.classList.remove(h,p),a.classList.add(Un),r.classList.remove(Un,p,h),this._isSliding=!1,c(Ps)};this._queueCallback(m,r,this._isAnimated()),s&&this.cycle()}_isAnimated(){return this._element.classList.contains(Ac)}_getActive(){return H.findOne(kc,this._element)}_getItems(){return H.find(Ga,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return Je()?e===qt?Bt:hn:e===qt?hn:Bt}_orderToDirection(e){return Je()?e===Bt?qt:es:e===Bt?es:qt}static jQueryInterface(e){return this.each(function(){const t=$n.getOrCreateInstance(this,e);if(typeof e=="number"){t.to(e);return}if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}T.on(document,Nc,Oc,function(n){const e=H.getElementFromSelector(this);if(!e||!e.classList.contains(Ka))return;n.preventDefault();const t=$n.getOrCreateInstance(e),r=this.getAttribute("data-bs-slide-to");if(r){t.to(r),t._maybeEnableCycle();return}if(gt.getDataAttribute(this,"slide")==="next"){t.next(),t._maybeEnableCycle();return}t.prev(),t._maybeEnableCycle()});T.on(window,Ec,()=>{const n=H.find(Lc);for(const e of n)$n.getOrCreateInstance(e)});et($n);const Rc="collapse",Pc="bs.collapse",On=`.${Pc}`,Hc=".data-api",Fc=`show${On}`,Vc=`shown${On}`,Wc=`hide${On}`,jc=`hidden${On}`,Uc=`click${On}${Hc}`,Hs="show",zt="collapse",Bn="collapsing",Bc="collapsed",Yc=`:scope .${zt} .${zt}`,Kc="collapse-horizontal",qc="width",Gc="height",zc=".collapse.show, .collapse.collapsing",sr='[data-bs-toggle="collapse"]',Qc={parent:null,toggle:!0},Xc={parent:"(null|element)",toggle:"boolean"};class yn extends rt{constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const r=H.find(sr);for(const o of r){const a=H.getSelectorFromElement(o),i=H.find(a).filter(c=>c===this._element);a!==null&&i.length&&this._triggerArray.push(o)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Qc}static get DefaultType(){return Xc}static get NAME(){return Rc}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(zc).filter(c=>c!==this._element).map(c=>yn.getOrCreateInstance(c,{toggle:!1}))),e.length&&e[0]._isTransitioning||T.trigger(this._element,Fc).defaultPrevented)return;for(const c of e)c.hide();const r=this._getDimension();this._element.classList.remove(zt),this._element.classList.add(Bn),this._element.style[r]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const o=()=>{this._isTransitioning=!1,this._element.classList.remove(Bn),this._element.classList.add(zt,Hs),this._element.style[r]="",T.trigger(this._element,Vc)},i=`scroll${r[0].toUpperCase()+r.slice(1)}`;this._queueCallback(o,this._element,!0),this._element.style[r]=`${this._element[i]}px`}hide(){if(this._isTransitioning||!this._isShown()||T.trigger(this._element,Wc).defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,kn(this._element),this._element.classList.add(Bn),this._element.classList.remove(zt,Hs);for(const o of this._triggerArray){const a=H.getElementFromSelector(o);a&&!this._isShown(a)&&this._addAriaAndCollapsedClass([o],!1)}this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(Bn),this._element.classList.add(zt),T.trigger(this._element,jc)};this._element.style[t]="",this._queueCallback(r,this._element,!0)}_isShown(e=this._element){return e.classList.contains(Hs)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=Tt(e.parent),e}_getDimension(){return this._element.classList.contains(Kc)?qc:Gc}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(sr);for(const t of e){const r=H.getElementFromSelector(t);r&&this._addAriaAndCollapsedClass([t],this._isShown(r))}}_getFirstLevelChildren(e){const t=H.find(Yc,this._config.parent);return H.find(e,this._config.parent).filter(r=>!t.includes(r))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const r of e)r.classList.toggle(Bc,!t),r.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return typeof e=="string"&&/show|hide/.test(e)&&(t.toggle=!1),this.each(function(){const r=yn.getOrCreateInstance(this,t);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e]()}})}}T.on(document,Uc,sr,function(n){(n.target.tagName==="A"||n.delegateTarget&&n.delegateTarget.tagName==="A")&&n.preventDefault();for(const e of H.getMultipleElementsFromSelector(this))yn.getOrCreateInstance(e,{toggle:!1}).toggle()});et(yn);const yi="dropdown",Jc="bs.dropdown",Wt=`.${Jc}`,xr=".data-api",Zc="Escape",Ei="Tab",eu="ArrowUp",Ni="ArrowDown",tu=2,nu=`hide${Wt}`,su=`hidden${Wt}`,ru=`show${Wt}`,iu=`shown${Wt}`,za=`click${Wt}${xr}`,Qa=`keydown${Wt}${xr}`,au=`keyup${Wt}${xr}`,Gt="show",ou="dropup",lu="dropend",cu="dropstart",uu="dropup-center",du="dropdown-center",Dt='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',hu=`${Dt}.${Gt}`,ts=".dropdown-menu",fu=".navbar",pu=".navbar-nav",mu=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",_u=Je()?"top-end":"top-start",gu=Je()?"top-start":"top-end",vu=Je()?"bottom-end":"bottom-start",bu=Je()?"bottom-start":"bottom-end",yu=Je()?"left-start":"right-start",Eu=Je()?"right-start":"left-start",Nu="top",Au="bottom",Tu={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Cu={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class dt extends rt{constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=H.next(this._element,ts)[0]||H.prev(this._element,ts)[0]||H.findOne(ts,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Tu}static get DefaultType(){return Cu}static get NAME(){return yi}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Ct(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!T.trigger(this._element,ru,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(pu))for(const r of[].concat(...document.body.children))T.on(r,"mouseover",as);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Gt),this._element.classList.add(Gt),T.trigger(this._element,iu,e)}}hide(){if(Ct(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!T.trigger(this._element,nu,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))T.off(r,"mouseover",as);this._popper&&this._popper.destroy(),this._menu.classList.remove(Gt),this._element.classList.remove(Gt),this._element.setAttribute("aria-expanded","false"),gt.removeDataAttribute(this._menu,"popper"),T.trigger(this._element,su,e),this._element.focus()}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!_t(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${yi.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof La>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let e=this._element;this._config.reference==="parent"?e=this._parent:_t(this._config.reference)?e=Tt(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const t=this._getPopperConfig();this._popper=wr(e,this._menu,t)}_isShown(){return this._menu.classList.contains(Gt)}_getPlacement(){const e=this._parent;if(e.classList.contains(lu))return yu;if(e.classList.contains(cu))return Eu;if(e.classList.contains(uu))return Nu;if(e.classList.contains(du))return Au;const t=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(ou)?t?gu:_u:t?bu:vu}_detectNavbar(){return this._element.closest(fu)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(t=>Number.parseInt(t,10)):typeof e=="function"?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(gt.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...Pe(this._config.popperConfig,[void 0,e])}}_selectMenuItem({key:e,target:t}){const r=H.find(mu,this._menu).filter(o=>ln(o));r.length&&Sr(r,t,e===Ni,!r.includes(t)).focus()}static jQueryInterface(e){return this.each(function(){const t=dt.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}static clearMenus(e){if(e.button===tu||e.type==="keyup"&&e.key!==Ei)return;const t=H.find(hu);for(const r of t){const o=dt.getInstance(r);if(!o||o._config.autoClose===!1)continue;const a=e.composedPath(),i=a.includes(o._menu);if(a.includes(o._element)||o._config.autoClose==="inside"&&!i||o._config.autoClose==="outside"&&i||o._menu.contains(e.target)&&(e.type==="keyup"&&e.key===Ei||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const c={relatedTarget:o._element};e.type==="click"&&(c.clickEvent=e),o._completeHide(c)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName),r=e.key===Zc,o=[eu,Ni].includes(e.key);if(!o&&!r||t&&!r)return;e.preventDefault();const a=this.matches(Dt)?this:H.prev(this,Dt)[0]||H.next(this,Dt)[0]||H.findOne(Dt,e.delegateTarget.parentNode),i=dt.getOrCreateInstance(a);if(o){e.stopPropagation(),i.show(),i._selectMenuItem(e);return}i._isShown()&&(e.stopPropagation(),i.hide(),a.focus())}}T.on(document,Qa,Dt,dt.dataApiKeydownHandler);T.on(document,Qa,ts,dt.dataApiKeydownHandler);T.on(document,za,dt.clearMenus);T.on(document,au,dt.clearMenus);T.on(document,za,Dt,function(n){n.preventDefault(),dt.getOrCreateInstance(this).toggle()});et(dt);const Xa="backdrop",wu="fade",Ai="show",Ti=`mousedown.bs.${Xa}`,Su={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},ku={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Ja extends xn{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Su}static get DefaultType(){return ku}static get NAME(){return Xa}show(e){if(!this._config.isVisible){Pe(e);return}this._append();const t=this._getElement();this._config.isAnimated&&kn(t),t.classList.add(Ai),this._emulateAnimation(()=>{Pe(e)})}hide(e){if(!this._config.isVisible){Pe(e);return}this._getElement().classList.remove(Ai),this._emulateAnimation(()=>{this.dispose(),Pe(e)})}dispose(){this._isAppended&&(T.off(this._element,Ti),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(wu),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=Tt(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),T.on(e,Ti,()=>{Pe(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){Pa(e,this._getElement(),this._config.isAnimated)}}const xu="focustrap",$u="bs.focustrap",ls=`.${$u}`,Ou=`focusin${ls}`,Lu=`keydown.tab${ls}`,Du="Tab",Mu="forward",Ci="backward",Iu={autofocus:!0,trapElement:null},Ru={autofocus:"boolean",trapElement:"element"};class Za extends xn{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Iu}static get DefaultType(){return Ru}static get NAME(){return xu}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),T.off(document,ls),T.on(document,Ou,e=>this._handleFocusin(e)),T.on(document,Lu,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,T.off(document,ls))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const r=H.focusableChildren(t);r.length===0?t.focus():this._lastTabNavDirection===Ci?r[r.length-1].focus():r[0].focus()}_handleKeydown(e){e.key===Du&&(this._lastTabNavDirection=e.shiftKey?Ci:Mu)}}const wi=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Si=".sticky-top",Yn="padding-right",ki="margin-right";class rr{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Yn,t=>t+e),this._setElementAttributes(wi,Yn,t=>t+e),this._setElementAttributes(Si,ki,t=>t-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Yn),this._resetElementAttributes(wi,Yn),this._resetElementAttributes(Si,ki)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,r){const o=this.getWidth(),a=i=>{if(i!==this._element&&window.innerWidth>i.clientWidth+o)return;this._saveInitialAttribute(i,t);const c=window.getComputedStyle(i).getPropertyValue(t);i.style.setProperty(t,`${r(Number.parseFloat(c))}px`)};this._applyManipulationCallback(e,a)}_saveInitialAttribute(e,t){const r=e.style.getPropertyValue(t);r&&gt.setDataAttribute(e,t,r)}_resetElementAttributes(e,t){const r=o=>{const a=gt.getDataAttribute(o,t);if(a===null){o.style.removeProperty(t);return}gt.removeDataAttribute(o,t),o.style.setProperty(t,a)};this._applyManipulationCallback(e,r)}_applyManipulationCallback(e,t){if(_t(e)){t(e);return}for(const r of H.find(e,this._element))t(r)}}const Pu="modal",Hu="bs.modal",Ze=`.${Hu}`,Fu=".data-api",Vu="Escape",Wu=`hide${Ze}`,ju=`hidePrevented${Ze}`,eo=`hidden${Ze}`,to=`show${Ze}`,Uu=`shown${Ze}`,Bu=`resize${Ze}`,Yu=`click.dismiss${Ze}`,Ku=`mousedown.dismiss${Ze}`,qu=`keydown.dismiss${Ze}`,Gu=`click${Ze}${Fu}`,xi="modal-open",zu="fade",$i="show",Fs="modal-static",Qu=".modal.show",Xu=".modal-dialog",Ju=".modal-body",Zu='[data-bs-toggle="modal"]',ed={backdrop:!0,focus:!0,keyboard:!0},td={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class rn extends rt{constructor(e,t){super(e,t),this._dialog=H.findOne(Xu,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new rr,this._addEventListeners()}static get Default(){return ed}static get DefaultType(){return td}static get NAME(){return Pu}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||T.trigger(this._element,to,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(xi),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||T.trigger(this._element,Wu).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove($i),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){T.off(window,Ze),T.off(this._dialog,Ze),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Ja({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Za({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=H.findOne(Ju,this._dialog);t&&(t.scrollTop=0),kn(this._element),this._element.classList.add($i);const r=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,T.trigger(this._element,Uu,{relatedTarget:e})};this._queueCallback(r,this._dialog,this._isAnimated())}_addEventListeners(){T.on(this._element,qu,e=>{if(e.key===Vu){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),T.on(window,Bu,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),T.on(this._element,Ku,e=>{T.one(this._element,Yu,t=>{if(!(this._element!==e.target||this._element!==t.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(xi),this._resetAdjustments(),this._scrollBar.reset(),T.trigger(this._element,eo)})}_isAnimated(){return this._element.classList.contains(zu)}_triggerBackdropTransition(){if(T.trigger(this._element,ju).defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,r=this._element.style.overflowY;r==="hidden"||this._element.classList.contains(Fs)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(Fs),this._queueCallback(()=>{this._element.classList.remove(Fs),this._queueCallback(()=>{this._element.style.overflowY=r},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),r=t>0;if(r&&!e){const o=Je()?"paddingLeft":"paddingRight";this._element.style[o]=`${t}px`}if(!r&&e){const o=Je()?"paddingRight":"paddingLeft";this._element.style[o]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each(function(){const r=rn.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e](t)}})}}T.on(document,Gu,Zu,function(n){const e=H.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&n.preventDefault(),T.one(e,to,o=>{o.defaultPrevented||T.one(e,eo,()=>{ln(this)&&this.focus()})});const t=H.findOne(Qu);t&&rn.getInstance(t).hide(),rn.getOrCreateInstance(e).toggle(this)});hs(rn);et(rn);const nd="offcanvas",sd="bs.offcanvas",bt=`.${sd}`,no=".data-api",rd=`load${bt}${no}`,id="Escape",Oi="show",Li="showing",Di="hiding",ad="offcanvas-backdrop",so=".offcanvas.show",od=`show${bt}`,ld=`shown${bt}`,cd=`hide${bt}`,Mi=`hidePrevented${bt}`,ro=`hidden${bt}`,ud=`resize${bt}`,dd=`click${bt}${no}`,hd=`keydown.dismiss${bt}`,fd='[data-bs-toggle="offcanvas"]',pd={backdrop:!0,keyboard:!0,scroll:!1},md={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class wt extends rt{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return pd}static get DefaultType(){return md}static get NAME(){return nd}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||T.trigger(this._element,od,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new rr().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Li);const r=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Oi),this._element.classList.remove(Li),T.trigger(this._element,ld,{relatedTarget:e})};this._queueCallback(r,this._element,!0)}hide(){if(!this._isShown||T.trigger(this._element,cd).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Di),this._backdrop.hide();const t=()=>{this._element.classList.remove(Oi,Di),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new rr().reset(),T.trigger(this._element,ro)};this._queueCallback(t,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){T.trigger(this._element,Mi);return}this.hide()},t=!!this._config.backdrop;return new Ja({className:ad,isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?e:null})}_initializeFocusTrap(){return new Za({trapElement:this._element})}_addEventListeners(){T.on(this._element,hd,e=>{if(e.key===id){if(this._config.keyboard){this.hide();return}T.trigger(this._element,Mi)}})}static jQueryInterface(e){return this.each(function(){const t=wt.getOrCreateInstance(this,e);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}T.on(document,dd,fd,function(n){const e=H.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),Ct(this))return;T.one(e,ro,()=>{ln(this)&&this.focus()});const t=H.findOne(so);t&&t!==e&&wt.getInstance(t).hide(),wt.getOrCreateInstance(e).toggle(this)});T.on(window,rd,()=>{for(const n of H.find(so))wt.getOrCreateInstance(n).show()});T.on(window,ud,()=>{for(const n of H.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(n).position!=="fixed"&&wt.getOrCreateInstance(n).hide()});hs(wt);et(wt);const _d=/^aria-[\w-]*$/i,io={"*":["class","dir","id","lang","role",_d],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},gd=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),vd=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,bd=(n,e)=>{const t=n.nodeName.toLowerCase();return e.includes(t)?gd.has(t)?!!vd.test(n.nodeValue):!0:e.filter(r=>r instanceof RegExp).some(r=>r.test(t))};function yd(n,e,t){if(!n.length)return n;if(t&&typeof t=="function")return t(n);const o=new window.DOMParser().parseFromString(n,"text/html"),a=[].concat(...o.body.querySelectorAll("*"));for(const i of a){const c=i.nodeName.toLowerCase();if(!Object.keys(e).includes(c)){i.remove();continue}const u=[].concat(...i.attributes),s=[].concat(e["*"]||[],e[c]||[]);for(const h of u)bd(h,s)||i.removeAttribute(h.nodeName)}return o.body.innerHTML}const Ed="TemplateFactory",Nd={allowList:io,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Ad={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Td={entry:"(string|element|function|null)",selector:"(string|element)"};class Cd extends xn{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Nd}static get DefaultType(){return Ad}static get NAME(){return Ed}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[o,a]of Object.entries(this._config.content))this._setContent(e,a,o);const t=e.children[0],r=this._resolvePossibleFunction(this._config.extraClass);return r&&t.classList.add(...r.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,r]of Object.entries(e))super._typeCheckConfig({selector:t,entry:r},Td)}_setContent(e,t,r){const o=H.findOne(r,e);if(o){if(t=this._resolvePossibleFunction(t),!t){o.remove();return}if(_t(t)){this._putElementInTemplate(Tt(t),o);return}if(this._config.html){o.innerHTML=this._maybeSanitize(t);return}o.textContent=t}}_maybeSanitize(e){return this._config.sanitize?yd(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return Pe(e,[void 0,this])}_putElementInTemplate(e,t){if(this._config.html){t.innerHTML="",t.append(e);return}t.textContent=e.textContent}}const wd="tooltip",Sd=new Set(["sanitize","allowList","sanitizeFn"]),Vs="fade",kd="modal",Kn="show",xd=".tooltip-inner",Ii=`.${kd}`,Ri="hide.bs.modal",fn="hover",Ws="focus",$d="click",Od="manual",Ld="hide",Dd="hidden",Md="show",Id="shown",Rd="inserted",Pd="click",Hd="focusin",Fd="focusout",Vd="mouseenter",Wd="mouseleave",jd={AUTO:"auto",TOP:"top",RIGHT:Je()?"left":"right",BOTTOM:"bottom",LEFT:Je()?"right":"left"},Ud={allowList:io,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Bd={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class yt extends rt{constructor(e,t){if(typeof La>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(e,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Ud}static get DefaultType(){return Bd}static get NAME(){return wd}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),T.off(this._element.closest(Ii),Ri,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=T.trigger(this._element,this.constructor.eventName(Md)),r=(Ia(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!r)return;this._disposePopper();const o=this._getTipElement();this._element.setAttribute("aria-describedby",o.getAttribute("id"));const{container:a}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(a.append(o),T.trigger(this._element,this.constructor.eventName(Rd))),this._popper=this._createPopper(o),o.classList.add(Kn),"ontouchstart"in document.documentElement)for(const c of[].concat(...document.body.children))T.on(c,"mouseover",as);const i=()=>{T.trigger(this._element,this.constructor.eventName(Id)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(i,this.tip,this._isAnimated())}hide(){if(!this._isShown()||T.trigger(this._element,this.constructor.eventName(Ld)).defaultPrevented)return;if(this._getTipElement().classList.remove(Kn),"ontouchstart"in document.documentElement)for(const o of[].concat(...document.body.children))T.off(o,"mouseover",as);this._activeTrigger[$d]=!1,this._activeTrigger[Ws]=!1,this._activeTrigger[fn]=!1,this._isHovered=null;const r=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),T.trigger(this._element,this.constructor.eventName(Dd)))};this._queueCallback(r,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(Vs,Kn),t.classList.add(`bs-${this.constructor.NAME}-auto`);const r=$l(this.constructor.NAME).toString();return t.setAttribute("id",r),this._isAnimated()&&t.classList.add(Vs),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new Cd({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[xd]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Vs)}_isShown(){return this.tip&&this.tip.classList.contains(Kn)}_createPopper(e){const t=Pe(this._config.placement,[this,e,this._element]),r=jd[t.toUpperCase()];return wr(this._element,e,this._getPopperConfig(r))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(t=>Number.parseInt(t,10)):typeof e=="function"?t=>e(t,this._element):e}_resolvePossibleFunction(e){return Pe(e,[this._element,this._element])}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:r=>{this._getTipElement().setAttribute("data-popper-placement",r.state.placement)}}]};return{...t,...Pe(this._config.popperConfig,[void 0,t])}}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e)if(t==="click")T.on(this._element,this.constructor.eventName(Pd),this._config.selector,r=>{this._initializeOnDelegatedTarget(r).toggle()});else if(t!==Od){const r=t===fn?this.constructor.eventName(Vd):this.constructor.eventName(Hd),o=t===fn?this.constructor.eventName(Wd):this.constructor.eventName(Fd);T.on(this._element,r,this._config.selector,a=>{const i=this._initializeOnDelegatedTarget(a);i._activeTrigger[a.type==="focusin"?Ws:fn]=!0,i._enter()}),T.on(this._element,o,this._config.selector,a=>{const i=this._initializeOnDelegatedTarget(a);i._activeTrigger[a.type==="focusout"?Ws:fn]=i._element.contains(a.relatedTarget),i._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},T.on(this._element.closest(Ii),Ri,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=gt.getDataAttributes(this._element);for(const r of Object.keys(t))Sd.has(r)&&delete t[r];return e={...t,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:Tt(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[t,r]of Object.entries(this._config))this.constructor.Default[t]!==r&&(e[t]=r);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const t=yt.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}}et(yt);const Yd="popover",Kd=".popover-header",qd=".popover-body",Gd={...yt.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},zd={...yt.DefaultType,content:"(null|string|element|function)"};class $r extends yt{static get Default(){return Gd}static get DefaultType(){return zd}static get NAME(){return Yd}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Kd]:this._getTitle(),[qd]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const t=$r.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}}et($r);const Qd="scrollspy",Xd="bs.scrollspy",Or=`.${Xd}`,Jd=".data-api",Zd=`activate${Or}`,Pi=`click${Or}`,eh=`load${Or}${Jd}`,th="dropdown-item",Yt="active",nh='[data-bs-spy="scroll"]',js="[href]",sh=".nav, .list-group",Hi=".nav-link",rh=".nav-item",ih=".list-group-item",ah=`${Hi}, ${rh} > ${Hi}, ${ih}`,oh=".dropdown",lh=".dropdown-toggle",ch={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},uh={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class ms extends rt{constructor(e,t){super(e,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return ch}static get DefaultType(){return uh}static get NAME(){return Qd}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=Tt(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(t=>Number.parseFloat(t))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(T.off(this._config.target,Pi),T.on(this._config.target,Pi,js,e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const r=this._rootElement||window,o=t.offsetTop-this._element.offsetTop;if(r.scrollTo){r.scrollTo({top:o,behavior:"smooth"});return}r.scrollTop=o}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(t=>this._observerCallback(t),e)}_observerCallback(e){const t=i=>this._targetLinks.get(`#${i.target.id}`),r=i=>{this._previousScrollData.visibleEntryTop=i.target.offsetTop,this._process(t(i))},o=(this._rootElement||document.documentElement).scrollTop,a=o>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=o;for(const i of e){if(!i.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(i));continue}const c=i.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(a&&c){if(r(i),!o)return;continue}!a&&!c&&r(i)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=H.find(js,this._config.target);for(const t of e){if(!t.hash||Ct(t))continue;const r=H.findOne(decodeURI(t.hash),this._element);ln(r)&&(this._targetLinks.set(decodeURI(t.hash),t),this._observableSections.set(t.hash,r))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(Yt),this._activateParents(e),T.trigger(this._element,Zd,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(th)){H.findOne(lh,e.closest(oh)).classList.add(Yt);return}for(const t of H.parents(e,sh))for(const r of H.prev(t,ah))r.classList.add(Yt)}_clearActiveClass(e){e.classList.remove(Yt);const t=H.find(`${js}.${Yt}`,e);for(const r of t)r.classList.remove(Yt)}static jQueryInterface(e){return this.each(function(){const t=ms.getOrCreateInstance(this,e);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}T.on(window,eh,()=>{for(const n of H.find(nh))ms.getOrCreateInstance(n)});et(ms);const dh="tab",hh="bs.tab",jt=`.${hh}`,fh=`hide${jt}`,ph=`hidden${jt}`,mh=`show${jt}`,_h=`shown${jt}`,gh=`click${jt}`,vh=`keydown${jt}`,bh=`load${jt}`,yh="ArrowLeft",Fi="ArrowRight",Eh="ArrowUp",Vi="ArrowDown",Us="Home",Wi="End",Mt="active",ji="fade",Bs="show",Nh="dropdown",ao=".dropdown-toggle",Ah=".dropdown-menu",Ys=`:not(${ao})`,Th='.list-group, .nav, [role="tablist"]',Ch=".nav-item, .list-group-item",wh=`.nav-link${Ys}, .list-group-item${Ys}, [role="tab"]${Ys}`,oo='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Ks=`${wh}, ${oo}`,Sh=`.${Mt}[data-bs-toggle="tab"], .${Mt}[data-bs-toggle="pill"], .${Mt}[data-bs-toggle="list"]`;class an extends rt{constructor(e){super(e),this._parent=this._element.closest(Th),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),T.on(this._element,vh,t=>this._keydown(t)))}static get NAME(){return dh}show(){const e=this._element;if(this._elemIsActive(e))return;const t=this._getActiveElem(),r=t?T.trigger(t,fh,{relatedTarget:e}):null;T.trigger(e,mh,{relatedTarget:t}).defaultPrevented||r&&r.defaultPrevented||(this._deactivate(t,e),this._activate(e,t))}_activate(e,t){if(!e)return;e.classList.add(Mt),this._activate(H.getElementFromSelector(e));const r=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(Bs);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),T.trigger(e,_h,{relatedTarget:t})};this._queueCallback(r,e,e.classList.contains(ji))}_deactivate(e,t){if(!e)return;e.classList.remove(Mt),e.blur(),this._deactivate(H.getElementFromSelector(e));const r=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(Bs);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),T.trigger(e,ph,{relatedTarget:t})};this._queueCallback(r,e,e.classList.contains(ji))}_keydown(e){if(![yh,Fi,Eh,Vi,Us,Wi].includes(e.key))return;e.stopPropagation(),e.preventDefault();const t=this._getChildren().filter(o=>!Ct(o));let r;if([Us,Wi].includes(e.key))r=t[e.key===Us?0:t.length-1];else{const o=[Fi,Vi].includes(e.key);r=Sr(t,e.target,o,!0)}r&&(r.focus({preventScroll:!0}),an.getOrCreateInstance(r).show())}_getChildren(){return H.find(Ks,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const r of t)this._setInitialAttributesOnChild(r)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e),r=this._getOuterElement(e);e.setAttribute("aria-selected",t),r!==e&&this._setAttributeIfNotExists(r,"role","presentation"),t||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const t=H.getElementFromSelector(e);t&&(this._setAttributeIfNotExists(t,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(t,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,t){const r=this._getOuterElement(e);if(!r.classList.contains(Nh))return;const o=(a,i)=>{const c=H.findOne(a,r);c&&c.classList.toggle(i,t)};o(ao,Mt),o(Ah,Bs),r.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(e,t,r){e.hasAttribute(t)||e.setAttribute(t,r)}_elemIsActive(e){return e.classList.contains(Mt)}_getInnerElement(e){return e.matches(Ks)?e:H.findOne(Ks,e)}_getOuterElement(e){return e.closest(Ch)||e}static jQueryInterface(e){return this.each(function(){const t=an.getOrCreateInstance(this);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}T.on(document,gh,oo,function(n){["A","AREA"].includes(this.tagName)&&n.preventDefault(),!Ct(this)&&an.getOrCreateInstance(this).show()});T.on(window,bh,()=>{for(const n of H.find(Sh))an.getOrCreateInstance(n)});et(an);const kh="toast",xh="bs.toast",xt=`.${xh}`,$h=`mouseover${xt}`,Oh=`mouseout${xt}`,Lh=`focusin${xt}`,Dh=`focusout${xt}`,Mh=`hide${xt}`,Ih=`hidden${xt}`,Rh=`show${xt}`,Ph=`shown${xt}`,Hh="fade",Ui="hide",qn="show",Gn="showing",Fh={animation:"boolean",autohide:"boolean",delay:"number"},Vh={animation:!0,autohide:!0,delay:5e3};class Ln extends rt{constructor(e,t){super(e,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Vh}static get DefaultType(){return Fh}static get NAME(){return kh}show(){if(T.trigger(this._element,Rh).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Hh);const t=()=>{this._element.classList.remove(Gn),T.trigger(this._element,Ph),this._maybeScheduleHide()};this._element.classList.remove(Ui),kn(this._element),this._element.classList.add(qn,Gn),this._queueCallback(t,this._element,this._config.animation)}hide(){if(!this.isShown()||T.trigger(this._element,Mh).defaultPrevented)return;const t=()=>{this._element.classList.add(Ui),this._element.classList.remove(Gn,qn),T.trigger(this._element,Ih)};this._element.classList.add(Gn),this._queueCallback(t,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(qn),super.dispose()}isShown(){return this._element.classList.contains(qn)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=t;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=t;break}}if(t){this._clearTimeout();return}const r=e.relatedTarget;this._element===r||this._element.contains(r)||this._maybeScheduleHide()}_setListeners(){T.on(this._element,$h,e=>this._onInteraction(e,!0)),T.on(this._element,Oh,e=>this._onInteraction(e,!1)),T.on(this._element,Lh,e=>this._onInteraction(e,!0)),T.on(this._element,Dh,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const t=Ln.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}hs(Ln);et(Ln);const qs=({value:n,maxValue:e,color:t,labelLeft:r=null,labelCenter:o=null,labelRight:a=null,className:i="",isOverlay:c=!1,trailingStartValue:u=null,trailColor:s="rgba(128, 128, 128, 0.5)"})=>{const h=Math.min(Math.max(n/e*100,0),100);let p=0;u!==null&&(p=Math.min(Math.max(u/e*100,0),100));let m={};return typeof t=="object"&&t.from&&t.to?m.backgroundImage=`linear-gradient(to right, ${t.from}, ${t.to} 100%)`:m.backgroundColor=t,l("div",{class:`progress-bar-pointed-container ${i} ${c?"progress-bar-pointed-container--overlay":""}`,children:[r&&l("span",{class:"progress-bar-pointed__label progress-bar-pointed__label--left",children:r}),u!==null&&l("div",{class:"progress-bar-pointed__trail",style:{width:`${p}%`,backgroundColor:s,"--progress-trail-color":s}}),l("div",{class:"progress-bar-pointed__fill",style:{width:`${h}%`,...m},children:o&&l("span",{class:"progress-bar-pointed__label progress-bar-pointed__label--center",children:o})}),a&&l("span",{class:"progress-bar-pointed__label progress-bar-pointed__label--right",children:a})]})};function Wh(){const{characterStats:n,setCharacterStats:e}=ft(Ft),[t,r]=z(1),[o,a]=z(!1),[i,c]=z(!1),[u,s]=z(!1),[h,p]=z(!1),[m,_]=z(!1),[E,A]=z(null),[C,O]=z(null),[L,B]=z(!1),[M,U]=z(!1),[V,Q]=z(!1),X=Ue(null),P=Ue(null),F=Ue(null),Y=Ue(null),Z=Ue(null),le=300,Ne=600,[ue,ie]=z(!1);_e(()=>{const ve=[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map(be=>new yt(be));return()=>{ve.forEach(be=>{be&&typeof be.dispose=="function"&&be.dispose()})}},[V]),_e(()=>{if(o){const I=setTimeout(()=>a(!1),300);return()=>clearTimeout(I)}},[o]),_e(()=>{if(u){const I=setTimeout(()=>s(!1),300);return()=>clearTimeout(I)}},[u]),_e(()=>{if(i){const I=setTimeout(()=>c(!1),300);return()=>clearTimeout(I)}},[i]),_e(()=>{if(h){const I=setTimeout(()=>p(!1),300);return()=>clearTimeout(I)}},[h]),_e(()=>{if(m){const I=setTimeout(()=>_(!1),300);return()=>clearTimeout(I)}},[m]),_e(()=>{const I=be=>{be.key==="Control"&&Q(!0)},ve=be=>{be.key==="Control"&&Q(!1)};return window.addEventListener("keydown",I),window.addEventListener("keyup",ve),()=>{window.removeEventListener("keydown",I),window.removeEventListener("keyup",ve)}},[]);const ae=I=>{e(ve=>({...ve,...I}))};_e(()=>{(n.currentMp===void 0||n.maxMp===void 0)&&e(I=>({...I,currentMp:I.currentMp||0,maxMp:I.maxMp||10}))},[]);const N=()=>{X.current&&(clearTimeout(X.current),X.current=null),P.current&&(clearTimeout(P.current),P.current=null);const I=n.tempHealth||0;let ve=!1;A(n.currentHealth),I>0?(O(I),ve=!0):O(null);let be=I,Ge=n.currentHealth,it=t,Et=!1,d=!1;if(be>0){const W=Math.min(it,be);W>0&&(be-=W,it-=W,s(!0),U(!0),Et=!0)}if(it>0&&Ge>0){const W=Math.min(it,Ge);W>0&&(Ge=Math.max(0,Ge-W),a(!0),B(!0),d=!0)}d&&setTimeout(()=>B(!1),200),Et&&setTimeout(()=>U(!1),200),setTimeout(()=>{e(Ut=>({...Ut,currentHealth:Ge,tempHealth:be}));const W=1e3;X.current=setTimeout(()=>{A(Ge)},W),ve&&(P.current=setTimeout(()=>{O(be)},W))},50),r(1)},x=()=>{c(!0),ae({currentHealth:Math.min(n.maxHealth,n.currentHealth+t)}),r(1)},K=()=>{_(!0),ae({tempHealth:(n.tempHealth||0)+t}),r(1)},Ce=()=>{r(V?n.maxHealth||0:I=>Math.min(I+1,n.maxHealth||1/0))},Se=()=>{r(V?0:I=>Math.max(0,I-1))},De=()=>{p(!0),ae({currentMp:Math.max(0,n.currentMp-t)}),r(1)},Ae=()=>{p(!0),ae({currentMp:Math.min(n.maxMp,n.currentMp+t)})},Te=()=>{const I=Math.max(0,Math.min(n.maxHealth,t));ae({currentHealth:I}),c(!0),r(1)},Me=()=>{const I=Math.max(0,Math.min(n.maxMp,t));ae({currentMp:I}),p(!0),r(1)},ye=()=>{ae({tempHealth:0}),s(!0)},ge=()=>{n.maxHealth!==void 0&&(ae({currentHealth:n.maxHealth}),c(!0))},fe=()=>{n.maxMp!==void 0&&(ae({currentMp:n.maxMp}),p(!0))},pt=I=>{I.type==="touchstart"&&I.preventDefault(),ie(!0),Z.current=setTimeout(()=>{ge(),ye(),A(n.maxHealth||ee),O(0),ie(!1),F.current&&(clearTimeout(F.current),F.current=null)},Ne)},He=I=>{I.type==="touchstart"&&I.preventDefault(),ie(!0),Z.current=setTimeout(()=>{fe(),ie(!1),Y.current&&(clearTimeout(Y.current),Y.current=null)},Ne)},Fe=I=>{if(Z.current&&(clearTimeout(Z.current),Z.current=null,ue&&I.type==="touchend")){const ve=I.currentTarget.getAttribute("data-bar-type");ve==="hp"?y():ve==="mp"&&j()}ie(!1)},qe=()=>{Z.current&&(clearTimeout(Z.current),Z.current=null),ie(!1)},y=()=>{ue||(F.current?(clearTimeout(F.current),F.current=null,ge(),ye(),A(n.maxHealth||ee),O(0)):(Te(),F.current=setTimeout(()=>{F.current=null},le)))},j=()=>{ue||(Y.current?(clearTimeout(Y.current),Y.current=null,fe()):(Me(),Y.current=setTimeout(()=>{Y.current=null},le)))},$=n.currentHealth||0,ee=Math.max(1,n.maxHealth||0),de=n.tempHealth||0,tt=n.currentMp||0,ke=Math.max(1,n.maxMp||0);return l("div",{className:"hit-points-component-container container-fluid mb-4",children:[l("div",{className:"row align-items-center mb-3",children:[l(Vt,{title:"HEALTH AND MANA",containerClassName:"mb-3"}),l("div",{className:"d-flex justify-content-center align-items-center gap-1",children:[l("button",{onClick:De,className:"btn btn-outline-primary btn-icon-square","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Use MP",children:l("i",{className:"fas fa-bolt-lightning"})}),l("button",{onClick:ye,className:"btn btn-icon-square btn-outline-warning","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Clear Temporary HP","data-bs-original-title":"Clear Temporary HP",children:l("i",{className:"fas fa-times-circle"})}),l("button",{onClick:N,className:"btn btn-icon-square btn-outline-danger","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Damage HP","data-bs-original-title":"Damage HP",children:l("i",{className:"fas fa-heart-circle-minus"})}),l("div",{className:"input-group amount-input-container",style:{width:"auto",alignItems:"center"},children:[l("button",{onClick:Se,className:"btn btn-outline-secondary btn-icon-square amount-control-btn",type:"button","data-bs-toggle":"tooltip","data-bs-placement":"top",title:V?"Set to Min (0)":"Decrease Amount","data-bs-original-title":V?"Set to Min (0)":"Decrease Amount",children:l("i",{className:"fas fa-minus"})}),l("input",{type:"number",value:t,onChange:I=>r(Math.max(0,parseInt(I.currentTarget.value)||0)),className:"form-control text-center bg-dark text-light",min:"0",style:{width:"70px",height:"40px"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Enter amount","aria-label":"Amount for HP/MP changes"}),l("button",{onClick:Ce,className:"btn btn-outline-secondary btn-icon-square amount-control-btn",type:"button","data-bs-toggle":"tooltip","data-bs-placement":"top",title:V?`Set to Max (${n.maxHealth||0})`:"Increase Amount","data-bs-original-title":V?`Set to Max (${n.maxHealth||0})`:"Increase Amount",children:l("i",{className:"fas fa-plus"})})]}),l("button",{onClick:x,className:"btn btn-icon-square btn-outline-success","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Heal HP","data-bs-original-title":"Heal HP",children:l("i",{className:"fas fa-heart-circle-plus"})}),l("button",{onClick:K,className:"btn btn-icon-square btn-outline-info","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Heal Temporary HP","data-bs-original-title":"Heal Temporary HP",children:l("i",{className:"fas fa-heart-pulse"})}),l("button",{onClick:Ae,className:"btn btn-outline-info btn-icon-square","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Restore MP","data-bs-original-title":"Restore MP",children:l("i",{className:"fas fa-droplet"})})]})]}),l("div",{className:"mb-3",children:["                ",l("div",{style:{position:"relative",cursor:"pointer"},className:"mb-2",onClick:I=>{I.type!=="touchend"&&y()},onMouseDown:pt,onMouseUp:Fe,onMouseLeave:qe,onTouchStart:pt,onTouchEnd:Fe,onTouchCancel:qe,onContextMenu:I=>I.preventDefault(),"data-bar-type":"hp","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Click to Set HP to ${t}, Long press/double click to reset HP & Temp HP`,"data-bs-original-title":`Click to Set HP to ${t}, Long press/double click to reset HP & Temp HP`,children:[l(qs,{value:$,maxValue:ee,color:{from:"#ef4444",to:"#e11d48"},labelRight:`${$} / ${ee}`,trailingStartValue:E,trailColor:"rgba(200, 0, 0, 0.7)",className:L?"progress-bar-damage-flash":""}),(de>0||C!==null)&&l(qs,{value:de,maxValue:ee,color:{from:"#21d2ec",to:"#14b8a7"},labelCenter:de>0?`${de} Temp`:"",isOverlay:!0,className:`health-overlay-bar ${M?"progress-bar-damage-flash":""}`,trailingStartValue:C,trailColor:"rgba(0, 50, 200, 0.7)"})]}),"                ",l("div",{style:{cursor:"pointer"},onClick:I=>{I.type!=="touchend"&&j()},onMouseDown:He,onMouseUp:Fe,onMouseLeave:qe,onTouchStart:He,onTouchEnd:Fe,onTouchCancel:qe,onContextMenu:I=>I.preventDefault(),"data-bar-type":"mp","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Click to Set MP to ${t}, Long press/double click to Full Restore MP`,"data-bs-original-title":`Click to Set MP to ${t}, Long press/double click to Full Restore MP`,children:l(qs,{value:tt,maxValue:ke,color:{from:"#3c82f6",to:"#6366f1"},labelRight:`${tt} / ${ke}`,className:h?"progress-bar-damage-flash":"",trailingStartValue:tt,trailColor:"rgba(0, 50, 200, 0.7)"})})]})]})}function jh(){const{spells:n}=wn(),{characterStats:e,setCharacterStats:t}=ft(Ft),r=()=>(e.speed||0)+lt(n,"speed"),o=c=>{t(u=>({...u,...c}))},a=c=>{const u=c.currentTarget,s=Math.max(1,parseInt(u.value)||1);o({maxHealth:s}),e.currentHealth>s&&o({currentHealth:s})},i=c=>{const u=c.currentTarget,s=Math.max(1,parseInt(u.value)||1);o({maxMp:s}),e.currentMp>s&&o({currentMp:s})};return l("div",{className:"character-sheet container-fluid",children:l("div",{className:"column",children:[l(Wh,{}),l("div",{className:"row justify-content-between mt-4",children:[l("div",{className:"col-md-7",children:l(Ro,{})}),l("div",{className:"col-md-5 p-3",children:[l(Vt,{title:"PLAYER CONDITION"}),l("div",{className:"row align-items-center mb-3",children:[l("div",{className:"col-auto",children:l("div",{className:"d-flex gap-2",children:[l("div",{className:"text-center",children:[l("small",{className:"d-block mb-1 text-secondary",children:"Speed"}),l("input",{type:"number",className:"form-control form-control box-no-input text-center bg-dark text-light",id:"speedInput",value:r()+30,readOnly:!0,"aria-label":"Speed"})]}),l("div",{className:"text-center",children:[l("small",{className:"d-block mb-1 text-secondary",children:"AC"}),l("input",{type:"number",className:"form-control box-no-input text-center bg-dark text-light",id:"acInput",value:e.AC||10,readOnly:!0,"aria-label":"Armor Class"})]})]})}),l("div",{className:"col-auto ms-auto",children:l("div",{className:"d-flex gap-2",children:[l("div",{className:"text-center",children:[l("small",{className:"d-block mb-1 text-secondary",children:"Max HP"}),l("input",{type:"number",className:"form-control form-control hp-input text-center bg-dark text-light",id:"maxHealthInput",value:e.maxHealth||"",onChange:a,min:"1","aria-label":"Maximum Hit Points"})]}),l("div",{className:"text-center",children:[l("small",{className:"d-block mb-1 text-secondary",children:"Max MP"}),l("input",{type:"number",className:"form-control form-control hp-input text-center bg-dark text-light",id:"maxMpInput",value:e.maxMp||"",onChange:i,min:"1","aria-label":"Maximum Mana Points"})]})]})})]}),l("div",{className:"conditions-tracker-placeholder p-3 border rounded bg-dark-subtle",children:[l("h5",{className:"text-secondary-emphasis",children:"CONDITIONS TRACKER"}),l("p",{className:"text-muted",children:"(Placeholder for future implementation)"})]})]})]})]})})}const _s=()=>{const[n,e]=z(null);return _e(()=>{e(document.createElement("div"))},[]),_e(()=>{if(n)return n.className="toast-container position-fixed bottom-0 end-0 p-3",document.body.appendChild(n),()=>{document.body.removeChild(n)}},[n]),{showToast:(r,o="info-circle",a="primary",i="Notification")=>{if(!n)return;const c=document.createElement("div");c.className="toast",c.setAttribute("role","alert"),c.setAttribute("aria-live","assertive"),c.setAttribute("aria-atomic","true"),c.innerHTML=`
            <div class="toast-header">
                <i class="fas fa-${o} me-2 text-${a}"></i>
                <strong class="me-auto">${i}</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body">
                ${r}
            </div>
        `,n.appendChild(c),new Ln(c,{autohide:!0,delay:3e3}).show(),c.addEventListener("hidden.bs.toast",()=>{n.removeChild(c)})}}},Uh=()=>{const{characterStats:n,setCharacterStats:e}=ft(Ft),{spells:t}=wn(),{showToast:r}=_s(),o=(u,s)=>{e(h=>({...h,[u]:parseInt(s,10)||0}))},a=Object.entries(n).filter(([u])=>{var s;return((s=we[u])==null?void 0:s.category)!==je.CORE}).reduce((u,[s,h])=>u+(parseInt(h,10)||0),0),i=u=>{const s=prompt("Enter a DC for the roll (leave blank for normal roll):");if(s===null)return;const h=Math.max(0,parseInt(s,10)),p=(n[u]||0)+lt(t,u),m=we[u];let _=`1d20+${p}`;h>1&&(_=`${_}cs>=${h}cf<${h}`);const E=h?`check vs DC ${h}`:"check",A=`&{template:default} {{name=${fr(u)} ${E}}}{{Roll=[[${_}]]}}{{Stat Bonus=[[${p}]] from ${m.shortName}}}`;navigator.clipboard.writeText(A);const C=h?`${m.name} roll vs DC ${h} copied! Paste it into Roll20.`:`${m.name} roll command copied! Paste it into Roll20.`;r(C,"clipboard","success","Copied to clipboard")},c=u=>{const s=Object.entries(we).filter(([h,p])=>p.category===u);return s.length>0&&l("div",{className:"stat-category",children:[l("h6",{className:"stat-category-title text-secondary mb-2",children:u.toUpperCase()}),l("div",{className:"stat-grid",children:s.map(([h,p])=>l("div",{className:"stat-group mb-2",title:`${p.name} ${p.description}`,"data-bs-toggle":"tooltip","data-bs-placement":"top",children:l("div",{className:"input-group",children:[l("span",{className:`input-group-text gap-1 text-${p.color}`,onClick:()=>i(h),style:{cursor:"pointer"},children:[l("i",{className:`fas ${p.icon}`})," ",l("span",{className:"stat-text",children:p.shortName})]}),l("input",{type:"number",className:"form-control",value:n[h]||0,onChange:m=>o(h,m.currentTarget.value)}),l("span",{className:"input-group-text",children:[l("i",{className:`fas ${lt(t,h)?"":"fa-link-slash"} text-muted`}),lt(t,h)>0&&l("div",{children:[l("span",{className:"text-secondary ms-1",children:["+",lt(t,h)," ="]}),l("span",{className:"text-muted ms-1",children:n[h]+lt(t,h)})]})]})]})},h))})]})};return l("div",{className:"character-stats",children:[l(Vt,{title:"STATS",lineMaxWidth:"50px",containerClassName:"mb-1"}),l("h6",{className:"stat-category-title text-danger mb-4",children:["BASE ALLOCATED POINTS: ",a]}),c(je.PHYSICAL),c(je.MAGICAL),c(je.UTILITY)]})},Bh=({spellToDelete:n,confirmDelete:e,setSpellToDelete:t})=>l("div",{className:`modal fade ${n?"show":""}`,style:{display:n?"block":"none"},tabIndex:-1,children:l("div",{className:"modal-dialog",children:l("div",{className:"modal-content",children:[l("div",{className:"modal-header",children:[l("h5",{className:"modal-title",children:"Confirm Deletion"}),l("button",{type:"button",className:"btn-close",onClick:()=>t(null),"aria-label":"Close"})]}),l("div",{className:"modal-body",children:"Are you sure you want to delete this spell?"}),l("div",{className:"modal-footer",children:[l("button",{type:"button",className:"btn btn-secondary",onClick:()=>t(null),children:"No, Keep It"}),l("button",{type:"button",className:"btn btn-danger",onClick:e,children:"Yes, Delete It"})]})]})})}),Yh=({isModalOpen:n,closeModal:e,spellBeingEdited:t,currentSpell:r,setCurrentSpell:o,incrementPower:a,decrementPower:i,getSpellRank:c,getActionLabel:u,validateDiceRoll:s,diceError:h,saveSpell:p,removeSpell:m})=>l("div",{className:`modal ${n?"show":""}`,style:{display:n?"block":"none"},tabIndex:-1,children:l("div",{className:"modal-dialog",children:l("div",{className:"modal-content",children:[l("div",{className:"modal-header",children:[l("h5",{className:"modal-title",children:t?"Edit Spell Entry":"Add Spell"}),l("button",{type:"button",className:"btn-close",onClick:e})]}),l("div",{className:"modal-body",children:[l("div",{className:"mb-2",children:[l("label",{className:"form-label",children:"Spell Name"}),l("input",{type:"text",className:"form-control",placeholder:"Spell Name",value:r.name,onInput:_=>o({...r,name:_.currentTarget.value})})]}),l("div",{className:"mb-2",children:[l("label",{className:"form-label",children:"Spell Level"}),l("div",{className:"input-group",children:[l("button",{className:"btn btn-outline-secondary",type:"button",onClick:i,disabled:r.power<=1,children:l("i",{className:"fas fa-minus"})}),l("input",{type:"number",className:`form-control ${r.power<=0?"is-invalid":""}`,placeholder:"Spell Level",min:"1",value:r.power,onInput:_=>{const E=Math.max(1,parseInt(_.currentTarget.value,10)||1);o({...r,power:E,rank:c(E)})}}),l("button",{className:"btn btn-outline-secondary",type:"button",onClick:a,children:l("i",{className:"fas fa-plus"})}),r.power<=0&&l("div",{className:"invalid-feedback",children:"Spell level must be at least 1"})]})]}),l("div",{className:"alert alert-info py-1 mb-2",children:[l("i",{className:"fas fa-link me-2"}),l("small",{className:"text-muted d-block mt-1",children:["This spell's ",l("a",{href:"https://docs.google.com/document/d/1ZTxCemR8j6GhIMqhvmBd7kOo8wNsOisO_vOutlQBYv0/edit?tab=t.0",target:"_blank",children:"Soul Link Rank"})," will be ",l("b",{children:[c(r.power),"."]})]})]}),l("label",{className:"form-label",children:"Actions to Cast"}),l("div",{className:"input-group mb-2",children:[l("span",{className:"input-group-text",children:u(r.actions)}),l("select",{className:"form-select",value:r.actions,onChange:_=>o({...r,actions:parseInt(_.currentTarget.value)}),children:[l("option",{value:"1",children:"1 Action"}),l("option",{value:"2",children:"2 Actions"}),l("option",{value:"3",children:"3 Actions"}),l("option",{value:"0",children:"Free Action"})]})]}),l("label",{className:"form-label",children:"Element"}),l("div",{className:"input-group mb-2",children:[l("span",{className:"input-group-text",children:st(r.element)}),l("select",{className:"form-select",value:r.element,onChange:_=>o({...r,element:_.currentTarget.value}),children:Object.entries(re).map(([_,E])=>l("option",{value:E,children:E},_))})]}),l("label",{className:"form-label",children:"Damage Roll(s)"}),l("div",{className:"input-group mb-2",children:[l("span",{className:"input-group-text",children:l("i",{className:"fas fa-dice-d20"})}),l("input",{type:"text",className:`form-control ${h?"is-invalid":""}`,placeholder:"Dice Roll (e.g. 1d4)",value:r.dice,onInput:_=>{const E=_.currentTarget.value;o({...r,dice:E}),s(E)}}),h&&l("div",{className:"invalid-feedback",children:h})]}),l("div",{className:"alert alert-info py-1 mb-2",children:[l("i",{className:"fas fa-info-circle me-2"}),l("small",{children:"Use [stat] to include a stat's value (e.g., [strength] + 1d6)"})]}),l("div",{className:"mb-2",children:[l("label",{className:"form-label",children:"Spell Description"}),l("textarea",{className:"form-control",placeholder:"Spell Description",value:r.description,onInput:_=>o({...r,description:_.currentTarget.value})})]}),l("div",{className:"mb-2",children:[l("label",{className:"form-label",children:["Amount currently stocked ",l("i",{children:'("Spell Charges")'})]}),l("div",{className:"input-group",children:l("input",{type:"number",className:`form-control ${r.quantity<0||r.quantity>At?"is-invalid":""}`,placeholder:"Quantity",min:"0",max:At.toString(),value:r.quantity,onInput:_=>{const E=parseInt(_.currentTarget.value,10)||0;E>At?o({...r,quantity:At}):o({...r,quantity:Math.max(0,E)})}})})]})]}),l("div",{className:"modal-footer",children:[l("button",{type:"button",className:"btn btn-secondary",onClick:e,children:[l("i",{className:"fas fa-times me-1"}),"Close"]}),t&&l("button",{type:"button",className:"btn btn-danger",onClick:()=>m(t.id),children:[l("i",{className:"fas fa-trash-alt me-1"}),"Delete"]}),l("button",{type:"button",className:"btn btn-success",onClick:p,children:[l("i",{className:`fas ${t?"fa-save":"fa-plus"} me-1`}),t?"Save Changes":"Add Spell"]})]})]})})}),Kh=({isLinkModalOpen:n,closeLinkModal:e,currentSpell:t,setCurrentSpell:r,saveSpell:o,getLinkedStats:a})=>{var c;if(!t)return null;const{spells:i}=wn();return l("div",{className:`modal fade ${n?"show":""}`,style:{display:n?"block":"none"},tabIndex:-1,children:l("div",{className:"modal-dialog",children:l("div",{className:"modal-content",children:[l("div",{className:"modal-header",children:[l("h5",{className:"modal-title",children:`Link ${t.name} to stat`}),l("button",{type:"button",className:"btn-close",onClick:e,"aria-label":"Close"})]}),l("div",{className:"modal-body",children:l("div",{className:"input-group mb-2",children:[l("span",{className:"input-group-text gap-1",children:l("i",{className:`fas ${t.linkedStat&&t.linkedStat!=="None"&&((c=we[t.linkedStat])==null?void 0:c.icon)||"fa-link-slash"}`})}),l("select",{className:"form-select",value:t.linkedStat||"None",onChange:u=>r({...t,linkedStat:u.currentTarget.value==="None"?null:u.currentTarget.value,isLinked:u.currentTarget.value!=="None"}),children:[l("option",{value:"None",children:"None"}),Object.entries(we).map(([u,s])=>(!a().includes(u)||u===t.linkedStat)&&s.type!==$e.CORE?l("option",{value:u,children:s.name},u):null)]}),l("span",{className:"input-group-text",children:["+",rs(t.quantity,t.rank)]})]})}),l("div",{className:"modal-footer",children:[l("button",{type:"button",className:"btn btn-secondary",onClick:e,children:[l("i",{className:"fas fa-times me-1"}),"Close"]}),l("button",{type:"button",className:"btn btn-success",onClick:o,children:[l("i",{className:`fas ${t.id?"fa-save":"fa-plus"} me-1`})," ",t.id?"Save Changes":"Add Spell"]})]})]})})})},qh=()=>{const{characterStats:n,setCharacterStats:e}=ft(Ft),{spells:t,setSpells:r,getLinkedStats:o}=wn(),{showToast:a}=_s(),i={name:"",quantity:1,power:1,dice:"",description:"",actions:1,rank:1,isLinked:!1,linkedStat:"None",element:re.PHYS},[c,u]=z(i),[s,h]=z(null),[p,m]=z(!1),[_,E]=z(!1),[A,C]=z(null),[O,L]=z(!1);_e(()=>{const y=$=>{$.key==="Control"&&L(!0)},j=$=>{$.key==="Control"&&L(!1)};return window.addEventListener("keydown",y),window.addEventListener("keyup",j),()=>{window.removeEventListener("keydown",y),window.removeEventListener("keyup",j)}},[]);const B=y=>{var j,$;return y&&(($=(j=n.affinities)==null?void 0:j[y.element])==null?void 0:$.mastered)||!1},M=y=>{y&&U(B(y))},U=y=>{const j=n.luck+lt(t,"luck")||0,$=Math.min(j,Os);var ee=`ðŸ€ Luck=[[${j}`;j>Os?ee+=`]] (+${Os} max bonus)`:ee+="]]";const tt=`${y?2:1}d6cf1 + ${$}[Luck Bonus]`,ke=y?"Draw Spell (Mastery)":"Draw Spell",I=`&{template:default} {{name=${ke}}} {{Charges Gained=[[${tt}]]}} {{${ee}}} {{Note=If the number is highlighted red, the true amount of Charges Gained is that total MINUS the Luck Bonus.}}`;navigator.clipboard.writeText(I).then(()=>{a(`${ke} command copied! Paste it into Roll20.`,"clipboard","success","Copied to clipboard")}).catch(ve=>{console.error("Failed to copy command: ",ve),a("Failed to copy command.","exclamation-triangle","danger","Copy Error")})},V=y=>{if(y.quantity>0&&y.dice)try{const j=Qt(t,y.dice,n),$=st(y.element),ee=Qt(t,"1d20+[strength]",n);let de;y.actions===0?de="Free Action":de=y.actions===1?"Action":"Actions";const tt=`&{template:default} {{name=${y.name}}}                                 {{Actions=${y.actions} ${de}}}                                 {{Level=**Spell ${y.power}** (S.Link Rank ${y.rank})}}                                 {{Attack=[[${ee}]]}}                                 {{Damage=[[${j}]] ${$} ${y.element}}}                                 ${y.description?`{{Description=${y.description}}}
                                `:""}`;navigator.clipboard.writeText(tt),a("Spell roll command copied! Paste it into the text chat on Roll20.","clipboard","success","Copied to clipboard"),x(y.id,"quantity",y.quantity-1)}catch(j){alert(j.message||"Invalid dice format!")}else a("No more charges of this spell remaining!","exclamation-triangle","warning","Cannot cast spell")},Q=(y,j,$)=>{const ee=j-$,de=`${y.name}: ${$} â†’ ${j} (${ee>=0?"+":""}${ee})`;console.log(de)},X=y=>{C(A===y?null:y)};_e(()=>{localStorage.setItem("spells",JSON.stringify(t))},[t]),_e(()=>{const j=[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map($=>new yt($));return()=>{j.forEach($=>$.dispose())}},[]);const P=(y=null)=>{h(y),u(y||i),m(!0)},F=()=>{h(null),m(!1)},Y=(y=null)=>{h(y),u(y||i),E(!0)},Z=()=>{h(null),E(!1)},[le,Ne]=z(""),ue=y=>{const j=Jn(y,n);return Ne(j.error||""),j.isValid},ie=()=>{const y=Vo(c);if(y.length>0){alert(`Please fix the following:
${y.join(`
`)}`);return}ue(c.dice)&&(r(s?t.map(j=>j.id===s.id?{...c,id:s.id}:j):[...t,{...c,id:Date.now()}]),p&&F(),_&&Z(),console.log("Spell saved:",c))},[ae,N]=z(null),x=(y,j,$)=>{const ee=t.find(de=>de.id===y);ee&&(ee.quantity!==$&&(N(y),setTimeout(()=>N(null),300),Q(ee,$,ee.quantity)),r(t.map(de=>de.id===y?{...de,[j]:$}:de)))},[K,Ce]=z(null),Se=y=>{Ce(y)},De=()=>{K&&(t.find(y=>y.id===K),r(t.filter(y=>y.id!==K)),Ce(null),F())},Ae=(y,j)=>{const $=[...t],ee=y+j;ee>=0&&ee<t.length&&([$[y],$[ee]]=[$[ee],$[y]],r($))},Te=()=>{const y=c.power+1;u({...c,power:y,rank:$s(y)})},Me=()=>{if(c.power>1){const y=c.power-1;u({...c,power:y,rank:$s(y)})}},[ye,ge]=z(1),fe=y=>{const j=t.find(ee=>ee.id===y),$=Math.min(At,j.quantity+ye);x(y,"quantity",$),ge(1)},pt=y=>{const j=t.find(ee=>ee.id===y),$=Math.max(0,j.quantity-ye);x(y,"quantity",$),ge(1)},He=y=>{let j="",$="";switch(y){case 0:j="[free-action]",$="Free Action";break;case 1:j="[one-action]",$="One Action";break;case 2:j="[two-actions]",$="Two Actions";break;case 3:j="[three-actions]",$="Three Actions";break;default:return""}return l("span",{className:"action","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-original-title":$,title:$,role:"img","aria-label":$,children:j})},Fe=y=>y.isLinked?"Linked to "+we[y.linkedStat].name:"No linked stat",qe=y=>{y.isLinked?console.log(`Linked stat: ${y.linkedStat}`):console.log("No linked stat"),Y(y)};return l("div",{className:"spell-inventory","data-bs-theme":"dark",children:l("div",{className:"container",children:[l(Vt,{title:"SPELL INVENTORY",lineMaxWidth:"50px"}),l("div",{className:"d-flex align-items-center justify-content-center mb-4",children:[l("button",{className:`dark-btn me-2 ${O?"gold-button":"dark-btn-secondary"}`,onClick:y=>U(y.ctrlKey),style:{width:"160px",height:"60px"},children:l("div",{className:"d-flex flex-column align-items-center",children:[l("div",{children:[l("i",{className:"fas fa-dice me-2"})," ",l("span",{children:"Stock Roll"})]}),l("span",{style:{fontSize:"0.7em"},children:"hold Ctrl for mastery"})]})}),l("button",{className:"dark-btn dark-btn-primary",onClick:()=>P(),style:{width:"160px",height:"60px"},children:[l("i",{className:"fas fa-plus me-2"})," ",l("span",{children:"Add Spell"})]})]}),t.length===0&&l("span",{className:"text-muted text-center d-flex flex-column align-items-center justify-content-center"+(window.innerWidth<=750?" mt-4":""),children:"[ Inventory Empty ]"}),l("ul",{className:"list-group",children:t.map((y,j)=>l("li",{className:`list-group-item spell-item ${ae===y.id?"quantity-flash":""}`,children:[l("div",{class:"d-flex justify-content-left",children:[l("div",{className:"d-flex align-items-center overflow-hidden",style:{flex:"1 1 0"},onClick:()=>X(y.id),children:[l("span",{id:`quantity-badge-${y.id}`,className:"text-black badge quantity-badge me-2",style:{width:"2.5rem",flexShrink:0},children:l("small",{children:y.quantity})}),l("div",{class:"text-truncate",children:[st(y.element)," ",l("span",{className:"arsenal me-2",children:y.name}),l("span",{className:"action-label hide-on-small me-2",style:{width:window.innerWidth<=750?"0px":"50px"},children:He(y.actions)})]})]}),l("div",{className:"d-flex align-items-center justify-content-right",style:{gap:"0.5rem"},children:[l("i",{className:"fas fa-edit text-primary",onClick:$=>{$.stopPropagation(),P(y)},style:{cursor:"pointer",transition:"opacity 0.3s",opacity:.6,flexShrink:0},onMouseOver:$=>{$.stopPropagation(),$.currentTarget.style.opacity="1"},onMouseOut:$=>{$.stopPropagation(),$.currentTarget.style.opacity="0.6"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Edit Spell"}),l("span",{className:`badge bg-dark border text-${y.isLinked?we[y.linkedStat].color:"secondary"} ms-2 d-flex justify-content-between align-items-center link-badge-normal`,"data-bs-toggle":"tooltip","data-bs-original-title":Fe(y),title:Fe(y),onClick:$=>{$.stopPropagation(),qe(y)},style:{cursor:"pointer",width:"4rem"},children:[l("i",{className:`fas ${y.isLinked?we[y.linkedStat].icon:"fa-link-slash"}`}),l("span",{children:y.isLinked?`+${rs(y.quantity,y.rank)}`:""})]}),l("button",{className:"btn btn-outline-danger btn-sm roll-button",style:{width:"120px",whiteSpace:"nowrap",overflow:"hidden"},onClick:$=>{$.stopPropagation(),V(y)},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Click to copy roll command",children:[l("i",{className:"fas fa-dice-d20"}),l("span",{className:"ms-1 text-truncate",children:Qt(t,y.dice,n,!0)})]}),l("button",{className:"btn btn-outline-info btn-sm",onClick:$=>{$.stopPropagation(),M(y)},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Click to copy the Stock roll command for ${y.name} (${y.element} - ${B(y)?"mastery":"normal"})`,style:{flexShrink:0},children:l("i",{className:"fas fa-hand-sparkles"})}),l("div",{className:"input-group input-group-sm",children:[l("button",{className:"btn btn-outline-danger btn-sm",onClick:$=>{$.stopPropagation(),pt(y.id)},children:l("i",{className:"fas fa-minus"})}),l("input",{type:"number",className:"form-control form-control-sm text-center",style:{width:"60px"},value:ye,min:"1",max:At,onChange:$=>ge(Math.max(1,Math.min(At,parseInt($.currentTarget.value)||1))),onClick:$=>$.stopPropagation()}),l("button",{className:"btn btn-outline-success btn-sm",onClick:$=>{$.stopPropagation(),fe(y.id)},children:l("i",{className:"fas fa-plus"})})]}),l("div",{className:"btn-group hide-on-small",style:{flexShrink:0},children:[l("button",{className:"btn btn-outline-secondary btn-sm",onClick:$=>{$.stopPropagation(),Ae(j,1)},children:l("i",{className:"fas fa-chevron-down"})}),l("button",{className:"btn btn-outline-secondary btn-sm",onClick:$=>{$.stopPropagation(),Ae(j,-1)},children:l("i",{className:"fas fa-chevron-up"})})]})]}),l("br",{})]}),A===y.id&&l("div",{className:"mt-3",children:[l("div",{className:"d-flex flex-wrap justify-content-center mb-2",style:{gap:"0.5rem"},children:[l("span",{className:`badge bg-dark border text-${y.isLinked?we[y.linkedStat].color:"secondary"}
                                                link-badge-responsive`,"data-bs-toggle":"tooltip","data-bs-original-title":Fe(y),title:Fe(y),onClick:$=>{$.stopPropagation(),qe(y)},style:{cursor:"pointer"},children:[l("i",{className:`fas ${y.isLinked?we[y.linkedStat].icon:"fa-link-slash"}`}),l("span",{children:y.isLinked?l(Xt,{children:[`${we[y.linkedStat].name}`,l("span",{className:"ms-2",children:`+${rs(y.quantity,y.rank)}`})]}):""})]}),l("span",{className:"badge bg-dark border",children:[He(y.actions)," ",y.actions," Actions"]}),l("span",{className:"badge bg-dark border",children:[st(y.element)," ",y.element]}),l("span",{className:"badge bg-dark border",children:["Spell ",y.power," ",l("i",{children:["(SL. Rank: ",y.rank,")"]})]})]}),y.description&&l(Xt,{children:[l("p",{className:"py-1 border-bottom h5 arsenal",children:"Description"}),l("div",{className:"mb-0 spell-description arsenal",style:{display:"-webkit-box",WebkitLineClamp:"5",WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},dangerouslySetInnerHTML:{__html:y.description}})]})]})]},y.id))}),l(Yh,{isModalOpen:p,closeModal:F,spellBeingEdited:s,currentSpell:c,setCurrentSpell:u,incrementPower:Te,decrementPower:Me,getSpellRank:$s,getActionLabel:He,validateDiceRoll:ue,diceError:le,saveSpell:ie,removeSpell:Se}),l(Kh,{isLinkModalOpen:_,closeLinkModal:Z,currentSpell:c,setCurrentSpell:u,saveSpell:ie,getLinkedStats:o}),l(Bh,{spellToDelete:K,confirmDelete:De,setSpellToDelete:Ce})]})})};function Gh(){return l("div",{className:"spell-inventory container-fluid",children:l("div",{className:"row",children:[l("div",{className:"col-12 col-md-4 order-2 order-md-1",style:{minHeight:"50vh",overflowY:"auto"},children:l(Uh,{})}),l("div",{className:"col-12 col-md-8 order-1 order-md-2",style:{minHeight:"50vh",overflowY:"auto"},children:l(qh,{})})]})})}const zh="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs/%3e%3cg%3e%3cpath%20stroke='none'%20fill='%23FFFFFF'%20d='M16%208%20L48%208%20Q56%208%2056%2016%20L56%2048%20Q56%2056%2048%2056%20L16%2056%20Q8%2056%208%2048%20L8%2016%20Q8%208%2016%208%20M11%2016%20L11%2048%20Q11%2053%2016%2053%20L48%2053%20Q53%2053%2053%2048%20L53%2016%20Q53%2011%2048%2011%20L16%2011%20Q11%2011%2011%2016%20M22%2032%20L30%2024%2032%2024%2032%2028%2042%2028%2042%2036%2032%2036%2032%2040%2030%2040%2022%2032'/%3e%3c/g%3e%3c/svg%3e",Qh="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs/%3e%3cg%3e%3cpath%20stroke='none'%20fill='%23FFFFFF'%20d='M42%2032%20L34%2040%2032%2040%2032%2036%2022%2036%2022%2028%2032%2028%2032%2024%2034%2024%2042%2032%20M53%2048%20L53%2016%20Q53%2011%2048%2011%20L16%2011%20Q11%2011%2011%2016%20L11%2048%20Q11%2053%2016%2053%20L48%2053%20Q53%2053%2053%2048%20M48%2056%20L16%2056%20Q8%2056%208%2048%20L8%2016%20Q8%208%2016%208%20L48%208%20Q56%208%2056%2016%20L56%2048%20Q56%2056%2048%2056'/%3e%3c/g%3e%3c/svg%3e",Xh=[{id:"character",title:"Health"},{id:"spells",title:"Spells and Stats"},{id:"abilities",title:"Abilities"}],nt=Xh.map(n=>({title:n.title,path:n.id==="character"?_n:`${_n.replace(/\/$/,"")}/${n.id}`}));function Jh(){const{url:n,route:e}=hr(),t=nt.findIndex(a=>a.path===n);_e(()=>{const a=i=>{const c=i.target.tagName.toLowerCase(),u=i.target.isContentEditable;c==="input"||c==="textarea"||u||(i.key==="ArrowLeft"?t>0&&e(nt[t-1].path):i.key==="ArrowRight"&&t<nt.length-1&&e(nt[t+1].path))};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}},[n,t]);const r={height:"48px",verticalAlign:"middle",cursor:"pointer"},o=a=>{e(a)};return l("header",{className:"header mb-4",children:l("div",{className:"d-flex justify-content-center align-items-center p-3 border-bottom",children:l("div",{className:"col-md-8 col-lg-6 text-center",children:l("nav",{className:"btn-group gap-2",role:"group","aria-label":"Main navigation",children:[l("img",{src:zh,alt:"Navigate left",onClick:()=>t>0&&o(nt[t-1].path),style:{...r,marginRight:"8px",filter:t>0?"none":"opacity(0.3)",cursor:t>0?"pointer":"default"},"aria-disabled":t<=0}),nt.map((a,i)=>{let c="dark-btn dark-btn-secondary";return n===a.path&&(c+="-active"),l("button",{className:c,onClick:()=>o(a.path),children:l("span",{children:a.title})},a.path)}),l("img",{src:Qh,alt:"Navigate right",onClick:()=>t<nt.length-1&&o(nt[t+1].path),style:{...r,marginLeft:"8px",filter:t<nt.length-1?"none":"opacity(0.3)",cursor:t<nt.length-1?"pointer":"default"},"aria-disabled":t>=nt.length-1})]})})})})}const Zh=()=>{const{showToast:n}=_s(),{spells:e}=wn(),t=(a,i)=>{let c="[[1d20+"+lt(e,i);a==="Initiative"&&(c+="&{tracker}"),c+="]]";const u=`&{template:default} {{name=${a}}}{{Roll=${c}}}{{Stat Bonus=[[${lt(e,i)}]] from ${fr(i)}}}`;navigator.clipboard.writeText(u),n(a+" roll command copied! Paste it into the text chat on Roll20.","clipboard","success","Copied to clipboard")},r=[{name:"Fortitude Save",stat:"vitality"},{name:"Will Save",stat:"spirit"},{name:"Reflex Save",stat:"speed"}],o={name:"Initiative",stat:"speed",icon:"fa-bolt"};return l("div",{className:"save-rolls",children:l("div",{className:"d-flex flex-wrap gap-2 align-items-center justify-content-center",children:[r.map(a=>l("button",{onClick:()=>t(a.name,a.stat),className:"dark-btn dark-btn-secondary d-flex align-items-center justify-content-center flex-grow-1 position-relative",style:{minWidth:"140px",maxWidth:"170px",height:"48px"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Roll ${a.name} (${we[a.stat].shortName})`,children:[l("i",{className:`fas ${we[a.stat].icon} me-2`,style:{width:"20px"}}),l("span",{children:a.name})]},a.name)),l("button",{onClick:()=>t(o.name,o.stat),className:"dark-btn dark-btn-primary d-flex align-items-center justify-content-center flex-grow-1 position-relative",style:{minWidth:"140px",maxWidth:"170px",height:"48px"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Roll ${o.name} (${we[o.stat].shortName})`,children:[l("i",{className:`fas ${o.icon} text-${o.color} me-2`,style:{width:"20px"}}),l("span",{children:o.name})]},o.name)]})})},ef=({buildDate:n})=>{const{url:e}=hr();return l("footer",{className:"footer mt-auto py-3 text-light border-top",children:l("div",{className:"container-fluid",children:l("div",{className:"row",children:[l("div",{className:"col-4 text-start text-truncate d-flex align-items-center",children:[l("span",{className:"me-2",children:["Build Date: ",n]}),l("a",{href:"https://github.com/btarg/requiem-pathfinder-preact",target:"_blank",rel:"noopener noreferrer",className:"text-light",title:"GitHub Repository",children:l("i",{className:"fab fa-github"})})]}),l("div",{className:"col-4 text-center",children:[l(Zh,{}),l(Vt,{title:"QUICK ROLLS",containerClassName:"mt-3"})]}),l("div",{className:"col-4 d-flex align-items-center justify-content-end",children:l("a",{href:"https://btarg.github.io/requiem-vault/",target:"_blank",rel:"noopener noreferrer",className:"dark-btn dark-btn-secondary",children:[l("i",{className:"fas fa-book me-2"}),l("span",{className:"me-2",children:"Open Wiki"}),l("i",{className:"fa-solid fa-arrow-up-right-from-square",style:{fontSize:"0.75rem"}})]})})]})})})},lo=An({abilities:[],setAbilities:n=>{},subscribe:n=>{},unsubscribe:n=>{}}),tf=({children:n})=>{const[e,t]=z(()=>{try{const c=localStorage.getItem("abilities");return c?JSON.parse(c):[]}catch(c){return console.error("Error loading abilities from localStorage:",c),[]}}),[r,o]=z([]);_e(()=>{console.log("Saving abilities to localStorage:",e),localStorage.setItem("abilities",JSON.stringify(e)),r.forEach(c=>c(e))},[e,r]);const a=c=>{o(u=>[...u,c])},i=c=>{o(u=>u.filter(s=>s!==c))};return l(lo.Provider,{value:{abilities:e,setAbilities:t,subscribe:a,unsubscribe:i},children:n})},nf=()=>ft(lo),sf=({isModalOpen:n,closeModal:e,abilityBeingEdited:t,currentAbility:r,setCurrentAbility:o,getActionLabel:a,validateDiceRoll:i,diceError:c,saveAbility:u,removeAbility:s})=>l("div",{className:`modal ${n?"show":""}`,style:{display:n?"block":"none"},tabIndex:-1,children:l("div",{className:"modal-dialog",children:l("div",{className:"modal-content",children:[l("div",{className:"modal-header",children:[l("h5",{className:"modal-title",children:t?"Edit Ability":"Add Ability"}),l("button",{type:"button",className:"btn-close",onClick:e})]}),l("div",{className:"modal-body",children:[l("div",{className:"mb-2",children:[l("label",{className:"form-label",children:"Ability Type"}),l("div",{className:"btn-group w-100",children:[l("button",{type:"button",className:`btn ${r.type===Qe.GENERIC?"btn-danger":"btn-outline-danger"}`,onClick:()=>o({...r,type:Qe.GENERIC}),children:"Generic Ability"}),l("button",{type:"button",className:`btn ${r.type===Qe.WEAPON?"btn-danger":"btn-outline-danger"}`,onClick:()=>o({...r,type:Qe.WEAPON}),children:"Attack"})]})]}),l("div",{className:"mb-2",children:[l("label",{className:"form-label",children:"Name"}),l("input",{type:"text",className:"form-control",placeholder:r.type===Qe.WEAPON?"Attack Name":"Ability Name",value:r.name,onInput:h=>o({...r,name:h.currentTarget.value})})]}),l("label",{className:"form-label",children:"Actions to Use"}),l("div",{className:"input-group mb-2",children:[l("span",{className:"input-group-text",children:a(r.actions)}),l("select",{className:"form-select",value:r.actions,onChange:h=>o({...r,actions:parseInt(h.currentTarget.value)}),children:[l("option",{value:"1",children:"1 Action"}),l("option",{value:"2",children:"2 Actions"}),l("option",{value:"3",children:"3 Actions"}),l("option",{value:"4",children:"Reaction"}),l("option",{value:"0",children:"Free Action"})]})]}),l("label",{className:"form-label",children:"Element"}),l("div",{className:"input-group mb-2",children:[l("span",{className:"input-group-text",children:st(r.element)}),l("select",{className:"form-select",value:r.element,onChange:h=>o({...r,element:h.currentTarget.value}),children:Object.values(re).map(h=>l("option",{value:h,children:h},h))})]}),l("label",{className:"form-label",children:r.type===Qe.WEAPON?"Attack Roll":"Dice Roll"}),l("div",{className:"input-group mb-2",children:[l("span",{className:"input-group-text",children:l("i",{className:"fas fa-dice-d20"})}),l("input",{type:"text",className:`form-control ${c?"is-invalid":""}`,placeholder:"Dice Roll (e.g. 1d4)",value:r.dice,onInput:h=>{const p=h.currentTarget.value;o({...r,dice:p}),i(p)}}),c&&l("div",{className:"invalid-feedback",children:c})]}),l("div",{className:"alert alert-info py-1 mb-2",children:[l("i",{className:"fas fa-info-circle me-2"}),l("small",{children:"Use [stat] to include a stat's value (e.g., [strength] + 1d6)"})]}),r.type===Qe.WEAPON&&l("div",{className:"mb-3",children:[l("label",{className:"form-label",children:"Additional Attacks"}),l("br",{}),r.additionalAttacks&&r.additionalAttacks.map((h,p)=>l("div",{className:"input-group mb-2",children:[l("span",{className:"input-group-text",children:["Attack ",p+2," Modifier"]}),l("input",{type:"number",className:"form-control",value:h.penalty,onChange:m=>{const _=parseInt(m.currentTarget.value)||0,E=[...r.additionalAttacks];E[p]={...h,penalty:_},o({...r,additionalAttacks:E})}}),l("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>{const m=[...r.additionalAttacks];m.splice(p,1),o({...r,additionalAttacks:m})},children:l("i",{className:"fas fa-times"})})]},p)),l("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>{const h=[...r.additionalAttacks||[]];h.push({penalty:-5}),o({...r,additionalAttacks:h})},children:[l("i",{className:"fas fa-plus me-1"})," Add Attack"]})]}),l("div",{className:"mb-2",children:[l("label",{className:"form-label",children:"Description"}),l("textarea",{className:"form-control",placeholder:"Ability Description",value:r.description,onInput:h=>o({...r,description:h.currentTarget.value})})]})]}),l("div",{className:"modal-footer",children:[l("button",{type:"button",className:"btn btn-secondary",onClick:e,children:[l("i",{className:"fas fa-times me-1"}),"Close"]}),t&&l("button",{type:"button",className:"btn btn-danger",onClick:()=>s(t.id),children:[l("i",{className:"fas fa-trash-alt me-1"}),"Delete"]}),l("button",{type:"button",className:"btn btn-success",onClick:u,children:[l("i",{className:`fas ${t?"fa-save":"fa-plus"} me-1`}),t?"Save Changes":"Add Ability"]})]})]})})}),rf=({abilityToDelete:n,confirmDelete:e,setAbilityToDelete:t})=>l("div",{className:`modal fade ${n?"show":""}`,style:{display:n?"block":"none"},tabIndex:-1,children:l("div",{className:"modal-dialog",children:l("div",{className:"modal-content",children:[l("div",{className:"modal-header",children:[l("h5",{className:"modal-title",children:"Confirm Deletion"}),l("button",{type:"button",className:"btn-close",onClick:()=>t(null),"aria-label":"Close"})]}),l("div",{className:"modal-body",children:"Are you sure you want to delete this ability?"}),l("div",{className:"modal-footer",children:[l("button",{type:"button",className:"btn btn-secondary",onClick:()=>t(null),children:"No, Keep It"}),l("button",{type:"button",className:"btn btn-danger",onClick:e,children:"Yes, Delete It"})]})]})})}),af=()=>{const{abilities:n,setAbilities:e}=nf(),{characterStats:t}=ft(Ft),{showToast:r}=_s(),o={id:null,name:"",type:Qe.GENERIC,description:"",dice:"",actions:1,element:"Physical",additionalAttacks:[]},[a,i]=z(null),[c,u]=z(o),[s,h]=z(null),[p,m]=z(!1),[_,E]=z(null),[A,C]=z(""),[O,L]=z(null);_e(()=>{console.log("Saving abilities to localStorage:",n),localStorage.setItem("abilities",JSON.stringify(n))},[n]),_e(()=>{const x=[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map(K=>new yt(K));return()=>{x.forEach(K=>{K&&typeof K.dispose=="function"&&K.dispose()})}},[]);const B=N=>{i(a===N?null:N)},M=(N=null)=>{h(N),u(N||o),m(!0)},U=()=>{h(null),m(!1),C("")},V=N=>{E(N)},Q=()=>{if(_){const N=n.find(x=>x.id===_);e(n.filter(x=>x.id!==_)),E(null),U(),r(`${N.name} deleted successfully`,"trash","danger","Deleted")}},X=N=>{if(!N)return!0;const x=Jn(N,t);return C(x.error||""),x.isValid},P=()=>{var N;if(!c.name.trim()){C("Name is required");return}if(((N=c.type)==null?void 0:N.toString())===Qe.WEAPON.toString()&&!c.dice.trim()){C("Attack roll is required for weapons");return}if(!(c.dice&&!X(c.dice))){if(s)e(n.map(x=>x.id===s.id?{...c,id:s.id}:x)),r(`${c.name} updated successfully`,"check","success","Updated"),L(s.id);else{const x={...c,id:Date.now()};e(K=>[...K,x]),r(`${c.name} added successfully`,"plus","success","Added"),L(x.id)}setTimeout(()=>L(null),1e3),console.log("Ability saved:",c),U()}},F=N=>{let x="",K="";switch(N){case 0:x="[free-action]",K="Free Action";break;case 1:x="[one-action]",K="One Action";break;case 2:x="[two-actions]",K="Two Actions";break;case 3:x="[three-actions]",K="Three Actions";break;case 4:x="[reaction]",K="Reaction";break;default:return""}return l("span",{className:"action","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-original-title":K,title:K,role:"img","aria-label":K,children:x})},Y=N=>{N.type===Qe.WEAPON?Z(N):le(N)},Z=(N,x=0)=>{const K=N.dice,{isValid:Ce,error:Se}=Jn(K,t);if(!Ce){r(Se,"exclamation-triangle","danger","Invalid Dice");return}const De=Qt([],K,t),Ae=N.name;let Te=De;if(x>0&&N.additionalAttacks&&N.additionalAttacks[x-1]){const fe=N.additionalAttacks[x-1].penalty||0;fe!==0&&(Te=`${De}${fe<0?fe:`+${fe}`}`)}const Me=`{{Attack ${x>0?x+1:""}=[[${Te}]]}}`;let ye="";N.element&&(ye=`{{Element=${st(N.element)} ${N.element}}}`);const ge=`&{template:default} {{name=${Ae}}} ${Me} ${ye} {{Description=${N.description||""}}}`;navigator.clipboard.writeText(ge).then(()=>{const fe=x>0?` (Attack #${x+1})`:"";r(`${Ae}${fe} command copied! Paste it into Roll20.`,"clipboard","success","Copied to clipboard")}).catch(fe=>{console.error("Failed to copy command: ",fe),r("Failed to copy command.","exclamation-triangle","danger","Copy Error")})},le=N=>{let x="";if(N.dice){const{isValid:Ce,error:Se}=Jn(N.dice,t);if(!Ce){r(Se,"exclamation-triangle","danger","Invalid Dice");return}x=`{{Roll=[[${Qt([],N.dice,t)}]]}}`}const K=`&{template:default} {{name=${N.name}}} ${x} {{Description=${N.description||""}}}`;navigator.clipboard.writeText(K).then(()=>{r(`${N.name} command copied! Paste it into Roll20.`,"clipboard","success","Copied to clipboard")}).catch(Ce=>{console.error("Failed to copy command: ",Ce),r("Failed to copy command.","exclamation-triangle","danger","Copy Error")})},Ne=n.filter(N=>{var x;return((x=N.type)==null?void 0:x.toString())===Qe.WEAPON.toString()}),ue=n.filter(N=>{var x;return((x=N.type)==null?void 0:x.toString())===Qe.GENERIC.toString()}),ie=N=>l("li",{className:`list-group-item ${O===N.id?"quantity-flash":""}`,children:[l("div",{className:"d-flex justify-content-between align-items-center",children:[l("div",{className:"d-flex align-items-center overflow-hidden",style:{flex:"1 1 0"},onClick:()=>B(N.id),children:[l("span",{className:"me-2",children:st(N.element)}),l("div",{className:"text-truncate",children:[l("span",{className:"arsenal me-2",children:N.name}),l("span",{className:"action-label hide-on-small me-2",children:F(N.actions)})]})]}),l("div",{className:"d-flex align-items-center justify-content-center",style:{gap:"0.5rem"},children:["                    ",l("i",{className:"fas fa-edit text-primary",onClick:x=>{x.stopPropagation(),M(N)},style:{cursor:"pointer",transition:"opacity 0.3s",opacity:.6,flexShrink:0},onMouseOver:x=>{x.stopPropagation(),x.currentTarget.style.opacity="1"},onMouseOut:x=>{x.stopPropagation(),x.currentTarget.style.opacity="0.6"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Edit Weapon"}),l("div",{className:"btn-group d-flex justify-content-center",children:[l("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>Z(N,0),"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Roll base attack",children:[l("i",{className:"fas fa-dice-d20 me-1"}),l("span",{className:"ms-1 text-truncate",children:Qt(Ne,N.dice,t,!0)})]}),"                        ",N.additionalAttacks.map((x,K)=>l("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>Z(N,K+1),"data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Roll attack #${K+2} (${x.penalty<0?x.penalty:`+${x.penalty}`})`,children:["#",K+2," (",x.penalty<0?x.penalty:`+${x.penalty}`,")"]},K))]})]})]}),a===N.id&&l("div",{className:"ability-details mt-2",children:["                    ",l("div",{className:"d-flex flex-wrap mb-2 justify-content-center gap-1",children:[N.element&&l("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`${N.element} damage type`,children:[st(N.element)," ",N.element]}),l("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Takes ${N.actions} action${N.actions!==1?"s":""} to use`,children:[F(N.actions)," ",N.actions===4?"Reaction":`${N.actions} Action${N.actions!==1?"s":""}`]}),N.additionalAttacks&&N.additionalAttacks.length>0&&l("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Can make ${N.additionalAttacks.length+1} attacks in total`,children:[l("i",{className:"fas fa-crosshairs"})," ",N.additionalAttacks.length+1," Attacks"]})]}),N.description&&l("div",{children:[l("p",{className:"py-1 border-bottom h6 arsenal text-center",children:"Description"}),l("p",{className:"mb-2",children:N.description})]})]})]},N.id),ae=N=>l("li",{className:`list-group-item ${O===N.id?"quantity-flash":""}`,children:[l("div",{className:"d-flex justify-content-between align-items-center",children:[l("div",{className:"d-flex align-items-center overflow-hidden",style:{flex:"1 1 0"},onClick:()=>B(N.id),children:[l("span",{className:"me-2",children:st(N.element)}),l("div",{className:"text-truncate",children:[l("span",{className:"arsenal me-2",children:N.name}),l("span",{className:"action-label hide-on-small me-2",children:F(N.actions)})]})]}),l("div",{className:"d-flex align-items-center",style:{gap:"0.5rem"},children:[l("i",{className:"fas fa-edit text-primary",onClick:x=>{x.stopPropagation(),M(N)},style:{cursor:"pointer",transition:"opacity 0.3s",opacity:.6,flexShrink:0},onMouseOver:x=>{x.stopPropagation(),x.currentTarget.style.opacity="1"},onMouseOut:x=>{x.stopPropagation(),x.currentTarget.style.opacity="0.6"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Edit Ability"}),N.dice&&l("button",{className:"btn btn-sm btn-outline-danger",onClick:x=>{x.stopPropagation(),Y(N)},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Roll this ability",children:[l("i",{className:"fas fa-dice-d20 me-1"}),l("span",{className:"text-truncate",children:N.dice})]})]})]}),a===N.id&&l("div",{className:"ability-details mt-2",children:["                    ",l("div",{className:"d-flex flex-wrap mb-2 justify-content-center gap-1",children:[l("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Takes ${N.actions} action${N.actions!==1?"s":""} to use`,children:[F(N.actions)," ",N.actions===4?"Reaction":`${N.actions} Action${N.actions!==1?"s":""}`]}),N.element&&l("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`${N.element} element type`,children:[st(N.element)," ",N.element]}),N.dice&&l("span",{className:"badge bg-dark border","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Dice formula for this ability",children:[l("i",{className:"fas fa-dice-d20"})," ",N.dice]})]}),N.description&&l("div",{children:[l("p",{className:"py-1 border-bottom h6 arsenal",children:"Description"}),l("p",{className:"mb-0",children:N.description})]})]})]},N.id);return l("div",{className:"abilities-list-container",children:[l(Vt,{title:"ABILITIES & ATTACKS"}),l("div",{className:"d-flex flex-column justify-content-between align-items-center mb-4",children:l("button",{className:"dark-btn dark-btn-primary mt-2 mt-md-0",onClick:()=>M(),style:{width:"160px",height:"60px"},"data-bs-toggle":"tooltip","data-bs-placement":"bottom",title:"Create a new ability or weapon",children:[l("i",{className:"fas fa-plus me-2"})," ",l("span",{children:"Add Ability"})]})}),l("div",{className:"row",children:[l("div",{className:"col-12 col-md-6 mb-3",children:l("div",{className:"card",children:[l("div",{className:"card-header",children:l("h5",{className:"arsenal m-0",children:"Attacks"})}),l("div",{className:"card-body p-0",children:Ne.length>0?l("ul",{className:"list-group list-group-flush",children:Ne.map(N=>ie(N))}):l("div",{className:"text-center p-4",children:l("p",{className:"arsenal mb-0",children:'No weapons found. Click "Add Ability" to create one.'})})})]})}),l("div",{className:"col-12 col-md-6 mb-3",children:l("div",{className:"card",children:[l("div",{className:"card-header",children:l("h5",{className:"arsenal m-0",children:"Generic Abilities"})}),l("div",{className:"card-body p-0",children:ue.length>0?l("ul",{className:"list-group list-group-flush",children:ue.map(N=>ae(N))}):l("div",{className:"text-center p-4",children:l("p",{className:"arsenal mb-0",children:'No abilities found. Click "Add Ability" to create one.'})})})]})})]}),l(sf,{isModalOpen:p,closeModal:U,abilityBeingEdited:s,currentAbility:c,setCurrentAbility:u,getActionLabel:F,validateDiceRoll:X,diceError:A,saveAbility:P,removeAbility:V}),l(rf,{abilityToDelete:_,confirmDelete:Q,setAbilityToDelete:E})]})};function of(){return l("div",{className:"abilities-page container-fluid",children:l(af,{})})}function lf(){return l(ko,{children:l(xo,{children:l(tf,{children:l(Cn,{children:l("div",{className:"d-flex flex-column min-vh-100",children:[l(Jh,{}),l("main",{className:"flex-grow-1",children:l(aa,{children:[l(Wn,{path:_n,component:jh}),l(Wn,{path:`${_n}spells`,component:Gh}),l(Wn,{path:`${_n}abilities`,component:of}),l(Wn,{default:!0,component:No})]})}),l(ef,{buildDate:"2025-05-21T19:12:53.229Z"})]})})})})})}yo(l(lf,{}),document.getElementById("app"));
